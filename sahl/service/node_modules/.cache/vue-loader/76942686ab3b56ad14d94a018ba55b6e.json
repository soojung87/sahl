{"remainingRequest":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\source\\service\\src\\components\\mainview.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\source\\service\\src\\components\\mainview.vue","mtime":1629946252465},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2VydmljZUludGVyZmFjZSBmcm9tICcuL3NlcnZpY2VJbnRlcmZhY2UudnVlJzsNCi8vaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9tYWluJw0KLy9pbXBvcnQgTGVhZGVyTGluZSBmcm9tICdsZWFkZXItbGluZS12dWUnDQoNCg0KZXhwb3J0IGRlZmF1bHR7DQogICAgY29tcG9uZW50czp7U2VydmljZUludGVyZmFjZSB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIExTT1BQcm9qZWN0ICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5MU09QUHJvamVjdA0KICAgICAgICB9LA0KICAgICAgICBvcGVuUHJvamVjdEluZGV4ICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5vcGVuUHJvamVjdEluZGV4DQogICAgICAgIH0sDQogICAgICAgIGRyYWdnaW5nRWxlbWVudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCEgdGhpcy5kcmFnZ2luZ0lkKSByZXR1cm47DQoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IHRoaXMuZHJhZ2dpbmdJZCk7DQogICAgICAgIH0NCg0KICAgIH0sDQogICAgZGF0YSAoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBkcmFnZ2luZ0lkOiBudWxsLA0KICAgICAgICAgICAgcHJldk9mZnNldFg6IDAsDQogICAgICAgICAgICBwcmV2T2Zmc2V0WTogMCwNCiAgICAgICAgICAgIGlzTW91c2VEb3duOiBmYWxzZSwNCiAgICAgICAgICAgIGVsOiBudWxsLA0KICAgICAgICAgICAgY3Vyc29yUG9zOiBbMCwgMF0sDQogICAgICAgICAgICBpc01vdXNlRGlhZ3JhbTogZmFsc2UsIC8vIG1vdXNl6rCAIGRpYWdyYW3snITsl5Ag7J6I7Jy866m0IO2ZlOuptOydtCDsm4Dsp4HsnbTrqbQg7JWI65CY64uIIOyEpOyglQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkICgpIHsNCiAgICAgICAgLy8gRXZlbnRCdXMuJG9uKCduZXctZWxlbWVudCcsIChlbGVtZW50LCBpc2FkZG5ldykgPT4geyAvLyBhZGQgbmV3IGVsZW1lbnQNCiAgICAgICAgLy8gICAgIGlmIChlbGVtZW50ID09ICdTZXJ2aWNlSW50ZXJmYWNlJykgew0KICAgICAgICAvLyAgICAgICAgIHRoaXMubmV3U2VydmljZUludGVyZmFjZSA9IGlzYWRkbmV3DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vIH0pDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIG9uTW91c2VEb3duIChldikgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3VzZURpYWdyYW0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSBbZXYucGFnZVgsIGV2LnBhZ2VZXTsNCiAgICAgICAgICAgIHRoaXMuaXNNb3VzZURvd24gPSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBvbk1vdXNlVXAgKCkgew0KICAgICAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICBvbk1vdXNlTW92ZSAoZXYpIHsNCiAgICAgICAgICAgIGlmKCF0aGlzLmlzTW91c2VEb3duKSByZXR1cm4NCg0KICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsNCg0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IFsNCiAgICAgICAgICAgICAgICBldi5wYWdlWCAtIHRoaXMuY3Vyc29yUG9zWzBdLA0KICAgICAgICAgICAgICAgIGV2LnBhZ2VZIC0gdGhpcy5jdXJzb3JQb3NbMV0sDQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSBbZXYucGFnZVgsIGV2LnBhZ2VZXTsNCiAgICAgICAgICAgIHRoaXMubW92ZWxpbmUoKQ0KICAgICAgICAgICAgaWYgKCF0aGlzLiRyZWZzLmVsKSByZXR1cm47DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5lbC5zY3JvbGxCeSh7DQogICAgICAgICAgICAgICAgICAgIGxlZnQ6IC1kZWx0YVswXSwNCiAgICAgICAgICAgICAgICAgICAgdG9wOiAtZGVsdGFbMV0sDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICB9LA0KICAgICAgICBkcmFnZ2luZyhpZCwgbGVmdCwgdG9wKSB7DQogICAgICAgICAgICB0aGlzLmRyYWdnaW5nSWQgPSBpZDsNCiAgICAgICAgICAgIHRoaXMubW92ZWxpbmUoKQ0KDQogICAgICAgICAgICBpZiAoISB0aGlzLnN5bmMpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IGxlZnQgLSB0aGlzLmRyYWdnaW5nRWxlbWVudC54Ow0KICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IHRvcCAtIHRoaXMuZHJhZ2dpbmdFbGVtZW50Lnk7DQoNCiAgICAgICAgICAgIGNvbnN0IGRlbHRhWCA9IHRoaXMuZGVsdGFYKG9mZnNldFgpOw0KICAgICAgICAgICAgY29uc3QgZGVsdGFZID0gdGhpcy5kZWx0YVkob2Zmc2V0WSk7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcChlbCA9PiB7IC8v67Cw7Je0IOuCtOydmCDrqqjrk6Ag7JqU7IaMIOqwgeqwgeyXkCDrjIDtlZjsl6wg7KO87Ja07KeEIO2VqOyImOulvCDtmLjstpztlZwg6rKw6rO866W8IOuqqOyVhCDsg4jroZzsmrQg67Cw7Je07J2EIOuwmO2ZmA0KICAgICAgICAgICAgICAgIGlmIChlbC5pZCAhPT0gaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZWwueCArPSBkZWx0YVg7DQogICAgICAgICAgICAgICAgICAgIGVsLnkgKz0gZGVsdGFZOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZWw7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBkcmFnc3RvcChpZCwgbGVmdCwgdG9wKSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcChlbCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGVsLmlkID09PSBpZCkgew0KICAgICAgICAgICAgICAgICAgICBlbC54ID0gbGVmdDsNCiAgICAgICAgICAgICAgICAgICAgZWwueSA9IHRvcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGVsOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdJZCA9IG51bGw7DQogICAgICAgICAgICB0aGlzLnByZXZPZmZzZXRYID0gMDsNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFkgPSAwOw0KICAgICAgICB9LA0KICAgICAgICBkZWx0YVgob2Zmc2V0WCkgew0KICAgICAgICAgICAgY29uc3QgcmV0ID0gb2Zmc2V0WCAtIHRoaXMucHJldk9mZnNldFg7DQoNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFggPSBvZmZzZXRYOw0KDQogICAgICAgICAgICByZXR1cm4gcmV0Ow0KICAgICAgICB9LA0KICAgICAgICBkZWx0YVkob2Zmc2V0WSkgew0KICAgICAgICAgICAgY29uc3QgcmV0ID0gb2Zmc2V0WSAtIHRoaXMucHJldk9mZnNldFk7DQoNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFkgPSBvZmZzZXRZOw0KDQogICAgICAgICAgICByZXR1cm4gcmV0Ow0KICAgICAgICB9LA0KICAgICAgICBvbkFjdGl2YXRlZCAoKSB7DQogICAgICAgICAgICAvL2FsZXJ0KCdvbkFjdGl2YXRlZCcgKyBpZCkNCiAgICAgICAgICAgIHRoaXMuaXNNb3VzZURpYWdyYW0gPSB0cnVlDQogICAgICAgIH0sDQogICAgICAgIG9uRGVhY3RpdmF0ZWQgKCkgew0KICAgICAgICAgICAgLy9hbGVydCgnb25EZWFjdGl2YXRlZCcgKyBpZCkNCg0KICAgICAgICAgICAgIHRoaXMuaXNNb3VzZURpYWdyYW0gPSBmYWxzZQ0KICAgICAgICB9LA0KICAgIH0sDQp9DQo="},{"version":3,"sources":["mainview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"mainview.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id=\"main-view\">\r\n        <v-app > \r\n            <vue-draggable-resizable\r\n                class-name-active=\"my-active-class\"\r\n                class-name=\"basic-form\"\r\n                v-for=\"element in LSOPProject[openProjectIndex].Service.ServiceInterface\"\r\n                :key=\"element.uuid\"\r\n                x=500 y=10 w=400 h=500 z=1\r\n                :resizable=\"true\" :draggable=\"true\"\r\n                @activated=\"onActivated()\" @deactivated=\"onDeactivated()\"\r\n                @dragging=\"(left, top) => dragging(element.id, left, top)\"\r\n                @dragstop=\"(left, top) => dragstop(element.id, left, top)\" >\r\n                <!-- <ServiceInterface :initialFormat=\"true\"/> -->\r\n                <ServiceInterface :element='element' /> <!--넘겨줄때 uuid값도 같이 넘겨주자-->\r\n            </vue-draggable-resizable>\r\n        </v-app>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport ServiceInterface from './serviceInterface.vue';\r\n//import { EventBus } from '../main'\r\n//import LeaderLine from 'leader-line-vue'\r\n\r\n\r\nexport default{\r\n    components:{ServiceInterface },\r\n    computed: {\r\n        LSOPProject () {\r\n            return this.$store.state.LSOPProject\r\n        },\r\n        openProjectIndex () {\r\n            return this.$store.state.openProjectIndex\r\n        },\r\n        draggingElement: function () {\r\n            if (! this.draggingId) return;\r\n\r\n            return this.elements.find(el => el.id === this.draggingId);\r\n        }\r\n\r\n    },\r\n    data () {\r\n        return {\r\n            draggingId: null,\r\n            prevOffsetX: 0,\r\n            prevOffsetY: 0,\r\n            isMouseDown: false,\r\n            el: null,\r\n            cursorPos: [0, 0],\r\n            isMouseDiagram: false, // mouse가 diagram위에 있으면 화면이 움직이면 안되니 설정\r\n        }\r\n    },\r\n    mounted () {\r\n        // EventBus.$on('new-element', (element, isaddnew) => { // add new element\r\n        //     if (element == 'ServiceInterface') {\r\n        //         this.newServiceInterface = isaddnew\r\n        //     }\r\n        // })\r\n    },\r\n    methods: {\r\n        onMouseDown (ev) {\r\n            if (this.isMouseDiagram) {\r\n                return\r\n            }\r\n            \r\n            this.cursorPos = [ev.pageX, ev.pageY];\r\n            this.isMouseDown = true;\r\n        },\r\n        onMouseUp () {\r\n            this.isMouseDown = false;\r\n        },\r\n        onMouseMove (ev) {\r\n            if(!this.isMouseDown) return\r\n\r\n            ev.preventDefault();\r\n\r\n            requestAnimationFrame(() => {\r\n                const delta = [\r\n                ev.pageX - this.cursorPos[0],\r\n                ev.pageY - this.cursorPos[1],\r\n                ];\r\n\r\n            this.cursorPos = [ev.pageX, ev.pageY];\r\n            this.moveline()\r\n            if (!this.$refs.el) return;\r\n                this.$refs.el.scrollBy({\r\n                    left: -delta[0],\r\n                    top: -delta[1],\r\n                });\r\n            });\r\n       },\r\n        dragging(id, left, top) {\r\n            this.draggingId = id;\r\n            this.moveline()\r\n\r\n            if (! this.sync) return;\r\n\r\n            const offsetX = left - this.draggingElement.x;\r\n            const offsetY = top - this.draggingElement.y;\r\n\r\n            const deltaX = this.deltaX(offsetX);\r\n            const deltaY = this.deltaY(offsetY);\r\n            this.elements.map(el => { //배열 내의 모든 요소 각각에 대하여 주어진 함수를 호출한 결과를 모아 새로운 배열을 반환\r\n                if (el.id !== id) {\r\n                    el.x += deltaX;\r\n                    el.y += deltaY;\r\n                }\r\n                return el;\r\n            });\r\n            \r\n        },\r\n        dragstop(id, left, top) {\r\n            this.elements.map(el => {\r\n                if (el.id === id) {\r\n                    el.x = left;\r\n                    el.y = top;\r\n                }\r\n                return el;\r\n            });\r\n\r\n            this.draggingId = null;\r\n            this.prevOffsetX = 0;\r\n            this.prevOffsetY = 0;\r\n        },\r\n        deltaX(offsetX) {\r\n            const ret = offsetX - this.prevOffsetX;\r\n\r\n            this.prevOffsetX = offsetX;\r\n\r\n            return ret;\r\n        },\r\n        deltaY(offsetY) {\r\n            const ret = offsetY - this.prevOffsetY;\r\n\r\n            this.prevOffsetY = offsetY;\r\n\r\n            return ret;\r\n        },\r\n        onActivated () {\r\n            //alert('onActivated' + id)\r\n            this.isMouseDiagram = true\r\n        },\r\n        onDeactivated () {\r\n            //alert('onDeactivated' + id)\r\n\r\n             this.isMouseDiagram = false\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n#main-view {\r\n    white-space: nowrap;\r\n    overflow: scroll;\r\n    height: 770px;\r\n}\r\n\r\n.basic-form {\r\n    cursor: pointer;\r\n    position: absolute; /* 이게 없으면 component들이  x 좌표에 같이 있질 못함  h만큼 떨어져서 배치됨*/\r\n}\r\n.virtual-diagram{\r\n    opacity: 0.7;\r\n}\r\n\r\n#main-view::-webkit-scrollbar {\r\n  width: 6px;\r\n  height: 6px;\r\n}\r\n#main-view::-webkit-scrollbar-track {\r\n  background-color: transparent;\r\n}\r\n#main-view::-webkit-scrollbar-thumb {\r\n  border-radius: 3px;\r\n  background-color: gray;\r\n}\r\n#main-view::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\ndiv /* 텍스트를 마우스로 드래그하는 것을 방지하는 CSS */\r\n{\r\n  -ms-user-select: none;  /*익스플로러 */\r\n  -moz-user-select: none; /*파이어폭스 */\r\n  -khtml-user-select: none; /**/\r\n  -webkit-user-select: none; /*크롬, 사파리 */\r\n  user-select: none;\r\n} \r\n\r\n</style>"]}]}