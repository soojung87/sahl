{"remainingRequest":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\source\\service\\src\\components\\SWComponents.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\source\\service\\src\\components\\SWComponents.vue","mtime":1657688464836},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY29uc3RhbnQgZnJvbSAiLi4vc3RvcmUvY29uc3RhbnRzLmpzIg0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICIuLi9tYWluLmpzIg0KaW1wb3J0IGRpYWxvZ1BhdGhTZXR0aW5nIGZyb20gJy4uL2NvbXBvbmVudHMvZGlhbG9nUGF0aFNldHRpbmcudnVlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZWxlbWVudCcsICdpc0RhdGFpbFZpZXcnLCAnbWluaW1hcHRvb2xiYXInLCAnbG9jYXRpb24nXSwNCiAgICBjb21wb25lbnRzOntkaWFsb2dQYXRoU2V0dGluZ30sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgYWN0aXZlVVVJRCgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEDQogICAgICAgIH0sDQogICAgICAgIGRldGFpbFZpZXdVVUlEKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmRldGFpbFZpZXdVVUlEDQogICAgICAgIH0sDQogICAgICAgIHNldHRpbmcoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZw0KICAgICAgICB9LA0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgYWN0aXZlVVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yKHZhbCkNCiAgICAgICAgfSwNCiAgICAgICAgZGV0YWlsVmlld1VVSUQodmFsKSB7DQogICAgICAgICAgICB0aGlzLnNldFRvb2xiYXJDb2xvckRldGFpbFZpZXcodmFsKQ0KICAgICAgICB9LA0KICAgICAgICBzZXR0aW5nKHZhbHVlKSB7DQogICAgICAgICAgICB0aGlzLnpvb212YWx1ZSA9IHZhbHVlLnpvb21NYWluDQogICAgICAgICAgICBpZiAodGhpcy56b29tdmFsdWUgPCB0aGlzLiRzZXRab29taW5Ub29sdGlwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc1Rvb2x0aXAgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzVG9vbHRpcCA9IHRoaXMubWluaW1hcHRvb2xiYXINCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVVVSUQpDQogICAgfSwNCg0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIG5hbWU6ICBbdmFsID0+ICh2YWwgfHwgJycpLmxlbmd0aCA+IDAgXSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBkaWFsb2dQYXRoIDogZmFsc2UsDQogICAgICAgICAgICBjb2xvclRvb2xiYXI6ICIjNkE1QUNEIiwNCiAgICAgICAgICAgIHpvb212YWx1ZTogdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZy56b29tTWFpbiwNCiAgICAgICAgICAgIGlzVG9vbHRpcDogdGhpcy5taW5pbWFwdG9vbGJhciwNCiAgICAgICAgICAgIGlzZWxlbWVudE9wZW5DbG9zZTogdGhpcy5taW5pbWFwdG9vbGJhciwgLy90b29sYmFy66eMIOuztOyXrOykhOqyg+ydtOuDkCDslYTri4jrg5Ag7ISk7KCVIHRydWU6IOyghOyytCDri6Qg67O07Jes7KSMIC8gZmFsc2UgOiB0b29sYmFy66eMIOuztOyXrOykjA0KICAgICAgICAgICAgaXNQUG9ydE9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzUFJQb3J0T3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNSUG9ydE9wZW5DbG9zZTogdHJ1ZSwNCg0KICAgICAgICAgICAgc2VsU0lFdmVudDogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRWYXJpYWJsZURhdGFQcm90b3R5cGUsDQogICAgICAgICAgICBzZWxTSUZpZWxkOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkLA0KICAgICAgICAgICAgc2VsZWN0UEludGVyZmFjZUxpc3Q6IFsnU0VSVklDRS1JTlRFUkZBQ0UnLCdQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSddLA0KICAgICAgICAgICAgc2VsZWN0U2VuZGVyQ2FwYTogWydXSUxMLVNFTkQnLCAnV09OVC1TRU5EJ10sDQogICAgICAgICAgICBzZWxQSW50ZXJmYWNlOiBudWxsLA0KICAgICAgICAgICAgUHBvcnRUYWI6IG51bGwsDQogICAgICAgICAgICBpc1BRU0NPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVBRU0M6IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0UFFTQzogW10sDQogICAgICAgICAgICBoZWFkZXJQUVNDOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnRGF0YSBFbGVtZW50IFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdkYXRhRScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdTZW5kZXIgQ2FwYWJpbGl0eScsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdzZW5kZXJDYXBhJyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRQUVNDOiB7IGRhdGFFOiBudWxsLCBzZW5kZXJDYXBhOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdQUVNDOiB0cnVlLA0KICAgICAgICAgICAgaXNQRlNDT3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVQRlNDOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdFBGU0M6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUEZTQzogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0RhdGEgRWxlbWVudCBSZWYnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnZGF0YUUnIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnU2VuZGVyIENhcGFiaWxpdHknLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnc2VuZGVyQ2FwYScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0UEZTQzogeyBkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgaXNFZGl0aW5nUEZTQzogdHJ1ZSwNCg0KICAgICAgICAgICAgUFJwb3J0VGFiOiBudWxsLA0KICAgICAgICAgICAgaXNQUlByb3ZpZGVPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVBSUHJvdmlkZTogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RQUlByb3ZpZGU6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUFJQcm92aWRlOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnRGF0YSBFbGVtZW50IFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdkYXRhRScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0UFJQcm92aWRlOiB7IGRhdGFFOiBudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgaXNFZGl0aW5nUFJQcm92aWRlOiB0cnVlLA0KICAgICAgICAgICAgc2VsUGVyRGF0YTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJLZXlWYWx1ZURJRGF0YSwNCiAgICAgICAgICAgIHNlbGVjdFBSSW50ZXJmYWNlTGlzdDogWydTRVJWSUNFLUlOVEVSRkFDRScsJ1BFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFJywgJ1BFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UnXSwNCiAgICAgICAgICAgIHNlbFBSSW50ZXJmYWNlOiBudWxsLA0KDQogICAgICAgICAgICBScG9ydFRhYjogbnVsbCwNCiAgICAgICAgICAgIHNlbGVjdFJJbnRlcmZhY2VMaXN0OiBbJ1NFUlZJQ0UtSU5URVJGQUNFJywnUEhNLUhFQUxUSC1DSEFOTkVMLUlOVEVSRkFDRScsICdQSE0tU1VQRVJWSVNFRC1FTlRJVFktSU5URVJGQUNFJ10sDQogICAgICAgICAgICBzZWxSSW50ZXJmYWNlOiBudWxsLA0KICAgICAgICAgICAgaXNSUVJDT3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVSUVJDOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdFJRUkM6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUlFSQzogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0RhdGEgRWxlbWVudCBSZWYnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnZGF0YUUnIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnUmVjZWl2ZXIgQ2FwYWJpbGl0eScsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdyZWNlaXZlQ2FwYScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBzZWxlY3RSUVJDOiBbJ1ZBUklBQkxFLURBVEEtUFJPVE9UWVBFJywnRklFTEQnXSwNCiAgICAgICAgICAgIHNlbGVjdFJlY2VpdmVyQ2FwYTogWydXSUxMLVJFQ0VJVkUnLCAnV09OVC1SRUNFSVZFJ10sDQogICAgICAgICAgICBzZWxlY3RDbGllbnRDYXBhOiBbJ1dJTEwtQ0FMTCcsICdXT05ULUNBTEwnXSwNCiAgICAgICAgICAgIGVkaXRSUVJDOiB7IHNlbGVjdDogbnVsbCwgZGF0YUU6IG51bGwsIHJlY2VpdmVDYXBhOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdSUVJDOiB0cnVlLA0KICAgICAgICAgICAgaXNSQ0NPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVJDQzogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RSQ0M6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUkNDOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnT3BlcmF0aW9uIFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdvcGVyYXRpb24nIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnQ2xpZW50IENhcGFiaWxpdHknLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnY2xpZW50Q2FwYScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0UkNDOiB7IG9wZXJhdGlvbjogbnVsbCwgY2xpZW50Q2FwYTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgaXNFZGl0aW5nUkNDOiB0cnVlLA0KICAgICAgICAgICAgc2VsU0lRUkM6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlLA0KICAgICAgICAgICAgc2VsU0lNZXRob2Q6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2xpZW50U2VydmVyLA0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkICgpIHsNCiAgICAgICAgaWYgKHRoaXMubWluaW1hcHRvb2xiYXIgJiYgdGhpcy56b29tdmFsdWUgPCB0aGlzLiRzZXRab29taW5FbGVtZW50KSB7DQogICAgICAgICAgICB0aGlzLmlzVG9vbHRpcCA9IGZhbHNlDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgc3VibWl0RGlhbG9nKGVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXRoID0gZWxlbWVudA0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnaXNpbnRvRXJyb3JMaXN0Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lbGVtZW50Lm5hbWUsIHBhdGg6dGhpcy5lbGVtZW50LnBhdGh9KQ0KICAgICAgICB9LA0KICAgICAgICBzZXRUb29sYmFyQ29sb3IoYWN0aXZlaWQpIA0KICAgICAgICB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQudXVpZCA9PSBhY3RpdmVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiNGRjE0OTMiIA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciA9ICIjNkE1QUNEIg0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRUb29sYmFyQ29sb3JEZXRhaWxWaWV3KGlzZGV0YWlsKSB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQudXVpZCA9PSBpc2RldGFpbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiNCMEUwRTYiIA0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQudXVpZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgID0gIiNGRjE0OTMiDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiM2QTVBQ0QiDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNob3dTV0NvbXBvbmVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlID0gdGhpcy5pc2VsZW1lbnRPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmVUaXRsZUJhcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkNCiAgICAgICAgICAgICAgICBpZih0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucHBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5QcG9ydFRhYiwgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnBycG9ydC5sZW5ndGggPiAwICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUFJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5ScG9ydFRhYiwgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBzaG93UFBvcnQoKSB7DQogICAgICAgICAgICB0aGlzLmlzUFBvcnRPcGVuQ2xvc2UgPSB0aGlzLmlzUFBvcnRPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5wcG9ydC5sZW5ndGggPiAwICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BQb3J0T3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUHBvcnRUYWIsIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNob3dQUVNDKCkgew0KICAgICAgICAgICAgdGhpcy5pc1BRU0NPcGVuQ2xvc2UgPSB0aGlzLmlzUFFTQ09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1BGU0MoKSB7DQogICAgICAgICAgICB0aGlzLmlzUEZTQ09wZW5DbG9zZSA9IHRoaXMuaXNQRlNDT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBzaG93UFJQb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5pc1BSUG9ydE9wZW5DbG9zZSA9IHRoaXMuaXNQUlBvcnRPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQUlBvcnRPcGVuQ2xvc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUFJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0sDQogICAgICAgIHNob3dQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICB0aGlzLmlzUFJQcm92aWRlT3BlbkNsb3NlID0gdGhpcy5pc1BSUHJvdmlkZU9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1JQb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5pc1JQb3J0T3BlbkNsb3NlID0gdGhpcy5pc1JQb3J0T3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0sDQogICAgICAgIHNob3dSUVJDKCkgew0KICAgICAgICAgICAgdGhpcy5pc1JRUkNPcGVuQ2xvc2UgPSB0aGlzLmlzUlFSQ09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1JDQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNSQ0NPcGVuQ2xvc2UgPSB0aGlzLmlzUkNDT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dFNXQ29tcG9uZW50TmFtZSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoiTmFtZSIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lbGVtZW50Lm5hbWV9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSApDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2lzaW50b0Vycm9yTGlzdCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWxlbWVudC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgaW5wdXRQcG9ydE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3BQb3J0JywgbGlzdG5hbWU6IG5hbWV9ICkNCiAgICAgICAgfSwgDQogICAgICAgIGlucHV0UFJwb3J0TmFtZShuYW1lKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAncHJQb3J0JywgbGlzdG5hbWU6IG5hbWV9ICkNCiAgICAgICAgfSwNCiAgICAgICAgaW5wdXRScG9ydE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3JQb3J0JywgbGlzdG5hbWU6IG5hbWV9ICkNCiAgICAgICAgfSwgDQoNCiAgICAgICAgaW5wdXRTZWxlY3RQSW50ZXJmKCkgew0KICAgICAgICAgICAgdGhpcy5jbGVhclBJbnRlcmZhY2UoKQ0KICAgICAgICAgICAgdGhpcy5zZXRQSW50ZXJmYWNlU2VsZWN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJQSW50ZXJmYWNlKCkgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmludGVyZmFjZSA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuc2VsUEludGVyZmFjZSA9IG51bGwNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFBJbnRlcmZhY2VTZWxlY3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEhNUmVjb3ZlcnlQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5SZWNvdmVyeVZBX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQSW50ZXJmYWNlTGlzdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxQSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBJbnRlcmZhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVJlY292ZXJ5DQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEludGVyZmFjZShpdGVtKXsNCiAgICAgICAgICAgIGlmKCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaW50ZXJmYWNlICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSBpdGVtLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy/sg4jroZwg7LaU6rCA7ZW07KSA64ukDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgaXRlbS51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaW50ZXJmYWNlID0gaXRlbS5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdQSW50ZXJmYWNlKCkgew0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFggPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFkgPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3U2VydmljZUludGVyZmFjZSgpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRQSE1SZWNvdmVyeScsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEhNUmVjb3ZlcnksIGlucHV0OiBmYWxzZSwgcGF0aDogJycsDQogICAgICAgICAgICAgICAgICAgIHRvcDogZWxlbWVudFksIGxlZnQ6IGVsZW1lbnRYLCB6aW5kZXg6IDEwLCBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgcmVjb25hbWU6ICcnLCBmYWY6IG51bGwNCiAgICAgICAgICAgICAgICB9KSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5SZWNvdmVyeVZBX3N0cikNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5QSE1fc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBsYXRmb3JtX3N0cikNCg0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoyfSApDQogICAgICAgIH0sDQoNCiAgICAgICAgYWRkUHBvcnQoKSB7DQogICAgICAgICAgICBjb25zdCBlZGl0SXRlbSA9IHtuYW1lOiAnJywgc2VsZWN0STogbnVsbCwgaW50ZXJmYWNlOiBudWxsLCBxdWV1ZWQ6IFtdLCBmaWVsZDogW10sIGlkOiAnJ30NCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IG5ldyBPYmplY3QoZWRpdEl0ZW0pDQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCg0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIGFkZE9iai5uYW1lID0gJ1BQb3J0XycgKyBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnBwb3J0LnNvbWUoZWxlID0+IGVsZS5uYW1lID09PSBhZGRPYmoubmFtZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFkZE9iai5pZCA9IG4NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydC5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuUHBvcnRUYWIgPSB0aGlzLmVsZW1lbnQucHBvcnQubGVuZ3RoLTENCiAgICAgICAgICAgIHRoaXMuY2xpY2tQcG9ydHRhYigpDQogICAgICAgICAgICBpZiAodGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja1Bwb3J0dGFiKCkgew0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBRU0MgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUVNDID0gW10NCiAgICAgICAgICAgIHRoaXMuaXNkZWxldGVQRlNDID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UEZTQyA9IFtdDQogICAgICAgIH0sDQogICAgICAgIGNoYW5nZVBwb3J0VGFiKCkgew0KICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnBwb3J0Lmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7RXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlBwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpfSwgMzAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUHBvcnQoaWR4KSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3B0YWInLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IHRoaXMuZWxlbWVudC5wcG9ydFtpZHhdLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaW50ZXJmYWNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnBwb3J0W2lkeF0ucXVldWVkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZVEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFtpZHhdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYoZW5kTGluZVEgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5maWVsZC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmVGID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5maWVsZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYoZW5kTGluZUYgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uZmllbGRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0LnNwbGljZShpZHgsIDEpDQogICAgICAgICAgICB0aGlzLmNoYW5nZVBwb3J0VGFiKCkNCiAgICAgICAgfSwNCiAgICAgICAgaXNDaGVja1BRU0MoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBRU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVQUVNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBRU0MgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFFTQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUFFTQygpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlUFFTQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUVNDLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZC5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3REZWxlY3RQUVNDLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFFTQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUVNDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5QUVNDKGlkeCkgeyANCiAgICAgICAgICAgIHRoaXMuc2VsU0lFdmVudCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlDQoNCiAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSwgMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0UFFTQy5kYXRhRSA9IHsgbmFtZTogdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFLCB1dWlkOiBlbmRMaW5lfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UFFTQy5zZW5kZXJDYXBhID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLnNlbmRlckNhcGENCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFBRU0NJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBRU0MuZGF0YUUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCkgew0KICAgICAgICAgICAgICAgIC8v6riw7KG06rq8IOyCreygnO2VtOyVvO2VnOuLpCB2dWV47JeQ7ISc64+EIOyCreygnO2VmOqzoCBtYWludmlld+yXkOyEnOuPhCDsgq3soJztlZjqs6AgDQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UFFTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRQUVNDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5zZW5kZXJDYXBhID0gdGhpcy5lZGl0UFFTQy5zZW5kZXJDYXBhDQogICAgICAgICAgICB0aGlzLmNhbmNlbFBRU0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxQUVNDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UFFTQyA9IHtkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFBRU0MoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UFFTQy5pZCA9IG4NCg0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrbisnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0UFFTQy5kYXRhRSA9IHRoaXMuZWRpdFBRU0MuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRQUVNDKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZC5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLmNhbmNlbFBRU0MoKQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUVNDU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nUFFTQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkLCBlbGVtZW50OiBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cn0gKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFBRU0NMaXN0KCkNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1BRU0MgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1BRU0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFBRU0NMaXN0KCkgew0KICAgICAgICAgICAgdGhpcy5zZWxTSUV2ZW50ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRWYXJpYWJsZURhdGFQcm90b3R5cGUNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUFFTQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUFFTQyA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFBRU0MuZGF0YUUgPSBudWxsDQogICAgICAgIH0sDQogICAgICAgIGlzQ2hlY2tQRlNDKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVQRlNDID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUEZTQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQRlNDID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBGU0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVBGU0MoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBGU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UEZTQy5mb3JFYWNoKCBpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpXS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0UEZTQy5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUEZTQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQRlNDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5QRlNDKGlkeCkgeyANCiAgICAgICAgICAgIHRoaXMuc2VsU0lGaWVsZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RmllbGQNCg0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFLCAyKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQRlNDLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5kYXRhRSwgdXVpZDogZW5kTGluZX0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFBGU0Muc2VuZGVyQ2FwYSA9IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLnNlbmRlckNhcGENCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFBGU0NJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UEZTQy5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCkgew0KICAgICAgICAgICAgICAgIC8v6riw7KG06rq8IOyCreygnO2VtOyVvO2VnOuLpCB2dWV47JeQ7ISc64+EIOyCreygnO2VmOqzoCBtYWludmlld+yXkOyEnOuPhCDsgq3soJztlZjqs6AgDQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UEZTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBGU0MuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UEZTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5zZW5kZXJDYXBhID0gdGhpcy5lZGl0UEZTQy5zZW5kZXJDYXBhDQogICAgICAgICAgICB0aGlzLmNhbmNlbFBGU0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxQRlNDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UEZTQyA9IHtkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFBGU0MoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRQRlNDLmlkID0gbg0KDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0UEZTQy5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJytuKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQRlNDLmRhdGFFID0gdGhpcy5lZGl0UEZTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFBGU0MpDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5jYW5jZWxQRlNDKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEZTQ1NlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ1BGU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRQRlNDLmRhdGFFICE9IG51bGwgJiYgdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRQRlNDTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQRlNDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQRlNDID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQRlNDTGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsU0lGaWVsZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RmllbGQNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUEZTQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUEZTQyA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFBGU0MuZGF0YUUgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgaW5wdXRTZWxlY3RQUkludGVyZigpIHsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJQUkludGVyZmFjZSgpDQogICAgICAgICAgICB0aGlzLnNldFBSSW50ZXJmYWNlU2VsZWN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJQUkludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmludGVyZmFjZSA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuc2VsUFJJbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUkludGVyZmFjZVNlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmludGVyZmFjZSkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJQRVJTSVNURU5DWS1GSUxFLVBST1hZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUkZpbGVQcm94eVBhdGgodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaW50ZXJmYWNlKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJLZXlWYWx1ZURJUGF0aCh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogZW5kTGluZSwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJQRVJTSVNURU5DWS1GSUxFLVBST1hZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5GaWxlUHJveHlJbnRlcmZfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5LZXlWYWx1ZURJX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUkludGVyZmFjZUxpc3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxQUkludGVyZmFjZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJQRVJTSVNURU5DWS1GSUxFLVBST1hZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJGaWxlUHJveHkNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJLZXlWYWx1ZURJDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUkludGVyZmFjZShpdGVtKXsNCiAgICAgICAgICAgIGlmKCB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IGl0ZW0udXVpZCkgew0KICAgICAgICAgICAgICAgICAgICAvL+q4sOyhtOq6vCDsgq3soJztlbTslbztlZzri6QgdnVleOyXkOyEnOuPhCDsgq3soJztlZjqs6AgbWFpbnZpZXfsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL+yDiOuhnCDstpTqsIDtlbTspIDri6QNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBpdGVtLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIGl0ZW0udXVpZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaW50ZXJmYWNlID0gaXRlbS5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdQUkludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRYID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRZID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3U2VydmljZUludGVyZmFjZSgpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudFBFUkZpbGVQcm94eScsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEVSRmlsZVByb3h5LCBpbnB1dDogZmFsc2UsIHBhdGg6ICcnLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJywgbWluaXNpemU6ICcnLCByZWR1bmRhbmN5OiBudWxsLCB1cGRhdGVTOiBudWxsLCBlbmNvZGluZzogJycsIHByb3h5OiBbXSwgbWF4ZmlsZXM6ICcnDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5GaWxlUHJveHlJbnRlcmZfc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBFUl9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUGxhdGZvcm1fc3RyKQ0KDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRFbGVtZW50UEVSS2V5VmFsdWVESScsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEVSS2V5VmFsdWVESSwgaW5wdXQ6IGZhbHNlLCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdG9wOiBlbGVtZW50WSwgbGVmdDogZWxlbWVudFgsIHppbmRleDogMTAsIGljb246Im1kaS1jbGlwYm9hcmQtb3V0bGluZSIsIHZhbGlkYXRpb246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBtaW5pc2l6ZTogJycsIHJlZHVuZGFuY3k6IG51bGwsIHVwZGF0ZVM6IG51bGwsIGRhdGE6IFtdLCBzZXJpYWxpemF0aW9uOiBbXQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuS2V5VmFsdWVESV9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUEVSX3N0cikNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5QbGF0Zm9ybV9zdHIpDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTV0NvbXBvbmVudHMnLCB7Y29tcG86InoiLCB1dWlkOnRoaXMuZWxlbWVudC51dWlkLCB6aW5kZXg6Mn0gKQ0KICAgICAgICB9LA0KDQogICAgICAgIGFkZFBScG9ydCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCBzZWxlY3RJOiBudWxsLCBpbnRlcmZhY2U6IG51bGwsIHByb3ZpZGU6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBuZXcgT2JqZWN0KGVkaXRJdGVtKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQoNCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBhZGRPYmoubmFtZSA9ICdQUlBvcnRfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHJwb3J0LnNvbWUoZWxlID0+IGVsZS5uYW1lID09PSBhZGRPYmoubmFtZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFkZE9iai5pZCA9IG4NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnQucHVzaChhZGRPYmopDQogICAgICAgICAgICB0aGlzLlBScG9ydFRhYiA9IHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoLTENCiAgICAgICAgICAgIHRoaXMuY2xpY2tQUnBvcnR0YWIoKQ0KICAgICAgICAgICAgaWYgKHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNsaWNrUFJwb3J0dGFiKCkgew0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBSUHJvdmlkZSA9IFtdDQogICAgICAgIH0sDQogICAgICAgIGNoYW5nZVBScG9ydFRhYigpIHsNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3BycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlBScG9ydFRhYiwgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpfSwgMzAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUFJwb3J0KGlkeCkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidwcnRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogdGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLmludGVyZmFjZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrIHRoaXMuZWxlbWVudC5wcnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0ucHJvdmlkZS5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmVDb24gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJyt0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmKGVuZExpbmVDb24gIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbaWR4XS5wcm92aWRlW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0LnNwbGljZShpZHgsIDEpDQogICAgICAgICAgICB0aGlzLmNoYW5nZVBScG9ydFRhYigpDQogICAgICAgIH0sDQogICAgICAgIGlzQ2hlY2tQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUlByb3ZpZGUgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFJQcm92aWRlID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUlByb3ZpZGUuZm9yRWFjaCggaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGUubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGUgPSB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdFBSUHJvdmlkZS5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUlByb3ZpZGUgPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlblBSUHJvdmlkZShpZHgpIHsgDQogICAgICAgICAgICB0aGlzLnNlbFBlckRhdGEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElEYXRhDQoNCiAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElQYXRoKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5kYXRhRSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVkaXRQUlByb3ZpZGVJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUgPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAvL+q4sOyhtOq6vCDsgq3soJztlbTslbztlZzri6QgdnVleOyXkOyEnOuPhCDsgq3soJztlZjqs6AgbWFpbnZpZXfsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIA0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWInK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxQUlByb3ZpZGUoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRQUlByb3ZpZGUgPSB7ZGF0YUU6IG51bGx9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UFJQcm92aWRlLmlkID0gbg0KDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJytuKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWInK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUgPSB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRQUlByb3ZpZGUpDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlLnB1c2goYWRkT2JqKTsNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUFJQcm92aWRlKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UFJQcm92aWRlU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nUFJQcm92aWRlID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFICE9IG51bGwgJiYgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQsIGVsZW1lbnQ6IGNvbnN0YW50LktleVZhbHVlRElfc3RyfSApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc2V0UFJQcm92aWRlTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQUlByb3ZpZGUgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1BSUHJvdmlkZSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0UFJQcm92aWRlTGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsUGVyRGF0YSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSS2V5VmFsdWVESURhdGENCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUFJQcm92aWRlKCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQUlByb3ZpZGUgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgaW5wdXRTZWxlY3RSSW50ZXJmKCkgew0KICAgICAgICAgICAgdGhpcy5jbGVhclJJbnRlcmZhY2UoKQ0KICAgICAgICAgICAgdGhpcy5zZXRSSW50ZXJmYWNlU2VsZWN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJSSW50ZXJmYWNlKCkgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmludGVyZmFjZSA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuc2VsUkludGVyZmFjZSA9IG51bGwNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFJJbnRlcmZhY2VTZWxlY3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1IRUFMVEgtQ0hBTk5FTC1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQSE1IZWFsdGhQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1TVVBFUlZJU0VELUVOVElUWS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQSE1TdXBlcnZpc2VkUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaW50ZXJmYWNlKQ0KICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogZW5kTGluZSwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLUhFQUxUSC1DSEFOTkVMLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5IZWFsdGhDaGFubmVsX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tU1VQRVJWSVNFRC1FTlRJVFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LlBITVN1cGVydmlzZWRfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFJJbnRlcmZhY2VMaXN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFJJbnRlcmZhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2UNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1IRUFMVEgtQ0hBTk5FTC1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQSE1IZWFsdGgNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1TVVBFUlZJU0VELUVOVElUWS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQSE1TdXBlcnZpc2VkDQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UkludGVyZmFjZShpdGVtKXsNCiAgICAgICAgICAgIGlmKCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaW50ZXJmYWNlICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSBpdGVtLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy/sg4jroZwg7LaU6rCA7ZW07KSA64ukDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgaXRlbS51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaW50ZXJmYWNlID0gaXRlbS5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdSSW50ZXJmYWNlKCkgew0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFggPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFkgPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3U2VydmljZUludGVyZmFjZSgpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tSEVBTFRILUNIQU5ORUwtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudFBITUhlYWx0aCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEhNSGVhbHRoLCBpbnB1dDogZmFsc2UsIHBhdGg6ICcnLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHN0YXR1czogW10NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LkhlYWx0aENoYW5uZWxfc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBITV9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUGxhdGZvcm1fc3RyKQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLVNVUEVSVklTRUQtRU5USVRZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRQSE1TdXBlcnZpc2VkJywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVQSE1TdXBlcnZpc2VkLCBpbnB1dDogZmFsc2UsIHBhdGg6ICcnLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnQ6IFtdDQogICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBITVN1cGVydmlzZWRfc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBITV9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUGxhdGZvcm1fc3RyKQ0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoyfSApDQogICAgICAgIH0sDQoNCiAgICAgICAgYWRkUnBvcnQoKSB7DQogICAgICAgICAgICBjb25zdCBlZGl0SXRlbSA9IHtuYW1lOiAnJywgc2VsZWN0STogbnVsbCwgaW50ZXJmYWNlOiBudWxsLCBxdWV1ZWQ6IFtdLCBjbGllbnQ6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBuZXcgT2JqZWN0KGVkaXRJdGVtKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQoNCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBhZGRPYmoubmFtZSA9ICdSUG9ydF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5ycG9ydC5zb21lKGVsZSA9PiBlbGUubmFtZSA9PT0gYWRkT2JqLm5hbWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhZGRPYmouaWQgPSBuDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnQucHVzaChhZGRPYmopDQogICAgICAgICAgICB0aGlzLlJwb3J0VGFiID0gdGhpcy5lbGVtZW50LnJwb3J0Lmxlbmd0aC0xDQogICAgICAgICAgICB0aGlzLmNsaWNrUnBvcnR0YWIoKQ0KICAgICAgICAgICAgaWYgKHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgbnVsbCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tScG9ydHRhYigpIHsNCiAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSUVJDID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UlFSQyA9IFtdDQogICAgICAgICAgICB0aGlzLmlzZGVsZXRlUkNDID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UkNDID0gW10NCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlUnBvcnRUYWIoKSB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUnBvcnRUYWIsIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCl9LCAzMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVScG9ydChpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncnRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pbnRlcmZhY2UgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5xdWV1ZWQubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lUSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lUSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5xdWV1ZWRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmNsaWVudC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmVGID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmNsaWVudFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYoZW5kTGluZUYgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0LnNwbGljZShpZHgsIDEpDQogICAgICAgICAgICB0aGlzLmNoYW5nZVJwb3J0VGFiKCkNCiAgICAgICAgfSwNCiAgICAgICAgaXNDaGVja1JRUkMoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVJRUkMgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSUVJDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFJRUkMgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUlFSQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUlFSQygpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlUlFSQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RSUVJDLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkID0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZC5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3REZWxlY3RSUVJDLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUlFSQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RSUVJDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5SUVJDKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSBudWxsDQogICAgICAgICAgICB0aGlzLmVkaXRSUVJDLnNlbGVjdCA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5zZWxlY3QNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uc2VsZWN0ID09ICJWQVJJQUJMRS1EQVRBLVBST1RPVFlQRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNJUVJDID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRWYXJpYWJsZURhdGFQcm90b3R5cGUNCg0KICAgICAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZVBhdGgodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFLCAxKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuZGF0YUUgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSwgdXVpZDogZW5kTGluZX0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5zZWxlY3QgPT0gIkZJRUxEIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsU0lRUkMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkDQoNCiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSwgMikNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSUVJDLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UlFSQy5yZWNlaXZlQ2FwYSA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5yZWNlaXZlQ2FwYQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0UlFSQ0l0ZW0oaWR4KSB7DQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UlFSQy5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkKSB7DQogICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRSUVJDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UlFSQy5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSA9IHRoaXMuZWRpdFJRUkMuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLnNlbGVjdCA9IHRoaXMuZWRpdFJRUkMuc2VsZWN0DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0ucmVjZWl2ZUNhcGEgPSB0aGlzLmVkaXRSUVJDLnJlY2VpdmVDYXBhDQogICAgICAgICAgICB0aGlzLmNhbmNlbFJRUkMoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxSUVJDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UlFSQyA9IHtzZWxlY3Q6IG51bGwsIGRhdGFFOiBudWxsLCByZWNlaXZlQ2FwYTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUlFSQ1NlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuc2VsZWN0ID0gbnVsbA0KICAgICAgICAgICAgdGhpcy5jbGVhclJRUkMoKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRSUVJDKCkgew0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuaWQgPSBuDQoNCiAgICAgICAgICAgIGlmKCB0aGlzLmVkaXRSUVJDLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK24rJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuZGF0YUUgPSB0aGlzLmVkaXRSUVJDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0UlFSQykNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWQucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5jYW5jZWxSUVJDKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UlFSQ1NlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ1JRUkMgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRSUVJDLmRhdGFFICE9IG51bGwgJiYgdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRSUVJDTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSUVJDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSUVJDID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRSUVJDTGlzdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRSUVJDLnNlbGVjdCA9PSAiVkFSSUFCTEUtREFUQS1QUk9UT1RZUEUiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxTSVFSQyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFJRUkMuc2VsZWN0ID09ICJGSUVMRCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNJUVJDID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRGaWVsZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJSUVJDKCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSUVJDID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5lZGl0UlFSQy5kYXRhRSA9IG51bGwNCiAgICAgICAgfSwNCg0KICAgICAgICBpc0NoZWNrUkNDKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVSQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSQ0MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UkNDID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVJDQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUkNDKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVSQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UkNDLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50Lmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudCA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnQuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0UkNDLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCg0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSQ0MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UkNDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5SQ0MoaWR4KSB7IA0KICAgICAgICAgICAgdGhpcy5zZWxTSU1ldGhvZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2xpZW50U2VydmVyDQoNCiAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLm9wZXJhdGlvbiAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5vcGVyYXRpb24sIDMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5vcGVyYXRpb24sIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRSQ0MuY2xpZW50Q2FwYSA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5jbGllbnRDYXBhDQogICAgICAgIH0sDQogICAgICAgIGVkaXRSQ0NJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbiA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5vcGVyYXRpb24gPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkKSB7DQogICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uID0gdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLm9wZXJhdGlvbiA9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24ubmFtZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmNsaWVudENhcGEgPSB0aGlzLmVkaXRSQ0MuY2xpZW50Q2FwYQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxSQ0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxSQ0MoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRSQ0MgPSB7b3BlcmF0aW9uOiBudWxsLCBjbGllbnRDYXBhOiBudWxsfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkUkNDKCkgew0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5pZCA9IG4NCg0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJytuKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gPSB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0UkNDKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudC5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLmNhbmNlbFJDQygpDQogICAgICAgIH0sDQogICAgICAgIHNldFJDQ1NlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ1JDQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gIT0gbnVsbCAmJiB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkLCBlbGVtZW50OiBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cn0gKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFJDQ0xpc3QoKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUkNDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSQ0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFJDQ0xpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNlbFNJTWV0aG9kID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDbGllbnRTZXJ2ZXINCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUkNDKCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSQ0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRSQ0N2Lm9wZXJhdGlvbiA9IG51bGwNCiAgICAgICAgfSwNCg0KDQoNCiAgICAgICAgbmV3U2VydmljZUludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRYID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRZID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCg0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRFbGVtZW50U2VydmljZScsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lU2VydmljZUludGVyZmFjZSwgaW5wdXQ6IGZhbHNlLCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdG9wOiBlbGVtZW50WSwgbGVmdDogZWxlbWVudFgsIHppbmRleDogMTAsICBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk1hajonJywgdmVyc2lvbk1pbjonJywgbmFtZXNwYWNlOicnLCBldmVudHM6W10sIGZpZWxkczpbXSwgbWV0aG9kczpbXSwgaXNzZXJ2aWNlOiAnJywNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIpDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlc19zdHIpDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5TZXJ2aWNlX3N0cikNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoyfSApDQogICAgICAgIH0sDQogICAgICAgIHNldGFjdGl2ZVVVSUQoKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHV1aWQnLCB7dXVpZDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoxMH0gKQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVMaW5lKGZpbmVMaW5lKSB7DQogICAgICAgICAgICB2YXIgbGluZW51bSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Y29ubmVjdExpbmVOdW0oZmluZUxpbmUpDQogICAgICAgICAgICBpZiAobGluZW51bSAhPSAtMSkgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkZWxldGUtbGluZScsIGxpbmVudW0pDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldENvbm5lY3Rpb25saW5lJywge3N0YXJ0bnVtOiBsaW5lbnVtfSApDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG5ld0xpbmUoc3RhcnRMaW5lLCBkcmF3TGluZSwgZW5kTGluZSkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDb25uZWN0aW9ubGluZScsIHtzdGFydDogc3RhcnRMaW5lLCBlbmQ6IGVuZExpbmV9ICkNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIGRyYXdMaW5lLCBlbmRMaW5lKQ0KICAgICAgICB9LA0KDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["SWComponents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmfA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"SWComponents.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div :id=\"element.uuid\">\r\n        <v-container>\r\n            <v-tooltip bottom color=\"success\" :disabled=\"isTooltip\" z-index=\"10\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-card outlined :color=\"minimaptoolbar ? null : colorToolbar\" v-bind=\"attrs\" v-on=\"on\">\r\n                        <v-toolbar v-if=\"!isDatailView && zoomvalue > $setZoominElement\" :color=colorToolbar dark hide-on-scroll height=\"30px\" class=\"drag-handle\">\r\n                            <v-hover v-if=\"minimaptoolbar\" v-slot=\"{ hover }\">\r\n                                <v-btn icon @click=\"showSWComponent\">\r\n                                    <v-icon>{{ iselementOpenClose ? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                </v-btn>\r\n                            </v-hover>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click.stop=\"dialogPath=true\">\r\n                                <v-icon> mdi-routes</v-icon>\r\n                            </v-btn>\r\n                            <dialogPathSetting v-model=\"dialogPath\" :path=\"element.path\" @submit=\"submitDialog\"/>\r\n                            <v-toolbar-title>SW Component Type</v-toolbar-title>\r\n                            <v-spacer></v-spacer>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else-if=\"zoomvalue < $setZoominElement\" :color=colorToolbar dark hide-on-scroll height=\"50px\" class=\"drag-handle\">\r\n                            <v-toolbar-title>{{ element.name }}</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else hide-on-scroll dense flat>\r\n                            <v-toolbar-title>SW Component Type</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-card-text v-if=\"iselementOpenClose && zoomvalue > $setZoominElement\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        @input='inputSWComponentName' outlined dense></v-text-field>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/pport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showPPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isPPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    P Port Prototype\r\n                                    <v-btn v-if=\"isPPortOpenClose\" @click=\"addPport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-show=\"isPPortOpenClose\">\r\n                                    <v-tabs v-model='PportTab' height=\"30px\" show-arrows @change=\"changePportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.pport\" :key=\"idx\" @click=\"clickPporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deletePport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"PportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.pport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputPportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectPInterfaceList\" @change=\"inputSelectPInterf\" clearable @click:clear='clearPInterface()' label=\"Select Provided Interface\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setPInterfaceSelect()\" clearable @click:clear='clearPInterface()' label=\"Interface TReference\" style=\"height:45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/PPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setPInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selPInterface\" :key=\"i\" link @click=\"setPInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newPInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/pportQSC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPQSC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPQSCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Queued Sender Com Spec\r\n                                                            <v-btn @click=\"isCheckPQSC\" text x-small color=\"indigo\" v-if=\"isPQSCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPQSCOpenClose && isdeletePQSC\" @click=\"deletePQSC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPQSCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPQSC\" :headers=\"headerPQSC\" :items=\"tab.queued\" :items-per-page='20'\r\n                                                                    :show-select=\"isdeletePQSC\" item-key=\"id\" height=\"100px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePQSC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openPQSC(num)\" @cancel=\"editPQSCItem(num)\" @save=\"cancelPQSC\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPQSC.dataE' label='Data Element Reference' :items='selSIEvent' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPQSC\" clearable @click=\"setPQSCSelect()\" \r\n                                                                                            @click:clear='clearPQSC' @blur=\"isEditingPQSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPQSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPQSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent cancel-text='Ok' save-text=\"Cancel\" @cancel=\"addPQSC()\" @save=\"cancelPQSC\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPQSC.dataE' label='Data Element Reference' :items='selSIEvent' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPQSC\" clearable @click=\"setPQSCSelect()\" \r\n                                                                                            @click:clear='clearPQSC' @blur=\"isEditingPQSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPQSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPQSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/pportFSC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPFSC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPFSCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Field Sender Com Specs\r\n                                                            <v-btn @click=\"isCheckPFSC\" text x-small color=\"indigo\" v-if=\"isPFSCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPFSCOpenClose && isdeletePFSC\" @click=\"deletePFSC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPFSCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPFSC\" :headers=\"headerPFSC\" :items=\"tab.field\" :items-per-page='20'\r\n                                                                    :show-select=\"isdeletePFSC\" item-key=\"id\" height=\"100px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePFSC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openPFSC(num)\" @cancel=\"editPFSCItem(num)\" @save=\"cancelPFSC\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPFSC.dataE' label='Data Element Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPFSC\" clearable @click=\"setPFSCSelect()\" \r\n                                                                                            @click:clear='clearPFSC' @blur=\"isEditingPFSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"clearPFSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='clearPFSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent cancel-text='Ok' save-text=\"Cancel\" @cancel=\"addPFSC()\" @save=\"cancelPFSC\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPFSC.dataE' label='Data Element Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPFSC\" clearable @click=\"setPFSCSelect()\" \r\n                                                                                            @click:clear='clearPFSC' @blur=\"isEditingPFSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPFSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPFSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/prport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showPRPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isPRPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    PR Port Prototype\r\n                                    <v-btn v-if=\"isPRPortOpenClose\" @click=\"addPRport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-show=\"isPRPortOpenClose\">\r\n                                    <v-tabs v-model='PRportTab' height=\"30px\" show-arrows @change=\"changePRportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.prport\" :key=\"idx\" @click=\"clickPRporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deletePRport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"PRportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.prport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputPRportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectPRInterfaceList\" @change=\"inputSelectPRInterf\" clearable @click:clear='clearPRInterface()' label=\"Select Provided Required Interface\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setPRInterfaceSelect()\" clearable @click:clear='clearPRInterface()' label=\"Interface TReference\" style=\"height:45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/PRPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setPRInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selPRInterface\" :key=\"i\" link @click=\"setPRInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newPRInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/prporttab'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPRProvide\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPRProvideOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Provided Com Specs\r\n                                                            <v-btn @click=\"isCheckPRProvide\" text x-small color=\"indigo\" v-if=\"isPRProvideOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPRProvideOpenClose && isdeletePRProvide\" @click=\"deletePRProvide\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPRProvideOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPRProvide\" :headers=\"headerPRProvide\" :items=\"tab.provide\" :items-per-page='20'\r\n                                                                    :show-select=\"isdeletePRProvide\" item-key=\"id\" height=\"100px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePRProvide\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openPRProvide(num)\" @cancel=\"editPRProvideItem(num)\" @save=\"cancelPRProvide\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPRProvide.dataE' label='Data Element Reference' :items='selPerData' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPRProvide\" clearable @click=\"setPRProvideSelect()\" \r\n                                                                                            @click:clear='clearPRProvide' @blur=\"isEditingPRProvide=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent cancel-text='Ok' save-text=\"Cancel\" @cancel=\"addPRProvide()\" @save=\"cancelPRProvide\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPRProvide.dataE' label='Data Element Reference' :items='selPerData' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPRProvide\" clearable @click=\"setPRProvideSelect()\" \r\n                                                                                            @click:clear='clearPRProvide' @blur=\"isEditingPRProvide=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/rport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showRPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isRPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    R Port Prototype\r\n                                    <v-btn v-if=\"isRPortOpenClose\" @click=\"addRport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-if=\"isRPortOpenClose\">  \r\n                                    <v-tabs v-model='RportTab' height=\"30px\" show-arrows @change=\"changeRportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.rport\" :key=\"idx\" @click=\"clickRporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deleteRport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn>\r\n                                        </v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"RportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.rport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputRportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectRInterfaceList\" @change=\"inputSelectRInterf\" clearable @click:clear='clearRInterface()' label=\"Select Required Interface\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setRInterfaceSelect()\" clearable @click:clear='clearRInterface()' label=\"Interface TReference\" style=\"height:45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/RPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setRInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selRInterface\" :key=\"i\" link @click=\"setRInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newRInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/rportQRC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showRQRC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isRQRCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Queued Receiver Com Spec\r\n                                                            <v-btn @click=\"isCheckRQRC\" text x-small color=\"indigo\" v-if=\"isRQRCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isRQRCOpenClose && isdeleteRQRC\" @click=\"deleteRQRC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isRQRCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectRQRC\" :headers=\"headerRQRC\" :items=\"tab.queued\" :items-per-page='20'\r\n                                                                    :show-select=\"isdeleteRQRC\" item-key=\"id\" height=\"100px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeleteRQRC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openRQRC(num)\" @cancel=\"editRQRCItem(num)\" @save=\"cancelRQRC\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-select v-model=\"editRQRC.select\" :items=\"selectRQRC\" clearable @click:clear='clearRQRCSelect()' label=\"Data Element\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-if=\"editRQRC.select != null\" v-model='editRQRC.dataE' label='Data Element Reference' :items='selSIQRC' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRQRC\" clearable @click=\"setRQRCSelect()\" \r\n                                                                                            @click:clear='clearRQRC' @blur=\"isEditingRQRC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRQRC.receiveCapa\" :items=\"selectReceiverCapa\" clearable @click:clear='editRQRC.receiveCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent cancel-text='Ok' save-text=\"Cancel\" @cancel=\"addRQRC()\" @save=\"cancelRQRC\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-select v-model=\"editRQRC.select\" :items=\"selectRQRC\" clearable @click:clear='clearRQRCSelect' label=\"Data Element\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-if=\"editRQRC.select != null\" v-model='editRQRC.dataE' label='Data Element Reference' :items='selSIQRC' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRQRC\" clearable @click=\"setRQRCSelect()\" \r\n                                                                                            @click:clear='clearRQRC' @blur=\"isEditingRQRC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRQRC.receiveCapa\" :items=\"selectReceiverCapa\" clearable @click:clear='editRQRC.receiveCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/rportCC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showRCC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isRCCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Client Com Spec\r\n                                                            <v-btn @click=\"isCheckRCC\" text x-small color=\"indigo\" v-if=\"isRCCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isRCCOpenClose && isdeleteRCC\" @click=\"deleteRCC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isRCCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectRCC\" :headers=\"headerRCC\" :items=\"tab.client\" :items-per-page='20'\r\n                                                                    :show-select=\"isdeleteRCC\" item-key=\"id\" height=\"100px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeleteRCC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openRCC(num)\" @cancel=\"editRCCItem(num)\" @save=\"cancelRCC\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editRCC.operation' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRCC\" clearable @click=\"setRCCSelect()\" \r\n                                                                                            @click:clear='clearRCC' @blur=\"isEditingRCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRCC.clientCapa\" :items=\"selectClientCapa\" clearable @click:clear='editRCC.clientCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent cancel-text='Ok' save-text=\"Cancel\" @cancel=\"addRCC()\" @save=\"cancelRCC\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editRCC.operation' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRCC\" clearable @click=\"setRCCSelect()\" \r\n                                                                                            @click:clear='clearRCC' @blur=\"isEditingRCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRCC.clientCapa\" :items=\"selectClientCapa\" clearable @click:clear='editRCC.clientCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-card-text>\r\n                        <v-card-text v-else-if=\"zoomvalue > $setZoominElement  || !minimaptoolbar\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        readonly outlined dense></v-text-field>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </template>\r\n                <span>{{ element.name }}</span>\r\n            </v-tooltip>\r\n        </v-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport constant from \"../store/constants.js\"\r\nimport { EventBus } from \"../main.js\"\r\nimport dialogPathSetting from '../components/dialogPathSetting.vue'\r\n\r\nexport default {\r\n    props: ['element', 'isDatailView', 'minimaptoolbar', 'location'],\r\n    components:{dialogPathSetting},\r\n    computed: {\r\n        activeUUID() {\r\n            return this.$store.state.activeUUID\r\n        },\r\n        detailViewUUID() {\r\n            return this.$store.state.detailViewUUID\r\n        },\r\n        setting() {\r\n            return this.$store.state.setting\r\n        },\r\n    },\r\n    watch: {\r\n        activeUUID(val) {\r\n            this.setToolbarColor(val)\r\n        },\r\n        detailViewUUID(val) {\r\n            this.setToolbarColorDetailView(val)\r\n        },\r\n        setting(value) {\r\n            this.zoomvalue = value.zoomMain\r\n            if (this.zoomvalue < this.$setZoominTooltip) {\r\n                this.isTooltip = false\r\n            } else {\r\n                this.isTooltip = this.minimaptoolbar\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.setToolbarColor(this.$store.state.activeUUID)\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            rules: {\r\n                name:  [val => (val || '').length > 0 ],\r\n            },\r\n            dialogPath : false,\r\n            colorToolbar: \"#6A5ACD\",\r\n            zoomvalue: this.$store.state.setting.zoomMain,\r\n            isTooltip: this.minimaptoolbar,\r\n            iselementOpenClose: this.minimaptoolbar, //toolbar만 보여줄것이냐 아니냐 설정 true: 전체 다 보여줌 / false : toolbar만 보여줌\r\n            isPPortOpenClose: true,\r\n            isPRPortOpenClose: true,\r\n            isRPortOpenClose: true,\r\n\r\n            selSIEvent: this.$store.getters.getVariableDataPrototype,\r\n            selSIField: this.$store.getters.getField,\r\n            selectPInterfaceList: ['SERVICE-INTERFACE','PHM-RECOVERY-ACTION-INTERFACE'],\r\n            selectSenderCapa: ['WILL-SEND', 'WONT-SEND'],\r\n            selPInterface: null,\r\n            PportTab: null,\r\n            isPQSCOpenClose: true,\r\n            isdeletePQSC: false,\r\n            selectDelectPQSC: [],\r\n            headerPQSC: [\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Sender Capability', sortable: false, value: 'senderCapa' },\r\n            ],\r\n            editPQSC: { dataE: null, senderCapa:null, id: ''},\r\n            isEditingPQSC: true,\r\n            isPFSCOpenClose: true,\r\n            isdeletePFSC: false,\r\n            selectDelectPFSC: [],\r\n            headerPFSC: [\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Sender Capability', sortable: false, value: 'senderCapa' },\r\n            ],\r\n            editPFSC: { dataE: null, senderCapa:null, id: ''},\r\n            isEditingPFSC: true,\r\n\r\n            PRportTab: null,\r\n            isPRProvideOpenClose: true,\r\n            isdeletePRProvide: false,\r\n            selectDelectPRProvide: [],\r\n            headerPRProvide: [\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n            ],\r\n            editPRProvide: { dataE: null, id: ''},\r\n            isEditingPRProvide: true,\r\n            selPerData: this.$store.getters.getPERKeyValueDIData,\r\n            selectPRInterfaceList: ['SERVICE-INTERFACE','PERSISTENCY-FILE-PROXY-INTERFACE', 'PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE'],\r\n            selPRInterface: null,\r\n\r\n            RportTab: null,\r\n            selectRInterfaceList: ['SERVICE-INTERFACE','PHM-HEALTH-CHANNEL-INTERFACE', 'PHM-SUPERVISED-ENTITY-INTERFACE'],\r\n            selRInterface: null,\r\n            isRQRCOpenClose: true,\r\n            isdeleteRQRC: false,\r\n            selectDelectRQRC: [],\r\n            headerRQRC: [\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Receiver Capability', sortable: false, value: 'receiveCapa' },\r\n            ],\r\n            selectRQRC: ['VARIABLE-DATA-PROTOTYPE','FIELD'],\r\n            selectReceiverCapa: ['WILL-RECEIVE', 'WONT-RECEIVE'],\r\n            selectClientCapa: ['WILL-CALL', 'WONT-CALL'],\r\n            editRQRC: { select: null, dataE: null, receiveCapa:null, id: ''},\r\n            isEditingRQRC: true,\r\n            isRCCOpenClose: true,\r\n            isdeleteRCC: false,\r\n            selectDelectRCC: [],\r\n            headerRCC: [\r\n                { text: 'Operation Ref', sortable: false, value: 'operation' },\r\n                { text: 'Client Capability', sortable: false, value: 'clientCapa' },\r\n            ],\r\n            editRCC: { operation: null, clientCapa:null, id: ''},\r\n            isEditingRCC: true,\r\n            selSIQRC: this.$store.getters.getVariableDataPrototype,\r\n            selSIMethod: this.$store.getters.getClientServer,\r\n        }\r\n    },\r\n    mounted () {\r\n        if (this.minimaptoolbar && this.zoomvalue < this.$setZoominElement) {\r\n            this.isTooltip = false\r\n        }\r\n    },\r\n    methods: {\r\n        submitDialog(element) {\r\n            this.element.path = element\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n        },\r\n        setToolbarColor(activeid) \r\n        {\r\n            if(this.element.uuid == activeid) {\r\n                this.colorToolbar = \"#FF1493\" \r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        setToolbarColorDetailView(isdetail) {\r\n            if(this.element.uuid == isdetail) {\r\n                this.colorToolbar = \"#B0E0E6\" \r\n            } else if (this.element.uuid == this.$store.state.activeUUID) {\r\n                this.colorToolbar  = \"#FF1493\"\r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        showSWComponent() {\r\n            this.iselementOpenClose = this.iselementOpenClose ? false : true\r\n            this.$nextTick(() => {\r\n                EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                if(this.iselementOpenClose) {\r\n                    if(this.element.pport.length > 0 && this.location == 1) {\r\n                        if(this.isPPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                    if(this.element.prport.length > 0 && this.location == 1) {\r\n                        if(this.isPRPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                    if(this.element.rport.length > 0 && this.location == 1) {\r\n                        if(this.isRPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        showPPort() {\r\n            this.isPPortOpenClose = this.isPPortOpenClose ? false : true\r\n            if(this.element.pport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isPPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }\r\n        },\r\n        showPQSC() {\r\n            this.isPQSCOpenClose = this.isPQSCOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showPFSC() {\r\n            this.isPFSCOpenClose = this.isPFSCOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showPRPort() {\r\n            this.isPRPortOpenClose = this.isPRPortOpenClose ? false : true\r\n            if(this.element.prport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isPRPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }\r\n\r\n        },\r\n        showPRProvide() {\r\n            this.isPRProvideOpenClose = this.isPRProvideOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showRPort() {\r\n            this.isRPortOpenClose = this.isRPortOpenClose ? false : true\r\n            if(this.element.rport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isRPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }\r\n\r\n        },\r\n        showRQRC() {\r\n            this.isRQRCOpenClose = this.isRQRCOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showRCC() {\r\n            this.isRCCOpenClose = this.isRCCOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        inputSWComponentName() {\r\n            this.$store.commit('editSWComponents', {compo:\"Name\", uuid:this.element.uuid, name:this.element.name} )\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            if (this.element.name != '') {\r\n                this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n            }\r\n        },\r\n        inputPportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'pPort', listname: name} )\r\n        }, \r\n        inputPRportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'prPort', listname: name} )\r\n        },\r\n        inputRportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'rPort', listname: name} )\r\n        }, \r\n\r\n        inputSelectPInterf() {\r\n            this.clearPInterface()\r\n            this.setPInterfaceSelect()\r\n        },\r\n        clearPInterface() {\r\n            this.element.pport[this.PportTab].interface = null\r\n            this.selPInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n            }\r\n        },\r\n        setPInterfaceSelect() {\r\n            if (this.element.pport[this.PportTab].selectI != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].interface)\r\n                    } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                        endLine = this.$store.getters.getPHMRecoveryPath(this.element.pport[this.PportTab].interface)\r\n                    } \r\n                }\r\n                if (endLine != null) {\r\n                    if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                    } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.RecoveryVA_str} )\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setPInterfaceList() {\r\n            if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selPInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                this.selPInterface = this.$store.getters.getPHMRecovery\r\n            } \r\n            this.setactiveUUID()\r\n        },\r\n        setPInterface(item){\r\n            if( this.element.pport[this.PportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                    this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                }\r\n                //새로 추가해준다\r\n                if (endLine != item.uuid) {\r\n                    this.newLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, item.uuid)\r\n                }\r\n                this.element.pport[this.PportTab].interface = item.name\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newPInterface() {\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                this.$store.commit('addElementPHMRecovery', {\r\n                    name: this.$store.getters.getNamePHMRecovery, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    reconame: '', faf: null\r\n                })                \r\n                EventBus.$emit('add-element', constant.RecoveryVA_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n\r\n            } \r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addPport() {\r\n            const editItem = {name: '', selectI: null, interface: null, queued: [], field: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'PPort_' + n++;\r\n                res = this.element.pport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.pport.push(addObj)\r\n            this.PportTab = this.element.pport.length-1\r\n            this.clickPporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickPporttab() {\r\n            this.isdeletePQSC = false\r\n            this.selectDelectPQSC = []\r\n            this.isdeletePFSC = false\r\n            this.selectDelectPFSC = []\r\n        },\r\n        changePportTab() {\r\n            if(this.element.pport.length > 0 && this.location == 1) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)}, 300);\r\n            }\r\n        },\r\n        deletePport(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'ptab', deleteTab: true, tabName: this.element.pport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.pport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.pport[idx].queued.length; i++){\r\n                var endLineQ = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[idx].queued[i].id+'-'+this.element.pport[idx].id)\r\n                if(endLineQ != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[idx].queued[i].id+'-'+this.element.pport[idx].id)\r\n                }\r\n            }\r\n            for(let i=0; i<this.element.pport[idx].field.length; i++){\r\n                var endLineF = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[idx].field[i].id+'-'+this.element.pport[idx].id)\r\n                if(endLineF != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[idx].field[i].id+'-'+this.element.pport[idx].id)\r\n                }\r\n            }\r\n\r\n            this.element.pport.splice(idx, 1)\r\n            this.changePportTab()\r\n        },\r\n        isCheckPQSC() {\r\n            if (this.isdeletePQSC == true) {\r\n                this.isdeletePQSC = false\r\n                this.selectDelectPQSC = []\r\n            } else {\r\n                this.isdeletePQSC = true\r\n            }\r\n        },\r\n        deletePQSC() {\r\n            if (this.isdeletePQSC == true) {\r\n                this.selectDelectPQSC.forEach( item => {\r\n                    for(let i=0; i<this.element.pport[this.PportTab].queued.length; i++){\r\n                        if (item.id == this.element.pport[this.PportTab].queued[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.pport[this.PportTab].queued = this.element.pport[this.PportTab].queued.filter(item => {\r\n                        return this.selectDelectPQSC.indexOf(item) < 0 })\r\n\r\n                this.isdeletePQSC = false\r\n                this.selectDelectPQSC = []\r\n            } \r\n        },\r\n        openPQSC(idx) { \r\n            this.selSIEvent = this.$store.getters.getVariableDataPrototype\r\n\r\n            if ( this.element.pport[this.PportTab].queued[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].queued[idx].dataE, 1)\r\n                }\r\n                this.editPQSC.dataE = { name: this.element.pport[this.PportTab].queued[idx].dataE, uuid: endLine}\r\n            }\r\n            this.editPQSC.senderCapa = this.element.pport[this.PportTab].queued[idx].senderCapa\r\n        },\r\n        editPQSCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined && this.editPQSC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPQSC.dataE.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.newLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, this.editPQSC.dataE.uuid)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = this.editPQSC.dataE.name\r\n            } else if (endLine == undefined && this.editPQSC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, this.editPQSC.dataE.uuid)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = this.editPQSC.dataE.name\r\n            }\r\n            this.element.pport[this.PportTab].queued[idx].senderCapa = this.editPQSC.senderCapa\r\n            this.cancelPQSC()\r\n        },\r\n        cancelPQSC() {\r\n            this.editPQSC = {dataE: null, senderCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPQSC() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.pport[this.PportTab].queued.some(item => item.id === n)\r\n            }\r\n            this.editPQSC.id = n\r\n\r\n            if( this.editPQSC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/pportQSC-'+n+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, this.editPQSC.dataE.uuid)\r\n                this.editPQSC.dataE = this.editPQSC.dataE.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPQSC)\r\n            this.element.pport[this.PportTab].queued.push(addObj);\r\n            this.cancelPQSC()\r\n        },\r\n        setPQSCSelect() {\r\n            if (this.isEditingPQSC == true) {\r\n                if (this.editPQSC.dataE != null && this.editPQSC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPQSC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                }\r\n                this.setPQSCList()\r\n                this.isEditingPQSC = false\r\n            } else {\r\n                this.isEditingPQSC = true\r\n            }\r\n        },\r\n        setPQSCList() {\r\n            this.selSIEvent = this.$store.getters.getVariableDataPrototype\r\n            this.setactiveUUID()\r\n        },\r\n        clearPQSC() {\r\n            this.isEditingPQSC = true\r\n            this.editPQSC.dataE = null\r\n        },\r\n        isCheckPFSC() {\r\n            if (this.isdeletePFSC == true) {\r\n                this.isdeletePFSC = false\r\n                this.selectDelectPFSC = []\r\n            } else {\r\n                this.isdeletePFSC = true\r\n            }\r\n        },\r\n        deletePFSC() {\r\n            if (this.isdeletePFSC == true) {\r\n                this.selectDelectPFSC.forEach( item => {\r\n                    for(let i=0; i<this.element.pport[this.PportTab].field.length; i++){\r\n                        if (item.id == this.element.pport[this.PportTab].field[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.pport[this.PportTab].field = this.element.pport[this.PportTab].field.filter(item => {\r\n                        return this.selectDelectPFSC.indexOf(item) < 0 })\r\n\r\n\r\n                this.isdeletePFSC = false\r\n                this.selectDelectPFSC = []\r\n            } \r\n        },\r\n        openPFSC(idx) { \r\n            this.selSIField = this.$store.getters.getField\r\n\r\n            if ( this.element.pport[this.PportTab].field[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].field[idx].dataE, 2)\r\n                }\r\n                this.editPFSC.dataE = { name: this.element.pport[this.PportTab].field[idx].dataE, uuid: endLine}\r\n            }\r\n            this.editPFSC.senderCapa = this.element.pport[this.PportTab].field[idx].senderCapa\r\n        },\r\n        editPFSCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined && this.editPFSC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.element.pport[this.PportTab].field[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPFSC.dataE.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.newLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, this.editPFSC.dataE.uuid)\r\n                this.element.pport[this.PportTab].field[idx].dataE = this.editPFSC.dataE.name\r\n            } else if (endLine == undefined && this.editPFSC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, this.editPFSC.dataE.uuid)\r\n                this.element.pport[this.PportTab].field[idx].dataE = this.editPFSC.dataE.name\r\n            }\r\n            this.element.pport[this.PportTab].field[idx].senderCapa = this.editPFSC.senderCapa\r\n            this.cancelPFSC()\r\n        },\r\n        cancelPFSC() {\r\n            this.editPFSC = {dataE: null, senderCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPFSC() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.pport[this.PportTab].field.some(item => item.id === n)\r\n            }\r\n            this.editPFSC.id = n\r\n\r\n            if( this.editPFSC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/pportFSC-'+n+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, this.editPFSC.dataE.uuid)\r\n                this.editPFSC.dataE = this.editPFSC.dataE.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPFSC)\r\n            this.element.pport[this.PportTab].field.push(addObj);\r\n            this.cancelPFSC()\r\n        },\r\n        setPFSCSelect() {\r\n            if (this.isEditingPFSC == true) {\r\n                if (this.editPFSC.dataE != null && this.editPFSC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPFSC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                }\r\n                this.setPFSCList()\r\n                this.isEditingPFSC = false\r\n            } else {\r\n                this.isEditingPFSC = true\r\n            }\r\n        },\r\n        setPFSCList() {\r\n            this.selSIField = this.$store.getters.getField\r\n            this.setactiveUUID()\r\n        },\r\n        clearPFSC() {\r\n            this.isEditingPFSC = true\r\n            this.editPFSC.dataE = null\r\n        },\r\n\r\n        inputSelectPRInterf() {\r\n            this.clearPRInterface()\r\n            this.setPRInterfaceSelect()\r\n        },\r\n        clearPRInterface() {\r\n            this.element.prport[this.PRportTab].interface = null\r\n            this.selPRInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n            }\r\n        },\r\n        setPRInterfaceSelect() {\r\n            if (this.element.prport[this.PRportTab].selectI != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                if (endLine == undefined) {\r\n                    if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.prport[this.PRportTab].interface)\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                        endLine = this.$store.getters.getPERFileProxyPath(this.element.prport[this.PRportTab].interface)\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                        endLine = this.$store.getters.getPERKeyValueDIPath(this.element.prport[this.PRportTab].interface)\r\n                    }\r\n                }\r\n                if (endLine != null) {\r\n                    if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.FileProxyInterf_str} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.KeyValueDI_str} )\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setPRInterfaceList() {\r\n            if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getPERFileProxy\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getPERKeyValueDI\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        setPRInterface(item){\r\n            if( this.element.prport[this.PRportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                    this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                }\r\n                //새로 추가해준다\r\n                if (endLine != item.uuid) {\r\n                    this.newLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id, this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, item.uuid)\r\n                }\r\n                this.element.prport[this.PRportTab].interface = item.name\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newPRInterface() {\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                this.$store.commit('addElementPERFileProxy', {\r\n                    name: this.$store.getters.getNamePERFileProxy, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    category: '', minisize: '', redundancy: null, updateS: null, encoding: '', proxy: [], maxfiles: ''\r\n                })\r\n                EventBus.$emit('add-element', constant.FileProxyInterf_str)\r\n                EventBus.$emit('add-element', constant.PER_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                this.$store.commit('addElementPERKeyValueDI', {\r\n                    name: this.$store.getters.getNamePERKeyValueDI, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    minisize: '', redundancy: null, updateS: null, data: [], serialization: []\r\n                })\r\n                EventBus.$emit('add-element', constant.KeyValueDI_str)\r\n                EventBus.$emit('add-element', constant.PER_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            }\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addPRport() {\r\n            const editItem = {name: '', selectI: null, interface: null, provide: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'PRPort_' + n++;\r\n                res = this.element.prport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.prport.push(addObj)\r\n            this.PRportTab = this.element.prport.length-1\r\n            this.clickPRporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickPRporttab() {\r\n            this.isdeletePRProvide = false\r\n            this.selectDelectPRProvide = []\r\n        },\r\n        changePRportTab() {\r\n            if(this.element.prport.length > 0 && this.location == 1) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)}, 300);\r\n            }\r\n        },\r\n        deletePRport(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'prtab', deleteTab: true, tabName: this.element.prport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.prport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.prport[idx].provide.length; i++){\r\n                var endLineCon = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[idx].provide[i].id+'-'+this.element.prport[idx].id)\r\n                if(endLineCon != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[idx].provide[i].id+'-'+this.element.prport[idx].id)\r\n                }\r\n            }\r\n\r\n            this.element.prport.splice(idx, 1)\r\n            this.changePRportTab()\r\n        },\r\n        isCheckPRProvide() {\r\n            if (this.isdeletePRProvide == true) {\r\n                this.isdeletePRProvide = false\r\n                this.selectDelectPRProvide = []\r\n            } else {\r\n                this.isdeletePRProvide = true\r\n            }\r\n        },\r\n        deletePRProvide() {\r\n            if (this.isdeletePRProvide == true) {\r\n                this.selectDelectPRProvide.forEach( item => {\r\n                    for(let i=0; i<this.element.prport[this.PRportTab].provide.length; i++){\r\n                        if (item.id == this.element.prport[this.PRportTab].provide[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[i].id+'-'+this.element.prport[this.PRportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[i].id+'-'+this.element.prport[this.PRportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.prport[this.PRportTab].provide = this.element.prport[this.PRportTab].provide.filter(item => {\r\n                        return this.selectDelectPRProvide.indexOf(item) < 0 })\r\n\r\n                this.isdeletePRProvide = false\r\n                this.selectDelectPRProvide = []\r\n            } \r\n        },\r\n        openPRProvide(idx) { \r\n            this.selPerData = this.$store.getters.getPERKeyValueDIData\r\n\r\n            if ( this.element.prport[this.PRportTab].provide[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getPERKeyValueDIPath(this.element.prport[this.PRportTab].provide[idx].dataE)\r\n                }\r\n                this.editPRProvide.dataE = { name: this.element.prport[this.PRportTab].provide[idx].dataE, uuid: endLine}\r\n            }\r\n        },\r\n        editPRProvideItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n            if (endLine != undefined && this.editPRProvide.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPRProvide.dataE.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                this.newLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id, this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, this.editPRProvide.dataE.uuid)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = this.editPRProvide.dataE.name\r\n            } else if (endLine == undefined && this.editPRProvide.dataE != null) {\r\n                this.newLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id, this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, this.editPRProvide.dataE.uuid)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = this.editPRProvide.dataE.name\r\n            }\r\n\r\n            this.cancelPRProvide()\r\n        },\r\n        cancelPRProvide() {\r\n            this.editPRProvide = {dataE: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPRProvide() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.prport[this.PRportTab].provide.some(item => item.id === n)\r\n            }\r\n            this.editPRProvide.id = n\r\n\r\n            if( this.editPRProvide.dataE != null) {\r\n                this.newLine(this.element.uuid+'/prporttab-'+n+'-'+this.element.prport[this.PRportTab].id, this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, this.editPRProvide.dataE.uuid)\r\n                this.editPRProvide.dataE = this.editPRProvide.dataE.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPRProvide)\r\n            this.element.prport[this.PRportTab].provide.push(addObj);\r\n            this.cancelPRProvide()\r\n        },\r\n        setPRProvideSelect() {\r\n            if (this.isEditingPRProvide == true) {\r\n                if (this.editPRProvide.dataE != null && this.editPRProvide.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPRProvide.dataE.uuid, element: constant.KeyValueDI_str} )\r\n                }\r\n                this.setPRProvideList()\r\n                this.isEditingPRProvide = false\r\n            } else {\r\n                this.isEditingPRProvide = true\r\n            }\r\n        },\r\n        setPRProvideList() {\r\n            this.selPerData = this.$store.getters.getPERKeyValueDIData\r\n            this.setactiveUUID()\r\n        },\r\n        clearPRProvide() {\r\n            this.isEditingPRProvide = true\r\n            this.editPRProvide.dataE = null\r\n        },\r\n\r\n        inputSelectRInterf() {\r\n            this.clearRInterface()\r\n            this.setRInterfaceSelect()\r\n        },\r\n        clearRInterface() {\r\n            this.element.rport[this.RportTab].interface = null\r\n            this.selRInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n            }\r\n        },\r\n        setRInterfaceSelect() {\r\n            if (this.element.rport[this.RportTab].selectI != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                if (endLine == undefined) {\r\n                    if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].interface)\r\n                    } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                        endLine = this.$store.getters.getPHMHealthPath(this.element.rport[this.RportTab].interface)\r\n                    } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                        endLine = this.$store.getters.getPHMSupervisedPath(this.element.rport[this.RportTab].interface)\r\n                    } \r\n                }\r\n                if (endLine != null) {\r\n                    if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                    } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.HealthChannel_str} )\r\n                    } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                        this.$store.commit('setDetailView', {uuid: endLine, element: constant.PHMSupervised_str} )\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setRInterfaceList() {\r\n            if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getPHMHealth\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getPHMSupervised\r\n            } \r\n            this.setactiveUUID()\r\n        },\r\n        setRInterface(item){\r\n            if( this.element.rport[this.RportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                    this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                }\r\n                //새로 추가해준다\r\n                if (endLine != item.uuid) {\r\n                    this.newLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, item.uuid)\r\n                }\r\n                this.element.rport[this.RportTab].interface = item.name\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newRInterface() {\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                this.$store.commit('addElementPHMHealth', {\r\n                    name: this.$store.getters.getNamePHMHealth, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    status: []\r\n                })\r\n                EventBus.$emit('add-element', constant.HealthChannel_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                this.$store.commit('addElementPHMSupervised', {\r\n                    name: this.$store.getters.getNamePHMSupervised, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    checkpoint: []\r\n                })              \r\n                EventBus.$emit('add-element', constant.PHMSupervised_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            } \r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addRport() {\r\n            const editItem = {name: '', selectI: null, interface: null, queued: [], client: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'RPort_' + n++;\r\n                res = this.element.rport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.rport.push(addObj)\r\n            this.RportTab = this.element.rport.length-1\r\n            this.clickRporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickRporttab() {\r\n            this.isdeleteRQRC = false\r\n            this.selectDelectRQRC = []\r\n            this.isdeleteRCC = false\r\n            this.selectDelectRCC = []\r\n        },\r\n        changeRportTab() {\r\n            if(this.element.rport.length > 0 && this.location == 1) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)}, 300);\r\n            }\r\n        },\r\n        deleteRport(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'rtab', deleteTab: true, tabName: this.element.rport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.rport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.rport[idx].queued.length; i++){\r\n                var endLineQ = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[idx].queued[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineQ != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[idx].queued[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n            }\r\n            for(let i=0; i<this.element.rport[idx].client.length; i++){\r\n                var endLineF = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineF != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n            }\r\n\r\n            this.element.rport.splice(idx, 1)\r\n            this.changeRportTab()\r\n        },\r\n        isCheckRQRC() {\r\n            if (this.isdeleteRQRC == true) {\r\n                this.isdeleteRQRC = false\r\n                this.selectDelectRQRC = []\r\n            } else {\r\n                this.isdeleteRQRC = true\r\n            }\r\n        },\r\n        deleteRQRC() {\r\n            if (this.isdeleteRQRC == true) {\r\n                this.selectDelectRQRC.forEach( item => {\r\n                    for(let i=0; i<this.element.rport[this.RportTab].queued.length; i++){\r\n                        if (item.id == this.element.rport[this.RportTab].queued[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.rport[this.RportTab].queued = this.element.rport[this.RportTab].queued.filter(item => {\r\n                        return this.selectDelectRQRC.indexOf(item) < 0 })\r\n\r\n                this.isdeleteRQRC = false\r\n                this.selectDelectRQRC = []\r\n            } \r\n        },\r\n        openRQRC(idx) {\r\n            var endLine = null\r\n            this.editRQRC.select = this.element.rport[this.RportTab].queued[idx].select\r\n            if (this.element.rport[this.RportTab].queued[idx].select == \"VARIABLE-DATA-PROTOTYPE\") {\r\n                this.selSIQRC = this.$store.getters.getVariableDataPrototype\r\n\r\n                if ( this.element.rport[this.RportTab].queued[idx].dataE != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].queued[idx].dataE, 1)\r\n                    }\r\n                    this.editRQRC.dataE = { name: this.element.rport[this.RportTab].queued[idx].dataE, uuid: endLine}\r\n                }\r\n            } else if (this.element.rport[this.RportTab].queued[idx].select == \"FIELD\") {\r\n                this.selSIQRC = this.$store.getters.getField\r\n\r\n                if ( this.element.rport[this.RportTab].queued[idx].dataE != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].queued[idx].dataE, 2)\r\n                    }\r\n                    this.editRQRC.dataE = { name: this.element.rport[this.RportTab].queued[idx].dataE, uuid: endLine}\r\n                }\r\n            }\r\n            this.editRQRC.receiveCapa = this.element.rport[this.RportTab].queued[idx].receiveCapa\r\n        },\r\n        editRQRCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined && this.editRQRC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editRQRC.dataE.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, this.editRQRC.dataE.uuid)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = this.editRQRC.dataE.name\r\n            } else if (endLine == undefined && this.editRQRC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, this.editRQRC.dataE.uuid)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = this.editRQRC.dataE.name\r\n            }\r\n            this.element.rport[this.RportTab].queued[idx].select = this.editRQRC.select\r\n            this.element.rport[this.RportTab].queued[idx].receiveCapa = this.editRQRC.receiveCapa\r\n            this.cancelRQRC()\r\n        },\r\n        cancelRQRC() {\r\n            this.editRQRC = {select: null, dataE: null, receiveCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        clearRQRCSelect() {\r\n            this.editRQRC.select = null\r\n            this.clearRQRC()\r\n        },\r\n        addRQRC() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.rport[this.RportTab].queued.some(item => item.id === n)\r\n            }\r\n            this.editRQRC.id = n\r\n\r\n            if( this.editRQRC.dataE != null) {\r\n                this.newLine(this.element.uuid+'/rportQRC-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, this.editRQRC.dataE.uuid)\r\n                this.editRQRC.dataE = this.editRQRC.dataE.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editRQRC)\r\n            this.element.rport[this.RportTab].queued.push(addObj);\r\n            this.cancelRQRC()\r\n        },\r\n        setRQRCSelect() {\r\n            if (this.isEditingRQRC == true) {\r\n                if (this.editRQRC.dataE != null && this.editRQRC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRQRC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                }\r\n                this.setRQRCList()\r\n                this.isEditingRQRC = false\r\n            } else {\r\n                this.isEditingRQRC = true\r\n            }\r\n        },\r\n        setRQRCList() {\r\n            if (this.editRQRC.select == \"VARIABLE-DATA-PROTOTYPE\") {\r\n                this.selSIQRC = this.$store.getters.getVariableDataPrototype\r\n            } else if (this.editRQRC.select == \"FIELD\") {\r\n                this.selSIQRC = this.$store.getters.getField\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        clearRQRC() {\r\n            this.isEditingRQRC = true\r\n            this.editRQRC.dataE = null\r\n        },\r\n\r\n        isCheckRCC() {\r\n            if (this.isdeleteRCC == true) {\r\n                this.isdeleteRCC = false\r\n                this.selectDelectRCC = []\r\n            } else {\r\n                this.isdeleteRCC = true\r\n            }\r\n        },\r\n        deleteRCC() {\r\n            if (this.isdeleteRCC == true) {\r\n                this.selectDelectRCC.forEach( item => {\r\n                    for(let i=0; i<this.element.rport[this.RportTab].client.length; i++){\r\n                        if (item.id == this.element.rport[this.RportTab].client[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.rport[this.RportTab].client = this.element.rport[this.RportTab].client.filter(item => {\r\n                        return this.selectDelectRCC.indexOf(item) < 0 })\r\n\r\n\r\n                this.isdeleteRCC = false\r\n                this.selectDelectRCC = []\r\n            } \r\n        },\r\n        openRCC(idx) { \r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n\r\n            if ( this.element.rport[this.RportTab].client[idx].operation != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].operation, 3)\r\n                }\r\n                this.editRCC.operation = { name: this.element.rport[this.RportTab].client[idx].operation, uuid: endLine}\r\n            }\r\n            this.editRCC.clientCapa = this.element.rport[this.RportTab].client[idx].clientCapa\r\n        },\r\n        editRCCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined && this.editRCC.operation == null) {\r\n                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].client[idx].operation = null\r\n            } else if (endLine != undefined && endLine != this.editRCC.operation.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.operation.uuid)\r\n                this.element.rport[this.RportTab].client[idx].operation = this.editRCC.operation.name\r\n            } else if (endLine == undefined && this.editRCC.operation != null) {\r\n                this.newLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.operation.uuid)\r\n                this.element.rport[this.RportTab].client[idx].operation = this.editRCC.operation.name\r\n            }\r\n            this.element.rport[this.RportTab].client[idx].clientCapa = this.editRCC.clientCapa\r\n            this.cancelRCC()\r\n        },\r\n        cancelRCC() {\r\n            this.editRCC = {operation: null, clientCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addRCC() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.rport[this.RportTab].client.some(item => item.id === n)\r\n            }\r\n            this.editRCC.id = n\r\n\r\n            if( this.editRCC.operation != null) {\r\n                this.newLine(this.element.uuid+'/rportCC-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.operation.uuid)\r\n                this.editRCC.operation = this.editRCC.operation.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editRCC)\r\n            this.element.rport[this.RportTab].client.push(addObj);\r\n            this.cancelRCC()\r\n        },\r\n        setRCCSelect() {\r\n            if (this.isEditingRCC == true) {\r\n                if (this.editRCC.operation != null && this.editRCC.operation.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRCC.operation.uuid, element: constant.ServiceInterface_str} )\r\n                }\r\n                this.setRCCList()\r\n                this.isEditingRCC = false\r\n            } else {\r\n                this.isEditingRCC = true\r\n            }\r\n        },\r\n        setRCCList() {\r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n            this.setactiveUUID()\r\n        },\r\n        clearRCC() {\r\n            this.isEditingRCC = true\r\n            this.editRCCv.operation = null\r\n        },\r\n\r\n\r\n\r\n        newServiceInterface() {\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            this.$store.commit('addElementService', {\r\n                    name: this.$store.getters.getNameServiceInterface, input: false, path: '',\r\n                    top: elementY, left: elementX, zindex: 10,  icon:\"mdi-clipboard-outline\", validation: false,\r\n                    versionMaj:'', versionMin:'', namespace:'', events:[], fields:[], methods:[], isservice: '',\r\n                })\r\n            EventBus.$emit('add-element', constant.ServiceInterface_str)\r\n            EventBus.$emit('add-element', constant.ServiceInterfaces_str)\r\n            EventBus.$emit('add-element', constant.Service_str)\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n        setactiveUUID() {\r\n            this.$store.commit('setuuid', {uuid: this.element.uuid} )\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:10} )\r\n        },\r\n        deleteLine(fineLine) {\r\n            var linenum = this.$store.getters.getconnectLineNum(fineLine)\r\n            if (linenum != -1) {\r\n                EventBus.$emit('delete-line', linenum)\r\n                this.$store.commit('deletConnectionline', {startnum: linenum} )\r\n            }\r\n        },\r\n        newLine(startLine, drawLine, endLine) {\r\n            this.$store.commit('setConnectionline', {start: startLine, end: endLine} )\r\n            EventBus.$emit('new-line', drawLine, endLine)\r\n        },\r\n\r\n    },\r\n}\r\n</script>\r\n"]}]}