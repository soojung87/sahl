{"remainingRequest":"D:\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\service\\src\\components\\Machine.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\service\\src\\components\\Machine.vue","mtime":1662613968683},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY29uc3RhbnQgZnJvbSAiLi4vc3RvcmUvY29uc3RhbnRzLmpzIg0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICIuLi9tYWluLmpzIg0KaW1wb3J0IGRpYWxvZ1BhdGhTZXR0aW5nIGZyb20gJy4uL2NvbXBvbmVudHMvZGlhbG9nUGF0aFNldHRpbmcudnVlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZWxlbWVudCcsICdpc0RhdGFpbFZpZXcnLCdtaW5pbWFwdG9vbGJhcicsICdsb2NhdGlvbiddLA0KICAgIGNvbXBvbmVudHM6e2RpYWxvZ1BhdGhTZXR0aW5nfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgICBhY3RpdmVVVUlEKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVVVSUQNCiAgICAgICAgfSwNCiAgICAgICAgZGV0YWlsVmlld1VVSUQoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZGV0YWlsVmlld1VVSUQNCiAgICAgICAgfSwNCiAgICAgICAgc2V0dGluZygpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5nDQogICAgICAgIH0sDQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICBhY3RpdmVVVUlEKHZhbCkgew0KICAgICAgICAgICAgdGhpcy5zZXRUb29sYmFyQ29sb3IodmFsKQ0KICAgICAgICB9LA0KICAgICAgICBkZXRhaWxWaWV3VVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yRGV0YWlsVmlldyh2YWwpDQogICAgICAgIH0sDQogICAgICAgIHNldHRpbmcodmFsdWUpIHsNCiAgICAgICAgICAgIHRoaXMuem9vbXZhbHVlID0gdmFsdWUuem9vbU1haW4NCiAgICAgICAgICAgIGlmICh0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pblRvb2x0aXApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzVG9vbHRpcCA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gdGhpcy5taW5pbWFwdG9vbGJhcg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnpvb212YWx1ZSAgPiB0aGlzLiRzZXRab29taW5MaW5lVGl0bGUgJiYgdGhpcy56b29tdmFsdWUgPCB0aGlzLiRzZXRab29taW5MaW5lU2V0dXBTdGFydCkgew0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmVUaXRsZUJhcicsIHRoaXMuZWxlbWVudC51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuem9vbXZhbHVlID4gdGhpcy4kc2V0Wm9vbWluTGluZVNldHVwU3RhcnQgJiYgdGhpcy56b29tdmFsdWUgPCB0aGlzLiRzZXRab29taW5MaW5lU2V0dXBFbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lVGl0bGVCYXInLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5pc2VsZW1lbnRPcGVuQ2xvc2UpDQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuaWFtLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2R1bGVJbnNPcGVuQ2xvc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnbW9kdWxlJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuSWFtTW9kdWxlVGFiLCB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgdGhpcy5pc0lhbU1vZHVsZU9wZW5DbG9zZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5zZXRUb29sYmFyQ29sb3IodGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlVVVJRCkNCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIG5hbWU6ICBbdmFsID0+ICh2YWwgfHwgJycpLmxlbmd0aCA+IDAgXSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBkaWFsb2dQYXRoIDogZmFsc2UsDQogICAgICAgICAgICBjb2xvclRvb2xiYXI6ICIjNkE1QUNEIiwNCiAgICAgICAgICAgIHpvb212YWx1ZTogdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZy56b29tTWFpbiwNCiAgICAgICAgICAgIGlzVG9vbHRpcDogdGhpcy5taW5pbWFwdG9vbGJhciwNCiAgICAgICAgICAgIGlzZWxlbWVudE9wZW5DbG9zZTogZmFsc2UsDQogICAgICAgICAgICBkaWFsb2dUZXh0OiBmYWxzZSwNCiAgICAgICAgICAgIGVkaXRBUlhNTDoge25hbWU6JycsIG1hY2hpbmVkZXNpZ246bnVsbCwgZW50ZXJUaW1lb3V0OicnLCBleGl0VGltZW91dDonJywgaHdlbGVtZW50OltdLCBleGVjdXRhYmxlOm51bGwsIGFkbWluOiAnJywNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25ncm91cDpbXSwgZW52aXJvbjogW10sIHByb2Nlc3NvcjogW10sIG1vZHVsZWluc3RhbnQ6IFtdLCB1Y206IFtdLCBpYW06IFtdLCBjcnlwdG86IFtdfSwNCiAgICAgICAgICAgIGVkaXRUZXh0SFdFbGVtZW50OiB7aHdlbGVtZW50OiBudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgZWRpdFRleHRGdW5HOiB7bmFtZTonJywgdHlwZTogbnVsbCwgaWQ6Jyd9LA0KICAgICAgICAgICAgZWRpdFRleHRFbnZpcm9uOiB7a2V5OiAnJywgdmFsdWU6ICcnLGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFByb2Nlc3Nvcjoge25hbWU6ICcnLCBjb3JlOiBbXSwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGVkaXRUZXh0Q29yZToge25hbWU6ICcnLCBpZENvcmU6ICcnLCBpZDogJyd9LA0KICAgICAgICAgICAgZWRpdFRleHRPUzoge25hbWU6ICcnLHJlc291cmNlOiBbXSwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGVkaXRUZXh0UmVzb3VyY2U6IHtuYW1lOiAnJywgY3B1VXNhZ2U6ICcnLCBtZW1vcnlVc2FnZTogJycsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFVDTToge25hbWU6ICcnLCBpZGVudDogJycsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dElBTToge25hbWU6ICcnLCBncmFudHM6IFtdLCBpZDogJyd9LA0KICAgICAgICAgICAgZWRpdFRleHRHcmFudDoge2dyYW50OiBudWxsLCBzZWxlY3Q6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdIV0VsZW1lbnQ6IHRydWUsDQogICAgICAgICAgICBpc0VkaXRpbmdNb2RlRGVjbGFyYXRpb25SZWY6IHRydWUsDQogICAgICAgICAgICBzZWxNYWNoaW5lRGVzaWduOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1hY2hpbmVEZXNpZ24sDQogICAgICAgICAgICBzZWxIV0VsZW1lbnQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0SFdFbGVtZW50LA0KICAgICAgICAgICAgc2VsTW9kZURlY2xhcmF0aW9uOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1vZGVEZWNsYXJhdGlvbkcsDQogICAgICAgICAgICBleGVjdXRhYmxlTGF1bmNoOiBbICdTVFJJQ1QtTU9ERScsICdNT05JVE9SLU1PREUnLCAnTk8tVFJVU1RFRC1QTEFURk9STS1TVVBQT1JUJ10sDQoNCiAgICAgICAgICAgIGlzSFdFbGVtZW50T3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVIV0VsZW1lbnRJdGVtOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdEhXRWxlbWVudDogW10sDQogICAgICAgICAgICBoZWFkZXJIV0VsZW1lbnQ6IFsNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIVyBFbGVtZW50IFJlZicsIGFsaWduOiAnc3RhcnQnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnaHdlbGVtZW50JyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRIV0l0ZW06IHsgaHdlbGVtZW50IDogbnVsbH0sDQoNCiAgICAgICAgICAgIGlzRnVuY3Rpb25Hcm91cE9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzZGVsZXRlRnVuY3Rpb25Hcm91cEl0ZW06IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0RnVuY3Rpb25JdGVtOiBbXSwNCiAgICAgICAgICAgIGhlYWRlckZ1bmN0aW9uR3JvdXA6IFsNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdOYW1lJywgYWxpZ246ICdzdGFydCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICduYW1lJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ1R5cGUnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAndHlwZScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0RnVuY3Rpb25JdGVtOiB7IG5hbWU6ICcnLCB0eXBlOiBudWxsLCBpZDogJycgfSwNCiAgICAgICAgICAgIGRlZmF1bHRmdW5jdGlvbkl0ZW06IHsgbmFtZTogJycsIHR5cGU6IG51bGwsIGlkOiAnJyB9LA0KDQogICAgICAgICAgICBpc0Vudmlyb25tZW50Vk9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzZGVsZXRlRW52aXJvbm1lbnRWOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdEVudmlyb25tZW50VjogW10sDQogICAgICAgICAgICBoZWFkZXJFbnZpcm9ubWVudFY6IFsNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdLZXknLCBhbGlnbjogJ3N0YXJ0Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2tleScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdWYWx1ZScsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICd2YWx1ZScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0RW52aXJvbkl0ZW06IHsga2V5OiAnJywgdmFsdWU6ICcnLCBpZDogJycgfSwNCiAgICAgICAgICAgIGRlZmF1bHRFbnZpcm9uSXRlbTogeyBrZXk6ICcnLCB2YWx1ZTogJycsIGlkOiAnJyB9LA0KDQogICAgICAgICAgICBwcm9jZXNzb3J0YWI6IG51bGwsDQogICAgICAgICAgICBpc1Byb2Nlc3Nvck9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzQ29yZU9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzZGVsZXRlQ29yZUl0ZW06IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0Q29yZUl0ZW06IFtdLA0KICAgICAgICAgICAgaGVhZGVyQ29yZTogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ05hbWUnLCBhbGlnbjogJ3N0YXJ0Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ25hbWUnfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdDb3JlIElEJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2lkQ29yZSd9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRDb3JlSXRlbTogeyBuYW1lOiAnJywgaWRDb3JlOiAnJywgaWQ6ICcnIH0sDQogICAgICAgICAgICBkZWZhdWx0Q29yZUl0ZW06IHsgbmFtZTogJycsIGlkQ29yZTogJycsIGlkOiAnJyB9LA0KDQogICAgICAgICAgICBpc01vZHVsZUluc09wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIE1vZHVsZUluc3RhYjogbnVsbCwNCiAgICAgICAgICAgIGlzT1NNb2R1bGVJbnNPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc1Jlc291cmNlR09wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzZGVsZXRlUmVzb3VyY2VHSXRlbTogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RNb2R1bGVJbnNJdGVtOiBbXSwNCiAgICAgICAgICAgIGhlYWRlck1vZHVsZUluczogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ1Jlc291cmNlIEdyb3VwIE5hbWUnLCB3aWR0aDonMTYwcHgnLCBhbGlnbjogJ3N0YXJ0Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ25hbWUnIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnQ1BVIFVzYWdlJywgd2lkdGg6JzEwMHB4Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2NwdVVzYWdlJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ01lbW9yeSBVc2FnZScsIHdpZHRoOicxMjBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdtZW1vcnlVc2FnZScgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0TW9kdWxlSW5zSXRlbTogeyBuYW1lOiAnJyxjcHVVc2FnZTogJycsIG1lbW9yeVVzYWdlOiAnJywgaWQ6ICcnIH0sDQogICAgICAgICAgICBkZWZhdWx0TW9kdWxlSW5zSXRlbTogeyBuYW1lOiAnJywgY3B1VXNhZ2U6ICcnLCBtZW1vcnlVc2FnZTogJycsIGlkOiAnJyB9LA0KDQogICAgICAgICAgICBpc1VDTU1vZHVsZU9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzZGVsZXRlVUNNTW9kdWxlOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdFVDTU1vZHVsZTogW10sDQogICAgICAgICAgICBoZWFkZXJVQ01Nb2R1bGU6IFsNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdOYW1lJywgYWxpZ246ICdzdGFydCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICduYW1lJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0lkZW50aWZpZXInLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnaWRlbnQnIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZWRpdFVDTU1vZHVsZUl0ZW06IHsgbmFtZTogJycsIGlkZW50OiAnJywgaWQ6ICcnIH0sDQogICAgICAgICAgICBkZWZhdWx0VUNNTW9kdWxlSXRlbTogeyBuYW1lOiAnJywgaWRlbnQ6ICcnLCBpZDogJycgfSwNCg0KICAgICAgICAgICAgSWFtTW9kdWxlVGFiOiBudWxsLA0KICAgICAgICAgICAgaXNJYW1Nb2R1bGVPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc0dyYW50UmVmT3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVHcmFudFJlZjogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RHcmFudFJlZjogW10sDQogICAgICAgICAgICBoZWFkZXJHcmFudFJlZjogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0dyYW50IFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdncmFudCcgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBzZWxlY3RHcmFudDogWydDT00tRVZFTlQtR1JBTlQnLCdDT00tRklFTEQtR1JBTlQnLCAnQ09NLU1FVEhPRC1HUkFOVCddLA0KICAgICAgICAgICAgZWRpdEdyYW50OiB7IGdyYW50OiBudWxsLCBzZWxlY3Q6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBzZWxHcmFudDp0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEV2ZW50R3JhbnQsDQogICAgICAgICAgICBpc0VkaXRpbmdHcmFudDogdHJ1ZSwNCg0KICAgICAgICAgICAgaXNDcnlwdG9PcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBDcnlwdG9UYWI6IDAsDQogICAgICAgICAgICBpZENyeXB0bzogNCwNCiAgICAgICAgICAgIHNlbGVjdFNERzogW10sDQogICAgICAgICAgICBlZGl0U0RHSXRlbTogeyBlbGU6IG51bGwsIGdpZDogbnVsbCwgaXRlbTogbnVsbH0sDQogICAgICAgICAgICBzZWxQcm92aWRlcjogWyJSRUxBVEVELVBST0NFU1MiLCAiUkVMQVRFRC1QT1JUIiwgIkNSWVBUTy1JTlNUQU5USUFUSU9OLUtFWS1TTE9UIiwgXSwNCiAgICAgICAgICAgIHNlbENlcmlmaWNhdGlvbjogWyJSRUxBVEVELVBST0NFU1MiLCAiUkVMQVRFRC1QT1JUIiwgIkNSWVBUTy1DRVJUSUZJQ0FURS1LRVktU0xPVCJdLA0KICAgICAgICAgICAgc2VsS2V5U2xvdDogWyJSRUxBVEVELVBST0NFU1MiLCAiUkVMQVRFRC1QT1JUIiwgIkNSWVBUTy1LRVktU0xPVC1DT05URU5ULUFMTE9XRUQtVVNBR0UiLCAiQ1JZUFRPLUtFWS1TTE9ULUFMTE9XRUQtTU9ESUZJQ0FUSU9OIl0sDQogICAgICAgICAgICBzZWxTREtleVNsb3Q6IFsiU0hPUlQtTkFNRSIsICJDUllQVE8tS0VZLVNMT1QtQUxHLUlEIiwgIkNSWVBUTy1LRVktU0xPVC1PQkpFQ1QtVFlQRSIsICJDUllQVE8tS0VZLVNMT1QtU0xPVC1UWVBFIiwgIkNSWVBUTy1LRVktU0xPVC1TTE9ULUNBUEFDSVRZIl0sDQogICAgICAgICAgICBzZWxTRFVzYWdlOiBbIkNSWVBUTy1LRVktU0xPVC1DT05URU5ULUFMTE9XRUQtVVNBR0UiLCAiQ1JZUFRPLUtFWS1TTE9ULUNPTlRFTlQtQUxMT1dFRC1VU0FHRSJdLA0KICAgICAgICAgICAgc2VsU0RNb2RpZmljYXRpb246IFsiQ1JZUFRPLUtFWS1TTE9ULUFMTE9XLUNPTlRFTlQtVFlQRS1DSEFOR0UiLCAiQ1JZUFRPLUtFWS1TTE9ULUVYUE9SVC1BQklMSVRZIiwgIkNSWVBUTy1LRVktU0xPVC1NQVgtTlVNQkVSLU9GLUFMTE9XRUQtVVBEQVRFUyIsICJDUllQVE8tS0VZLVNMT1QtUkVTVFJJQ1QtVVBEQVRFIl0sDQogICAgICAgICAgICBzZWxGaXJzdFNERzogWydTREctQ0FQVElPTicsICdTREcnLCAnU0QnXSwNCiAgICAgICAgICAgIHNlbEZpcnN0U0Q6IFsnU0hPUlQtTkFNRSddLA0KICAgICAgICAgICAgc2VsUmVmOiBbJ1NEWC1SRUYnLCAnU0RHLUNBUFRJT04nXSwNCiAgICAgICAgICAgIHNlbEtleVNsb3RBbGxvd2VkOiBbJ1NEJ10sDQogICAgICAgICAgICBzZWxTREdFbGVJdGVtOiBbXSwNCiAgICAgICAgICAgIHNlbFNER0dpZEl0ZW06IFtdLA0KICAgICAgICAgICAgaXNTREdJdGVtOiBmYWxzZSwNCiAgICAgICAgICAgIGlzQWRkSXRlbTogZmFsc2UsDQogICAgICAgICAgICBpc0RlbGV0SXRlbTogZmFsc2UsDQogICAgICAgICAgICBkaWFsb2dFZGl0U0RHOiBmYWxzZSwNCg0KICAgICAgICAgICAgYmVmb3JlUHJvY2VzczogJycsDQogICAgICAgICAgICBiZWZvcmVNb2R1bGU6ICcnDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQgKCkgew0KICAgICAgICBpZiAodGhpcy5taW5pbWFwdG9vbGJhciAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXAubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXAuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNb2RlRGVjbGFyYXRpb25QYXRoKGl0ZW0udHlwZSwgMCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZScsIGVuZExpbmUpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQsIGVuZExpbmUpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHN1Ym1pdERpYWxvZyhlbGVtZW50KSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucGF0aCA9IGVsZW1lbnQNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSApDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2lzaW50b0Vycm9yTGlzdCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWxlbWVudC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0VG9vbGJhckNvbG9yKHV1aWQpIA0KICAgICAgICB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQudXVpZCA9PSB1dWlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgPSAiI0ZGMTQ5MyIgDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiM2QTVBQ0QiDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFRvb2xiYXJDb2xvckRldGFpbFZpZXcoaXNkZXRhaWwpIHsNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC51dWlkID09IGlzZGV0YWlsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgPSAiI0IwRTBFNiIgDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC51dWlkID09IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVVVSUQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciAgPSAiI0ZGMTQ5MyINCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgPSAiIzZBNUFDRCINCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2hvd01hY2hpbmUgKCkgew0KICAgICAgICAgICAgdGhpcy5pc2VsZW1lbnRPcGVuQ2xvc2UgPSB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZVRpdGxlQmFyJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlKQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuaWFtLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kdWxlSW5zT3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdtb2R1bGUnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5JYW1Nb2R1bGVUYWIsIHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkLCB0aGlzLmlzSWFtTW9kdWxlT3BlbkNsb3NlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJycsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd0hXRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNIV0VsZW1lbnRPcGVuQ2xvc2UgPSB0aGlzLmlzSFdFbGVtZW50T3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICAvLyDshKDsnYQg64uk7IucIOq3uOugpOykmOyVvCDtlZjquLAg65WM66y47JeQDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBzaG93RnVuY3Rpb25Hcm91cEl0ZW0oKSB7DQogICAgICAgICAgICB0aGlzLmlzRnVuY3Rpb25Hcm91cE9wZW5DbG9zZSA9IHRoaXMuaXNGdW5jdGlvbkdyb3VwT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICAvLyDshKDsnYQg64uk7IucIOq3uOugpOykmOyVvCDtlZjquLAg65WM66y47JeQDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBzaG93RW52aXJvbm1lbnRWKCkgew0KICAgICAgICAgICAgdGhpcy5pc0Vudmlyb25tZW50Vk9wZW5DbG9zZSA9IHRoaXMuaXNFbnZpcm9ubWVudFZPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgIH0sDQogICAgICAgIHNob3dQcm9jZXNzb3JJdGVtKCkgew0KICAgICAgICAgICAgdGhpcy5pc1Byb2Nlc3Nvck9wZW5DbG9zZSA9IHRoaXMuaXNQcm9jZXNzb3JPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgIH0sDQogICAgICAgIHNob3dDb3JlKCkgew0KICAgICAgICAgICAgdGhpcy5pc0NvcmVPcGVuQ2xvc2UgPSB0aGlzLmlzQ29yZU9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd01vZHVsZUluc0l0ZW0oKSB7DQogICAgICAgICAgICB0aGlzLmlzTW9kdWxlSW5zT3BlbkNsb3NlID0gdGhpcy5pc01vZHVsZUluc09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuaWFtLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kdWxlSW5zT3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdtb2R1bGUnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5JYW1Nb2R1bGVUYWIsIHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkLCB0aGlzLmlzSWFtTW9kdWxlT3BlbkNsb3NlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJycsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd09TTW9kdWxlSW5zSXRlbSgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNPU01vZHVsZUluc09wZW5DbG9zZSA9IHRoaXMuaXNPU01vZHVsZUluc09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1Jlc291cmNlRygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNSZXNvdXJjZUdPcGVuQ2xvc2UgPSB0aGlzLmlzUmVzb3VyY2VHT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBzaG93VUNNTW9kdWxlKCkgew0KICAgICAgICAgICAgdGhpcy5pc1VDTU1vZHVsZU9wZW5DbG9zZSA9IHRoaXMuaXNVQ01Nb2R1bGVPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgIH0sDQogICAgICAgIHNob3dJYW1Nb2R1bGUoKSB7DQogICAgICAgICAgICB0aGlzLmlzSWFtTW9kdWxlT3BlbkNsb3NlID0gdGhpcy5pc0lhbU1vZHVsZU9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pYW0ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnbW9kdWxlJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuSWFtTW9kdWxlVGFiLCB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgdGhpcy5pc0lhbU1vZHVsZU9wZW5DbG9zZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2hvd0NyeXB0bygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNDcnlwdG9PcGVuQ2xvc2UgPSB0aGlzLmlzQ3J5cHRvT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICB9LA0KICAgICAgICBzaG93R3JhbnRSZWYoKSB7DQogICAgICAgICAgICB0aGlzLmlzR3JhbnRSZWZPcGVuQ2xvc2UgPSB0aGlzLmlzR3JhbnRSZWZPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUgDQogICAgICAgIH0sDQogICAgICAgIGlucHV0TWFjaGluZU5hbWUoKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRNYWNoaW5lJywge2NvbXBvOiJOYW1lIiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVsZW1lbnQubmFtZX0gKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9ICkNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnaXNpbnRvRXJyb3JMaXN0Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lbGVtZW50Lm5hbWUsIHBhdGg6dGhpcy5lbGVtZW50LnBhdGh9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja1Byb2Nlc3Nvck5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy5iZWZvcmVQcm9jZXNzID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja01vZHVsZUluc05hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy5iZWZvcmVNb2R1bGUgPSBuYW1lDQogICAgICAgIH0sDQogICAgICAgIGlucHV0UHJvY2Vzc29yTmFtZSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAnUHJvY2Vzc29yJywgbGlzdG5hbWU6IHRoaXMuZWxlbWVudC5wcm9jZXNzb3JbdGhpcy5wcm9jZXNzb3J0YWJdLm5hbWUsIGJlZm9yZW5hbWU6IHRoaXMuYmVmb3JlUHJvY2Vzc30gKQ0KICAgICAgICAgICAgdGhpcy5iZWZvcmVQcm9jZXNzID0gdGhpcy5lbGVtZW50LnByb2Nlc3Nvclt0aGlzLnByb2Nlc3NvcnRhYl0ubmFtZQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dE1vZHVsZUluc05hbWUoKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ01vZHVsZUlucycsIGxpc3RuYW1lOiB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudFt0aGlzLk1vZHVsZUluc3RhYl0ubmFtZSwgYmVmb3JlbmFtZTogdGhpcy5iZWZvcmVNb2R1bGV9ICkNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlTW9kdWxlID0gdGhpcy5lbGVtZW50Lm1vZHVsZWluc3RhbnRbdGhpcy5Nb2R1bGVJbnN0YWJdLm5hbWUNCiAgICAgICAgfSwNCg0KDQogICAgICAgIHNldE1hY2hpbmVEZXNpZ25TZWxlY3QoKSB7DQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL21hY2hpbmVkZXNpZ24nKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TWFjaGluZURlc2lnblBhdGgodGhpcy5lbGVtZW50Lm1hY2hpbmVkZXNpZ24sIDApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50Lk1hY2hpbmVEZXNpZ25lX3N0cn0gKQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FjdGl2ZS1lbGVtZW50JywgZW5kTGluZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0TWFjaGluZURlc2lnbkxpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNlbE1hY2hpbmVEZXNpZ24gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1hY2hpbmVEZXNpZ24NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIHNldE1hY2hpbmVEZXNpZ24oaXRlbSkgew0KICAgICAgICAgICAgaWYoIHRoaXMuZWxlbWVudC5tYWNoaW5lZGVzaWduICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvbWFjaGluZWRlc2lnbicpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIC8v6riw7KG06rq8IOyCreygnO2VtOyVvO2VnOuLpCB2dWV47JeQ7ISc64+EIOyCreygnO2VmOqzoCBtYWludmlld+yXkOyEnOuPhCDsgq3soJztlZjqs6AgDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL21hY2hpbmVkZXNpZ24nKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL+yDiOuhnCDstpTqsIDtlbTspIDri6QNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9tYWNoaW5lZGVzaWduJywgdGhpcy5lbGVtZW50LnV1aWQrJy9tYWNoaW5lZGVzaWduJywgaXRlbS51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5tYWNoaW5lZGVzaWduID0gaXRlbS5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhck1hY2hpbmVEZXNpZ24oKSB7DQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL21hY2hpbmVkZXNpZ24nKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm1hY2hpbmVkZXNpZ24gPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvbWFjaGluZWRlc2lnbicpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgc2V0TW9kZURlY2xhcmF0aW9uU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nTW9kZURlY2xhcmF0aW9uUmVmID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUudXVpZCwgZWxlbWVudDogY29uc3RhbnQuTW9kZURlY2xhcmF0aW9uR3JvdXBfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlLnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhY3RpdmUtZWxlbWVudCcsIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlLnV1aWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kZURlY2xhcmF0aW9uTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdNb2RlRGVjbGFyYXRpb25SZWYgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ01vZGVEZWNsYXJhdGlvblJlZiA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0TW9kZURlY2xhcmF0aW9uTGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsTW9kZURlY2xhcmF0aW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNb2RlRGVjbGFyYXRpb25HDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhck1vZGVEZWNsYXJSZWYoKSB7DQogICAgICAgICAgICB0aGlzLmlzRWRpdGluZ01vZGVEZWNsYXJhdGlvblJlZiA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBuZXdNYWNoaW5lRGVzaWduKCkgew0KICAgICAgICAgICAgLy9tYWNoaW5lIGRlc2lnbg0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFggPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFkgPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KDQogICAgICAgICAgICB2YXIgbmFtZU1hY2hpbmVEDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lm5hbWUuaW5jbHVkZXMoJ01hY2hpbmUnKSkgew0KICAgICAgICAgICAgICAgIG5hbWVNYWNoaW5lRCA9IHRoaXMuZWxlbWVudC5uYW1lLnJlcGxhY2UoL01hY2hpbmUvZ2ksICdNYWNoaW5lRGVzaWduJykNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbmFtZU1hY2hpbmVEID0gdGhpcy5lbGVtZW50Lm5hbWUgKydfTWFjaGluZURlc2lnbicNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudE1hY2hpbmVEZXNpZ24nLCB7DQogICAgICAgICAgICAgICAgbmFtZTogbmFtZU1hY2hpbmVELCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgYWNjZXNzOm51bGwsIHJlc2V0dGltZXI6ICcnLCBjb25uZWN0b3I6W10sIHNlcnZpY2VkaXNjb3ZlcjpbXSwgDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuTWFjaGluZURlc2lnbmVfc3RyKQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuTWFjaGluZXNfc3RyKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0TWFjaGluZScsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoyfSApDQogICAgICAgIH0sDQogICAgICAgIG5ld0hXRWxlbWVudCgpIHsNCiAgICAgICAgICAgIC8vSFcgRWxlbWVudA0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFggPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KICAgICAgICAgICAgY29uc3QgZWxlbWVudFkgPSBBcnJheS5mcm9tKHtsZW5ndGg6NH0sICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwMDApKQ0KDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRIV0VsZW1lbnQnLCB7IC8vY2F0ZWdvcnkg64qUIG51bGztlbTspJjslbztlZzri6QuIGNsZWFyYWJsZe2VmOuptCDqsJLsnbQgbnVsbOuzgO2VmOq4sCDrlYzrrLjsl5AgDQogICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lSFdFbGVtZW50LCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgY2F0ZWdvcnk6bnVsbCwgYXR0cmlidXRlOltdLCBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LkhXRWxlbWVudF9zdHIpDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5NYWNoaW5lc19zdHIpDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRNYWNoaW5lJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjJ9ICkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3TW9kZURlY2xhcmF0aW9uKCkgew0KICAgICAgICAgICAgLy9Nb2RlIERlY2xhcmF0aW9uDQogICAgICAgICAgICBjb25zdCBlbGVtZW50WCA9IEFycmF5LmZyb20oe2xlbmd0aDo0fSwgKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzAwMCkpDQogICAgICAgICAgICBjb25zdCBlbGVtZW50WSA9IEFycmF5LmZyb20oe2xlbmd0aDo0fSwgKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzAwMCkpDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRNb2RlRGVjbGFyYXRpb25Hcm91cCcsIHsNCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVNb2RlRGVjbGFyYXRpb25Hcm91cCwgcGF0aDogJycsDQogICAgICAgICAgICAgICAgdG9wOiBlbGVtZW50WSwgbGVmdDogZWxlbWVudFgsIHppbmRleDogMTAsIG1vZGVkZWNsYXJhdGlvbjpbe25hbWU6ICdPZmYnLCB2YWx1ZTogJyd9LHtuYW1lOiAnU3RhcnR1cCcsIFZhbHVlOiAnJ31dLCBpbml0bW9kZTonT2ZmJywgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5Nb2RlRGVjbGFyYXRpb25Hcm91cF9zdHIpDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5NYWNoaW5lc19zdHIpDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRNYWNoaW5lJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjJ9ICkNCg0KICAgICAgICB9LA0KDQogICAgICAgIGlzQ2hlY2tIV0VsZW1lbnQoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZUhXRWxlbWVudEl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVIV0VsZW1lbnRJdGVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEhXRWxlbWVudCA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVIV0VsZW1lbnRJdGVtID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldEhXRWxlbWVudCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlSFdFbGVtZW50SXRlbSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RIV0VsZW1lbnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50Lmh3ZWxlbWVudC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PSB0aGlzLmVsZW1lbnQuaHdlbGVtZW50W2ldLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJyt0aGlzLmVsZW1lbnQuaHdlbGVtZW50W2ldLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2h3ZWxlbWVudC0nK3RoaXMuZWxlbWVudC5od2VsZW1lbnRbaV0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5od2VsZW1lbnQgPSB0aGlzLmVsZW1lbnQuaHdlbGVtZW50LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdEhXRWxlbWVudC5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUhXRWxlbWVudEl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0SFdFbGVtZW50ID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5IV0VsZW1lbnQoaWR4KSB7DQogICAgICAgICAgICB0aGlzLnNlbEhXRWxlbWVudCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0SFdFbGVtZW50DQogICAgICAgICAgICBpZiAoIHRoaXMuZWxlbWVudC5od2VsZW1lbnRbaWR4XS5od2VsZW1lbnQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScrdGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRIV0VsZW1lbnRQYXRoKHRoaXMuZWxlbWVudC5od2VsZW1lbnRbaWR4XS5od2VsZW1lbnQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5od2VsZW1lbnRbaWR4XS5od2VsZW1lbnQsIHV1aWQ6IGVuZExpbmUgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0SFdFbGVtZW50KGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJyt0aGlzLmVsZW1lbnQuaHdlbGVtZW50W2lkeF0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudCA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScrdGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5od2VsZW1lbnRbaWR4XS5od2VsZW1lbnQgPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudC51dWlkKSB7DQogICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJyt0aGlzLmVsZW1lbnQuaHdlbGVtZW50W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScrdGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtpZHhdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL2h3ZWxlbWVudCcsIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaHdlbGVtZW50W2lkeF0uaHdlbGVtZW50ID0gdGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudC5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQgIT0gbnVsbCAmJiB0aGlzLmVkaXRIV0l0ZW0uaHdlbGVtZW50LnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2h3ZWxlbWVudC0nK3RoaXMuZWxlbWVudC5od2VsZW1lbnRbaWR4XS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQnLCB0aGlzLmVkaXRIV0l0ZW0uaHdlbGVtZW50LnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtpZHhdLmh3ZWxlbWVudCA9IHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQubmFtZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmNhbmNlbEhXRWxlbWVudCgpDQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbEhXRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQgPSBudWxsDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRIV0VsZW1lbnQoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQuaHdlbGVtZW50LnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0SFdJdGVtLmlkID0gbg0KDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScrbiwgdGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQnLCB0aGlzLmVkaXRIV0l0ZW0uaHdlbGVtZW50LnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudCA9IHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQubmFtZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0SFdJdGVtKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmh3ZWxlbWVudC5wdXNoKGFkZE9iaik7DQoNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsSFdFbGVtZW50KCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0SFdFbGVtZW50U2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nSFdFbGVtZW50ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0SFdJdGVtLmh3ZWxlbWVudCAhPW51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQudXVpZCwgZWxlbWVudDogY29uc3RhbnQuSFdFbGVtZW50X3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRIV0l0ZW0uaHdlbGVtZW50LnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhY3RpdmUtZWxlbWVudCcsIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQudXVpZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRIV0VsZW1lbnRMaXN0KCkNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ0hXRWxlbWVudCA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nSFdFbGVtZW50ID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRIV0VsZW1lbnRMaXN0KCkgew0KICAgICAgICAgICAgdGhpcy5zZWxIV0VsZW1lbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEhXRWxlbWVudA0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJIV0VsZW1lbnQoKSB7DQogICAgICAgICAgICB0aGlzLmlzRWRpdGluZ0hXRWxlbWVudCA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdEhXSXRlbS5od2VsZW1lbnQgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgDQogICAgICAgIGlzQ2hlY2tGdW5jdGlvbkdyb3VwKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVGdW5jdGlvbkdyb3VwSXRlbSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUZ1bmN0aW9uR3JvdXBJdGVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEZ1bmN0aW9uSXRlbSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVGdW5jdGlvbkdyb3VwSXRlbSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlRnVuY3Rpb25Hcm91cCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlRnVuY3Rpb25Hcm91cEl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0RnVuY3Rpb25JdGVtLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2ldLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScrdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaV0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK3RoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2ldLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J2Z1bmN0aW9uRycsIGRlbGV0SXRlbUxpc3Q6IHRoaXMuc2VsZWN0RGVsZWN0RnVuY3Rpb25JdGVtLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwID0gdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXAuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0RnVuY3Rpb25JdGVtLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlRnVuY3Rpb25Hcm91cEl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0RnVuY3Rpb25JdGVtID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5GdW5jdGlvbkdyb3VwKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5zZWxNb2RlRGVjbGFyYXRpb24gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1vZGVEZWNsYXJhdGlvbkcNCiAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS5uYW1lID0gdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5uYW1lDQogICAgICAgICAgICBpZiAoIHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2lkeF0udHlwZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScrdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TW9kZURlY2xhcmF0aW9uUGF0aCh0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtpZHhdLnR5cGUsIDApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlID0geyBuYW1lOiB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtpZHhdLnR5cGUsIHV1aWQ6IGVuZExpbmUgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0RnVuY3Rpb25Hcm91cChpZHgpIHsNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK3RoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2lkeF0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2Z1bmN0aW9udGFibGUtJyt0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2lkeF0udHlwZSA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSB0aGlzLmVkaXRGdW5jdGlvbkl0ZW0udHlwZS51dWlkKSB7DQogICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScrdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScrdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlJywgdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtpZHhdLnR5cGUgPSB0aGlzLmVkaXRGdW5jdGlvbkl0ZW0udHlwZS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlICE9IG51bGwgJiYgdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK3RoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwW2lkeF0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZScsIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlLnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS50eXBlID0gdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5uYW1lICE9IHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS5uYW1lKXsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAnZnVuY3Rpb25HJywgbGlzdG5hbWU6IHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS5uYW1lLCBiZWZvcmVuYW1lOiB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtpZHhdLm5hbWV9ICkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbaWR4XS5uYW1lID0gdGhpcy5lZGl0RnVuY3Rpb25JdGVtLm5hbWUNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5jYW5jZWxGdW5jdGlvbkdyb3VwKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsRnVuY3Rpb25Hcm91cCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdGZ1bmN0aW9uSXRlbSkNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZEZ1bmN0aW9uR3JvdXAoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS5pZCA9IG4NCg0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScrbiwgdGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlJywgdGhpcy5lZGl0RnVuY3Rpb25JdGVtLnR5cGUudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRGdW5jdGlvbkl0ZW0udHlwZSA9IHRoaXMuZWRpdEZ1bmN0aW9uSXRlbS50eXBlLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0RnVuY3Rpb25JdGVtKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXAucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5jYW5jZWxGdW5jdGlvbkdyb3VwKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBpc0NoZWNrRW52aXJvbm1lbnRWKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVFbnZpcm9ubWVudFYgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVFbnZpcm9ubWVudFYgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0RW52aXJvbm1lbnRWID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUVudmlyb25tZW50ViA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlRW52aXJvbm1lbnRWKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVFbnZpcm9ubWVudFYgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lbnZpcm9uID0gdGhpcy5lbGVtZW50LmVudmlyb24uZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0RW52aXJvbm1lbnRWLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlRW52aXJvbm1lbnRWID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEVudmlyb25tZW50ViA9IFtdDQogICAgICAgICAgICB9IA0KICAgICAgICB9LA0KICAgICAgICBvcGVuRW52aXJvbm1lbnRWKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0RW52aXJvbkl0ZW0ua2V5ID0gdGhpcy5lbGVtZW50LmVudmlyb25baWR4XS5rZXkNCiAgICAgICAgICAgIHRoaXMuZWRpdEVudmlyb25JdGVtLnZhbHVlID0gdGhpcy5lbGVtZW50LmVudmlyb25baWR4XS52YWx1ZQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0RW52aXJvbm1lbnRWKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmVudmlyb25baWR4XS5rZXkgPSB0aGlzLmVkaXRFbnZpcm9uSXRlbS5rZXkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lbnZpcm9uW2lkeF0udmFsdWUgPSB0aGlzLmVkaXRFbnZpcm9uSXRlbS52YWx1ZQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxFbnZpcm9ubWVudFYoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxFbnZpcm9ubWVudFYoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRFbnZpcm9uSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEVudmlyb25JdGVtKQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkRW52aXJvbm1lbnRWKCkgew0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LmVudmlyb24uc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRFbnZpcm9uSXRlbS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0RW52aXJvbkl0ZW0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuZW52aXJvbi5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLmNhbmNlbEVudmlyb25tZW50VigpDQogICAgICAgIH0sDQoNCiAgICAgICAgY2xpY2tQcm9jZXNzb3J0YWIoKSB7DQogICAgICAgICAgICB0aGlzLmlzZGVsZXRlQ29yZUl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RDb3JlSXRlbSA9IFtdDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVByb2Nlc3NvcihpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTonUHJvY2Vzc29yJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJOYW1lOiB0aGlzLmVsZW1lbnQucHJvY2Vzc29yW2lkeF0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb2Nlc3Nvci5zcGxpY2UoaWR4LCAxKQ0KICAgICAgICAgICAgdGhpcy5jbGlja1Byb2Nlc3NvcnRhYigpDQogICAgICAgIH0sDQogICAgICAgIGFkZFByb2Nlc3NvcigpIHsNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCBjb3JlOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnUHJvY2Vzc29yX18nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5wcm9jZXNzb3Iuc29tZShlbGUgPT4gZWxlLm5hbWUgPT09IGFkZE9iai5uYW1lKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYWRkT2JqLmlkID0gbg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb2Nlc3Nvci5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMucHJvY2Vzc29ydGFiID0gdGhpcy5lbGVtZW50LnByb2Nlc3Nvci5sZW5ndGgtMQ0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUNvcmVJdGVtID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0Q29yZUl0ZW0gPSBbXQ0KICAgICAgICB9LA0KICAgICAgICBpc0NoZWNrQ29yZSgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlQ29yZUl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVDb3JlSXRlbSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RDb3JlSXRlbSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVDb3JlSXRlbSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlQ29yZSgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlQ29yZUl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncHJvQ29yZScsIGRlbGV0SXRlbUxpc3Q6IHRoaXMuc2VsZWN0RGVsZWN0Q29yZUl0ZW0sIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwgdGFibmFtZTogdGhpcy5lbGVtZW50LnByb2Nlc3Nvclt0aGlzLnByb2Nlc3NvcnRhYl0ubmFtZX0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJvY2Vzc29yW3RoaXMucHJvY2Vzc29ydGFiXS5jb3JlID0gdGhpcy5lbGVtZW50LnByb2Nlc3Nvclt0aGlzLnByb2Nlc3NvcnRhYl0uY29yZS5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0Q29yZUl0ZW0uaW5kZXhPZihpdGVtKSA8IDAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlQ29yZUl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0Q29yZUl0ZW0gPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBvcGVuQ29yZShpZHgsIGNvcmUpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdENvcmVJdGVtLm5hbWUgPSBjb3JlW2lkeF0ubmFtZQ0KICAgICAgICAgICAgdGhpcy5lZGl0Q29yZUl0ZW0uaWRDb3JlID0gY29yZVtpZHhdLmlkQ29yZQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0Q29yZShpZHgsY29yZSkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdENvcmVJdGVtLm5hbWUgIT0gY29yZVtpZHhdLm5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAncHJvQ29yZScsIGxpc3RuYW1lOiB0aGlzLmVkaXRDb3JlSXRlbS5uYW1lLCB0YWJuYW1lOiB0aGlzLmVsZW1lbnQucHJvY2Vzc29yW3RoaXMucHJvY2Vzc29ydGFiXS5uYW1lLCBiZWZvcmVuYW1lOiBjb3JlW2lkeF0ubmFtZX0gKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29yZVtpZHhdLm5hbWUgPSB0aGlzLmVkaXRDb3JlSXRlbS5uYW1lDQogICAgICAgICAgICBjb3JlW2lkeF0uaWRDb3JlID0gdGhpcy5lZGl0Q29yZUl0ZW0uaWRDb3JlDQogICAgICAgICAgICB0aGlzLmNhbmNlbENvcmUoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxDb3JlKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0Q29yZUl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRDb3JlSXRlbSkNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZENvcmUoaWR4KSB7DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHJvY2Vzc29yW2lkeF0uY29yZS5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdENvcmVJdGVtLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRDb3JlSXRlbSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcm9jZXNzb3JbaWR4XS5jb3JlLnB1c2goYWRkT2JqKQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxDb3JlKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBhZGRNb2R1bGVJbnMoKSB7DQogICAgICAgICAgICBjb25zdCBlZGl0SXRlbSA9IHtuYW1lOiAnJywgcmVzb3VyY2U6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBuZXcgT2JqZWN0KGVkaXRJdGVtKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQoNCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBhZGRPYmoubmFtZSA9ICdNb2R1bGUgSW5zdGFuY2VfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudC5zb21lKGVsZSA9PiBlbGUubmFtZSA9PT0gYWRkT2JqLm5hbWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhZGRPYmouaWQgPSBuDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudC5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuTW9kdWxlSW5zdGFiID0gdGhpcy5lbGVtZW50Lm1vZHVsZWluc3RhbnQubGVuZ3RoLTENCiAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSZXNvdXJjZUdJdGVtID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0TW9kdWxlSW5zSXRlbSA9IFtdDQogICAgICAgIH0sDQogICAgICAgIGNsaWNrTW9kdWxlSW5zdGFiKCkgew0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVJlc291cmNlR0l0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RNb2R1bGVJbnNJdGVtID0gW10NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlTW9kdWxlSW5zKGlkeCkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidNb2R1bGVJbnMnLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IHRoaXMuZWxlbWVudC5tb2R1bGVpbnN0YW50W2lkeF0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5tb2R1bGVpbnN0YW50LnNwbGljZShpZHgsIDEpDQogICAgICAgIH0sDQogICAgICAgIGlzQ2hlY2tSZXNvdXJjZUcoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVJlc291cmNlR0l0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSZXNvdXJjZUdJdGVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdE1vZHVsZUluc0l0ZW0gPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUmVzb3VyY2VHSXRlbSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUmVzb3VyY2VHKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVSZXNvdXJjZUdJdGVtID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudFt0aGlzLk1vZHVsZUluc3RhYl0ucmVzb3VyY2UgPSB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudFt0aGlzLk1vZHVsZUluc3RhYl0ucmVzb3VyY2UuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdE1vZHVsZUluc0l0ZW0uaW5kZXhPZihpdGVtKSA8IDAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUmVzb3VyY2VHSXRlbSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RNb2R1bGVJbnNJdGVtID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5SZXNvdXJjZUcoaWR4LCByZXNvdXJjZSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlSW5zSXRlbS5uYW1lID0gcmVzb3VyY2VbaWR4XS5uYW1lDQogICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtLmNwdVVzYWdlID0gcmVzb3VyY2VbaWR4XS5jcHVVc2FnZQ0KICAgICAgICAgICAgdGhpcy5lZGl0TW9kdWxlSW5zSXRlbS5tZW1vcnlVc2FnZSA9IHJlc291cmNlW2lkeF0ubWVtb3J5VXNhZ2UNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFJlc291cmNlRyhpZHgsIHJlc291cmNlKSB7DQogICAgICAgICAgICByZXNvdXJjZVtpZHhdLm5hbWUgPSB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtLm5hbWUNCiAgICAgICAgICAgIHJlc291cmNlW2lkeF0uY3B1VXNhZ2UgPSB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtLmNwdVVzYWdlDQogICAgICAgICAgICByZXNvdXJjZVtpZHhdLm1lbW9yeVVzYWdlID0gdGhpcy5lZGl0TW9kdWxlSW5zSXRlbS5tZW1vcnlVc2FnZQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxSZXNvdXJjZUcoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxSZXNvdXJjZUcoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0TW9kdWxlSW5zSXRlbSkNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFJlc291cmNlRyhpZHgpIHsNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5tb2R1bGVpbnN0YW50W2lkeF0ucmVzb3VyY2Uuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRNb2R1bGVJbnNJdGVtKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm1vZHVsZWluc3RhbnRbaWR4XS5yZXNvdXJjZS5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVzb3VyY2VHKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBpc0NoZWNrVUNNTW9kdWxlKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVVQ01Nb2R1bGUgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVVQ01Nb2R1bGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0VUNNTW9kdWxlID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVVDTU1vZHVsZSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlVUNNTW9kdWxlKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVVQ01Nb2R1bGUgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTondWNtJywgZGVsZXRJdGVtTGlzdDogdGhpcy5zZWxlY3REZWxlY3RVQ01Nb2R1bGUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVjbSA9IHRoaXMuZWxlbWVudC51Y20uZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0VUNNTW9kdWxlLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlVUNNTW9kdWxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFVDTU1vZHVsZSA9IFtdDQogICAgICAgICAgICB9IA0KICAgICAgICB9LA0KICAgICAgICBvcGVuVUNNTW9kdWxlKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VUNNTW9kdWxlSXRlbS5uYW1lID0gdGhpcy5lbGVtZW50LnVjbVtpZHhdLm5hbWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFVDTU1vZHVsZUl0ZW0uaWRlbnQgPSB0aGlzLmVsZW1lbnQudWNtW2lkeF0uaWRlbnQNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFVDTU1vZHVsZShpZHgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQudWNtW2lkeF0ubmFtZSAhPSB0aGlzLmVkaXRVQ01Nb2R1bGVJdGVtLm5hbWUpew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU5hbWU6ICd1Y20nLCBsaXN0bmFtZTogdGhpcy5lZGl0VUNNTW9kdWxlSXRlbS5uYW1lLCBiZWZvcmVuYW1lOiB0aGlzLmVsZW1lbnQudWNtW2lkeF0ubmFtZSB9ICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC51Y21baWR4XS5uYW1lID0gdGhpcy5lZGl0VUNNTW9kdWxlSXRlbS5uYW1lDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQudWNtW2lkeF0uaWRlbnQgPSB0aGlzLmVkaXRVQ01Nb2R1bGVJdGVtLmlkZW50DQogICAgICAgICAgICB0aGlzLmNhbmNlbFVDTU1vZHVsZSgpDQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbFVDTU1vZHVsZSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFVDTU1vZHVsZUl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRVQ01Nb2R1bGVJdGVtKQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkVUNNTW9kdWxlKCkgew0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnVjbS5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFVDTU1vZHVsZUl0ZW0uaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFVDTU1vZHVsZUl0ZW0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQudWNtLnB1c2goYWRkT2JqKTsNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsVUNNTW9kdWxlKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBhZGRJYW1Nb2R1bGUoKSB7DQogICAgICAgICAgICBjb25zdCBlZGl0SXRlbSA9IHtuYW1lOiAnJywgZ3JhbnRzOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnSUFNX0luc3RhbnRpYXRpb25fJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQuaWFtLnNvbWUoZWxlID0+IGVsZS5uYW1lID09PSBhZGRPYmoubmFtZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFkZE9iai5pZCA9IG4NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pYW0ucHVzaChhZGRPYmopDQogICAgICAgICAgICB0aGlzLklhbU1vZHVsZVRhYiA9IHRoaXMuZWxlbWVudC5pYW0ubGVuZ3RoLTENCiAgICAgICAgICAgIGlmKHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnbW9kdWxlJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuSWFtTW9kdWxlVGFiLCB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgZmFsc2UpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNsaWNrSWFtTW9kdWxldGFiKCkgew0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUdyYW50UmVmID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0R3JhbnRSZWYgPSBbXQ0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VJYW1Nb2R1bGVUYWIoKSB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuaWFtLmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxICYmIHRoaXMuSWFtTW9kdWxlVGFiICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge0V2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnbW9kdWxlJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuSWFtTW9kdWxlVGFiLCB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgdHJ1ZSl9LCAzMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVJYW1Nb2R1bGUoaWR4KSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J2lhbScsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogdGhpcy5lbGVtZW50LmlhbVtpZHhdLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQuaWFtW2lkeF0uZ3JhbnRzLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUNvbiA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJyt0aGlzLmVsZW1lbnQuaWFtW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuaWFtW2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYoZW5kTGluZUNvbiAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaWFtTS0nK3RoaXMuZWxlbWVudC5pYW1baV0uaWQrJy0nK3RoaXMuZWxlbWVudC5pYW1baWR4XS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWFtLnNwbGljZShpZHgsIDEpDQogICAgICAgIH0sDQogICAgICAgIGlzQ2hlY2tHcmFudFJlZigpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlR3JhbnRSZWYgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVHcmFudFJlZiA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RHcmFudFJlZiA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVHcmFudFJlZiA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlR3JhbnRSZWYoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZUdyYW50UmVmID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEdyYW50UmVmLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHMubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2ldLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzID0gdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdEdyYW50UmVmLmluZGV4T2YoaXRlbSkgPCAwIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlR3JhbnRSZWYgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0R3JhbnRSZWYgPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlbkdyYW50UmVmKGlkeCkgeyANCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gbnVsbA0KICAgICAgICAgICAgdGhpcy5lZGl0R3JhbnQuc2VsZWN0ID0gdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uc2VsZWN0DQogICAgICAgICAgICBpZiAodGhpcy5lZGl0R3JhbnQuc2VsZWN0ID09ICJDT00tRVZFTlQtR1JBTlQiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxHcmFudCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RXZlbnRHcmFudA0KDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50c1tpZHhdLmdyYW50ICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RXZlbnRQYXRoKHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50c1tpZHhdLmdyYW50KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50LmdyYW50ID0geyBuYW1lOiB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCwgdXVpZDogZW5kTGluZX0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLUZJRUxELUdSQU5UIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsR3JhbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkR3JhbnQNCg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkUGF0aCh0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRHcmFudC5ncmFudCA9IHsgbmFtZTogdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uZ3JhbnQsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRHcmFudC5zZWxlY3QgPT0gIkNPTS1NRVRIT0QtR1JBTlQiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxHcmFudCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TWV0aG9kR3JhbnQNCg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1ldGhvZFBhdGgodGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uZ3JhbnQpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0R3JhbnQuZ3JhbnQgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50c1tpZHhdLmdyYW50LCB1dWlkOiBlbmRMaW5lfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZWRpdEdyYW50UmVmSXRlbShpZHgpIHsNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaWFtTS0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50c1tpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCkNCiAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRHcmFudC5ncmFudCA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaWFtTS0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50c1tpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkKSB7DQogICAgICAgICAgICAgICAgLy/quLDsobTqurwg7IKt7KCc7ZW07JW87ZWc64ukIHZ1ZXjsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIG1haW52aWV37JeQ7ISc64+EIOyCreygnO2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvZ3JhbmR0YWItJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgdGhpcy5lZGl0R3JhbnQuZ3JhbnQudXVpZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5ncmFudCA9IHRoaXMuZWRpdEdyYW50LmdyYW50Lm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0R3JhbnQuZ3JhbnQgIT0gbnVsbCAmJiB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL2dyYW5kdGFiLScrdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uaWQsIHRoaXMuZWRpdEdyYW50LmdyYW50LnV1aWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlhbVt0aGlzLklhbU1vZHVsZVRhYl0uZ3JhbnRzW2lkeF0uZ3JhbnQgPSB0aGlzLmVkaXRHcmFudC5ncmFudC5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5ncmFudHNbaWR4XS5zZWxlY3QgPSB0aGlzLmVkaXRHcmFudC5zZWxlY3QNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsR3JhbnRSZWYoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxHcmFudFJlZigpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50ID0ge2dyYW50OiBudWxsLCBzZWxlY3Q6IG51bGx9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRHcmFudFJlZigpIHsNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50cy5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50LmlkID0gbg0KDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0R3JhbnQuZ3JhbnQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJytuKyctJyt0aGlzLmVsZW1lbnQuaWFtW3RoaXMuSWFtTW9kdWxlVGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ncmFuZHRhYi0nK3RoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmlkLCB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50LmdyYW50ID0gdGhpcy5lZGl0R3JhbnQuZ3JhbnQubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRHcmFudCkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pYW1bdGhpcy5JYW1Nb2R1bGVUYWJdLmdyYW50cy5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLmNhbmNlbEdyYW50UmVmKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJHcmFudFNlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50LmdyYW50ID0gbnVsbA0KICAgICAgICAgICAgdGhpcy5lZGl0R3JhbnQuc2VsZWN0ID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBzZXRHcmFudFNlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ0dyYW50ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0R3JhbnQuZ3JhbnQgIT0gbnVsbCAmJiB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLUVWRU5ULUdSQU5UIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdEdyYW50LmdyYW50LnV1aWQsIGVsZW1lbnQ6IGNvbnN0YW50LkNvbUV2ZW50R3JhbnRfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmICh0aGlzLmVkaXRHcmFudC5zZWxlY3QgPT0gIkNPTS1GSUVMRC1HUkFOVCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkLCBlbGVtZW50OiBjb25zdGFudC5Db21GaWVsZEdyYW50X3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLU1FVEhPRC1HUkFOVCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkLCBlbGVtZW50OiBjb25zdGFudC5Db21NZXRob2RHcmFudF9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCB0aGlzLmVkaXRHcmFudC5ncmFudC51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldEdyYW50TGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdHcmFudCA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nR3JhbnQgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldEdyYW50TGlzdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRHcmFudC5zZWxlY3QgPT0gIkNPTS1FVkVOVC1HUkFOVCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbEdyYW50ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRFdmVudEdyYW50DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLUZJRUxELUdSQU5UIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsR3JhbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkR3JhbnQNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0R3JhbnQuc2VsZWN0ID09ICJDT00tTUVUSE9ELUdSQU5UIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsR3JhbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1ldGhvZEdyYW50DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhckdyYW50KCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdHcmFudCA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdEdyYW50LmdyYW50ID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBuZXdHcmFudCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRYID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRZID0gQXJyYXkuZnJvbSh7bGVuZ3RoOjR9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMDAwKSkNCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLUVWRU5ULUdSQU5UIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudEV2ZW50RycsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lRXZlbnRHLCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdG9wOiBlbGVtZW50WSwgbGVmdDogZWxlbWVudFgsIHppbmRleDogMTAsIGljb246Im1kaS1jbGlwYm9hcmQtb3V0bGluZSIsIHZhbGlkYXRpb246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBldmVudEQ6IG51bGwsIHByb3ZpZGU6IG51bGwsDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5Db21FdmVudEdyYW50X3N0cikNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0R3JhbnQuc2VsZWN0ID09ICJDT00tRklFTEQtR1JBTlQiKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRFbGVtZW50RmllbGRHJywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVGaWVsZEcsIHBhdGg6ICcnLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRZLCBsZWZ0OiBlbGVtZW50WCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIGZpZWxkRDogbnVsbCwgcHJvdmlkZTogbnVsbCwgcm9sZTogbnVsbA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuQ29tRmllbGRHcmFudF9zdHIpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdEdyYW50LnNlbGVjdCA9PSAiQ09NLU1FVEhPRC1HUkFOVCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRNZXRob2RHJywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVNZXRob2RHLCBwYXRoOiAnJywNCiAgICAgICAgICAgICAgICAgICAgdG9wOiBlbGVtZW50WSwgbGVmdDogZWxlbWVudFgsIHppbmRleDogMTAsIGljb246Im1kaS1jbGlwYm9hcmQtb3V0bGluZSIsIHZhbGlkYXRpb246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBtZXRob2REOiBudWxsLCBwcm92aWRlOiBudWxsLA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuQ29tTWV0aG9kR3JhbnRfc3RyKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuSUFNX3N0cikNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBsYXRmb3JtX3N0cikNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdE1hY2hpbmUnLCB7Y29tcG86InoiLCB1dWlkOnRoaXMuZWxlbWVudC51dWlkLCB6aW5kZXg6Mn0gKQ0KICAgICAgICB9LA0KDQogICAgICAgIGFkZENyeXB0bygpIHsNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCBpZDogJycsIHNkZ3M6IFtdfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnY3J5cHRvXycgKyBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LmNyeXB0by5zb21lKGVsZSA9PiBlbGUubmFtZSA9PT0gYWRkT2JqLm5hbWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhZGRPYmouaWQgPSBuDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY3J5cHRvLnB1c2goYWRkT2JqKQ0KICAgICAgICAgICAgdGhpcy5DcnlwdG9UYWIgPSB0aGlzLmVsZW1lbnQuY3J5cHRvLmxlbmd0aC0xDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY3J5cHRvW3RoaXMuQ3J5cHRvVGFiXS5zZGdzLnB1c2goew0KICAgICAgICAgICAgICAgIG5hbWUgOiAnU0RHUycsDQogICAgICAgICAgICAgICAgaWQgOiAxLA0KICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbDQogICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnU0RHIEdJRD0iQ1JZUFRPLUlOU1RBTlRJQVRJT04tUFJPVklERVIiJywgaWQgOiAyLCBlbGU6J1NERycsIGdpZDonQ1JZUFRPLUlOU1RBTlRJQVRJT04tUFJPVklERVInLCBpdGVtOiAnJywgY2hpbGRyZW46IFtdfSwNCiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdTREcgR0lEPSJDUllQVE8tSU5TVEFOVElBVElPTi1DRVJUSUZJQ0FURSInLCBpZCA6IDMsIGVsZTonU0RHJywgZ2lkOidDUllQVE8tSU5TVEFOVElBVElPTi1DRVJUSUZJQ0FURScsIGl0ZW06ICcnLCBjaGlsZHJlbjogW119DQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlQ3J5cHRvVGFiKCkge30sDQogICAgICAgIGNsaWNrQ3J5cHRvVGFiKCkge30sDQogICAgICAgIGRlbGV0ZUNyeXB0byhpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jcnlwdG8uc3BsaWNlKGlkeCwgMSkNCiAgICAgICAgfSwNCiAgICAgICAgY2xvc2RTREdTKCkgew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dFZGl0U0RHID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuaW5pdFNER1MoKQ0KICAgICAgICB9LA0KICAgICAgICBpbml0U0RHUygpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFNER1swXSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0RlbGV0SXRlbSA9IGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmlzU0RHSXRlbSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmlzQWRkSXRlbSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSBbXQ0KICAgICAgICAgICAgdGhpcy5lZGl0U0RHSXRlbSA9IHsgZWxlOiBudWxsLCBnaWQ6IG51bGwsIGl0ZW06ICcnfQ0KICAgICAgICB9LA0KICAgICAgICBhZGRTREdJdGVtKCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coKQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNER0l0ZW0uZWxlID09ICdTREcnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTREdbMF0uY2hpbGRyZW4ucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiB0aGlzLmVkaXRTREdJdGVtLmVsZSsnIEdJRD0nK3RoaXMuZWRpdFNER0l0ZW0uZ2lkLA0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlOiB0aGlzLmVkaXRTREdJdGVtLmVsZSwgZ2lkOiB0aGlzLmVkaXRTREdJdGVtLmdpZCwgaXRlbTogdGhpcy5lZGl0U0RHSXRlbS5pdGVtLCBpZCA6IHRoaXMuaWRDcnlwdG8rKywgY2hpbGRyZW46IFtdfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0U0RHSXRlbS5lbGUgPT0gJ1NEJyl7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTREdbMF0uY2hpbGRyZW4ucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiB0aGlzLmVkaXRTREdJdGVtLmVsZSsnIEdJRD0nK3RoaXMuZWRpdFNER0l0ZW0uZ2lkICsgJyAnKyB0aGlzLmVkaXRTREdJdGVtLml0ZW0sDQogICAgICAgICAgICAgICAgICAgICAgICBlbGU6IHRoaXMuZWRpdFNER0l0ZW0uZWxlLCBnaWQ6IHRoaXMuZWRpdFNER0l0ZW0uZ2lkLCBpdGVtOiB0aGlzLmVkaXRTREdJdGVtLml0ZW0sIGlkIDogdGhpcy5pZENyeXB0bysrLCB9DQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSA9PSAnU0RYLVJFRicpew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ1JFTEFURUQtUFJPQ0VTUycpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0U0RHSXRlbS5pdGVtID0gJ1BST0NFU1MnDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ1JFTEFURUQtUE9SVCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0U0RHSXRlbS5pdGVtID0gJ1ItUE9SVC1QUk9UT1RZUEUnDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1DRVJUSUZJQ0FURS1LRVktU0xPVCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0U0RHSXRlbS5pdGVtID0gJ1NERy1DQVBUSU9OJw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFNER1swXS5jaGlsZHJlbi5wdXNoKA0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IHRoaXMuZWRpdFNER0l0ZW0uZWxlKycgJysgdGhpcy5lZGl0U0RHSXRlbS5naWQsDQogICAgICAgICAgICAgICAgICAgICAgICBlbGU6IHRoaXMuZWRpdFNER0l0ZW0uZWxlLCBnaWQ6IHRoaXMuZWRpdFNER0l0ZW0uZ2lkLCBpdGVtOiB0aGlzLmVkaXRTREdJdGVtLml0ZW0sIGlkIDogdGhpcy5pZENyeXB0bysrLCB9DQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSA9PSAnU0RHLUNBUFRJT04nKXsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFNER1swXS5jaGlsZHJlbi5wdXNoKA0KICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IHRoaXMuZWRpdFNER0l0ZW0uZWxlKycgJysgdGhpcy5lZGl0U0RHSXRlbS5pdGVtLA0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlOiB0aGlzLmVkaXRTREdJdGVtLmVsZSwgZ2lkOiB0aGlzLmVkaXRTREdJdGVtLmdpZCwgaXRlbTogdGhpcy5lZGl0U0RHSXRlbS5pdGVtLCBpZCA6IHRoaXMuaWRDcnlwdG8rKywgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuaW5pdFNER1MoKQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVTREdJdGVtKCkgew0KICAgICAgICAgICAgdGhpcy5pbml0U0RHUygpDQogICAgICAgICAgICB0aGlzLmRlbGV0ZU5vZGVGcm9tVHJlZSh0aGlzLmVsZW1lbnQuY3J5cHRvW3RoaXMuQ3J5cHRvVGFiXS5zZGdzWzBdLCB0aGlzLnNlbGVjdFNER1swXS5pZCkgICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuc2VsZWN0U0RHWzBdID0gW10NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlTm9kZUZyb21UcmVlKG5vZGUsIG5vZGVJZCkgew0KICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSBub2RlLmNoaWxkcmVuLmZpbHRlcihmID0+IGYuaWQgPT0gbm9kZUlkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkICYmIGZpbHRlcmVkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuLmZpbHRlcihmID0+IGYuaWQgIT0gbm9kZUlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU5vZGVGcm9tVHJlZShub2RlLmNoaWxkcmVuW2ldLCBub2RlSWQsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFjdGl2ZUVsZW1lbnQobm9kZSkgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RTREcgPSBub2RlDQogICAgICAgICAgICB0aGlzLnNlbFNER0VsZUl0ZW0gPSBbXQ0KICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0U0RHWzBdID09IG51bGwgfHwgdGhpcy5zZWxlY3RTREdbMF0ubmFtZSA9PSAnU0RHUycpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0VsZUl0ZW0gPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1JTlNUQU5USUFUSU9OLVBST1ZJREVSJyB8fCANCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tQ0VSVElGSUNBVEUnIHx8IA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RTREdbMF0uZ2lkID09ICdDUllQVE8tSU5TVEFOVElBVElPTi1LRVktU0xPVCcpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0VsZUl0ZW0gPSB0aGlzLnNlbEZpcnN0U0RHDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnUkVMQVRFRC1QUk9DRVNTJyB8fCB0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ1JFTEFURUQtUE9SVCcgDQogICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1DRVJUSUZJQ0FURS1LRVktU0xPVCcpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0VsZUl0ZW0gPSB0aGlzLnNlbFJlZg0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1LRVktU0xPVC1DT05URU5ULUFMTE9XRUQtVVNBR0UnIHx8DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1LRVktU0xPVC1BTExPV0VELU1PRElGSUNBVElPTicpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0VsZUl0ZW0gPSB0aGlzLnNlbEtleVNsb3RBbGxvd2VkDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1JTlNUQU5USUFUSU9OLVBST1ZJREVSJyB8fCANCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1JTlNUQU5USUFUSU9OLUNFUlRJRklDQVRFJyB8fA0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0U0RHWzBdLm5hbWUgPT0gJ1NER1MnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0RlbGV0SXRlbSA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNEZWxldEl0ZW0gPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmlzU0RHSXRlbSA9IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIGlucHV0U0RHRWxlKCkgew0KICAgICAgICAgICAgdGhpcy5zZWxTREdHaWRJdGVtID0gW10NCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSAhPSBudWxsICYmIHRoaXMuc2VsZWN0U0RHWzBdLmVsZSA9PSAnU0RHJykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSA9PSAnU0QnKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1JTlNUQU5USUFUSU9OLVBST1ZJREVSJyB8fCANCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tQ0VSVElGSUNBVEUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxTREdHaWRJdGVtID0gdGhpcy5zZWxGaXJzdFNEDQogICAgICAgICAgICAgICAgICAgIH0gIGVsc2UgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tS0VZLVNMT1QnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSB0aGlzLnNlbFNES2V5U2xvdA0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUtFWS1TTE9ULUNPTlRFTlQtQUxMT1dFRC1VU0FHRScpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxTREdHaWRJdGVtID0gdGhpcy5zZWxTRFVzYWdlDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RTREdbMF0uZ2lkID09ICdDUllQVE8tS0VZLVNMT1QtQUxMT1dFRC1NT0RJRklDQVRJT04nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSB0aGlzLnNlbFNETW9kaWZpY2F0aW9uDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFNER0l0ZW0uZWxlID09ICdTREcnKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1JTlNUQU5USUFUSU9OLVBST1ZJREVSJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxTREdHaWRJdGVtID0gdGhpcy5zZWxQcm92aWRlcg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tQ0VSVElGSUNBVEUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSB0aGlzLnNlbENlcmlmaWNhdGlvbg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tS0VZLVNMT1QnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSB0aGlzLnNlbEtleVNsb3QNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFNER1swXS5naWQgPT0gJ0NSWVBUTy1DRVJUSUZJQ0FURS1LRVktU0xPVCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsU0RHR2lkSXRlbSA9IHRoaXMuc2VsU0RNb2RpZmljYXRpb24NCiAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFNER0l0ZW0uZWxlID09ICdTREctQ0FQVElPTicpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1NER0l0ZW0gPSB0cnVlDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSA9PSAnU0RYLVJFRicpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0U0RHWzBdLmdpZCA9PSAnUkVMQVRFRC1QUk9DRVNTJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxTREdHaWRJdGVtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQcm9jZXNzU0RHDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RTREdbMF0uZ2lkID09ICdSRUxBVEVELVBPUlQnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFJQb3J0UHJvdG90eXBlU0RHDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RTREdbMF0uZ2lkID09ICdDUllQVE8tQ0VSVElGSUNBVEUtS0VZLVNMT1QnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY3J5cHRvW3RoaXMuQ3J5cHRvVGFiXS5zZGdzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNyeXB0b1t0aGlzLkNyeXB0b1RhYl0uc2Rncy5mb3JFYWNoKHNkZyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RnLmNoaWxkcmVuLmZvckVhY2goc2RnQyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZGdDLmdpZCA9PSAnQ1JZUFRPLUlOU1RBTlRJQVRJT04tUFJPVklERVInKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZGdDLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZWxlID09ICdTREcnICYmIGl0ZW0uZ2lkID09ICdDUllQVE8tSU5TVEFOVElBVElPTi1LRVktU0xPVCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKHNsb3QgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsb3QuZWxlID09ICdTREctQ0FQVElPTicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0ucHVzaChzbG90Lml0ZW0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dFNER0dpZCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTREdJdGVtLmVsZSA9PSAnU0RHJykgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNTREdJdGVtID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0U0RHSXRlbS5naWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNTREdJdGVtID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0U0RHSXRlbS5naWQgIT0gbnVsbCANCiAgICAgICAgICAgICAgICAmJiAodGhpcy5lZGl0U0RHSXRlbS5lbGUgPT0gJ1NERycgIHx8IHRoaXMuZWRpdFNER0l0ZW0uZWxlID09ICdTRFgtUkVGJykpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FkZEl0ZW0gPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGlucHV0U0RHSXRlbShzdHIpIHsNCiAgICAgICAgICAgIGlmIChzdHIgIT0gJycpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0U0RHSXRlbS5lbGUgPT0gJ1NEJyB8fCAgdGhpcy5lZGl0U0RHSXRlbS5lbGUgPT0gJ1NERy1DQVBUSU9OJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWRkSXRlbSA9IHRydWUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNBZGRJdGVtID0gZmFsc2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJTREdFbGUoKSB7DQogICAgICAgICAgICB0aGlzLmlzU0RHSXRlbSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbFNER0dpZEl0ZW0gPSBbXQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhclNER0dpZCgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNTREdJdGVtID0gZmFsc2UNCiAgICAgICAgfSwNCg0KICAgICAgICBzZXRhY3RpdmVVVUlEKCkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR1dWlkJywge3V1aWQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRNYWNoaW5lJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjEwfSApDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZUxpbmUoZmluZUxpbmUpIHsNCiAgICAgICAgICAgIHZhciBsaW5lbnVtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRjb25uZWN0TGluZU51bShmaW5lTGluZSkNCiAgICAgICAgICAgIGlmIChsaW5lbnVtICE9IC0xKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RlbGV0ZS1saW5lJywgbGluZW51bSkNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0Q29ubmVjdGlvbmxpbmUnLCB7c3RhcnRudW06IGxpbmVudW19ICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbmV3TGluZShzdGFydExpbmUsIGRyYXdMaW5lLCBlbmRMaW5lKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENvbm5lY3Rpb25saW5lJywge3N0YXJ0OiBzdGFydExpbmUsIGVuZDogZW5kTGluZX0gKQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgZHJhd0xpbmUsIGVuZExpbmUpDQogICAgICAgIH0sDQoNCiAgICAgICAgdmlld0FSWE1MKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwubmFtZSA9IHRoaXMuZWxlbWVudC5uYW1lDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5tYWNoaW5lZGVzaWduID0gdGhpcy5lbGVtZW50Lm1hY2hpbmVkZXNpZ24NCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmVudGVyVGltZW91dCA9IHRoaXMuZWxlbWVudC5lbnRlclRpbWVvdXQNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmV4aXRUaW1lb3V0ID0gdGhpcy5lbGVtZW50LmV4aXRUaW1lb3V0DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5leGVjdXRhYmxlID0gdGhpcy5lbGVtZW50LmV4ZWN1dGFibGUNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmFkbWluID0gdGhpcy5lbGVtZW50LmFkbWluDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5od2VsZW1lbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudC5od2VsZW1lbnQpKQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuZnVuY3Rpb25ncm91cCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXApKQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuZW52aXJvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50LmVudmlyb24pKQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHJvY2Vzc29yID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVsZW1lbnQucHJvY2Vzc29yKSkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudC5tb2R1bGVpbnN0YW50KSkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnVjbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50LnVjbSkpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5pYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudC5pYW0pKQ0KICAgICAgICAgICAgdGhpcy5kaWFsb2dUZXh0PSB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHNhdmVBUlhNTCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQubmFtZSAhPSB0aGlzLmVkaXRBUlhNTC5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0TWFjaGluZScsIHtjb21wbzoiTmFtZSIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lZGl0QVJYTUwubmFtZX0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWRpdEFSWE1MLm5hbWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAnTmFtZScsIHBhdGhMZW5ndGg6dGhpcy5lbGVtZW50LnBhdGguc3BsaXQoJy8nKS5sZW5ndGgsIGJlZm9yZW5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSApDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpc2ludG9FcnJvckxpc3QnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVkaXRBUlhNTC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQubmFtZSA9IHRoaXMuZWRpdEFSWE1MLm5hbWUNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lbnRlclRpbWVvdXQgPSB0aGlzLmVkaXRBUlhNTC5lbnRlclRpbWVvdXQNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5leGl0VGltZW91dCA9IHRoaXMuZWRpdEFSWE1MLmV4aXRUaW1lb3V0DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRtaW4gPSB0aGlzLmVkaXRBUlhNTC5hZG1pbg0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLmV4ZWN1dGFibGUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmV4ZWN1dGFibGUgPSB0aGlzLmVkaXRBUlhNTC5leGVjdXRhYmxlLnRvVXBwZXJDYXNlKCkNCiAgICAgICAgICAgICAgICBpZighKHRoaXMuZWRpdEFSWE1MLmV4ZWN1dGFibGUgPT0gJ1NUUklDVC1NT0RFJyB8fCB0aGlzLmVkaXRBUlhNTC5leGVjdXRhYmxlID09ICdNT05JVE9SLU1PREUnIHx8DQogICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5leGVjdXRhYmxlID09ICdOTy1UUlVTVEVELVBMQVRGT1JNLVNVUFBPUlQnKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5leGVjdXRhYmxlID0gbnVsbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5leGVjdXRhYmxlID0gdGhpcy5lZGl0QVJYTUwuZXhlY3V0YWJsZQ0KDQogICAgICAgICAgICB0aGlzLmVkaXRUYWJsZUxpc3QoKQ0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSBudWxsLCBjaGFuZ0VuZExpbmUgPSBudWxsDQoNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC5tYWNoaW5lZGVzaWduICE9IHRoaXMuZWxlbWVudC5tYWNoaW5lZGVzaWduKSB7DQogICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL21hY2hpbmVkZXNpZ24nKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9tYWNoaW5lZGVzaWduJykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNYWNoaW5lRGVzaWduUGF0aCh0aGlzLmVkaXRBUlhNTC5tYWNoaW5lZGVzaWduLCAwKQ0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9tYWNoaW5lZGVzaWduJywgdGhpcy5lbGVtZW50LnV1aWQrJy9tYWNoaW5lZGVzaWduJywgY2hhbmdFbmRMaW5lKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5tYWNoaW5lZGVzaWduID0gdGhpcy5lZGl0QVJYTUwubWFjaGluZWRlc2lnbg0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0QVJYTUwuaHdlbGVtZW50Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5od2VsZW1lbnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBuPTA7IG48dGhpcy5lbGVtZW50Lmh3ZWxlbWVudC5sZW5ndGg7IG4rKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtuXS5pZCA9PSBpdGVtLmlkICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmh3ZWxlbWVudFtuXS5od2VsZW1lbnQgPT0gaXRlbS5od2VsZW1lbnQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0hhdmVUYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2h3ZWxlbWVudC0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRIV0VsZW1lbnRQYXRoKGl0ZW0uaHdlbGVtZW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQnLCBjaGFuZ0VuZExpbmUpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5od2VsZW1lbnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuaHdlbGVtZW50LmZvckVhY2goZWRpdCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdC5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaHdlbGVtZW50LScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaHdlbGVtZW50Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmh3ZWxlbWVudC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2h3ZWxlbWVudC0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9od2VsZW1lbnQtJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5od2VsZW1lbnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdEFSWE1MLmh3ZWxlbWVudCkpDQoNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC5mdW5jdGlvbmdyb3VwLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5mdW5jdGlvbmdyb3VwLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgbj0wOyBuPHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwLmxlbmd0aDsgbisrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cFtuXS5pZCA9PSBpdGVtLmlkICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXBbbl0udHlwZSA9PSBpdGVtLnR5cGUgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0hhdmVUYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2Z1bmN0aW9udGFibGUtJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE1vZGVEZWNsYXJhdGlvblBhdGgoaXRlbS50eXBlLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZScsIGNoYW5nRW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZ1bmN0aW9uZ3JvdXAuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuZnVuY3Rpb25ncm91cC5mb3JFYWNoKGVkaXQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXQuaWQgPT0gaXRlbS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvZnVuY3Rpb250YWJsZS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mdW5jdGlvbnRhYmxlLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0QVJYTUwuZnVuY3Rpb25ncm91cCkpDQoNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC5pYW0ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmlhbS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBpdGVtLmdyYW50cy5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pYW0uZm9yRWFjaChpYW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlhbS5ncmFudHMuZm9yRWFjaChncmEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhLmlkID09IGRhdGEuaWQgJiYgZ3JhLmdyYW50ID09IGRhdGEuZ3JhbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRFdmVudFBhdGgoZGF0YS5ncmFudCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWxlY3QgPSAiQ09NLUVWRU5ULUdSQU5UIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrZGF0YS5pZCsnLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NJywgY2hhbmdFbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nRW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RmllbGRQYXRoKGRhdGEuZ3JhbnQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWxlY3QgPSAiQ09NLUZJRUxELUdSQU5UIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaWFtTS0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvaWFtTScsIGNoYW5nRW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nRW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TWV0aG9kUGF0aChkYXRhLmdyYW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWxlY3QgPSAiQ09NLU1FVEhPRC1HUkFOVCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NLScrZGF0YS5pZCsnLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9pYW1NJywgY2hhbmdFbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlhbS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBpdGVtLmdyYW50cy5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmlhbS5mb3JFYWNoKGVkaXQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXQuZ3JhbnRzLmZvckVhY2goZWRpdEcgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdEcuaWQgPT0gZGF0YS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvaWFtTS0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmlhbS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pYW0uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZ3JhbnRzLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZ3JhbnQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2lhbU0tJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuaWFtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVkaXRBUlhNTC5pYW0pKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVjbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0QVJYTUwudWNtKSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lbnZpcm9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVkaXRBUlhNTC5lbnZpcm9uKSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcm9jZXNzb3IgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdEFSWE1MLnByb2Nlc3NvcikpDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0QVJYTUwubW9kdWxlaW5zdGFudCkpDQogICAgICAgICAgICB0aGlzLmNhbmNlbEFSWE1MKCkNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFRhYmxlTGlzdCgpIHsNCiAgICAgICAgICAgIHZhciBkZWxldGVJdGVtID0gW10NCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC5mdW5jdGlvbmdyb3VwLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBkZWxldGVJdGVtID0gW10NCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdGVuY2UgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5mdW5jdGlvbmdyb3VwLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdGVuY2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubmFtZSAhPSBpdGVtLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU5hbWU6ICdmdW5jdGlvbkcnLCBsaXN0bmFtZTogZGF0YS5uYW1lLCBiZWZvcmVuYW1lOiBpdGVtLm5hbWV9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNFeGlzdGVuY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW0ucHVzaChpdGVtKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlSXRlbS5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidmdW5jdGlvbkcnLCBkZWxldEl0ZW1MaXN0OiBkZWxldGVJdGVtLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5mdW5jdGlvbmdyb3VwLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidmdW5jdGlvbkcnLCBkZWxldEl0ZW1MaXN0OiB0aGlzLmVsZW1lbnQuZnVuY3Rpb25ncm91cCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC51Y20ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW0gPSBbXQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51Y20uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3RlbmNlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwudWNtLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdGVuY2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubmFtZSAhPSBpdGVtLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU5hbWU6ICd1Y20nLCBsaXN0bmFtZTogZGF0YS5uYW1lLCBiZWZvcmVuYW1lOiBpdGVtLm5hbWV9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNFeGlzdGVuY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW0ucHVzaChpdGVtKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlSXRlbS5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOid1Y20nLCBkZWxldEl0ZW1MaXN0OiBkZWxldGVJdGVtLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC51Y20ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3VjbScsIGRlbGV0SXRlbUxpc3Q6IHRoaXMuZWxlbWVudC51Y20sIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0QVJYTUwubW9kdWxlaW5zdGFudC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm1vZHVsZWluc3RhbnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwubW9kdWxlaW5zdGFudC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaWQgPT0gaXRlbS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm5hbWUgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lOiAnTW9kdWxlSW5zJywgbGlzdG5hbWU6IGRhdGEubmFtZSwgYmVmb3JlbmFtZTogaXRlbS5uYW1lfSApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J01vZHVsZUlucycsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogaXRlbS5uYW1lLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lm1vZHVsZWluc3RhbnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQubW9kdWxlaW5zdGFudC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidNb2R1bGVJbnMnLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IGl0ZW0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCg0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLnByb2Nlc3Nvci5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb2Nlc3Nvci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcm9jZXNzb3IuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmlkID09IGl0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5uYW1lICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ1Byb2Nlc3NvcicsIGxpc3RuYW1lOiBkYXRhLm5hbWUsIGJlZm9yZW5hbWU6IGl0ZW0ubmFtZX0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGVDID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVJdGVtID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvcmUuZm9yRWFjaChjb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNvcmUuZm9yRWFjaChlZGl0QyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29yLmlkID09IGVkaXRDLmlkICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlQyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29yLm5hbWUgIT0gZWRpdEMubmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3Byb0NvcmUnLCBsaXN0bmFtZTogZWRpdEMubmFtZSwgdGFibmFtZTogZGF0YS5uYW1lLCBiZWZvcmVuYW1lOiBjb3IubmFtZX0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVDKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW0ucHVzaChpdGVtLmNvcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTonUHJvY2Vzc29yJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJOYW1lOiBpdGVtLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVJdGVtID0gW10NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlSXRlbS5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3Byb0NvcmUnLCBkZWxldEl0ZW1MaXN0OiBkZWxldGVJdGVtLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsIHRhYm5hbWU6IGl0ZW0ubmFtZX0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnByb2Nlc3Nvci5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcm9jZXNzb3IuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTonUHJvY2Vzc29yJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJOYW1lOiBpdGVtLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxBUlhNTCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MID0ge25hbWU6JycsIG1hY2hpbmVkZXNpZ246bnVsbCwgZW50ZXJUaW1lb3V0OicnLCBleGl0VGltZW91dDonJywgaHdlbGVtZW50OltdLCBleGVjdXRhYmxlOm51bGwsIGFkbWluOiAnJywNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25ncm91cDpbXSwgZW52aXJvbjogW10sIHByb2Nlc3NvcjogW10sIG1vZHVsZWluc3RhbnQ6IFtdLCB1Y206IFtdLCBpYW06IFtdLCBjcnlwdG86IFtdfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEhXRWxlbWVudCA9IHtod2VsZW1lbnQ6IG51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRGdW5HID0ge25hbWU6JycsIHR5cGU6IG51bGwsIGlkOicnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEVudmlyb24gPSB7a2V5OiAnJywgdmFsdWU6ICcnLGlkOiAnJ30NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRQcm9jZXNzb3IgPSB7bmFtZTogJycsIGNvcmU6IFtdLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q29yZSA9IHtuYW1lOiAnJywgaWRDb3JlOiAnJywgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dE9TID0ge25hbWU6ICcnLHJlc291cmNlOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFJlc291cmNlID0ge25hbWU6ICcnLCBjcHVVc2FnZTogJycsIG1lbW9yeVVzYWdlOiAnJywgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFVDTSA9IHtuYW1lOiAnJywgaWRlbnQ6ICcnLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0SUFNID0ge25hbWU6ICcnLCBncmFudHM6IFtdLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0R3JhbnQgPSB7Z3JhbnQ6IG51bGwsIHNlbGVjdDogbnVsbCwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5kaWFsb2dUZXh0ID0gZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgbmV3VGV4dEhXRWxlbWVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRIV0VsZW1lbnQgPSB7aHdlbGVtZW50OiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLmh3ZWxlbWVudC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRIV0VsZW1lbnQuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRIV0VsZW1lbnQpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5od2VsZW1lbnQucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRIV0VsZW1lbnQoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5od2VsZW1lbnQuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0RnVuRygpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRGdW5HID0ge25hbWU6ICcnLCB0eXBlOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwuZnVuY3Rpb25ncm91cC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRGdW5HLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0RnVuRykNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmZ1bmN0aW9uZ3JvdXAucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRGdW5HKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuZnVuY3Rpb25ncm91cC5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRFbnZpcm9uKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEVudmlyb24gPSB7a2V5OiAnJywgdmFsdWU6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwuZW52aXJvbi5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRFbnZpcm9uLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0RW52aXJvbikNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmVudmlyb24ucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRFbnZpcm9uKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuZW52aXJvbi5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRQcm9jZXNzb3IoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UHJvY2Vzc29yID0ge25hbWU6ICcnLCBjb3JlOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFByb2Nlc3Nvci5uYW1lID0gJ1Byb2Nlc3Nvcl8nICsgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwucHJvY2Vzc29yLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFByb2Nlc3Nvci5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dFByb2Nlc3NvcikNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnByb2Nlc3Nvci5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFByb2Nlc3NvcihpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnByb2Nlc3Nvci5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRDb3JlKGlkeFApIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRDb3JlID0ge25hbWU6ICcnLCBpZENvcmU6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwucHJvY2Vzc29yW2lkeFBdLmNvcmUuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q29yZS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dENvcmUpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcm9jZXNzb3JbaWR4UF0uY29yZS5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dENvcmUoaWR4LCBpZHhQKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcm9jZXNzb3JbaWR4UF0uY29yZS5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRPUygpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRPUyA9IHtuYW1lOiAnJywgcmVzb3VyY2U6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUZXh0T1MubmFtZSA9ICdNb2R1bGUgSW5zdGFuY2VfJyArIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnQuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0T1MuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRPUykNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnQucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRPUyhpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnQuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0UmVzb3VyY2UoaWR4TSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFJlc291cmNlID0ge25hbWU6ICcnLCBjcHVVc2FnZTogJycsIG1lbW9yeVVzYWdlOiAnJywgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnRbaWR4TV0ucmVzb3VyY2Uuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UmVzb3VyY2UuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRSZXNvdXJjZSkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnRbaWR4TV0ucmVzb3VyY2UucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRSZXNvdXJjZShpZHgsIGlkeE0pIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm1vZHVsZWluc3RhbnRbaWR4TV0ucmVzb3VyY2Uuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0VUNNKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFVDTSA9IHtuYW1lOiAnJywgaWRlbnQ6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwudWNtLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFVDTS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dFVDTSkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnVjbS5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFVDTShpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnVjbS5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRJQU0oKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0SUFNID0ge25hbWU6ICcnLCBncmFudHM6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUZXh0SUFNLm5hbWUgPSAnSUFNX0luc3RhbnRpYXRpb25fJyArIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLmlhbS5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRJQU0uaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRJQU0pDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5pYW0ucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRJQU0oaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5pYW0uc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0R3JhbnQoaWR4SSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEdyYW50ID0ge2dyYW50OiBudWxsLCBzZWxlY3Q6IG51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVkaXRBUlhNTC5pYW1baWR4SV0uZ3JhbnRzLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEdyYW50LmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0R3JhbnQpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5pYW1baWR4SV0uZ3JhbnRzLnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0R3JhbnQoaWR4LCBpZHhJKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5pYW1baWR4SV0uZ3JhbnRzLnNwbGljZShpZHgsMSkNCiAgICAgICAgfSwNCg0KICAgIH0sDQp9DQo="},{"version":3,"sources":["Machine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2/BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Machine.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div :id=\"element.uuid\">\r\n        <v-container> \r\n            <v-tooltip bottom color=\"success\" :disabled=\"isTooltip\" z-index=\"10\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-card outlined :color=\"minimaptoolbar ? null : colorToolbar\" v-bind=\"attrs\" v-on=\"on\"> <!-- style='height:300px' 이렇게 하면 접었을때 배경이 하얗게 나옴 max-height해야지 접었을때 배경안나옴 -->\r\n                        <v-toolbar v-if=\"!isDatailView && zoomvalue > $setZoominElement\" :color=colorToolbar dark hide-on-scroll height=\"30px\" class=\"drag-handle\">\r\n                            <v-hover v-if=\"minimaptoolbar\" v-slot=\"{ hover }\">\r\n                                <v-btn icon @click=\"showMachine\">\r\n                                    <v-icon>{{ iselementOpenClose ? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                </v-btn>\r\n                            </v-hover>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click.stop=\"dialogPath=true\">\r\n                                <v-icon> mdi-routes</v-icon>\r\n                            </v-btn>\r\n                            <dialogPathSetting v-model=\"dialogPath\" :path=\"element.path\" @submit=\"submitDialog\"/>\r\n                            <v-toolbar-title>Machine</v-toolbar-title>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click=\"viewARXML\">\r\n                                <v-icon> mdi-format-text</v-icon>\r\n                            </v-btn>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else-if=\"zoomvalue < $setZoominElement\" :color=colorToolbar dark hide-on-scroll height=\"50px\" class=\"drag-handle\">\r\n                            <v-toolbar-title>{{ element.name }}</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else hide-on-scroll dense flat>\r\n                            <v-toolbar-title>Machine</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-card-text  v-show=\"iselementOpenClose && zoomvalue > $setZoominElement\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        @input='inputMachineName' outlined dense></v-text-field>\r\n                            <v-row style=\"height: 70px\">\r\n                                <v-col cols=\"10\">\r\n                                    <v-text-field v-model=\"element.machinedesign\" readonly @click=\"setMachineDesignSelect()\" clearable @click:clear='clearMachineDesign()' label=\"Machine Design\" style=\"height:25px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                </v-col>\r\n                                <v-col cols=\"2\">\r\n                                    <v-menu>\r\n                                        <template v-slot:activator=\"{ on, attrs }\">\r\n                                            <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/machinedesign'\" dark icon v-bind=\"attrs\" v-on=\"on\" @click=\"setMachineDesignList()\">\r\n                                                <v-icon>mdi-menu-down-outline</v-icon>\r\n                                            </v-btn>\r\n                                        </template>\r\n                                        <v-list>\r\n                                            <v-list-item v-for=\"(item, i) in selMachineDesign\" :key=\"i\" link @click=\"setMachineDesign(item)\">\r\n                                                <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                            </v-list-item>\r\n                                            <v-btn outlined color=\"indigo\" dense text small block @click=\"newMachineDesign\" >\r\n                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                            </v-btn>\r\n                                        </v-list>\r\n                                    </v-menu>\r\n                                </v-col>\r\n                            </v-row>\r\n                            <v-text-field v-model=\"element.enterTimeout\" label=\"Enter TimeOut Value\" placeholder=\"Numeric Only(Unit Second)\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <v-text-field v-model=\"element.exitTimeout\" label=\"Exit TimeOut Value\" placeholder=\"Numeric Only(Unit Second)\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <v-select v-model=\"element.executable\" :items=\"executableLaunch\" clearable label=\"Executable Launch Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                            <v-text-field v-model=\"element.admin\" label=\"Admin Data\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/hwelement'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showHWElement\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isHWElementOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    HW-Element\r\n                                    <v-btn @click=\"isCheckHWElement\" text x-small color=\"indigo\" v-if=\"isHWElementOpenClose\">\r\n                                        <v-icon>mdi-check</v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn v-if=\"isHWElementOpenClose && isdeleteHWElementItem\" @click=\"deletHWElement\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-minus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-if=\"isHWElementOpenClose\">\r\n                                    <v-data-table v-model=\"selectDelectHWElement\" :headers=\"headerHWElement\" :items=\"element.hwelement\" :items-per-page='20'\r\n                                            :show-select=\"isdeleteHWElementItem\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                        </template>\r\n                                        <template v-if=\"!isdeleteHWElementItem\" v-slot:body=\"{ items, headers }\">\r\n                                            <tbody>\r\n                                                <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                        <v-edit-dialog persistent cancel-text='Ok' save-text=\"Cancel\" @open=\"openHWElement(idx)\" @cancel=\"cancelHWElement\" @save=\"editHWElement(idx)\" large >\r\n                                                            {{item[header.value]}}\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-autocomplete v-model='editHWItem.hwelement' label='HW-Element Reference' :items='selHWElement' item-text='name' item-value=\"uuid\" class=\"lable-placeholer-color\"\r\n                                                                            return-object :readonly=\"!isEditingHWElement\" clearable @click=\"setHWElementSelect()\" \r\n                                                                            @click:clear='clearHWElement' @blur=\"isEditingHWElement=true\" outlined dense style=\"height: 45px;\">\r\n                                                                    <template v-slot:append-item>\r\n                                                                        <v-btn outlined color=\"indigo\" dense text small block @click=\"newHWElement\">\r\n                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                        </v-btn>\r\n                                                                    </template>\r\n                                                                </v-autocomplete>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <th colspan=\"3\">\r\n                                                        <v-edit-dialog  large persistent @cancel=\"cancelHWElement\" @save=\"addHWElement()\"> \r\n                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                            </v-btn>\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-autocomplete v-model='editHWItem.hwelement' label='HW-Element Reference' :items='selHWElement' item-text='name' item-value=\"uuid\" class=\"lable-placeholer-color\"\r\n                                                                            return-object :readonly=\"!isEditingHWElement\" clearable @click=\"setHWElementSelect()\" \r\n                                                                            @click:clear='clearHWElement' @blur=\"isEditingHWElement=true\" outlined dense style=\"height: 45px;\">\r\n                                                                    <template v-slot:append-item>\r\n                                                                        <v-btn outlined color=\"indigo\" dense text small block @click=\"newHWElement\">\r\n                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                        </v-btn>\r\n                                                                    </template>\r\n                                                                </v-autocomplete>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </th>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </template>\r\n                                    </v-data-table>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/functiontable'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showFunctionGroupItem\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isFunctionGroupOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    Function Groups\r\n                                    <v-btn @click=\"isCheckFunctionGroup\" text x-small color=\"indigo\" v-if=\"isFunctionGroupOpenClose\">\r\n                                        <v-icon>mdi-check</v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn v-if=\"isFunctionGroupOpenClose && isdeleteFunctionGroupItem\" @click=\"deleteFunctionGroup\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-minus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-if=\"isFunctionGroupOpenClose\">\r\n                                    <v-data-table v-model=\"selectDelectFunctionItem\" :headers=\"headerFunctionGroup\" :items=\"element.functiongroup\" :items-per-page='20'\r\n                                            :show-select=\"isdeleteFunctionGroupItem\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                        </template>\r\n                                        <template v-if=\"!isdeleteFunctionGroupItem\" v-slot:body=\"{ items, headers }\">\r\n                                            <tbody>\r\n                                                <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                        <v-edit-dialog persistent @open=\"openFunctionGroup(idx)\" @cancel=\"cancelFunctionGroup\" @save=\"editFunctionGroup(idx)\" large >\r\n                                                            {{item[header.value]}}\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editFunctionItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-autocomplete v-model='editFunctionItem.type' label='Mode Declaration Group' :items='selModeDeclaration' item-text='name' item-value=\"uuid\" class=\"lable-placeholer-color\"\r\n                                                                            return-object :readonly=\"!isEditingModeDeclarationRef\" clearable @click=\"setModeDeclarationSelect()\" \r\n                                                                            @click:clear='clearModeDeclarRef' @blur=\"isEditingModeDeclarationRef=true\" outlined dense style=\"height: 45px;\">\r\n                                                                    <template v-slot:append-item>\r\n                                                                        <v-btn outlined color=\"indigo\" dense text small block @click=\"newModeDeclaration\">\r\n                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                        </v-btn>\r\n                                                                    </template>\r\n                                                                </v-autocomplete>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <th colspan=\"3\">\r\n                                                        <v-edit-dialog  large persistent @cancel=\"cancelFunctionGroup\" @save=\"addFunctionGroup()\"> \r\n                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                            </v-btn>\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editFunctionItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-autocomplete v-model='editFunctionItem.type' label='Mode Declaration Group' :items='selModeDeclaration' item-text='name' item-value=\"uuid\" class=\"lable-placeholer-color\"\r\n                                                                            return-object :readonly=\"!isEditingModeDeclarationRef\" clearable @click=\"setModeDeclarationSelect()\" \r\n                                                                            @click:clear='clearModeDeclarRef' @blur=\"isEditingModeDeclarationRef=true\" outlined dense style=\"height: 45px;\">\r\n                                                                    <template v-slot:append-item>\r\n                                                                        <v-btn outlined color=\"indigo\" dense text small block @click=\"newModeDeclaration\">\r\n                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                        </v-btn>\r\n                                                                    </template>\r\n                                                                </v-autocomplete>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </th>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </template>\r\n                                    </v-data-table>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showEnvironmentV\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isEnvironmentVOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    Environment Variables\r\n                                    <v-btn @click=\"isCheckEnvironmentV\" text x-small color=\"indigo\" v-if=\"isEnvironmentVOpenClose\">\r\n                                        <v-icon>mdi-check</v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn v-if=\"isEnvironmentVOpenClose && isdeleteEnvironmentV\" @click=\"deleteEnvironmentV\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-minus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-if=\"isEnvironmentVOpenClose\">\r\n                                    <v-data-table v-model=\"selectDelectEnvironmentV\" :headers=\"headerEnvironmentV\" :items=\"element.environ\" :items-per-page='20'\r\n                                            :show-select=\"isdeleteEnvironmentV\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                        </template>\r\n                                        <template v-if=\"!isdeleteEnvironmentV\" v-slot:body=\"{ items, headers }\">\r\n                                            <tbody>\r\n                                                <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                        <v-edit-dialog persistent @open=\"openEnvironmentV(idx)\" @cancel=\"cancelEnvironmentV\" @save=\"editEnvironmentV(idx)\" large >\r\n                                                            {{item[header.value]}}\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editEnvironItem.key\" label=\"Key\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editEnvironItem.value\" label=\"Value\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <th colspan=\"3\">\r\n                                                        <v-edit-dialog  large persistent @cancel=\"cancelEnvironmentV\" @save=\"addEnvironmentV()\"> \r\n                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                            </v-btn>\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editEnvironItem.key\" label=\"Key\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editEnvironItem.value\" label=\"Value\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </th>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </template>\r\n                                    </v-data-table>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showProcessorItem\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isProcessorOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    Processors\r\n                                    <v-btn v-if=\"isProcessorOpenClose\" @click=\"addProcessor\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-tabs v-model='processortab' height=\"30px\" v-if=\"isProcessorOpenClose\" show-arrows>\r\n                                    <v-tab v-for=\"(tab, idx) in element.processor\" :key=\"idx\" @click=\"clickProcessortab()\"> \r\n                                        {{tab.name}}\r\n                                        <v-btn text x-small @click=\"deleteProcessor(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                </v-tabs>\r\n                                <v-tabs-items v-model=\"processortab\" v-if=\"isProcessorOpenClose\">\r\n                                    <v-tab-item v-for=\"(tab, idx) in element.processor\" :key=\"idx\">\r\n                                        <v-card flat>\r\n                                            <v-card-text>\r\n                                                <v-text-field v-model=\"tab.name\" @input=\"inputProcessorName()\" @click=\"clickProcessorName(tab.name)\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                                    <v-hover v-slot=\"{ hover }\">\r\n                                                        <v-btn text @click=\"showCore\" x-small color=\"indigo\">\r\n                                                            <v-icon>{{ isCoreOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                        </v-btn>\r\n                                                    </v-hover>\r\n                                                    Core \r\n                                                    <v-btn v-if=\"isCoreOpenClose\" @click=\"isCheckCore\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-check</v-icon>\r\n                                                    </v-btn>\r\n                                                    <v-btn v-if=\"isCoreOpenClose && isdeleteCoreItem\" @click=\"deleteCore\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                </div>\r\n                                                <v-data-table v-if=\"isCoreOpenClose\" v-model=\"selectDelectCoreItem\" :headers=\"headerCore\" :items=\"tab.core\" :id=\"element.uuid+'/processorCore-'\"\r\n                                                        :show-select=\"isdeleteCoreItem\" item-key=\"id\" height=\"140px\" dense hide-default-footer :items-per-page='20'>\r\n                                                    <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                        <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                    </template>\r\n                                                    <template v-if=\"!isdeleteCoreItem\" v-slot:body=\"{ items, headers }\">\r\n                                                        <tbody>\r\n                                                            <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                    <v-edit-dialog persistent @open=\"openCore(num, items)\" @cancel=\"cancelCore\" @save=\"editCore(num, items)\" large >\r\n                                                                        {{item[header.value]}}\r\n                                                                        <template v-slot:input>\r\n                                                                            <br>\r\n                                                                            <v-text-field v-model=\"editCoreItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            <v-text-field v-model=\"editCoreItem.idCore\" label=\"Core ID\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                        </template>\r\n                                                                    </v-edit-dialog>\r\n                                                                </td>\r\n                                                            </tr>\r\n                                                            <tr>\r\n                                                                <th colspan=\"3\">\r\n                                                                    <v-edit-dialog  large persistent @cancel=\"cancelCore\" @save=\"addCore(idx)\"> \r\n                                                                        <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                        </v-btn>\r\n                                                                        <template v-slot:input>\r\n                                                                            <br>\r\n                                                                            <v-text-field v-model=\"editCoreItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            <v-text-field v-model=\"editCoreItem.idCore\" label=\"Core ID\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                        </template>\r\n                                                                    </v-edit-dialog>\r\n                                                                </th>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </template>\r\n                                                </v-data-table>\r\n                                            </v-card-text>\r\n                                        </v-card>\r\n                                    </v-tab-item>\r\n                                </v-tabs-items>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/moduleIns'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showModuleInsItem\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isModuleInsOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    Module Instantiations\r\n                                </div>\r\n                                <v-card outlined class=\"mx-auto\" v-if=\"isModuleInsOpenClose\">\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        <v-hover v-slot=\"{ hover }\">\r\n                                            <v-btn text @click=\"showOSModuleInsItem\" x-small color=\"indigo\" style=\"margin-left:15px\">\r\n                                                <v-icon>{{ isOSModuleInsOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                            </v-btn>\r\n                                        </v-hover>\r\n                                        OS Module Instantiation\r\n                                        <v-btn v-if=\"isOSModuleInsOpenClose\" @click=\"addModuleIns\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-tabs v-model='ModuleInstab' height=\"30px\" v-if=\"isOSModuleInsOpenClose\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.moduleinstant\" :key=\"idx\" @click=\"clickModuleInstab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deleteModuleIns(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"ModuleInstab\" v-if=\"isOSModuleInsOpenClose\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.moduleinstant\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputModuleInsName()\" @click=\"clickModuleInsName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                                        <v-hover v-slot=\"{ hover }\">\r\n                                                            <v-btn text @click=\"showResourceG\" x-small color=\"indigo\">\r\n                                                                <v-icon>{{ isResourceGOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                            </v-btn>\r\n                                                        </v-hover>\r\n                                                        Resource Group \r\n                                                        <v-btn v-if=\"isResourceGOpenClose\" @click=\"isCheckResourceG\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-check</v-icon>\r\n                                                        </v-btn>\r\n                                                        <v-btn v-if=\"isResourceGOpenClose && isdeleteResourceGItem\" @click=\"deleteResourceG\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-minus</v-icon>\r\n                                                        </v-btn>\r\n                                                    </div>\r\n                                                    <v-data-table v-if=\"isResourceGOpenClose\" v-model=\"selectDelectModuleInsItem\" :headers=\"headerModuleIns\" :items=\"tab.resource\"\r\n                                                            :show-select=\"isdeleteResourceGItem\" item-key=\"id\" height=\"140px\" dense hide-default-footer :items-per-page='20'>\r\n                                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" @input=\"select($event)\" :ripple=\"false\"></v-simple-checkbox>\r\n                                                        </template>\r\n                                                        <template v-if=\"!isdeleteResourceGItem\" v-slot:body=\"{ items, headers }\">\r\n                                                            <tbody>\r\n                                                                <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                        <v-edit-dialog persistent @open=\"openResourceG(num, items)\" @cancel=\"cancelResourceG\" @save=\"editResourceG(num, items)\" large >\r\n                                                                            {{item[header.value]}}\r\n                                                                            <template v-slot:input>\r\n                                                                                <br>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.cpuUsage\" label=\"CPU Usage\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.memoryUsage\" label=\"Memory Usage\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            </template>\r\n                                                                        </v-edit-dialog>\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                                <tr>\r\n                                                                    <th colspan=\"3\">\r\n                                                                        <v-edit-dialog  large persistent @cancel=\"cancelResourceG\" @save=\"addResourceG(idx)\"> \r\n                                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                                            </v-btn>\r\n                                                                            <template v-slot:input>\r\n                                                                                <br>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.cpuUsage\" label=\"CPU Usage\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                <v-text-field v-model=\"editModuleInsItem.memoryUsage\" label=\"Memory Usage\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            </template>\r\n                                                                        </v-edit-dialog>\r\n                                                                    </th>\r\n                                                                </tr>\r\n                                                            </tbody>\r\n                                                        </template>\r\n                                                    </v-data-table>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card>\r\n                                <v-card outlined class=\"mx-auto\" v-if=\"isModuleInsOpenClose\">\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        <v-hover v-slot=\"{ hover }\">\r\n                                            <v-btn text @click=\"showUCMModule\" x-small color=\"indigo\" style=\"margin-left:15px\">\r\n                                                <v-icon>{{ isUCMModuleOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                            </v-btn>\r\n                                        </v-hover>\r\n                                        UCM Module Instantiation\r\n                                        <v-btn @click=\"isCheckUCMModule\" text x-small color=\"indigo\" v-if=\"isUCMModuleOpenClose\">\r\n                                            <v-icon>mdi-check</v-icon>\r\n                                        </v-btn>\r\n                                        <v-btn v-if=\"isUCMModuleOpenClose && isdeleteUCMModule\" @click=\"deleteUCMModule\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-card-text v-if=\"isUCMModuleOpenClose\">\r\n                                        <v-data-table v-model=\"selectDelectUCMModule\" :headers=\"headerUCMModule\" :items=\"element.ucm\" :items-per-page='20'\r\n                                                :show-select=\"isdeleteUCMModule\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                            <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                            </template>\r\n                                            <template v-if=\"!isdeleteUCMModule\" v-slot:body=\"{ items, headers }\">\r\n                                                <tbody>\r\n                                                    <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                        <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                            <v-edit-dialog persistent @open=\"openUCMModule(idx)\" @cancel=\"cancelUCMModule\" @save=\"editUCMModule(idx)\" large >\r\n                                                                {{item[header.value]}}\r\n                                                                <template v-slot:input>\r\n                                                                    <br>\r\n                                                                    <v-text-field v-model=\"editUCMModuleItem.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                    <v-text-field v-model=\"editUCMModuleItem.ident\" label=\"Identifier\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                </template>\r\n                                                            </v-edit-dialog>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                        <th colspan=\"3\">\r\n                                                            <v-edit-dialog  large persistent @cancel=\"cancelUCMModule\" @save=\"addUCMModule()\"> \r\n                                                                <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                    <v-icon >mdi-plus</v-icon>New Item\r\n                                                                </v-btn>\r\n                                                                <template v-slot:input>\r\n                                                                    <br>\r\n                                                                    <v-text-field v-model=\"editUCMModuleItem.name\" label=\"Name\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                    <v-text-field v-model=\"editUCMModuleItem.ident\" label=\"Identifier\" placeholder=\"String\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                </template>\r\n                                                            </v-edit-dialog>\r\n                                                        </th>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </template>\r\n                                        </v-data-table>\r\n                                    </v-card-text>\r\n                                </v-card>\r\n                                <v-card outlined class=\"mx-auto\" v-if=\"isModuleInsOpenClose\">\r\n                                    <div class=\"subtitle-2\" :id=\"element.uuid+'/iamM'\" style=\"height:20px\">\r\n                                        <v-hover v-slot=\"{ hover }\">\r\n                                            <v-btn text @click=\"showIamModule\" x-small color=\"indigo\"  style=\"margin-left:15px\">\r\n                                                <v-icon>{{ isIamModuleOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                            </v-btn>\r\n                                        </v-hover>\r\n                                        IAM Module Instantiation\r\n                                        <v-btn v-if=\"isIamModuleOpenClose\" @click=\"addIamModule()\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-card-text v-show=\"isIamModuleOpenClose\">\r\n                                        <v-tabs v-model='IamModuleTab' height=\"30px\" show-arrows @change=\"changeIamModuleTab()\">\r\n                                            <v-tab v-for=\"(tab, idx) in element.iam\" :key=\"idx\" @click=\"clickIamModuletab()\"> \r\n                                                {{tab.name}}\r\n                                                <v-btn text x-small @click=\"deleteIamModule(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                        </v-tabs>\r\n                                        <v-tabs-items v-model=\"IamModuleTab\">\r\n                                            <v-tab-item v-for=\"(tab, idx) in element.iam\" :key=\"idx\">\r\n                                                <v-card flat>\r\n                                                    <v-card-text>\r\n                                                        <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        <v-card outlined class=\"mx-auto\">\r\n                                                            <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/grandtab-'+tab.id\">\r\n                                                                <v-hover v-slot=\"{ hover }\">\r\n                                                                    <v-btn text @click=\"showGrantRef\" x-small color=\"indigo\">\r\n                                                                        <v-icon>{{ isGrantRefOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </v-hover>\r\n                                                                Grant Refs\r\n                                                                <v-btn @click=\"isCheckGrantRef\" text x-small color=\"indigo\" v-if=\"isGrantRefOpenClose\">\r\n                                                                    <v-icon>mdi-check</v-icon>\r\n                                                                </v-btn>\r\n                                                                <v-btn v-if=\"isGrantRefOpenClose && isdeleteGrantRef\" @click=\"deleteGrantRef\" text x-small color=\"indigo\">\r\n                                                                    <v-icon>mdi-minus</v-icon>\r\n                                                                </v-btn>\r\n                                                            </div>\r\n                                                            <v-card-text v-show=\"isGrantRefOpenClose\">\r\n                                                                <v-data-table v-model=\"selectDelectGrantRef\" :headers=\"headerGrantRef\" :items=\"tab.grants\" :items-per-page='20'\r\n                                                                        :show-select=\"isdeleteGrantRef\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                    <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                        <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                    </template>\r\n                                                                    <template v-if=\"!isdeleteGrantRef\" v-slot:body=\"{ items, headers }\">\r\n                                                                        <tbody>\r\n                                                                            <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                                <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                    <v-edit-dialog persistent @open=\"openGrantRef(num)\" @cancel=\"cancelGrantRef\" @save=\"editGrantRefItem(num)\" large >\r\n                                                                                        {{item[header.value]}}\r\n                                                                                        <template v-slot:input>\r\n                                                                                            <br>\r\n                                                                                            <v-select v-model=\"editGrant.select\" :items=\"selectGrant\" clearable @click:clear='clearGrantSelect()' label=\"Data Element\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                            <v-autocomplete v-if=\"editGrant.select != null\" v-model='editGrant.grant' label='Data Element Reference' :items='selGrant' item-text='name' item-value=\"uuid\" class=\"lable-placeholer-color\"\r\n                                                                                                return-object :readonly=\"!isEditingGrant\" clearable @click=\"setGrantSelect()\" \r\n                                                                                                @click:clear='clearGrant' @blur=\"isEditingGrant=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                                <template v-slot:append-item>\r\n                                                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newGrant()\">\r\n                                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                                    </v-btn>\r\n                                                                                                </template>\r\n                                                                                            </v-autocomplete>                            \r\n                                                                                        </template>\r\n                                                                                    </v-edit-dialog>\r\n                                                                                </td>\r\n                                                                            </tr>\r\n                                                                            <tr>\r\n                                                                                <th colspan=\"3\">\r\n                                                                                    <v-edit-dialog  large persistent @cancel=\"cancelGrantRef\" @save=\"addGrantRef()\"> \r\n                                                                                        <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                        </v-btn>\r\n                                                                                        <template v-slot:input>\r\n                                                                                            <br>\r\n                                                                                            <v-select v-model=\"editGrant.select\" :items=\"selectGrant\" clearable @click:clear='clearGrantSelect()' label=\"Grant Select\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                            <v-autocomplete v-if=\"editGrant.select != null\" v-model='editGrant.grant' label='Grant Reference' :items='selGrant' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                                return-object :readonly=\"!isEditingGrant\" clearable @click=\"setGrantSelect()\" \r\n                                                                                                @click:clear='clearGrant' @blur=\"isEditingGrant=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                                <template v-slot:append-item>\r\n                                                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newGrant()\">\r\n                                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                                    </v-btn>\r\n                                                                                                </template>\r\n                                                                                            </v-autocomplete>  \r\n                                                                                        </template>\r\n                                                                                    </v-edit-dialog>\r\n                                                                                </th>\r\n                                                                            </tr>\r\n                                                                        </tbody>\r\n                                                                    </template>\r\n                                                                </v-data-table>\r\n                                                            </v-card-text>\r\n                                                        </v-card>\r\n                                                    </v-card-text>\r\n                                                </v-card>\r\n                                            </v-tab-item>\r\n                                        </v-tabs-items>\r\n                                    </v-card-text>\r\n                                </v-card>\r\n                                <v-card outlined class=\"mx-auto\" v-if=\"isModuleInsOpenClose\">\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        <v-hover v-slot=\"{ hover }\">\r\n                                            <v-btn text @click=\"showCrypto\" x-small color=\"indigo\"  style=\"margin-left:15px\">\r\n                                                <v-icon>{{ isCryptoOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                            </v-btn>\r\n                                        </v-hover>\r\n                                        Crypto Module Instantiation\r\n                                        <v-btn v-if=\"isCryptoOpenClose\" @click=\"addCrypto()\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-card-text v-show=\"isCryptoOpenClose\">\r\n                                        <v-tabs v-model='CryptoTab' height=\"30px\" show-arrows @change=\"changeCryptoTab()\">\r\n                                            <v-tab v-for=\"(tab, idx) in element.crypto\" :key=\"idx\" @click=\"clickCryptoTab()\"> \r\n                                                {{tab.name}}\r\n                                                <v-btn text x-small @click=\"deleteCrypto(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                        </v-tabs>\r\n                                        <v-tabs-items v-model=\"CryptoTab\">\r\n                                            <v-tab-item v-for=\"(tab, idx) in element.crypto\" :key=\"idx\">\r\n                                                <v-card flat>\r\n                                                    <v-card-text>\r\n                                                        <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        <v-card outlined class=\"mx-auto\">\r\n                                                            <div class=\"subtitle-2\" style=\"height:20px\" >\r\n                                                                <v-btn color=\"indigo\" text x-small @click=\"dialogEditSDG=true\">\r\n                                                                    <v-icon>mdi-pencil</v-icon>\r\n                                                                </v-btn>\r\n                                                                Admin Data\r\n                                                                <v-dialog v-model='dialogEditSDG' width=\"600\" persistent scrollable>\r\n                                                                    <v-card>\r\n                                                                        <v-card-title class=\"text-h7 green accent-1\"> \r\n                                                                            Edit SDGS  \r\n                                                                            <v-btn :disabled=\"isAddItem==false ? true : false\" @click=\"addSDGItem()\" text x-small color=\"indigo\">\r\n                                                                                <v-icon>mdi-plus</v-icon>\r\n                                                                            </v-btn>\r\n                                                                            <v-btn :disabled=\"isDeletItem==false ? true : false\" @click=\"deleteSDGItem()\" text x-small color=\"indigo\">\r\n                                                                                <v-icon>mdi-minus</v-icon>\r\n                                                                            </v-btn>\r\n                                                                        </v-card-title>\r\n                                                                        <v-card-text>\r\n                                                                            <br>\r\n                                                                            <v-row>\r\n                                                                                <v-col cols=\"4\">\r\n                                                                                    <v-select v-model=\"editSDGItem.ele\" :disabled=\"selectSDG[0] == null ? true : false\" :items=\"selSDGEleItem\" @input=\"inputSDGEle()\" clearable @click:clear=\"clearSDGEle()\" label=\"Element Select\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                </v-col>\r\n                                                                                <v-col cols=\"4\">\r\n                                                                                    <v-select v-model=\"editSDGItem.gid\" :disabled=\"editSDGItem.ele == null ? true : false\" :items=\"selSDGGidItem\"  @input=\"inputSDGGid()\" clearable @click:clear=\"clearSDGGid()\" label=\"GID Select\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                </v-col>\r\n                                                                                <v-col cols=\"4\">\r\n                                                                                    <v-text-field v-model=\"editSDGItem.item\" :disabled=\"isSDGItem==true? false : true\" label=\"Item\" @input=\"inputSDGItem(editSDGItem.item)\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-text-field>\r\n                                                                                </v-col>\r\n                                                                            </v-row>\r\n                                                                            <v-row>\r\n                                                                                <v-treeview :items=\"tab.sdgs\" item-key=\"id\" activatable :open-on-click=\"false\" return-object dense @update:active=\"activeElement\">\r\n                                                                                </v-treeview>\r\n                                                                            </v-row>\r\n                                                                        </v-card-text>\r\n                                                                        <v-card-actions>\r\n                                                                            <v-spacer></v-spacer>\r\n                                                                            <v-btn color=\"primary\" text @click=\"closdSDGS()\">\r\n                                                                                Close\r\n                                                                            </v-btn>\r\n                                                                        </v-card-actions>\r\n                                                                    </v-card>\r\n                                                                </v-dialog>\r\n                                                            </div>\r\n                                                            <v-card-text>\r\n                                                                <v-treeview :items=\"tab.sdgs\" activatable return-object :open-on-click=\"true\" dense @update:active=\"activeElement\" class=\"caption\">\r\n                                                                </v-treeview>\r\n                                                            </v-card-text>\r\n                                                        </v-card>\r\n                                                    </v-card-text>\r\n                                                </v-card>\r\n                                            </v-tab-item>\r\n                                        </v-tabs-items>\r\n                                    </v-card-text>\r\n                                </v-card>\r\n                            </v-card>\r\n                        </v-card-text>\r\n                        <v-card-text v-show=\"(!iselementOpenClose && zoomvalue > $setZoominElement) || !minimaptoolbar\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        readonly outlined dense></v-text-field>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </template>\r\n                <span>{{ element.name }}</span>\r\n            </v-tooltip>\r\n            <v-dialog v-model=\"dialogText\" persistent width=\"800\">\r\n                <v-card >\r\n                    <v-card-title class=\"text-h6 green accent-1\"> Edit Text </v-card-title>\r\n                    <v-card-text>\r\n                        <br>\r\n                        <v-row style=\"height: 30px;\">\r\n                            <label style=\"padding:10px;\">&#60;SHORT-NAME&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.name\" placeholder=\"String\" style=\"height: 15px;\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 30px;\">\r\n                            <label style=\"padding:10px;\">&#60;ADMIN-DATA&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.admin\" placeholder=\"String\" style=\"height: 15px;\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;ADMIN-DATA&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;\">&#60;DEFAULT-APPLICATION-TIMEOUT&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;margin-left:10px\">&#60;ENTER-TIMEOUT-VALUE&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.enterTimeout\" placeholder=\"Numeric Only(Unit Second)\"  class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;EXIT-TIMEOUT-VALUE&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;margin-left:10px\">&#60;EXIT-TIMEOUT-VALUE&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.exitTimeout\" placeholder=\"Numeric Only(Unit Second)\"  class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;EXIT-TIMEOUT-VALUE&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;DEFAULT-APPLICATION-TIMEOUT&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;\">&#60;ENVIRONMENT-VARIABLES&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextEnviron()\" icon color=\"teal darken\" x-samll dark>\r\n                                    <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 200px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.environ\" :key=\"i\" style=\"height: 100px;\">\r\n                                <div>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextEnviron(i)\" text x-small color=\"indigo\">\r\n                                                <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;TAG-WITH-OPTIONAL-VALUE&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;KEY&#62;</label>\r\n                                        <v-text-field v-model=\"item.key\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;KEY&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;VALUE&#62;</label>\r\n                                        <v-text-field v-model=\"item.value\" placeholder=\"String\" style=\"width:400px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;VALUE&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                            <label style=\"padding:10px;margin-left:55px;\">&#60;&#47;TAG-WITH-OPTIONAL-VALUE&#62;</label>\r\n                                    </v-row>\r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 15px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;ENVIRONMENT-VARIABLES&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;\">&#60;FUNCTION-GROUPS&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextFunG()\" icon color=\"teal darken\" x-samll dark>\r\n                                    <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 200px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.functiongroup\" :key=\"i\" style=\"height: 100px;\">\r\n                                <div>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextFunG(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;MODE-DECLARATION-GROUP-PROTOTYPE&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;SHORT-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;TYPE-REF&#62;</label>\r\n                                        <v-text-field v-model=\"item.type\" placeholder=\"Path\" style=\"width:400px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;TYPE-REF&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                            <label style=\"padding:10px;margin-left:55px;\">&#60;&#47;MODE-DECLARATION-GROUP-PROTOTYPE&#62;</label>\r\n                                    </v-row>\r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 15px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;FUNCTION-GROUPS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;\">&#60;HW-ELEMENT-REFS&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextHWElement()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 100px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.hwelement\" :key=\"i\" style=\"height: 25px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextHWElement(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;HW-ELEMENT-REF&#62;</label>\r\n                                        <v-text-field v-model=\"item.hwelement\" placeholder=\"Path\" style=\"width:300px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;HW-ELEMENT-REF&#62;</label>\r\n                                    </v-row>\r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;HW-ELEMENT-REFS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;\">&#60;MACHINE-DESIGN-REF&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.machinedesign\" placeholder=\"Path\"  class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;MACHINE-DESIGN-REF&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;MODULE-INSTANTIATIONS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;IAM-MODULE-INSTANTIATION&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextIAM()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 250px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.iam\" :key=\"i\" style=\"height: 170px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 5px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextIAM(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;GRANT-REFS&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextGrant(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 100px;\">\r\n                                        <v-row v-for=\"(gra, g) in item.grants\" :key=\"g\" style=\"height: 25px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -70px 0px 70px\" @click=\"deletTextGrant(g,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 60px;\">&#60;GRANT-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"gra.grant\" style=\"width:400px\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;GRANT-REF&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 65px;\">&#60;&#47;GRANT-REFS&#62;</label>\r\n                                    </v-row>                                    \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;IAM-MODULE-INSTANTIATION&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;OS-MODULE-INSTANTIATION&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextOS()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 300px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.moduleinstant\" :key=\"i\" style=\"height: 250px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 5px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextOS(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;RESOURCE-GROUPS&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextResource(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 180px;\">\r\n                                        <v-row v-for=\"(res, r) in item.resource\" :key=\"r\" style=\"height: 120px;\">\r\n                                            <div>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                     <v-btn style=\"margin: 15px -90px 0px 90px\" @click=\"deletTextResource(r,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;RESOURCE-GROUP&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;SHORT-NAME&#62;</label>\r\n                                                    <v-text-field v-model=\"res.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;CPU-USAGE&#62;</label>\r\n                                                    <v-text-field v-model=\"res.cpuUsage\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;CPU-USAGE&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;MEM-USAGE&#62;</label>\r\n                                                    <v-text-field v-model=\"res.memoryUsage\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;MEM-USAGE&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 125px;\">&#60;&#47;RESOURCE-GROUP&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 65px;\">&#60;&#47;RESOURCE-GROUPS&#62;</label>\r\n                                    </v-row>                                    \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;OS-MODULE-INSTANTIATION&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;UCM-MODULE-INSTANTIATION&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextUCM()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 150px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.ucm\" :key=\"i\" style=\"height: 50px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextUCM(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 55px;\">&#60;IDENTIFIER&#62;</label>\r\n                                        <v-text-field v-model=\"item.ident\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;IDENTIFIER&#62;</label>\r\n                                    </v-row>\r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;margin-left:10px\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;UCM-MODULE-INSTANTIATION&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;MODULE-INSTANTIATIONS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;\">&#60;PROCESSORS&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextProcessor()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 300px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.processor\" :key=\"i\" style=\"height: 250px;\">\r\n                                <div>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextProcessor(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;PROCESSOR&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 5px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;SHORT-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;CORES&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextCore(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                        <v-row v-for=\"(cor,p) in item.core\" :key=\"p\" style=\"height: 100px;\">\r\n                                            <div>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -90px 0px 90px\" @click=\"deletTextCore(p,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;PROCESSOR-CORE&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;SHORT-NAME&#62;</label>\r\n                                                    <v-text-field v-model=\"cor.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;CORE-ID&#62;</label>\r\n                                                    <v-text-field v-model=\"cor.idCore\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;CORE-ID&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin-left:125px;\">&#60;&#47;PROCESSOR-CORE&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;CORES&#62;</label>\r\n                                    </v-row>                                    \r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                            <label style=\"padding:10px;margin-left:55px;\">&#60;&#47;PROCESSOR&#62;</label>\r\n                                    </v-row>\r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;PROCESSORS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 30px;\">\r\n                            <label style=\"padding:10px;\">&#60;TRUSTED-PLATFORM-EXECUTABLE-LAUNCH-BEHAVIOR&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <v-text-field v-model=\"editARXML.executable\" style=\"margin: 0px 0px 0px 30px\" placeholder=\"STRICT-MODE or MONITOR-MODE or NO-TRUSTED-PLATFORM-SUPPORT\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                        </v-row>\r\n                        <v-row style=\"height: 30px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;TRUSTED-PLATFORM-EXECUTABLE-LAUNCH-BEHAVIOR&#62;</label>\r\n                        </v-row>\r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text  @click=\"saveARXML()\" >\r\n                            Save\r\n                        </v-btn>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text @click=\"cancelARXML()\">\r\n                            Cancel\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n        </v-container>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport constant from \"../store/constants.js\"\r\nimport { EventBus } from \"../main.js\"\r\nimport dialogPathSetting from '../components/dialogPathSetting.vue'\r\n\r\nexport default {\r\n    props: ['element', 'isDatailView','minimaptoolbar', 'location'],\r\n    components:{dialogPathSetting},\r\n    computed: {\r\n        activeUUID() {\r\n            return this.$store.state.activeUUID\r\n        },\r\n        detailViewUUID() {\r\n            return this.$store.state.detailViewUUID\r\n        },\r\n        setting() {\r\n            return this.$store.state.setting\r\n        },\r\n    },\r\n    watch: {\r\n        activeUUID(val) {\r\n            this.setToolbarColor(val)\r\n        },\r\n        detailViewUUID(val) {\r\n            this.setToolbarColorDetailView(val)\r\n        },\r\n        setting(value) {\r\n            this.zoomvalue = value.zoomMain\r\n            if (this.zoomvalue < this.$setZoominTooltip) {\r\n                this.isTooltip = false\r\n            } else {\r\n                this.isTooltip = this.minimaptoolbar\r\n                if (this.zoomvalue  > this.$setZoominLineTitle && this.zoomvalue < this.$setZoominLineSetupStart) {\r\n                    EventBus.$emit('drawLineTitleBar', this.element.uuid, false)\r\n                } else if (this.zoomvalue > this.$setZoominLineSetupStart && this.zoomvalue < this.$setZoominLineSetupEnd) {\r\n                    this.$nextTick(() => {\r\n                        EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                        if(this.iselementOpenClose && this.location == 1) {\r\n                            if(this.element.iam.length > 0) {\r\n                                if (this.isModuleInsOpenClose) {\r\n                                    EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, this.isIamModuleOpenClose)\r\n                                } else {\r\n                                    EventBus.$emit('changeLine-someipService', '', this.element.uuid, null)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.setToolbarColor(this.$store.state.activeUUID)\r\n    },\r\n    data() {\r\n        return {\r\n            rules: {\r\n                name:  [val => (val || '').length > 0 ],\r\n            },\r\n            dialogPath : false,\r\n            colorToolbar: \"#6A5ACD\",\r\n            zoomvalue: this.$store.state.setting.zoomMain,\r\n            isTooltip: this.minimaptoolbar,\r\n            iselementOpenClose: false,\r\n            dialogText: false,\r\n            editARXML: {name:'', machinedesign:null, enterTimeout:'', exitTimeout:'', hwelement:[], executable:null, admin: '',\r\n                    functiongroup:[], environ: [], processor: [], moduleinstant: [], ucm: [], iam: [], crypto: []},\r\n            editTextHWElement: {hwelement: null, id: ''},\r\n            editTextFunG: {name:'', type: null, id:''},\r\n            editTextEnviron: {key: '', value: '',id: ''},\r\n            editTextProcessor: {name: '', core: [], id: ''},\r\n            editTextCore: {name: '', idCore: '', id: ''},\r\n            editTextOS: {name: '',resource: [], id: ''},\r\n            editTextResource: {name: '', cpuUsage: '', memoryUsage: '', id: ''},\r\n            editTextUCM: {name: '', ident: '', id: ''},\r\n            editTextIAM: {name: '', grants: [], id: ''},\r\n            editTextGrant: {grant: null, select: null, id: ''},\r\n            isEditingHWElement: true,\r\n            isEditingModeDeclarationRef: true,\r\n            selMachineDesign: this.$store.getters.getMachineDesign,\r\n            selHWElement: this.$store.getters.getHWElement,\r\n            selModeDeclaration: this.$store.getters.getModeDeclarationG,\r\n            executableLaunch: [ 'STRICT-MODE', 'MONITOR-MODE', 'NO-TRUSTED-PLATFORM-SUPPORT'],\r\n\r\n            isHWElementOpenClose: true,\r\n            isdeleteHWElementItem: false,\r\n            selectDelectHWElement: [],\r\n            headerHWElement: [\r\n                { text: 'HW Element Ref', align: 'start', sortable: false, value: 'hwelement' },\r\n            ],\r\n            editHWItem: { hwelement : null},\r\n\r\n            isFunctionGroupOpenClose: true,\r\n            isdeleteFunctionGroupItem: false,\r\n            selectDelectFunctionItem: [],\r\n            headerFunctionGroup: [\r\n                { text: 'Name', align: 'start', sortable: false, value: 'name' },\r\n                { text: 'Type', sortable: false, value: 'type' },\r\n            ],\r\n            editFunctionItem: { name: '', type: null, id: '' },\r\n            defaultfunctionItem: { name: '', type: null, id: '' },\r\n\r\n            isEnvironmentVOpenClose: true,\r\n            isdeleteEnvironmentV: false,\r\n            selectDelectEnvironmentV: [],\r\n            headerEnvironmentV: [\r\n                { text: 'Key', align: 'start', sortable: false, value: 'key' },\r\n                { text: 'Value', sortable: false, value: 'value' },\r\n            ],\r\n            editEnvironItem: { key: '', value: '', id: '' },\r\n            defaultEnvironItem: { key: '', value: '', id: '' },\r\n\r\n            processortab: null,\r\n            isProcessorOpenClose: true,\r\n            isCoreOpenClose: true,\r\n            isdeleteCoreItem: false,\r\n            selectDelectCoreItem: [],\r\n            headerCore: [\r\n                { text: 'Name', align: 'start', sortable: false, value: 'name'},\r\n                { text: 'Core ID', sortable: false, value: 'idCore'},\r\n            ],\r\n            editCoreItem: { name: '', idCore: '', id: '' },\r\n            defaultCoreItem: { name: '', idCore: '', id: '' },\r\n\r\n            isModuleInsOpenClose: true,\r\n            ModuleInstab: null,\r\n            isOSModuleInsOpenClose: true,\r\n            isResourceGOpenClose: true,\r\n            isdeleteResourceGItem: false,\r\n            selectDelectModuleInsItem: [],\r\n            headerModuleIns: [\r\n                { text: 'Resource Group Name', width:'160px', align: 'start', sortable: false, value: 'name' },\r\n                { text: 'CPU Usage', width:'100px', sortable: false, value: 'cpuUsage' },\r\n                { text: 'Memory Usage', width:'120px', sortable: false, value: 'memoryUsage' },\r\n            ],\r\n            editModuleInsItem: { name: '',cpuUsage: '', memoryUsage: '', id: '' },\r\n            defaultModuleInsItem: { name: '', cpuUsage: '', memoryUsage: '', id: '' },\r\n\r\n            isUCMModuleOpenClose: true,\r\n            isdeleteUCMModule: false,\r\n            selectDelectUCMModule: [],\r\n            headerUCMModule: [\r\n                { text: 'Name', align: 'start', sortable: false, value: 'name' },\r\n                { text: 'Identifier', sortable: false, value: 'ident' },\r\n            ],\r\n            editUCMModuleItem: { name: '', ident: '', id: '' },\r\n            defaultUCMModuleItem: { name: '', ident: '', id: '' },\r\n\r\n            IamModuleTab: null,\r\n            isIamModuleOpenClose: true,\r\n            isGrantRefOpenClose: true,\r\n            isdeleteGrantRef: false,\r\n            selectDelectGrantRef: [],\r\n            headerGrantRef: [\r\n                { text: 'Grant Ref', sortable: false, value: 'grant' },\r\n            ],\r\n            selectGrant: ['COM-EVENT-GRANT','COM-FIELD-GRANT', 'COM-METHOD-GRANT'],\r\n            editGrant: { grant: null, select: null, id: ''},\r\n            selGrant:this.$store.getters.getEventGrant,\r\n            isEditingGrant: true,\r\n\r\n            isCryptoOpenClose: true,\r\n            CryptoTab: 0,\r\n            idCrypto: 4,\r\n            selectSDG: [],\r\n            editSDGItem: { ele: null, gid: null, item: null},\r\n            selProvider: [\"RELATED-PROCESS\", \"RELATED-PORT\", \"CRYPTO-INSTANTIATION-KEY-SLOT\", ],\r\n            selCerification: [\"RELATED-PROCESS\", \"RELATED-PORT\", \"CRYPTO-CERTIFICATE-KEY-SLOT\"],\r\n            selKeySlot: [\"RELATED-PROCESS\", \"RELATED-PORT\", \"CRYPTO-KEY-SLOT-CONTENT-ALLOWED-USAGE\", \"CRYPTO-KEY-SLOT-ALLOWED-MODIFICATION\"],\r\n            selSDKeySlot: [\"SHORT-NAME\", \"CRYPTO-KEY-SLOT-ALG-ID\", \"CRYPTO-KEY-SLOT-OBJECT-TYPE\", \"CRYPTO-KEY-SLOT-SLOT-TYPE\", \"CRYPTO-KEY-SLOT-SLOT-CAPACITY\"],\r\n            selSDUsage: [\"CRYPTO-KEY-SLOT-CONTENT-ALLOWED-USAGE\", \"CRYPTO-KEY-SLOT-CONTENT-ALLOWED-USAGE\"],\r\n            selSDModification: [\"CRYPTO-KEY-SLOT-ALLOW-CONTENT-TYPE-CHANGE\", \"CRYPTO-KEY-SLOT-EXPORT-ABILITY\", \"CRYPTO-KEY-SLOT-MAX-NUMBER-OF-ALLOWED-UPDATES\", \"CRYPTO-KEY-SLOT-RESTRICT-UPDATE\"],\r\n            selFirstSDG: ['SDG-CAPTION', 'SDG', 'SD'],\r\n            selFirstSD: ['SHORT-NAME'],\r\n            selRef: ['SDX-REF', 'SDG-CAPTION'],\r\n            selKeySlotAllowed: ['SD'],\r\n            selSDGEleItem: [],\r\n            selSDGGidItem: [],\r\n            isSDGItem: false,\r\n            isAddItem: false,\r\n            isDeletItem: false,\r\n            dialogEditSDG: false,\r\n\r\n            beforeProcess: '',\r\n            beforeModule: ''\r\n        }\r\n    },\r\n    mounted () {\r\n        if (this.minimaptoolbar && this.zoomvalue < this.$setZoominElement) {\r\n            this.isTooltip = false\r\n        }\r\n        if (this.element.functiongroup.length > 0) {\r\n            this.element.functiongroup.forEach(item => {\r\n                if (item.type != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+item.id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getModeDeclarationPath(item.type, 0)\r\n                    }\r\n                    if (endLine != undefined) {\r\n                        //this.newLine(this.element.uuid+'/functiontable-'+item.id, this.element.uuid+'/functiontable', endLine)\r\n                        this.newLine(this.element.uuid+'/functiontable-'+item.id, this.element.uuid, endLine)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        submitDialog(element) {\r\n            this.element.path = element\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n        },\r\n        setToolbarColor(uuid) \r\n        {\r\n            if(this.element.uuid == uuid) {\r\n                this.colorToolbar = \"#FF1493\" \r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        setToolbarColorDetailView(isdetail) {\r\n            if(this.element.uuid == isdetail) {\r\n                this.colorToolbar = \"#B0E0E6\" \r\n            } else if (this.element.uuid == this.$store.state.activeUUID) {\r\n                this.colorToolbar  = \"#FF1493\"\r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        showMachine () {\r\n            this.iselementOpenClose = this.iselementOpenClose ? false : true\r\n            this.$nextTick(() => {\r\n                EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                if(this.iselementOpenClose && this.location == 1) {\r\n                    if(this.element.iam.length > 0) {\r\n                        if (this.isModuleInsOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, this.isIamModuleOpenClose)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', '', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        showHWElement() {\r\n            this.isHWElementOpenClose = this.isHWElementOpenClose ? false : true\r\n            // 선을 다시 그려줘야 하기 때문에\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showFunctionGroupItem() {\r\n            this.isFunctionGroupOpenClose = this.isFunctionGroupOpenClose ? false : true\r\n            // 선을 다시 그려줘야 하기 때문에\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showEnvironmentV() {\r\n            this.isEnvironmentVOpenClose = this.isEnvironmentVOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showProcessorItem() {\r\n            this.isProcessorOpenClose = this.isProcessorOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showCore() {\r\n            this.isCoreOpenClose = this.isCoreOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showModuleInsItem() {\r\n            this.isModuleInsOpenClose = this.isModuleInsOpenClose ? false : true\r\n            this.$nextTick(() => {\r\n                if(this.iselementOpenClose && this.location == 1) {\r\n                    if(this.element.iam.length > 0) {\r\n                        if (this.isModuleInsOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, this.isIamModuleOpenClose)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', '', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        showOSModuleInsItem() {\r\n            this.isOSModuleInsOpenClose = this.isOSModuleInsOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showResourceG() {\r\n            this.isResourceGOpenClose = this.isResourceGOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showUCMModule() {\r\n            this.isUCMModuleOpenClose = this.isUCMModuleOpenClose ? false : true\r\n            EventBus.$emit('drawLine')\r\n        },\r\n        showIamModule() {\r\n            this.isIamModuleOpenClose = this.isIamModuleOpenClose ? false : true\r\n            if (this.element.iam.length > 0) {\r\n                EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, this.isIamModuleOpenClose)\r\n            }\r\n        },\r\n        showCrypto() {\r\n            this.isCryptoOpenClose = this.isCryptoOpenClose ? false : true\r\n            },\r\n        showGrantRef() {\r\n            this.isGrantRefOpenClose = this.isGrantRefOpenClose ? false : true \r\n        },\r\n        inputMachineName() {\r\n            this.$store.commit('editMachine', {compo:\"Name\", uuid:this.element.uuid, name:this.element.name} )\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            if (this.element.name != '') {\r\n                this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n            }\r\n        },\r\n        clickProcessorName(name) {\r\n            this.beforeProcess = name\r\n        },\r\n        clickModuleInsName(name) {\r\n            this.beforeModule = name\r\n        },\r\n        inputProcessorName() {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'Processor', listname: this.element.processor[this.processortab].name, beforename: this.beforeProcess} )\r\n            this.beforeProcess = this.element.processor[this.processortab].name\r\n        },\r\n        inputModuleInsName() {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'ModuleIns', listname: this.element.moduleinstant[this.ModuleInstab].name, beforename: this.beforeModule} )\r\n            this.beforeModule = this.element.moduleinstant[this.ModuleInstab].name\r\n        },\r\n\r\n\r\n        setMachineDesignSelect() {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/machinedesign')\r\n            if (endLine == undefined) {\r\n                endLine = this.$store.getters.getMachineDesignPath(this.element.machinedesign, 0)\r\n            }\r\n            if (endLine != null) {\r\n                this.$store.commit('setDetailView', {uuid: endLine, element: constant.MachineDesigne_str} )\r\n                document.getElementById(endLine+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                EventBus.$emit('active-element', endLine)\r\n            }\r\n        },\r\n        setMachineDesignList() {\r\n            this.selMachineDesign = this.$store.getters.getMachineDesign\r\n            this.setactiveUUID()\r\n        },\r\n        setMachineDesign(item) {\r\n            if( this.element.machinedesign != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/machinedesign')\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                    this.deleteLine(this.element.uuid+'/machinedesign')\r\n                }\r\n                //새로 추가해준다\r\n                this.newLine(this.element.uuid+'/machinedesign', this.element.uuid+'/machinedesign', item.uuid)\r\n                this.element.machinedesign = item.name\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        clearMachineDesign() {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/machinedesign')\r\n            if (endLine != undefined) {\r\n                this.element.machinedesign = null\r\n                this.deleteLine(this.element.uuid+'/machinedesign')\r\n            }\r\n        },\r\n\r\n        setModeDeclarationSelect() {\r\n            if (this.isEditingModeDeclarationRef == true) {\r\n                if (this.editFunctionItem.type != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editFunctionItem.type.uuid, element: constant.ModeDeclarationGroup_str} )\r\n                    document.getElementById(this.editFunctionItem.type.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    EventBus.$emit('active-element', this.editFunctionItem.type.uuid)\r\n                }\r\n                this.setModeDeclarationList()\r\n                this.isEditingModeDeclarationRef = false\r\n            } else {\r\n                this.isEditingModeDeclarationRef = true\r\n            }\r\n        },\r\n        setModeDeclarationList() {\r\n            this.selModeDeclaration = this.$store.getters.getModeDeclarationG\r\n            this.setactiveUUID()\r\n        },\r\n        clearModeDeclarRef() {\r\n            this.isEditingModeDeclarationRef = true\r\n            this.editFunctionItem.type = null\r\n        },\r\n        newMachineDesign() {\r\n            //machine design\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            var nameMachineD\r\n            if (this.element.name.includes('Machine')) {\r\n                nameMachineD = this.element.name.replace(/Machine/gi, 'MachineDesign')\r\n            } else {\r\n                nameMachineD = this.element.name +'_MachineDesign'\r\n            }\r\n            this.$store.commit('addElementMachineDesign', {\r\n                name: nameMachineD, path: '',\r\n                top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                access:null, resettimer: '', connector:[], servicediscover:[], \r\n            })\r\n            EventBus.$emit('add-element', constant.MachineDesigne_str)\r\n            EventBus.$emit('add-element', constant.Machines_str)\r\n            this.$store.commit('editMachine', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n        newHWElement() {\r\n            //HW Element\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            this.$store.commit('addElementHWElement', { //category 는 null해줘야한다. clearable하면 값이 null변하기 때문에 \r\n                name: this.$store.getters.getNameHWElement, path: '',\r\n                top: elementY, left: elementX, zindex: 10, category:null, attribute:[], icon:\"mdi-clipboard-outline\", validation: false\r\n            })\r\n            EventBus.$emit('add-element', constant.HWElement_str)\r\n            EventBus.$emit('add-element', constant.Machines_str)\r\n            this.$store.commit('editMachine', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n        newModeDeclaration() {\r\n            //Mode Declaration\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            this.$store.commit('addElementModeDeclarationGroup', {\r\n                name: this.$store.getters.getNameModeDeclarationGroup, path: '',\r\n                top: elementY, left: elementX, zindex: 10, modedeclaration:[{name: 'Off', value: ''},{name: 'Startup', Value: ''}], initmode:'Off', icon:\"mdi-clipboard-outline\", validation: false\r\n            })\r\n            EventBus.$emit('add-element', constant.ModeDeclarationGroup_str)\r\n            EventBus.$emit('add-element', constant.Machines_str)\r\n            this.$store.commit('editMachine', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n\r\n        },\r\n\r\n        isCheckHWElement() {\r\n            if (this.isdeleteHWElementItem == true) {\r\n                this.isdeleteHWElementItem = false\r\n                this.selectDelectHWElement = []\r\n            } else {\r\n                this.isdeleteHWElementItem = true\r\n            }\r\n        },\r\n        deletHWElement() {\r\n            if (this.isdeleteHWElementItem == true) {\r\n                this.selectDelectHWElement.forEach(item => {\r\n                    for(let i=0; i<this.element.hwelement.length; i++){\r\n                        if (item.id == this.element.hwelement[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+this.element.hwelement[i].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/hwelement-'+this.element.hwelement[i].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.hwelement = this.element.hwelement.filter(item => {\r\n                        return this.selectDelectHWElement.indexOf(item) < 0 })\r\n\r\n                this.isdeleteHWElementItem = false\r\n                this.selectDelectHWElement = []\r\n            } \r\n        },\r\n        openHWElement(idx) {\r\n            this.selHWElement = this.$store.getters.getHWElement\r\n            if ( this.element.hwelement[idx].hwelement != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getHWElementPath(this.element.hwelement[idx].hwelement)\r\n                }\r\n                this.editHWItem.hwelement = { name: this.element.hwelement[idx].hwelement, uuid: endLine }\r\n            }\r\n        },\r\n        editHWElement(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id)\r\n            if (endLine != undefined && this.editHWItem.hwelement == null) {\r\n                this.deleteLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id)\r\n                this.element.hwelement[idx].hwelement = null\r\n            } else if (endLine != undefined && endLine != this.editHWItem.hwelement.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id)\r\n                this.newLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id, this.element.uuid+'/hwelement', this.editHWItem.hwelement.uuid)\r\n                this.element.hwelement[idx].hwelement = this.editHWItem.hwelement.name\r\n            } else if (endLine == undefined && this.editHWItem.hwelement != null && this.editHWItem.hwelement.uuid != null) {\r\n                this.newLine(this.element.uuid+'/hwelement-'+this.element.hwelement[idx].id, this.element.uuid+'/hwelement', this.editHWItem.hwelement.uuid)\r\n                this.element.hwelement[idx].hwelement = this.editHWItem.hwelement.name\r\n            }\r\n            \r\n            this.cancelHWElement()\r\n        },\r\n        cancelHWElement() {\r\n            this.editHWItem.hwelement = null\r\n            this.setactiveUUID()\r\n        },\r\n        addHWElement() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.hwelement.some(item => item.id === n)\r\n            }\r\n            this.editHWItem.id = n\r\n\r\n            if( this.editHWItem.hwelement != null) {\r\n                this.newLine(this.element.uuid+'/hwelement-'+n, this.element.uuid+'/hwelement', this.editHWItem.hwelement.uuid)\r\n                this.editHWItem.hwelement = this.editHWItem.hwelement.name\r\n            }\r\n            const addObj = Object.assign({}, this.editHWItem)\r\n            this.element.hwelement.push(addObj);\r\n\r\n            this.cancelHWElement()\r\n        },\r\n        setHWElementSelect() {\r\n            if (this.isEditingHWElement == true) {\r\n                if (this.editHWItem.hwelement !=null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editHWItem.hwelement.uuid, element: constant.HWElement_str} )\r\n                    document.getElementById(this.editHWItem.hwelement.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    EventBus.$emit('active-element', this.editHWItem.hwelement.uuid)\r\n                }\r\n                this.setHWElementList()\r\n                this.isEditingHWElement = false\r\n            } else {\r\n                this.isEditingHWElement = true\r\n            }\r\n        },\r\n        setHWElementList() {\r\n            this.selHWElement = this.$store.getters.getHWElement\r\n            this.setactiveUUID()\r\n        },\r\n        clearHWElement() {\r\n            this.isEditingHWElement = true\r\n            this.editHWItem.hwelement = null\r\n        },\r\n\r\n        \r\n        isCheckFunctionGroup() {\r\n            if (this.isdeleteFunctionGroupItem == true) {\r\n                this.isdeleteFunctionGroupItem = false\r\n                this.selectDelectFunctionItem = []\r\n            } else {\r\n                this.isdeleteFunctionGroupItem = true\r\n            }\r\n        },\r\n        deleteFunctionGroup() {\r\n            if (this.isdeleteFunctionGroupItem == true) {\r\n                this.selectDelectFunctionItem.forEach(item => {\r\n                    for(let i=0; i<this.element.functiongroup.length; i++){\r\n                        if (item.id == this.element.functiongroup[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[i].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[i].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.$store.commit('deleteRefTable', {deleteName:'functionG', deletItemList: this.selectDelectFunctionItem, path: this.element.path, name: this.element.name})\r\n                this.element.functiongroup = this.element.functiongroup.filter(item => {\r\n                        return this.selectDelectFunctionItem.indexOf(item) < 0 })\r\n\r\n                this.isdeleteFunctionGroupItem = false\r\n                this.selectDelectFunctionItem = []\r\n            } \r\n        },\r\n        openFunctionGroup(idx) {\r\n            this.selModeDeclaration = this.$store.getters.getModeDeclarationG\r\n            this.editFunctionItem.name = this.element.functiongroup[idx].name\r\n            if ( this.element.functiongroup[idx].type != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getModeDeclarationPath(this.element.functiongroup[idx].type, 0)\r\n                }\r\n                this.editFunctionItem.type = { name: this.element.functiongroup[idx].type, uuid: endLine }\r\n            }\r\n        },\r\n        editFunctionGroup(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id)\r\n            if (endLine != undefined && this.editFunctionItem.type == null) {\r\n                this.deleteLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id)\r\n                this.element.functiongroup[idx].type = null\r\n            } else if (endLine != undefined && endLine != this.editFunctionItem.type.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id)\r\n                this.newLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id, this.element.uuid+'/functiontable', this.editFunctionItem.type.uuid)\r\n                this.element.functiongroup[idx].type = this.editFunctionItem.type.name\r\n            } else if (endLine == undefined && this.editFunctionItem.type != null && this.editFunctionItem.type.uuid != null) {\r\n                this.newLine(this.element.uuid+'/functiontable-'+this.element.functiongroup[idx].id, this.element.uuid+'/functiontable', this.editFunctionItem.type.uuid)\r\n                this.element.functiongroup[idx].type = this.editFunctionItem.type.name\r\n            }\r\n\r\n            if (this.element.functiongroup[idx].name != this.editFunctionItem.name){\r\n                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'functionG', listname: this.editFunctionItem.name, beforename: this.element.functiongroup[idx].name} )\r\n            }\r\n\r\n            this.element.functiongroup[idx].name = this.editFunctionItem.name\r\n            \r\n            this.cancelFunctionGroup()\r\n        },\r\n        cancelFunctionGroup() {\r\n            this.editFunctionItem = Object.assign({}, this.defaultfunctionItem)\r\n            this.setactiveUUID()\r\n        },\r\n        addFunctionGroup() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.functiongroup.some(item => item.id === n)\r\n            }\r\n            this.editFunctionItem.id = n\r\n\r\n            if( this.editFunctionItem.type != null) {\r\n                this.newLine(this.element.uuid+'/functiontable-'+n, this.element.uuid+'/functiontable', this.editFunctionItem.type.uuid)\r\n                this.editFunctionItem.type = this.editFunctionItem.type.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editFunctionItem)\r\n            this.element.functiongroup.push(addObj);\r\n            this.cancelFunctionGroup()\r\n        },\r\n\r\n        isCheckEnvironmentV() {\r\n            if (this.isdeleteEnvironmentV == true) {\r\n                this.isdeleteEnvironmentV = false\r\n                this.selectDelectEnvironmentV = []\r\n            } else {\r\n                this.isdeleteEnvironmentV = true\r\n            }\r\n        },\r\n        deleteEnvironmentV() {\r\n            if (this.isdeleteEnvironmentV == true) {\r\n                this.element.environ = this.element.environ.filter(item => {\r\n                        return this.selectDelectEnvironmentV.indexOf(item) < 0 })\r\n\r\n                this.isdeleteEnvironmentV = false\r\n                this.selectDelectEnvironmentV = []\r\n            } \r\n        },\r\n        openEnvironmentV(idx) {\r\n            this.editEnvironItem.key = this.element.environ[idx].key\r\n            this.editEnvironItem.value = this.element.environ[idx].value\r\n        },\r\n        editEnvironmentV(idx) {\r\n            this.element.environ[idx].key = this.editEnvironItem.key\r\n            this.element.environ[idx].value = this.editEnvironItem.value\r\n            this.cancelEnvironmentV()\r\n        },\r\n        cancelEnvironmentV() {\r\n            this.editEnvironItem = Object.assign({}, this.defaultEnvironItem)\r\n            this.setactiveUUID()\r\n        },\r\n        addEnvironmentV() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.environ.some(item => item.id === n)\r\n            }\r\n            this.editEnvironItem.id = n\r\n\r\n            const addObj = Object.assign({}, this.editEnvironItem)\r\n            this.element.environ.push(addObj);\r\n            this.cancelEnvironmentV()\r\n        },\r\n\r\n        clickProcessortab() {\r\n            this.isdeleteCoreItem = false\r\n            this.selectDelectCoreItem = []\r\n        },\r\n        deleteProcessor(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'Processor', deleteTab: true, tabName: this.element.processor[idx].name, path: this.element.path, name: this.element.name})\r\n\r\n            this.element.processor.splice(idx, 1)\r\n            this.clickProcessortab()\r\n        },\r\n        addProcessor() {\r\n            const editItem = {name: '', core: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'Processor__' + n++;\r\n                res = this.element.processor.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.processor.push(addObj)\r\n            this.processortab = this.element.processor.length-1\r\n            this.isdeleteCoreItem = false\r\n            this.selectDelectCoreItem = []\r\n        },\r\n        isCheckCore() {\r\n            if (this.isdeleteCoreItem == true) {\r\n                this.isdeleteCoreItem = false\r\n                this.selectDelectCoreItem = []\r\n            } else {\r\n                this.isdeleteCoreItem = true\r\n            }\r\n        },\r\n        deleteCore() {\r\n            if (this.isdeleteCoreItem == true) {\r\n                this.$store.commit('deleteRefTable', {deleteName:'proCore', deletItemList: this.selectDelectCoreItem, path: this.element.path, name: this.element.name, tabname: this.element.processor[this.processortab].name})\r\n\r\n                this.element.processor[this.processortab].core = this.element.processor[this.processortab].core.filter(item => {\r\n                         return this.selectDelectCoreItem.indexOf(item) < 0 })\r\n                this.isdeleteCoreItem = false\r\n                this.selectDelectCoreItem = []\r\n            }\r\n        },\r\n        openCore(idx, core) {\r\n            this.editCoreItem.name = core[idx].name\r\n            this.editCoreItem.idCore = core[idx].idCore\r\n        },\r\n        editCore(idx,core) {\r\n            if (this.editCoreItem.name != core[idx].name) {\r\n                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'proCore', listname: this.editCoreItem.name, tabname: this.element.processor[this.processortab].name, beforename: core[idx].name} )\r\n            }\r\n            core[idx].name = this.editCoreItem.name\r\n            core[idx].idCore = this.editCoreItem.idCore\r\n            this.cancelCore()\r\n        },\r\n        cancelCore() {\r\n            this.editCoreItem = Object.assign({}, this.defaultCoreItem)\r\n            this.setactiveUUID()\r\n        },\r\n        addCore(idx) {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.processor[idx].core.some(item => item.id === n)\r\n            }\r\n            this.editCoreItem.id = n\r\n\r\n            const addObj = Object.assign({}, this.editCoreItem)\r\n            this.element.processor[idx].core.push(addObj)\r\n            this.cancelCore()\r\n        },\r\n\r\n        addModuleIns() {\r\n            const editItem = {name: '', resource: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'Module Instance_' + n++;\r\n                res = this.element.moduleinstant.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.moduleinstant.push(addObj)\r\n            this.ModuleInstab = this.element.moduleinstant.length-1\r\n            this.isdeleteResourceGItem = false\r\n            this.selectDelectModuleInsItem = []\r\n        },\r\n        clickModuleInstab() {\r\n            this.isdeleteResourceGItem = false\r\n            this.selectDelectModuleInsItem = []\r\n        },\r\n        deleteModuleIns(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'ModuleIns', deleteTab: true, tabName: this.element.moduleinstant[idx].name, path: this.element.path, name: this.element.name})\r\n            this.element.moduleinstant.splice(idx, 1)\r\n        },\r\n        isCheckResourceG() {\r\n            if (this.isdeleteResourceGItem == true) {\r\n                this.isdeleteResourceGItem = false\r\n                this.selectDelectModuleInsItem = []\r\n            } else {\r\n                this.isdeleteResourceGItem = true\r\n            }\r\n        },\r\n        deleteResourceG() {\r\n            if (this.isdeleteResourceGItem == true) {\r\n                this.element.moduleinstant[this.ModuleInstab].resource = this.element.moduleinstant[this.ModuleInstab].resource.filter(item => {\r\n                         return this.selectDelectModuleInsItem.indexOf(item) < 0 })\r\n                this.isdeleteResourceGItem = false\r\n                this.selectDelectModuleInsItem = []\r\n            } \r\n        },\r\n        openResourceG(idx, resource) {\r\n            this.editModuleInsItem.name = resource[idx].name\r\n            this.editModuleInsItem.cpuUsage = resource[idx].cpuUsage\r\n            this.editModuleInsItem.memoryUsage = resource[idx].memoryUsage\r\n        },\r\n        editResourceG(idx, resource) {\r\n            resource[idx].name = this.editModuleInsItem.name\r\n            resource[idx].cpuUsage = this.editModuleInsItem.cpuUsage\r\n            resource[idx].memoryUsage = this.editModuleInsItem.memoryUsage\r\n            this.cancelResourceG()\r\n        },\r\n        cancelResourceG() {\r\n            this.editModuleInsItem = Object.assign({}, this.defaultModuleInsItem)\r\n            this.setactiveUUID()\r\n        },\r\n        addResourceG(idx) {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.moduleinstant[idx].resource.some(item => item.id === n)\r\n            }\r\n            this.editModuleInsItem.id = n\r\n\r\n            const addObj = Object.assign({}, this.editModuleInsItem)\r\n            this.element.moduleinstant[idx].resource.push(addObj)\r\n            this.cancelResourceG()\r\n        },\r\n\r\n        isCheckUCMModule() {\r\n            if (this.isdeleteUCMModule == true) {\r\n                this.isdeleteUCMModule = false\r\n                this.selectDelectUCMModule = []\r\n            } else {\r\n                this.isdeleteUCMModule = true\r\n            }\r\n        },\r\n        deleteUCMModule() {\r\n            if (this.isdeleteUCMModule == true) {\r\n                this.$store.commit('deleteRefTable', {deleteName:'ucm', deletItemList: this.selectDelectUCMModule, path: this.element.path, name: this.element.name})\r\n                this.element.ucm = this.element.ucm.filter(item => {\r\n                        return this.selectDelectUCMModule.indexOf(item) < 0 })\r\n\r\n                this.isdeleteUCMModule = false\r\n                this.selectDelectUCMModule = []\r\n            } \r\n        },\r\n        openUCMModule(idx) {\r\n            this.editUCMModuleItem.name = this.element.ucm[idx].name\r\n            this.editUCMModuleItem.ident = this.element.ucm[idx].ident\r\n        },\r\n        editUCMModule(idx) {\r\n            if (this.element.ucm[idx].name != this.editUCMModuleItem.name){\r\n                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'ucm', listname: this.editUCMModuleItem.name, beforename: this.element.ucm[idx].name } )\r\n            }\r\n            this.element.ucm[idx].name = this.editUCMModuleItem.name\r\n            this.element.ucm[idx].ident = this.editUCMModuleItem.ident\r\n            this.cancelUCMModule()\r\n        },\r\n        cancelUCMModule() {\r\n            this.editUCMModuleItem = Object.assign({}, this.defaultUCMModuleItem)\r\n            this.setactiveUUID()\r\n        },\r\n        addUCMModule() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.ucm.some(item => item.id === n)\r\n            }\r\n            this.editUCMModuleItem.id = n\r\n\r\n            const addObj = Object.assign({}, this.editUCMModuleItem)\r\n            this.element.ucm.push(addObj);\r\n            this.cancelUCMModule()\r\n        },\r\n\r\n        addIamModule() {\r\n            const editItem = {name: '', grants: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'IAM_Instantiation_' + n++;\r\n                res = this.element.iam.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.iam.push(addObj)\r\n            this.IamModuleTab = this.element.iam.length-1\r\n            if(this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, false)\r\n            }\r\n        },\r\n        clickIamModuletab() {\r\n            this.isdeleteGrantRef = false\r\n            this.selectDelectGrantRef = []\r\n        },\r\n        changeIamModuleTab() {\r\n            if(this.element.iam.length > 0 && this.location == 1 && this.IamModuleTab != undefined) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'module', this.element.uuid, this.IamModuleTab, this.element.iam[this.IamModuleTab].id, true)}, 300);\r\n            }\r\n        },\r\n        deleteIamModule(idx) {\r\n            this.$store.commit('deleteRefTable', {deleteName:'iam', deleteTab: true, tabName: this.element.iam[idx].name, path: this.element.path, name: this.element.name})\r\n            for(let i=0; i<this.element.iam[idx].grants.length; i++){\r\n                var endLineCon = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[i].id+'-'+this.element.iam[idx].id)\r\n                if(endLineCon != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/iamM-'+this.element.iam[i].id+'-'+this.element.iam[idx].id)\r\n                }\r\n            }\r\n            this.element.iam.splice(idx, 1)\r\n        },\r\n        isCheckGrantRef() {\r\n            if (this.isdeleteGrantRef == true) {\r\n                this.isdeleteGrantRef = false\r\n                this.selectDelectGrantRef = []\r\n            } else {\r\n                this.isdeleteGrantRef = true\r\n            }\r\n        },\r\n        deleteGrantRef() {\r\n            if (this.isdeleteGrantRef == true) {\r\n                this.selectDelectGrantRef.forEach( item => {\r\n                    for(let i=0; i<this.element.iam[this.IamModuleTab].grants.length; i++){\r\n                        if (item.id == this.element.iam[this.IamModuleTab].grants[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[i].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[i].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.iam[this.IamModuleTab].grants = this.element.iam[this.IamModuleTab].grants.filter(item => {\r\n                        return this.selectDelectGrantRef.indexOf(item) < 0 })\r\n\r\n                this.isdeleteGrantRef = false\r\n                this.selectDelectGrantRef = []\r\n            } \r\n        },\r\n        openGrantRef(idx) { \r\n            var endLine = null\r\n            this.editGrant.select = this.element.iam[this.IamModuleTab].grants[idx].select\r\n            if (this.editGrant.select == \"COM-EVENT-GRANT\") {\r\n                this.selGrant = this.$store.getters.getEventGrant\r\n\r\n                if (this.element.iam[this.IamModuleTab].grants[idx].grant != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getEventPath(this.element.iam[this.IamModuleTab].grants[idx].grant)\r\n                    }\r\n                    this.editGrant.grant = { name: this.element.iam[this.IamModuleTab].grants[idx].grant, uuid: endLine}\r\n                }\r\n            } else if (this.editGrant.select == \"COM-FIELD-GRANT\") {\r\n                this.selGrant = this.$store.getters.getFieldGrant\r\n\r\n                if (this.element.iam[this.IamModuleTab].grants[idx].grant != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getFieldPath(this.element.iam[this.IamModuleTab].grants[idx].grant)\r\n                    }\r\n                    this.editGrant.grant = { name: this.element.iam[this.IamModuleTab].grants[idx].grant, uuid: endLine}\r\n                }\r\n            } else if (this.editGrant.select == \"COM-METHOD-GRANT\") {\r\n                this.selGrant = this.$store.getters.getMethodGrant\r\n\r\n                if (this.element.iam[this.IamModuleTab].grants[idx].grant != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getMethodPath(this.element.iam[this.IamModuleTab].grants[idx].grant)\r\n                    }\r\n                    this.editGrant.grant = { name: this.element.iam[this.IamModuleTab].grants[idx].grant, uuid: endLine}\r\n                }\r\n            }\r\n        },\r\n        editGrantRefItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n            if (endLine != undefined && this.editGrant.grant == null) {\r\n                this.deleteLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                this.element.iam[this.IamModuleTab].grants[idx].grant = null\r\n            } else if (endLine != undefined && endLine != this.editGrant.grant.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id)\r\n                this.newLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id, this.element.uuid+'/grandtab-'+this.element.iam[this.IamModuleTab].id, this.editGrant.grant.uuid)\r\n                this.element.iam[this.IamModuleTab].grants[idx].grant = this.editGrant.grant.name\r\n            } else if (endLine == undefined && this.editGrant.grant != null && this.editGrant.grant.uuid != null) {\r\n                this.newLine(this.element.uuid+'/iamM-'+this.element.iam[this.IamModuleTab].grants[idx].id+'-'+this.element.iam[this.IamModuleTab].id, this.element.uuid+'/grandtab-'+this.element.iam[this.IamModuleTab].id, this.editGrant.grant.uuid)\r\n                this.element.iam[this.IamModuleTab].grants[idx].grant = this.editGrant.grant.name\r\n            }\r\n            this.element.iam[this.IamModuleTab].grants[idx].select = this.editGrant.select\r\n            this.cancelGrantRef()\r\n        },\r\n        cancelGrantRef() {\r\n            this.editGrant = {grant: null, select: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addGrantRef() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.iam[this.IamModuleTab].grants.some(item => item.id === n)\r\n            }\r\n            this.editGrant.id = n\r\n\r\n            if( this.editGrant.grant != null) {\r\n                this.newLine(this.element.uuid+'/iamM-'+n+'-'+this.element.iam[this.IamModuleTab].id, this.element.uuid+'/grandtab-'+this.element.iam[this.IamModuleTab].id, this.editGrant.grant.uuid)\r\n                this.editGrant.grant = this.editGrant.grant.name\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editGrant)\r\n            this.element.iam[this.IamModuleTab].grants.push(addObj);\r\n            this.cancelGrantRef()\r\n        },\r\n        clearGrantSelect() {\r\n            this.editGrant.grant = null\r\n            this.editGrant.select = null\r\n        },\r\n        setGrantSelect() {\r\n            if (this.isEditingGrant == true) {\r\n                if (this.editGrant.grant != null && this.editGrant.grant.uuid != null) {\r\n                    if (this.editGrant.select == \"COM-EVENT-GRANT\") {\r\n                        this.$store.commit('setDetailView', {uuid: this.editGrant.grant.uuid, element: constant.ComEventGrant_str} )\r\n                    }else if (this.editGrant.select == \"COM-FIELD-GRANT\") {\r\n                        this.$store.commit('setDetailView', {uuid: this.editGrant.grant.uuid, element: constant.ComFieldGrant_str} )\r\n                    } else if (this.editGrant.select == \"COM-METHOD-GRANT\") {\r\n                        this.$store.commit('setDetailView', {uuid: this.editGrant.grant.uuid, element: constant.ComMethodGrant_str} )\r\n                    }\r\n                    document.getElementById(this.editGrant.grant.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    EventBus.$emit('active-element', this.editGrant.grant.uuid)\r\n                }\r\n                this.setGrantList()\r\n                this.isEditingGrant = false\r\n            } else {\r\n                this.isEditingGrant = true\r\n            }\r\n        },\r\n        setGrantList() {\r\n            if (this.editGrant.select == \"COM-EVENT-GRANT\") {\r\n                this.selGrant = this.$store.getters.getEventGrant\r\n            } else if (this.editGrant.select == \"COM-FIELD-GRANT\") {\r\n                this.selGrant = this.$store.getters.getFieldGrant\r\n            } else if (this.editGrant.select == \"COM-METHOD-GRANT\") {\r\n                this.selGrant = this.$store.getters.getMethodGrant\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        clearGrant() {\r\n            this.isEditingGrant = true\r\n            this.editGrant.grant = null\r\n        },\r\n        newGrant() {\r\n            const elementX = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n            const elementY = Array.from({length:4}, () => Math.floor(Math.random() * 3000))\r\n\r\n            if (this.editGrant.select == \"COM-EVENT-GRANT\") {\r\n                this.$store.commit('addElementEventG', {\r\n                    name: this.$store.getters.getNameEventG, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    eventD: null, provide: null,\r\n                })\r\n                EventBus.$emit('add-element', constant.ComEventGrant_str)\r\n            } else if (this.editGrant.select == \"COM-FIELD-GRANT\") {\r\n                this.$store.commit('addElementFieldG', {\r\n                    name: this.$store.getters.getNameFieldG, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    fieldD: null, provide: null, role: null\r\n                })\r\n                EventBus.$emit('add-element', constant.ComFieldGrant_str)\r\n            } else if (this.editGrant.select == \"COM-METHOD-GRANT\") {\r\n                this.$store.commit('addElementMethodG', {\r\n                    name: this.$store.getters.getNameMethodG, path: '',\r\n                    top: elementY, left: elementX, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    methodD: null, provide: null,\r\n                })\r\n                EventBus.$emit('add-element', constant.ComMethodGrant_str)\r\n            }\r\n            EventBus.$emit('add-element', constant.IAM_str)\r\n            EventBus.$emit('add-element', constant.Platform_str)\r\n            this.$store.commit('editMachine', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addCrypto() {\r\n            const editItem = {name: '', id: '', sdgs: []}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'crypto_' + n++;\r\n                res = this.element.crypto.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.crypto.push(addObj)\r\n            this.CryptoTab = this.element.crypto.length-1\r\n            this.element.crypto[this.CryptoTab].sdgs.push({\r\n                name : 'SDGS',\r\n                id : 1,\r\n                children: [\r\n                    {name: 'SDG GID=\"CRYPTO-INSTANTIATION-PROVIDER\"', id : 2, ele:'SDG', gid:'CRYPTO-INSTANTIATION-PROVIDER', item: '', children: []},\r\n                    {name: 'SDG GID=\"CRYPTO-INSTANTIATION-CERTIFICATE\"', id : 3, ele:'SDG', gid:'CRYPTO-INSTANTIATION-CERTIFICATE', item: '', children: []}\r\n                ]\r\n            })\r\n        },\r\n        changeCryptoTab() {},\r\n        clickCryptoTab() {},\r\n        deleteCrypto(idx) {\r\n            this.element.crypto.splice(idx, 1)\r\n        },\r\n        closdSDGS() {\r\n            this.dialogEditSDG = false\r\n            this.initSDGS()\r\n        },\r\n        initSDGS() {\r\n            if (this.selectSDG[0] == null) {\r\n                this.isDeletItem = false\r\n            }\r\n            this.isSDGItem = false\r\n            this.isAddItem = false\r\n            this.selSDGGidItem = []\r\n            this.editSDGItem = { ele: null, gid: null, item: ''}\r\n        },\r\n        addSDGItem() {\r\n            console.log()\r\n            if (this.editSDGItem.ele == 'SDG') {\r\n                this.selectSDG[0].children.push(\r\n                    { name: this.editSDGItem.ele+' GID='+this.editSDGItem.gid,\r\n                        ele: this.editSDGItem.ele, gid: this.editSDGItem.gid, item: this.editSDGItem.item, id : this.idCrypto++, children: []}\r\n                )\r\n            } else if (this.editSDGItem.ele == 'SD'){\r\n                this.selectSDG[0].children.push(\r\n                    { name: this.editSDGItem.ele+' GID='+this.editSDGItem.gid + ' '+ this.editSDGItem.item,\r\n                        ele: this.editSDGItem.ele, gid: this.editSDGItem.gid, item: this.editSDGItem.item, id : this.idCrypto++, }\r\n                )\r\n            } else if (this.editSDGItem.ele == 'SDX-REF'){\r\n                if (this.selectSDG[0].gid == 'RELATED-PROCESS') {\r\n                    this.editSDGItem.item = 'PROCESS'\r\n                } else if (this.selectSDG[0].gid == 'RELATED-PORT') {\r\n                    this.editSDGItem.item = 'R-PORT-PROTOTYPE'\r\n                } else if (this.selectSDG[0].gid == 'CRYPTO-CERTIFICATE-KEY-SLOT') {\r\n                    this.editSDGItem.item = 'SDG-CAPTION'\r\n                }\r\n                this.selectSDG[0].children.push(\r\n                    { name: this.editSDGItem.ele+' '+ this.editSDGItem.gid,\r\n                        ele: this.editSDGItem.ele, gid: this.editSDGItem.gid, item: this.editSDGItem.item, id : this.idCrypto++, }\r\n                )\r\n            } else if (this.editSDGItem.ele == 'SDG-CAPTION'){\r\n                this.selectSDG[0].children.push(\r\n                    { name: this.editSDGItem.ele+' '+ this.editSDGItem.item,\r\n                        ele: this.editSDGItem.ele, gid: this.editSDGItem.gid, item: this.editSDGItem.item, id : this.idCrypto++, }\r\n                )\r\n            }\r\n            this.initSDGS()\r\n        },\r\n        deleteSDGItem() {\r\n            this.initSDGS()\r\n            this.deleteNodeFromTree(this.element.crypto[this.CryptoTab].sdgs[0], this.selectSDG[0].id)            \r\n            this.selectSDG[0] = []\r\n        },\r\n        deleteNodeFromTree(node, nodeId) {\r\n            if (node.children != null) {\r\n                for (let i = 0; i < node.children.length; i++) {\r\n                    let filtered = node.children.filter(f => f.id == nodeId);\r\n                    if (filtered && filtered.length > 0) {\r\n                        node.children = node.children.filter(f => f.id != nodeId);\r\n                        return;\r\n                    }\r\n                    this.deleteNodeFromTree(node.children[i], nodeId,);\r\n                }\r\n            }\r\n        },\r\n        activeElement(node) {\r\n            this.selectSDG = node\r\n            this.selSDGEleItem = []\r\n            if (this.selectSDG[0] == null || this.selectSDG[0].name == 'SDGS') {\r\n                this.selSDGEleItem = []\r\n            } else if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-PROVIDER' || \r\n                        this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-CERTIFICATE' || \r\n                        this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-KEY-SLOT') {\r\n                this.selSDGEleItem = this.selFirstSDG\r\n            } else if (this.selectSDG[0].gid == 'RELATED-PROCESS' || this.selectSDG[0].gid == 'RELATED-PORT' \r\n                        || this.selectSDG[0].gid == 'CRYPTO-CERTIFICATE-KEY-SLOT') {\r\n                this.selSDGEleItem = this.selRef\r\n            } else if (this.selectSDG[0].gid == 'CRYPTO-KEY-SLOT-CONTENT-ALLOWED-USAGE' ||\r\n                        this.selectSDG[0].gid == 'CRYPTO-KEY-SLOT-ALLOWED-MODIFICATION') {\r\n                this.selSDGEleItem = this.selKeySlotAllowed\r\n            }\r\n\r\n            if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-PROVIDER' || \r\n                this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-CERTIFICATE' ||\r\n                this.selectSDG[0].name == 'SDGS') {\r\n                this.isDeletItem = false\r\n            } else {\r\n                this.isDeletItem = true\r\n            }\r\n            this.isSDGItem = false\r\n        },\r\n        inputSDGEle() {\r\n            this.selSDGGidItem = []\r\n            if (this.editSDGItem.ele != null && this.selectSDG[0].ele == 'SDG') {\r\n                if (this.editSDGItem.ele == 'SD') {\r\n                    if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-PROVIDER' || \r\n                        this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-CERTIFICATE') {\r\n                            this.selSDGGidItem = this.selFirstSD\r\n                    }  else if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-KEY-SLOT') {\r\n                        this.selSDGGidItem = this.selSDKeySlot\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-KEY-SLOT-CONTENT-ALLOWED-USAGE'){\r\n                        this.selSDGGidItem = this.selSDUsage\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-KEY-SLOT-ALLOWED-MODIFICATION') {\r\n                        this.selSDGGidItem = this.selSDModification\r\n                    }\r\n                } else if (this.editSDGItem.ele == 'SDG') {\r\n                    if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-PROVIDER') {\r\n                        this.selSDGGidItem = this.selProvider\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-CERTIFICATE') {\r\n                        this.selSDGGidItem = this.selCerification\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-INSTANTIATION-KEY-SLOT') {\r\n                        this.selSDGGidItem = this.selKeySlot\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-CERTIFICATE-KEY-SLOT') {\r\n                        this.selSDGGidItem = this.selSDModification\r\n                    } \r\n                } else if (this.editSDGItem.ele == 'SDG-CAPTION') {\r\n                    this.isSDGItem = true\r\n                } else if (this.editSDGItem.ele == 'SDX-REF') {\r\n                    if (this.selectSDG[0].gid == 'RELATED-PROCESS') {\r\n                        this.selSDGGidItem = this.$store.getters.getProcessSDG\r\n                    } else if (this.selectSDG[0].gid == 'RELATED-PORT') {\r\n                        this.selSDGGidItem = this.$store.getters.getRPortPrototypeSDG\r\n                    } else if (this.selectSDG[0].gid == 'CRYPTO-CERTIFICATE-KEY-SLOT') {\r\n                        console.log(this.element.crypto[this.CryptoTab].sdgs)\r\n                        this.element.crypto[this.CryptoTab].sdgs.forEach(sdg => {\r\n                            sdg.children.forEach(sdgC => {\r\n                                if (sdgC.gid == 'CRYPTO-INSTANTIATION-PROVIDER') {\r\n                                    sdgC.children.forEach(item => {\r\n                                        if (item.ele == 'SDG' && item.gid == 'CRYPTO-INSTANTIATION-KEY-SLOT') {\r\n                                            item.children.forEach(slot => {\r\n                                                if (slot.ele == 'SDG-CAPTION') {\r\n                                                    this.selSDGGidItem.push(slot.item)\r\n                                                }\r\n                                            })\r\n                                        }\r\n                                    })\r\n                                }\r\n                            })\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        inputSDGGid() {\r\n            if (this.editSDGItem.ele == 'SDG') {\r\n                this.isSDGItem = false\r\n            } else if (this.editSDGItem.gid != null) {\r\n                this.isSDGItem = true\r\n            }\r\n\r\n            if (this.editSDGItem.gid != null \r\n                && (this.editSDGItem.ele == 'SDG'  || this.editSDGItem.ele == 'SDX-REF')) {\r\n                    this.isAddItem = true\r\n            }\r\n        },\r\n        inputSDGItem(str) {\r\n            if (str != '') {\r\n                if (this.editSDGItem.ele == 'SD' ||  this.editSDGItem.ele == 'SDG-CAPTION') {\r\n                    this.isAddItem = true\r\n                }\r\n            } else {\r\n                this.isAddItem = false\r\n            }\r\n        },\r\n        clearSDGEle() {\r\n            this.isSDGItem = false\r\n            this.selSDGGidItem = []\r\n        },\r\n        clearSDGGid() {\r\n            this.isSDGItem = false\r\n        },\r\n\r\n        setactiveUUID() {\r\n            this.$store.commit('setuuid', {uuid: this.element.uuid} )\r\n            this.$store.commit('editMachine', {compo:\"z\", uuid:this.element.uuid, zindex:10} )\r\n        },\r\n        deleteLine(fineLine) {\r\n            var linenum = this.$store.getters.getconnectLineNum(fineLine)\r\n            if (linenum != -1) {\r\n                EventBus.$emit('delete-line', linenum)\r\n                this.$store.commit('deletConnectionline', {startnum: linenum} )\r\n            }\r\n        },\r\n        newLine(startLine, drawLine, endLine) {\r\n            this.$store.commit('setConnectionline', {start: startLine, end: endLine} )\r\n            EventBus.$emit('new-line', drawLine, endLine)\r\n        },\r\n\r\n        viewARXML() {\r\n            this.editARXML.name = this.element.name\r\n            this.editARXML.machinedesign = this.element.machinedesign\r\n            this.editARXML.enterTimeout = this.element.enterTimeout\r\n            this.editARXML.exitTimeout = this.element.exitTimeout\r\n            this.editARXML.executable = this.element.executable\r\n            this.editARXML.admin = this.element.admin\r\n            this.editARXML.hwelement = JSON.parse(JSON.stringify(this.element.hwelement))\r\n            this.editARXML.functiongroup = JSON.parse(JSON.stringify(this.element.functiongroup))\r\n            this.editARXML.environ = JSON.parse(JSON.stringify(this.element.environ))\r\n            this.editARXML.processor = JSON.parse(JSON.stringify(this.element.processor))\r\n            this.editARXML.moduleinstant = JSON.parse(JSON.stringify(this.element.moduleinstant))\r\n            this.editARXML.ucm = JSON.parse(JSON.stringify(this.element.ucm))\r\n            this.editARXML.iam = JSON.parse(JSON.stringify(this.element.iam))\r\n            this.dialogText= true\r\n        },\r\n        saveARXML() {\r\n            if (this.element.name != this.editARXML.name) {\r\n                this.$store.commit('editMachine', {compo:\"Name\", uuid:this.element.uuid, name:this.editARXML.name} )\r\n                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.editARXML.name, \r\n                                                        changeName: 'Name', pathLength:this.element.path.split('/').length, beforename: this.element.name} )\r\n                if (this.editARXML.name != '') {\r\n                    this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.editARXML.name, path:this.element.path})\r\n                }\r\n            }\r\n            this.element.name = this.editARXML.name\r\n            this.element.enterTimeout = this.editARXML.enterTimeout\r\n            this.element.exitTimeout = this.editARXML.exitTimeout\r\n            this.element.admin = this.editARXML.admin\r\n            if (this.editARXML.executable != null) {\r\n                this.editARXML.executable = this.editARXML.executable.toUpperCase()\r\n                if(!(this.editARXML.executable == 'STRICT-MODE' || this.editARXML.executable == 'MONITOR-MODE' ||\r\n                     this.editARXML.executable == 'NO-TRUSTED-PLATFORM-SUPPORT')) {\r\n                    this.editARXML.executable = null\r\n                }\r\n            }\r\n            this.element.executable = this.editARXML.executable\r\n\r\n            this.editTableList()\r\n            var endLine = null, changEndLine = null\r\n\r\n            if (this.editARXML.machinedesign != this.element.machinedesign) {\r\n                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/machinedesign')\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/machinedesign')\r\n                }\r\n                changEndLine = this.$store.getters.getMachineDesignPath(this.editARXML.machinedesign, 0)\r\n                if (changEndLine != null) {\r\n                    this.newLine(this.element.uuid+'/machinedesign', this.element.uuid+'/machinedesign', changEndLine)\r\n                }\r\n            }\r\n            this.element.machinedesign = this.editARXML.machinedesign\r\n\r\n            if (this.editARXML.hwelement.length > 0) {\r\n                this.editARXML.hwelement.forEach(item => {\r\n                    var isHaveTable = false\r\n                    for(let n=0; n<this.element.hwelement.length; n++){\r\n                        if (this.element.hwelement[n].id == item.id &&\r\n                            this.element.hwelement[n].hwelement == item.hwelement ) {\r\n                            isHaveTable = true\r\n                        }\r\n                    }\r\n                    if (!isHaveTable) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        }\r\n                        changEndLine = this.$store.getters.getHWElementPath(item.hwelement)\r\n                        if (changEndLine != null) {\r\n                            this.newLine(this.element.uuid+'/hwelement-'+item.id, this.element.uuid+'/hwelement', changEndLine)\r\n                        }\r\n                    }\r\n                })\r\n                this.element.hwelement.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.hwelement.forEach(edit => {\r\n                        if (edit.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.hwelement.length > 0) {\r\n                    this.element.hwelement.forEach(item => {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/hwelement-'+item.id)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            this.element.hwelement = JSON.parse(JSON.stringify(this.editARXML.hwelement))\r\n\r\n            if (this.editARXML.functiongroup.length > 0) {\r\n                this.editARXML.functiongroup.forEach(item => {\r\n                    var isHaveTable = false\r\n                    for(let n=0; n<this.element.functiongroup.length; n++){\r\n                        if (this.element.functiongroup[n].id == item.id &&\r\n                            this.element.functiongroup[n].type == item.type ) {\r\n                            isHaveTable = true\r\n                        }\r\n                    }\r\n                    if (!isHaveTable) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        }\r\n                        changEndLine = this.$store.getters.getModeDeclarationPath(item.type, 0)\r\n                        if (changEndLine != null) {\r\n                            this.newLine(this.element.uuid+'/functiontable-'+item.id, this.element.uuid+'/functiontable', changEndLine)\r\n                        }\r\n                    }\r\n                })\r\n                this.element.functiongroup.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.functiongroup.forEach(edit => {\r\n                        if (edit.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.functiongroup.length > 0) {\r\n                    this.element.functiongroup.forEach(item => {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/functiontable-'+item.id)\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            this.element.functiongroup = JSON.parse(JSON.stringify(this.editARXML.functiongroup))\r\n\r\n            if (this.editARXML.iam.length > 0) {\r\n                this.editARXML.iam.forEach(item => {\r\n                    item.grants.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.iam.forEach(iam => {\r\n                            iam.grants.forEach(gra => {\r\n                                if (gra.id == data.id && gra.grant == data.grant) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getEventPath(data.grant)\r\n                            if (changEndLine != null) {\r\n                                data.select = \"COM-EVENT-GRANT\"\r\n                                this.newLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id, this.element.uuid+'/iamM', changEndLine)\r\n                            } else {\r\n                                changEndLine = this.$store.getters.getFieldPath(data.grant)\r\n                                if (changEndLine != null) {\r\n                                    data.select = \"COM-FIELD-GRANT\"\r\n                                    this.newLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id, this.element.uuid+'/iamM', changEndLine)\r\n                                } else {\r\n                                    changEndLine = this.$store.getters.getMethodPath(data.grant)\r\n                                    if (changEndLine != null) {\r\n                                        data.select = \"COM-METHOD-GRANT\"\r\n                                        this.newLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id, this.element.uuid+'/iamM', changEndLine)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n                this.element.iam.forEach(item => {\r\n                    item.grants.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.editARXML.iam.forEach(edit => {\r\n                            edit.grants.forEach(editG => {\r\n                                if (editG.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n            } else {\r\n                if (this.element.iam.length > 0) {\r\n                    this.element.iam.forEach(item => {\r\n                        item.grants.forEach(data => {\r\n                            if (data.grant != null) {\r\n                                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/iamM-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                }\r\n            }\r\n            this.element.iam = JSON.parse(JSON.stringify(this.editARXML.iam))\r\n            this.element.ucm = JSON.parse(JSON.stringify(this.editARXML.ucm))\r\n            this.element.environ = JSON.parse(JSON.stringify(this.editARXML.environ))\r\n            this.element.processor = JSON.parse(JSON.stringify(this.editARXML.processor))\r\n            this.element.moduleinstant = JSON.parse(JSON.stringify(this.editARXML.moduleinstant))\r\n            this.cancelARXML()\r\n        },\r\n        editTableList() {\r\n            var deleteItem = []\r\n            if (this.editARXML.functiongroup.length > 0) {\r\n                deleteItem = []\r\n                this.element.functiongroup.forEach(item => {\r\n                    var isExistence = false\r\n                    this.editARXML.functiongroup.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isExistence = true\r\n                            if (data.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'functionG', listname: data.name, beforename: item.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isExistence) {\r\n                        deleteItem.push(item)\r\n                    }\r\n                })\r\n                if (deleteItem.length > 0)\r\n                {\r\n                    this.$store.commit('deleteRefTable', {deleteName:'functionG', deletItemList: deleteItem, path: this.element.path, name: this.element.name})\r\n                }\r\n            } else {\r\n                if (this.element.functiongroup.length > 0) {\r\n                    this.$store.commit('deleteRefTable', {deleteName:'functionG', deletItemList: this.element.functiongroup, path: this.element.path, name: this.element.name})\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.ucm.length > 0) {\r\n                deleteItem = []\r\n                this.element.ucm.forEach(item => {\r\n                    var isExistence = false\r\n                    this.editARXML.ucm.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isExistence = true\r\n                            if (data.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'ucm', listname: data.name, beforename: item.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isExistence) {\r\n                        deleteItem.push(item)\r\n                    }\r\n                })\r\n                if (deleteItem.length > 0)\r\n                {\r\n                    this.$store.commit('deleteRefTable', {deleteName:'ucm', deletItemList: deleteItem, path: this.element.path, name: this.element.name})\r\n                }\r\n            } else {\r\n                if (this.element.ucm.length > 0) {\r\n                    this.$store.commit('deleteRefTable', {deleteName:'ucm', deletItemList: this.element.ucm, path: this.element.path, name: this.element.name})\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.moduleinstant.length > 0) {\r\n                this.element.moduleinstant.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.moduleinstant.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isHaveTable = true\r\n                            if (data.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'ModuleIns', listname: data.name, beforename: item.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'ModuleIns', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.moduleinstant.length > 0) {\r\n                    this.element.moduleinstant.forEach(item => {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'ModuleIns', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.processor.length > 0) {\r\n                this.element.processor.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.processor.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isHaveTable = true\r\n                            if (data.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'Processor', listname: data.name, beforename: item.name} )\r\n                            }\r\n                            var isHaveTableC = false\r\n                            deleteItem = []\r\n                            item.core.forEach(cor => {\r\n                                data.core.forEach(editC => {\r\n                                    if (cor.id == editC.id ) {\r\n                                        isHaveTableC = true\r\n                                        if (cor.name != editC.name) {\r\n                                            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        changeName: 'proCore', listname: editC.name, tabname: data.name, beforename: cor.name} )\r\n                                        }\r\n                                    }\r\n                                })\r\n                            })\r\n                            if (!isHaveTableC) {\r\n                                deleteItem.push(item.cor)\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'Processor', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                        deleteItem = []\r\n                    }\r\n                    if (deleteItem.length > 0)\r\n                    {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'proCore', deletItemList: deleteItem, path: this.element.path, name: this.element.name, tabname: item.name})\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.processor.length > 0) {\r\n                    this.element.processor.forEach(item => {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'Processor', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        cancelARXML() {\r\n            this.editARXML = {name:'', machinedesign:null, enterTimeout:'', exitTimeout:'', hwelement:[], executable:null, admin: '',\r\n                    functiongroup:[], environ: [], processor: [], moduleinstant: [], ucm: [], iam: [], crypto: []}\r\n            this.editTextHWElement = {hwelement: null, id: ''}\r\n            this.editTextFunG = {name:'', type: null, id:''}\r\n            this.editTextEnviron = {key: '', value: '',id: ''}\r\n            this.editTextProcessor = {name: '', core: [], id: ''}\r\n            this.editTextCore = {name: '', idCore: '', id: ''}\r\n            this.editTextOS = {name: '',resource: [], id: ''}\r\n            this.editTextResource = {name: '', cpuUsage: '', memoryUsage: '', id: ''}\r\n            this.editTextUCM = {name: '', ident: '', id: ''}\r\n            this.editTextIAM = {name: '', grants: [], id: ''}\r\n            this.editTextGrant = {grant: null, select: null, id: ''}\r\n            this.dialogText = false\r\n        },\r\n        newTextHWElement() {\r\n            this.editTextHWElement = {hwelement: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                 n++;\r\n                res = this.editARXML.hwelement.some(item => item.id === n)\r\n            }\r\n            this.editTextHWElement.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextHWElement)\r\n            this.editARXML.hwelement.push(addObj);\r\n        },\r\n        deletTextHWElement(idx) {\r\n            this.editARXML.hwelement.splice(idx,1)\r\n        },\r\n        newTextFunG() {\r\n            this.editTextFunG = {name: '', type: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.functiongroup.some(item => item.id === n)\r\n            }\r\n            this.editTextFunG.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextFunG)\r\n            this.editARXML.functiongroup.push(addObj);\r\n        },\r\n        deletTextFunG(idx) {\r\n            this.editARXML.functiongroup.splice(idx,1)\r\n        },\r\n        newTextEnviron() {\r\n            this.editTextEnviron = {key: '', value: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.environ.some(item => item.id === n)\r\n            }\r\n            this.editTextEnviron.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextEnviron)\r\n            this.editARXML.environ.push(addObj);\r\n        },\r\n        deletTextEnviron(idx) {\r\n            this.editARXML.environ.splice(idx,1)\r\n        },\r\n        newTextProcessor() {\r\n            this.editTextProcessor = {name: '', core: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextProcessor.name = 'Processor_' + n++\r\n                res = this.editARXML.processor.some(item => item.id === n)\r\n            }\r\n            this.editTextProcessor.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextProcessor)\r\n            this.editARXML.processor.push(addObj);\r\n        },\r\n        deletTextProcessor(idx) {\r\n            this.editARXML.processor.splice(idx,1)\r\n        },\r\n        newTextCore(idxP) {\r\n            this.editTextCore = {name: '', idCore: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.processor[idxP].core.some(item => item.id === n)\r\n            }\r\n            this.editTextCore.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextCore)\r\n            this.editARXML.processor[idxP].core.push(addObj);\r\n        },\r\n        deletTextCore(idx, idxP) {\r\n            this.editARXML.processor[idxP].core.splice(idx,1)\r\n        },\r\n        newTextOS() {\r\n            this.editTextOS = {name: '', resource: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextOS.name = 'Module Instance_' + n++\r\n                res = this.editARXML.moduleinstant.some(item => item.id === n)\r\n            }\r\n            this.editTextOS.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextOS)\r\n            this.editARXML.moduleinstant.push(addObj);\r\n        },\r\n        deletTextOS(idx) {\r\n            this.editARXML.moduleinstant.splice(idx,1)\r\n        },\r\n        newTextResource(idxM) {\r\n            this.editTextResource = {name: '', cpuUsage: '', memoryUsage: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.moduleinstant[idxM].resource.some(item => item.id === n)\r\n            }\r\n            this.editTextResource.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextResource)\r\n            this.editARXML.moduleinstant[idxM].resource.push(addObj);\r\n        },\r\n        deletTextResource(idx, idxM) {\r\n            this.editARXML.moduleinstant[idxM].resource.splice(idx,1)\r\n        },\r\n        newTextUCM() {\r\n            this.editTextUCM = {name: '', ident: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.ucm.some(item => item.id === n)\r\n            }\r\n            this.editTextUCM.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextUCM)\r\n            this.editARXML.ucm.push(addObj);\r\n        },\r\n        deletTextUCM(idx) {\r\n            this.editARXML.ucm.splice(idx,1)\r\n        },\r\n        newTextIAM() {\r\n            this.editTextIAM = {name: '', grants: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextIAM.name = 'IAM_Instantiation_' + n++\r\n                res = this.editARXML.iam.some(item => item.id === n)\r\n            }\r\n            this.editTextIAM.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextIAM)\r\n            this.editARXML.iam.push(addObj);\r\n        },\r\n        deletTextIAM(idx) {\r\n            this.editARXML.iam.splice(idx,1)\r\n        },\r\n        newTextGrant(idxI) {\r\n            this.editTextGrant = {grant: null, select: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.iam[idxI].grants.some(item => item.id === n)\r\n            }\r\n            this.editTextGrant.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextGrant)\r\n            this.editARXML.iam[idxI].grants.push(addObj);\r\n        },\r\n        deletTextGrant(idx, idxI) {\r\n            this.editARXML.iam[idxI].grants.splice(idx,1)\r\n        },\r\n\r\n    },\r\n}\r\n</script>\r\n"]}]}