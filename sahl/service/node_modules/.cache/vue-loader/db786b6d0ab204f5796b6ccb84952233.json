{"remainingRequest":"D:\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\service\\src\\components\\EthernetCluster.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\service\\src\\components\\EthernetCluster.vue","mtime":1667798037810},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY29uc3RhbnQgZnJvbSAiLi4vc3RvcmUvY29uc3RhbnRzLmpzIg0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICIuLi9tYWluLmpzIg0KaW1wb3J0IGRpYWxvZ1BhdGhTZXR0aW5nIGZyb20gJy4uL2NvbXBvbmVudHMvZGlhbG9nUGF0aFNldHRpbmcudnVlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZWxlbWVudCcsICdpc0RhdGFpbFZpZXcnLCAndmlld0luZm8nLCAnbWluaW1hcHRvb2xiYXInLCAnbG9jYXRpb24nXSwNCiAgICBjb21wb25lbnRzOntkaWFsb2dQYXRoU2V0dGluZ30sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgYWN0aXZlVVVJRCgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEDQogICAgICAgIH0sDQogICAgICAgIHNldHRpbmcoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZw0KICAgICAgICB9LA0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgYWN0aXZlVVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yKHZhbCkNCiAgICAgICAgfSwNCiAgICAgICAgLypkZXRhaWxWaWV3VVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yRGV0YWlsVmlldyh2YWwpDQogICAgICAgIH0sKi8NCiAgICAgICAgc2V0dGluZyh2YWx1ZSkgew0KICAgICAgICAgICAgdGhpcy56b29tdmFsdWUgPSB2YWx1ZS56b29tTWFpbg0KICAgICAgICAgICAgaWYgKHRoaXMuem9vbXZhbHVlIDwgdGhpcy4kc2V0Wm9vbWluVG9vbHRpcCkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc1Rvb2x0aXAgPSB0aGlzLm1pbmltYXB0b29sYmFyDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuem9vbXZhbHVlICA+IHRoaXMuJHNldFpvb21pbkxpbmVUaXRsZSAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkxpbmVTZXR1cFN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZVRpdGxlQmFyJywgdGhpcy5lbGVtZW50LnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy56b29tdmFsdWUgPiB0aGlzLiRzZXRab29taW5MaW5lU2V0dXBTdGFydCAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkxpbmVTZXR1cEVuZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmVUaXRsZUJhcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNFdGhlcm5ldENsdXN0ZXJPcGVuQ2xvc2UgJiYgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWwubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BoeXNpY2FsQ2hhbm5lbE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge0V2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnY29ubmVjdG9yJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCl9LCAzMDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NoYW5uZWwnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKX0sIDMwMCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLnNldFRvb2xiYXJDb2xvcih0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEKQ0KICAgICAgICAvKmVuZHBvaW50VGFi7J20IDLssKjsm5Ag67Cw7Je07J206riwIOuVjOusuOyXkCDrs7XsgqztlZjqsbDrgpggZmlsZUlucHV0IOyLnCDrr7jrpqwg7KCV7J2Y7ZW0IOykmOyVvOyngCDslYjqt7jrn6zrqbQgZXJyb3IgKi8NCiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWwuZm9yRWFjaCggKGNvbmRpLGkpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWxUYWJbaV0gPSAwDQogICAgICAgICAgICAgICAgaWYgKGNvbmRpLmNoYW5uZWwubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25kaS5jaGFubmVsLmZvckVhY2goICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRUYWIucHVzaChbaSwgMF0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgICAgICAgbmFtZTogIFt2YWwgPT4gKHZhbCB8fCAnJykubGVuZ3RoID4gMCBdLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGNvbG9yVG9vbGJhcjogIiM2QTVBQ0QiLA0KICAgICAgICAgICAgem9vbXZhbHVlOiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5nLnpvb21NYWluLA0KICAgICAgICAgICAgaXNUb29sdGlwOiB0aGlzLm1pbmltYXB0b29sYmFyLA0KICAgICAgICAgICAgZGlhbG9nUGF0aCA6IGZhbHNlLA0KICAgICAgICAgICAgaXNlbGVtZW50T3BlbkNsb3NlOiB0cnVlLCAvL3Rvb2xiYXLrp4wg67O07Jes7KSE6rKD7J2064OQIOyVhOuLiOuDkCDshKTsoJUgdHJ1ZTog7KCE7LK0IOuLpCDrs7Tsl6zspIwgLyBmYWxzZSA6IHRvb2xiYXLrp4wg67O07Jes7KSMDQogICAgICAgICAgICBkaWFsb2dUZXh0OiBmYWxzZSwNCiAgICAgICAgICAgIGVkaXRBUlhNTDoge25hbWU6JycsIGNvbmRpdGlvbmFsOltdfSwNCiAgICAgICAgICAgIGVkaXRUZXh0Q29uZGk6IHtuYW1lOiAnJywgdmVyc2lvbjonJywgY2hhbm5lbDogW10sIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dENoYW5uZWw6IHtuYW1lOiAnJywgY29tY29ubmVjdDpbXSwgZW5kcG9pbnQ6IFtdLCBpZDogJyd9LA0KICAgICAgICAgICAgZWRpdFRleHRFbmRQb2ludDoge25hbWU6ICcnLCBkb21haW5uYW1lOicnLCBpcDRhZGRyZXNzOiBbXSwgaXA2YWRkcmVzczogW10sIHByaW9yaXR5OiAnJywgaWQ6ICcnfSwNCiAgICAgICAgICAgIGVkaXRUZXh0Q29tbXVuaToge2Nvbm5lY3RvciA6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dElQNDoge2dhdGV3YXk6JycsIEROU0FkZHI6JycsIGJlaGF2aW9yOiBudWxsLCBhZGRyZXNzOicnLCBhZGRyZXNzc29yY2U6bnVsbCwgbWFzazonJywgaWQ6ICcnLCB0dGw6ICcnfSwNCiAgICAgICAgICAgIGVkaXRUZXh0SVA2OiB7cHJpb3JpdHk6JycsIGJlaGF2aW9yOm51bGwsIHByZWxlbmd0aDonJywgYWRkcmVzczonJywgYWRkcmVzc3NvdXJjZTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgaXNFdGhlcm5ldENsdXN0ZXJPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc1BoeXNpY2FsQ2hhbm5lbE9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzQ29tbUNvbm5lY3RPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc05ldHdvcmtFbmRwb2ludE9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzSVA0T3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNJUDZPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZUNvbW1Db25uZWN0OiBmYWxzZSwNCiAgICAgICAgICAgIGlzZGVsZXRlSVA0SXRlbTogZmFsc2UsDQogICAgICAgICAgICBpc2RlbGV0ZUlQNkl0ZW06IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0Vmlld2VkaXQ6IHRydWUsIC8vdHJ1ZTogZWRpdCAgZmFsc2U6IHZpZXcNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdENvbW1Db25uZWN0SXRlbTogW10sDQogICAgICAgICAgICBzZWxlY3REZWxlY3RJUDR0ZW06IFtdLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0SVA2dGVtOiBbXSwNCiAgICAgICAgICAgIGNvbmRpdGlvbmFsVGFiOiAwLA0KICAgICAgICAgICAgY2hhbm5lbFRhYjogW10sDQogICAgICAgICAgICBlbmRwb2ludFRhYjogW1tdLFtdXSwNCiAgICAgICAgICAgIGhlYWRlckNvbW1Db25uZWN0b3I6IFsNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICcnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAncmVmVmlldycsIHdpZHRoOiAnNXB4JyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0NvbW11bmljYXRpb24gQ29ubmVjdG9yIFJlZicsIGFsaWduOiAnc3RhcnQnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnY29ubmVjdG9yJyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRDQ0l0ZW06IHsgY29ubmVjdG9yIDogbnVsbCwgaWQ6ICcnfSwNCiAgICAgICAgICAgIHNlbENvbW11bmljYXRpb25Db25uZWN0OiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENvbW11bmljYXRpb25Db25uZWN0LA0KICAgICAgICAgICAgaXNFZGl0aW5nQ0M6IHRydWUsDQoNCiAgICAgICAgICAgIGhlYWRlcklQNDogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0RFRkFVTFQtR0FURVdBWScsIHdpZHRoOicxNDBweCcsIGFsaWduOiAnc3RhcnQnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnZ2F0ZXdheScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdETlMtU0VSVkVSLUFERFInLCB3aWR0aDonMTQwcHgnLCBhbGlnbjogJ3N0YXJ0Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ0ROU0FkZHInIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnSVAtQUREUkVTUy1LRUVQLUJFSEFWSU9SJywgd2lkdGg6JzIwMHB4Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2JlaGF2aW9yJ30sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnSVBWLTQtQUREUkVTUycsIHdpZHRoOicxMzBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdhZGRyZXNzJ30sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnSVBWLTQtQUREUkVTUy1TT1VSQ0UnLCB3aWR0aDonMTgwcHgnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnYWRkcmVzc3NvcmNlJ30sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnTkVUV09SSy1NQVNLJywgd2lkdGg6JzEzMHB4Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ21hc2snfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdUVEwnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAndHRsJ30sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgaGVhZGVySVA2OiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnQVNTSUdOTUVOVC1QUklPUklUWScsIHdpZHRoOicxODBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdwcmlvcml0eSd9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0lQLUFERFJFU1MtS0VFUC1CRUhBVklPUicsIHdpZHRoOicyMDBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdiZWhhdmlvcid9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0lQLUFERFJFU1MtUFJFRklYLUxFTkdUSCcsIHdpZHRoOicyMDBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdwcmVsZW5ndGgnfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdJUFYtNi1BRERSRVNTJywgd2lkdGg6JzEzMHB4Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2FkZHJlc3MnfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdJUFYtNi1BRERSRVNTLVNPVVJDRScsIHdpZHRoOicxODBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdhZGRyZXNzc291cmNlJ30sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZWRpdElQNEl0ZW06IHsgZ2F0ZXdheTonJywgRE5TQWRkcjonJywgYmVoYXZpb3I6IG51bGwsIGFkZHJlc3M6JycsIGFkZHJlc3Nzb3JjZTpudWxsLCBtYXNrOicnLCBpZDogJycsIHR0bDogJyd9LA0KICAgICAgICAgICAgZWRpdElQNkl0ZW06IHsgcHJpb3JpdHk6JycsIGJlaGF2aW9yOm51bGwsIHByZWxlbmd0aDonJywgYWRkcmVzczonJywgYWRkcmVzc3NvdXJjZTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgZGVmYXVsdElQNEl0ZW06IHsgZ2F0ZXdheTonJywgRE5TQWRkcjonJywgYmVoYXZpb3I6bnVsbCwgYWRkcmVzczonJywgYWRkcmVzc3NvcmNlOm51bGwsIG1hc2s6JycsIGlkOiAnJywgdHRsOiAnJ30sDQogICAgICAgICAgICBkZWZhdWx0SVA2SXRlbTogeyBwcmlvcml0eTonJywgYmVoYXZpb3I6bnVsbCwgcHJlbGVuZ3RoOicnLCBhZGRyZXNzOicnLCBhZGRyZXNzc291cmNlOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBhZGRyZXNzU291cmNlSVA0OiBbICdGSVhFRCcsICdESENQVi00JywgJ0FVVE8tSVAnLCAnQVVUTy1JUC0tRE9JUCddLA0KICAgICAgICAgICAgYWRkcmVzc1NvdXJjZUlQNjogWyAnRklYRUQnLCAnREhDUFYtNicsICdMSU5LLUxPQ0FMJywgJ1JPVVRFUi1BRFZFUlRJU0VNRU5UJywgJ0xJTkstTE9DQUwtLURPSVAnXSwNCiAgICAgICAgICAgIGFkZHJlc3NCZWhhdmlvcjogWyAnRk9SR0VUJywgJ1NUT1JFLVBFUlNJU1RFTlRMWSddLA0KDQogICAgICAgICAgICB2aWV3TGlzdDogW10sDQogICAgICAgICAgICB2aWV3SGVhZGVyOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnQ29uZGl0aW9uYWwgbmFtZScsIHdpZHRoOicxMzBweCcsIGFsaWduOiAnc3RhcnQnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnY29uZGluYW1lJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0NoYW5uZWwgbmFtZScsIHdpZHRoOicxMjBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdjaGFubmFtZScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdDb25uZWN0b3InLCB3aWR0aDonNzBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdjb25uZWN0b3InIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnRW5kcG9pbnQgbmFtZScsIHdpZHRoOicxMjBweCcsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdlbmRuYW1lJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ0lQVi00IEFkZHJlc3MnLCB3aWR0aDonMTIwcHgnLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnaXB2NCcgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdJUFYtNiBBZGRyZXNzJywgd2lkdGg6JzEyMHB4Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2lwdjYnIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgc2VsZWN0ZWRWaWV3SWQ6IC0xLA0KDQogICAgICAgICAgICBlZGl0Vmlld01vZGU6IHsgbmFtZTonJywgdmVyc2lvbjonJywgY2hhbm5lbDoge25hbWU6ICcnLCBjb21jb25uZWN0OltdLCBlbmRwb2ludDp7bmFtZTogJycsIGRvbWFpbm5hbWU6JycsIGlwNGFkZHJlc3M6IFtdLCBpcDZhZGRyZXNzOiBbXX19fSwNCiAgICAgICAgICAgIGlzZGVsZXRlSW5mb0NDOiBmYWxzZSwNCiAgICAgICAgICAgIGlzZGVsZXRlSW5mb0lQVjQ6IGZhbHNlLA0KICAgICAgICAgICAgaXNkZWxldGVJbmZvSVBWNjogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RJbmZvQ0M6IFtdLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0SW5mb0lQNDogW10sDQogICAgICAgICAgICBzZWxlY3REZWxlY3RJbmZvSVA2OiBbXSwNCg0KICAgICAgICAgICAgYmVmb3JlUGF0aDogJycsDQogICAgICAgICAgICBiZWZvcmVOYW1lOiAnJywNCiAgICAgICAgICAgIGJlZm9yZUNvbmRpOiAnJywNCiAgICAgICAgICAgIGJlZm9yZUNoYW5ubDogJycsDQogICAgICAgICAgICBiZWZvcmVFbmQ6ICcnLA0KDQogICAgICAgICAgICByZWZDb21tdW5pOiBudWxsDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQgKCkgew0KICAgICAgICAvL2NvbnNvbGUubG9nKCctLS0tLUV0aGVybmV0QyBtb3V0ICcgKyB0aGlzLmNvbmRpdGlvbmFsVGFiKQ0KICAgICAgICBpZiAodGhpcy5taW5pbWFwdG9vbGJhciAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICBFdmVudEJ1cy4kb24odGhpcy5lbGVtZW50LnV1aWQsIChyZWZOdW0sIGlkeElELCB0YWJJRCwgaWQsIGlzRGVsZXRlSXRlbSkgPT4gew0KICAgICAgICAgICAgaWYgKGlzRGVsZXRlSXRlbSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZkNvbW11bmkgPT0gaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucmVmQ29tbXVuaSA9IG51bGwNCiAgICAgICAgICAgICAgICBpZiAocmVmTnVtID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25kaXRpb25hbFRhYiA9IHRhYklELy9pZHhUYWJbMF0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdID0gaWQvL2lkeFRhYlsxXQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZkNvbW11bmkgPSBpZHhJRA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgc3VibWl0RGlhbG9nKGVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlUGF0aCA9IHRoaXMuZWxlbWVudC5wYXRoDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucGF0aCA9IGVsZW1lbnQNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVuYW1lOiB0aGlzLmJlZm9yZVBhdGgsIGNoYW5nZU5hbWU6ICdwYXRoJ30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy99DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2lzaW50b0Vycm9yTGlzdCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWxlbWVudC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0VG9vbGJhckNvbG9yKGFjdGl2ZWlkKSANCiAgICAgICAgew0KICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnV1aWQgPT0gYWN0aXZlaWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciA9ICIjRkYxNDkzIiANCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgPSAiIzZBNUFDRCINCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0VG9vbGJhckNvbG9yRGV0YWlsVmlldyhpc2RldGFpbCkgew0KICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnV1aWQgPT0gaXNkZXRhaWwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciA9ICIjQjBFMEU2IiANCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnV1aWQgPT0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlVVVJRCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyICA9ICIjRkYxNDkzIg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciA9ICIjNkE1QUNEIg0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzaG93RXRoZXJuZXRDbHVzdGVyKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlID0gdGhpcy5pc2VsZW1lbnRPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC8qdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZVRpdGxlQmFyJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlKQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzRXRoZXJuZXRDbHVzdGVyT3BlbkNsb3NlICYmIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BoeXNpY2FsQ2hhbm5lbE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2Nvbm5lY3RvcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpfSwgMzAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NoYW5uZWwnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKX0sIDMwMCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgfSkqLw0KICAgICAgICB9LA0KICAgICAgICBzaG93RXRoZXJuZXRDbHVzdGVySXRlbSgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzRXRoZXJuZXRDbHVzdGVyT3BlbkNsb3NlID0gdGhpcy5pc0V0aGVybmV0Q2x1c3Rlck9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgLyp2YXIgYWN0aXZlTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0YWN0aXZlTGluZSh0aGlzLmVsZW1lbnQudXVpZCkNCiAgICAgICAgICAgIGlmICh0aGlzLmxvY2F0aW9uID09IDEgJiYgYWN0aXZlTGluZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzRXRoZXJuZXRDbHVzdGVyT3BlbkNsb3NlICYmIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BoeXNpY2FsQ2hhbm5lbE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2Nvbm5lY3RvcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpfSwgMzAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NoYW5uZWwnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKX0sIDMwMCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NvbmRpdGlvbmFsJywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSovDQogICAgICAgIH0sDQogICAgICAgIHNob3dQaHlzaWNhbENoYW5uZWxJdGVtKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNQaHlzaWNhbENoYW5uZWxPcGVuQ2xvc2UgPSB0aGlzLmlzUGh5c2ljYWxDaGFubmVsT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICAvKmlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsLmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzUGh5c2ljYWxDaGFubmVsT3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2Nvbm5lY3RvcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkLCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2NoYW5uZWwnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0qLw0KICAgICAgICB9LA0KICAgICAgICBzaG93Q29tbUNvbm5lY3RJdGVtKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNDb21tQ29ubmVjdE9wZW5DbG9zZSA9IHRoaXMuaXNDb21tQ29ubmVjdE9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICBzaG93TmV0d29ya0VuZHBvaW50SXRlbSgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzTmV0d29ya0VuZHBvaW50T3BlbkNsb3NlID0gdGhpcy5pc05ldHdvcmtFbmRwb2ludE9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICBzaG93SVA0SXRlbSgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNJUDRPcGVuQ2xvc2UgPSB0aGlzLmlzSVA0T3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHNob3dJUDZJdGVtKCkgew0KICAgICAgICAgICAgdGhpcy5pc0lQNk9wZW5DbG9zZSA9IHRoaXMuaXNJUDZPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgc2V0Vmlld0VkaXQoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWaWV3ZWRpdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWaWV3ZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nVmlld0xpc3QoKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZpZXdlZGl0ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHRoaXMudmlld0xpc3QgPSBbXQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWaWV3SWQgPSAtMQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja090aGVyRmllbGRzKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucmVmQ29tbXVuaSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICAgICAgdGhpcy5yZWZDb21tdW5pID0gbnVsbA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICByb3dDbGljayhpZHgpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb3dDbGljayAnICsgaWR4KQ0KICAgICAgICAgICAgaWYgKHRoaXMucmVmQ29tbXVuaSAhPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZCkgeyAvLyDqsJnsnYDqsbAg6rOE7IaNIOuIhOultOuptCDslYjrkKgNCiAgICAgICAgICAgICAgICAvL+q4sOyhtOqygyBkZWxldGXtlZjqs6AgDQogICAgICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgICAgICAvLyDsg4jroZzrk6TslrTsmKggaWR4IGxpbmUgZHJhdw0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TWFjaGluZURlc2lnblBhdGgodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yLCAxKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIOq4sOyhtOyXkCDsnojrjZjqsbAg7KKM7ZGcIOuwlOq/lOykmOyVvO2VqC4NCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3QgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KGVuZExpbmUpID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRNYWNoaW5lRGVzaWduJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5NYWNoaW5lRGVzaWduZV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCwgZW5kTGluZSwgaXNFeGlzdCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDplbmRMaW5lLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjEsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeElEOiB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSUQ6IHRoaXMuY29uZGl0aW9uYWxUYWIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdvVGFiOiB0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl19KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnJlZkNvbW11bmkgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIGNsaWNrRXRoZXJuZXRDbHVzdGVyTmFtZSgpIHsNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlTmFtZSA9IHRoaXMuZWxlbWVudC5uYW1lDQogICAgICAgICAgICB0aGlzLmNvbmRpdGlvbmFsVGFiID0gMQ0KICAgICAgICAgICAgdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdID0gMQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dEV0aGVybmV0Q2x1c3Rlck5hbWUgKCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ2lucHV0RXRoZXJuZXRDbHVzdGVyTmFtZScpDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRFdGhlcm5ldENsdXN0ZXInLCB7Y29tcG86Ik5hbWUiLCB1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWxlbWVudC5uYW1lfSApDQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5sZW5ndGg+MCkgew0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvL2lmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5uYW1lICE9ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVuYW1lOiB0aGlzLmJlZm9yZU5hbWUsIGNoYW5nZU5hbWU6ICduYW1lJ30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVOYW1lID0gdGhpcy5lbGVtZW50Lm5hbWUNCiAgICAgICAgICAgICAgICAgICAgLy99DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5uYW1lICE9ICcnKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpc2ludG9FcnJvckxpc3QnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVsZW1lbnQubmFtZSwgcGF0aDp0aGlzLmVsZW1lbnQucGF0aH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNsaWNrQ29uZGl0aW9uYWxOYW1lKG5hbWUpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmJlZm9yZUNvbmRpID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dENvbmRpdGlvbmFsTmFtZShuYW1lKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhuYW1lICsnIC8gJysgdGhpcy5iZWZvcmVDb25kaSkNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsLmxlbmd0aD4wKSB7DQogICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpOiBuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZW5hbWU6IHRoaXMuYmVmb3JlQ29uZGksIGNoYW5nZU5hbWU6ICdjb25kaSd9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlQ29uZGkgPSBuYW1lDQogICAgICAgICAgICAgICAgICAgIC8vfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tDaGFubmVsTmFtZShuYW1lKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgdGhpcy5iZWZvcmVDaGFubmVsID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dENoYW5uZWxOYW1lKG5hbWUpIHsNCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsLmxlbmd0aD4wKSB7DQogICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpOiB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0ubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZW5hbWU6IHRoaXMuYmVmb3JlQ2hhbm5lbCwgY2hhbmdlTmFtZTogJ2NoYW5uZWwnfSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZUNoYW5uZWwgPSBuYW1lDQogICAgICAgICAgICAgICAgICAgIC8vfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tFbmRQb2ludE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlRW5kID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dEVuZFBvaW50TmFtZShuYW1lKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5sZW5ndGg+MCkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGk6IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVuYW1lOiB0aGlzLmJlZm9yZUVuZCwgY2hhbmdlTmFtZTogJ2VuZHBvaW50J30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlRW5kID0gbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy99DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgYWRkRXRoZXJuZXRDbHVzdGVyKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCB2ZXJzaW9uOicnLCBjaGFubmVsOiBbXSwgYmF1ZHJhdGU6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBuZXcgT2JqZWN0KGVkaXRJdGVtKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQoNCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBhZGRPYmoubmFtZSA9ICdFdGhlcm5ldF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5zb21lKGVsZSA9PiBlbGUubmFtZSA9PT0gYWRkT2JqLm5hbWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhZGRPYmouaWQgPSBuDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWwucHVzaChhZGRPYmopDQogICAgICAgICAgICB0aGlzLmNvbmRpdGlvbmFsVGFiID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmxlbmd0aC0xDQogICAgICAgICAgICBpZiAodGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdjb25kaXRpb25hbCcsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja0NvbmRpdGlvbmFsdGFiKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5jb25kaXRpb25hbFRhYiA9IGlkeA0KICAgICAgICAgICAgdGhpcy5jbGlja0NoYW5uZWx0YWIoMCkNCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlQ29uZGl0aW9uYWxUYWIoKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdlQ29uZGl0aW9uYWxUYWIgICAgJyArIHRoaXMuY29uZGl0aW9uYWxUYWIpDQogICAgICAgICAgICBpZiAodGhpcy5yZWZDb21tdW5pICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICB0aGlzLnJlZkNvbW11bmkgPSBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKmlmICh0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWwubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzUGh5c2ljYWxDaGFubmVsT3BlbkNsb3NlICYmIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge0V2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAnY29ubmVjdG9yJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCl9LCAzMDApOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7RXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdjaGFubmVsJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCl9LCAzMDApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7RXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdjb25kaXRpb25hbCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmNvbmRpdGlvbmFsVGFiLCB0aGlzLmNvbmRpdGlvbmFsVGFiKX0sIDMwMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSovDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZUNvbmRpdGlvbmFsKGlkeCkgew0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZGVsZXRlQ29uZGl0aW9uYWwnKQ0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpZHhdLmNoYW5uZWwubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpZHhdLmNoYW5uZWxbaV0uY29tY29ubmVjdCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgbj0wOyBuPHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpZHhdLmNoYW5uZWxbaV0uY29tY29ubmVjdC5sZW5ndGg7IG4rKyl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW2lkeF0uY2hhbm5lbFtpXS5jb21jb25uZWN0W25dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaWR4XS5jaGFubmVsW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaWR4XS5jaGFubmVsW2ldLmNvbWNvbm5lY3Rbbl0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpZHhdLmNoYW5uZWxbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgZGVsZXRlTmFtZSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5uYW1lDQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgIGRlbGV0ZU5hbWUgKz0gJy8nDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J21hY2hpbmVEJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJQb3NpdGlvbjonY29uZGl0aW9uYWwnLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmFtZTogZGVsZXRlTmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5zcGxpY2UoaWR4LCAxKQ0KICAgICAgICAgICAgdGhpcy5jb25kaXRpb25hbFRhYiA9IDANCiAgICAgICAgICAgIHRoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXSA9IDANCiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXSA9IDANCiAgICAgICAgICAgIC8vdGhpcy5jaGFuZ2VDb25kaXRpb25hbFRhYigpIC8qZGVsZXRl7ZWY66m0IOyekOuPmeyggeycvOuhnCB0YWLsnbQg67CU64CM6riwIOuVjOusuOyXkCDrlLDroZwg7JWI67aI65+s64+EIOu2iOugpOynhOuLpCovDQogICAgICAgIH0sDQogICAgICAgIGFkZFBoeXNpY2FsQ2hhbm5lbCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICAvL3RoaXMuZW5kcG9pbnRUYWIucHVzaChbdGhpcy5jb25kaXRpb25hbFRhYiwwXSkgLy8y7LCo7JuQIOuwsOyXtOuhnCDstIjquLDtmZQg7ZW07KSY7JW87KeAIOyViOq3uOufrOuptCB0YWLsnbQg7JWI7IOd6rmADQogICAgICAgICAgICBjb25zdCBlZGl0SXRlbSA9IHtuYW1lOiAnJywgY29tY29ubmVjdDpbXSwgZW5kcG9pbnQ6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBuZXcgT2JqZWN0KGVkaXRJdGVtKQ0KDQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBhZGRPYmoubmFtZSA9ICdQaHlzaWNhbENoYW5uZWxfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5zb21lKGVsZSA9PiBlbGUubmFtZSA9PT0gYWRkT2JqLm5hbWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhZGRPYmouaWQgPSBuDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsLmxlbmd0aC0xDQogICAgICAgICAgICBpZiAodGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdjaGFubmVsJywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tDaGFubmVsdGFiKGlkeCkgew0KICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2xpY2tDaGFubmVsdGFiICcgKyB0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl0rICcgIC8gICcrIGlkeCArJyAgIC8gICcrdGhpcy5jb25kaXRpb25hbFRhYikNCiAgICAgICAgICAgIHRoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXSA9IGlkeA0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUNvbW1Db25uZWN0ID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0Q29tbUNvbm5lY3RJdGVtID0gW10NCiAgICAgICAgICAgIHRoaXMuY2xpY2tFbmRwb2ludFRhYigwKQ0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VDaGFubmVsVGFiKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucmVmQ29tbXVuaSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICAgICAgdGhpcy5yZWZDb21tdW5pID0gbnVsbA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLyppZiAodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWwubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ2Nvbm5lY3RvcicsIHRoaXMuZWxlbWVudC51dWlkLCAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCwgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKX0sIDMwMCk7DQogICAgICAgICAgICB9Ki8NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlQ2hhbm5lbChpZHgpIHsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RlbGV0ZUNoYW5uZWwnKQ0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW2lkeF0uY29tY29ubmVjdC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW2lkeF0uY29tY29ubmVjdFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbaWR4XS5jb21jb25uZWN0W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgZGVsZXRlTmFtZSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5uYW1lDQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgIGRlbGV0ZU5hbWUgKz0gJy8nDQogICAgICAgICAgICB9DQogICAgICAgICAgICBkZWxldGVOYW1lICs9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0ubmFtZQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgIGRlbGV0ZU5hbWUgKz0gJy8nDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J21hY2hpbmVEJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJQb3NpdGlvbjonY2hhbm5lbCcsIHRhYk5hbWU6IGRlbGV0ZU5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbC5zcGxpY2UoaWR4LCAxKQ0KICAgICAgICAgICAgdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdID0gMA0KICAgICAgICAgICAgdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dID0gMA0KICAgICAgICAgICAgLy90aGlzLmNoYW5nZUNoYW5uZWxUYWIoKQ0KICAgICAgICAgICAgY29uc29sZS5sb2coJzIyMjIyMjIyMjIyMjIyMjIyMjIyJykNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudCkNCiAgICAgICAgfSwNCg0KICAgICAgICBpc0NvbW1Db25uZWN0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlQ29tbUNvbm5lY3QgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVDb21tQ29ubmVjdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RDb21tQ29ubmVjdEl0ZW0gPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlQ29tbUNvbm5lY3QgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZUNvbW1Db25uZWN0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlQ29tbUNvbm5lY3QgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0Q29tbUNvbm5lY3RJdGVtLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0ID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdENvbW1Db25uZWN0SXRlbS5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUNvbW1Db25uZWN0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdENvbW1Db25uZWN0SXRlbSA9IFtdDQogICAgICAgICAgICB9IA0KICAgICAgICB9LA0KICAgICAgICBhZGRDb21tQ29ubmVjdCgpIHsNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdENDSXRlbS5pZCA9IG4NCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gbnVsbA0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBpc0V4aXN0ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQNCiAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudCh0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQpID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdE1hY2hpbmVEZXNpZ24nLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgaXNFeGlzdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuTWFjaGluZURlc2lnbmVfc3RyLCB1dWlkOiB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgPSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLm5hbWUNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK24rJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lLCB0cnVlLCBpc0V4aXN0KQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmRMaW5lKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6ZW5kTGluZSwgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bToxLCBpZHhJRDogdGhpcy5lZGl0Q0NJdGVtLmlkLCB0YWJJRDogdGhpcy5jb25kaXRpb25hbFRhYiwgdHdvVGFiOiB0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl19KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5uYW1lKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0ubmFtZSkNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdENDSXRlbSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdC5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLnJlZkNvbW11bmkgPSBuDQogICAgICAgICAgICB0aGlzLmNhbmNlbENvbW1Db25uZWN0KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsQ29tbUNvbm5lY3QoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yID0gbnVsbA0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdENvbW1Db25uZWN0KGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3RvciA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmNvbm5lY3RvciA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAvL+q4sOyhtOq6vCDsgq3soJztlbTslbztlZzri6QgdnVleOyXkOyEnOuPhCDsgq3soJztlZjqs6AgbWFpbnZpZXfsl5DshJzrj4Qg7IKt7KCc7ZWY6rOgIA0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkLCB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmNvbm5lY3RvciA9IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yICE9IG51bGwgJiYgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkLCB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmNvbm5lY3RvciA9IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yICE9IG51bGwgJiYgZW5kTGluZSA9PSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQgJiYgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yICE9IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IubmFtZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmNvbm5lY3RvciA9IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5yZWZDb21tdW5pID09IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgIT0gbnVsbCAmJiB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdCA9IHRydWUsIGVuZExpbmVDaGFuZ2UgPSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQoZW5kTGluZUNoYW5nZSkgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdE1hY2hpbmVEZXNpZ24nLCB7Y29tcG86ImRyYWciLCB1dWlkOiBlbmRMaW5lQ2hhbmdlLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50Lk1hY2hpbmVEZXNpZ25lX3N0ciwgdXVpZDogZW5kTGluZUNoYW5nZSwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lQ2hhbmdlLCBpc0V4aXN0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZUNoYW5nZSsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6ZW5kTGluZUNoYW5nZSwgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bToxLCBpZHhJRDogdGhpcy5yZWZDb21tdW5pfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuY2FuY2VsQ29tbUNvbm5lY3QoKQ0KICAgICAgICB9LA0KICAgICAgICBvcGVuQ29tbUNvbm5lY3QoaWR4KSB7DQogICAgICAgICAgICB0aGlzLnNlbENvbW11bmljYXRpb25Db25uZWN0ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDb21tdW5pY2F0aW9uQ29ubmVjdA0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5jb25uZWN0b3IgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNYWNoaW5lRGVzaWduUGF0aCh0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmNvbWNvbm5lY3RbaWR4XS5jb25uZWN0b3IsIDEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uY29tY29ubmVjdFtpZHhdLmNvbm5lY3RvciwgdXVpZDogZW5kTGluZSB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldENvbW11bmlDU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yICE9IG51bGwgJiYgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IudXVpZCwgZWxlbWVudDogY29uc3RhbnQuTWFjaGluZURlc2lnbmVfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIC8qZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci51dWlkK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLnV1aWQpKi8NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRDb211bmljYXRpb25Db25uZXRMaXN0KCkNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ0NDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdDQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0Q29tdW5pY2F0aW9uQ29ubmV0TGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsQ29tbXVuaWNhdGlvbkNvbm5lY3QgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENvbW11bmljYXRpb25Db25uZWN0DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhckNvbW11bmlDKCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdDQyA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgYWRkTmV0d29ya0VuZHBvaW50KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCBkb21haW5uYW1lOicnLCBpcDRhZGRyZXNzOiBbXSwgaXA2YWRkcmVzczogW10sIHByaW9yaXR5OiAnJywgaWQ6ICcnfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnQuc29tZShlbGUgPT4gZWxlLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYWRkT2JqLmlkID0gbg0KICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnRW5kcG9pbnQnKyh0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50Lmxlbmd0aCsxKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludC5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnQubGVuZ3RoLTENCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tFbmRwb2ludFRhYihpZHgpIHsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NsaWNrRW5kcG9pbnRUYWIgJysgdGhpcy5jb25kaXRpb25hbFRhYiArJyAgLyAgJyArIHRoaXMuY2hhbm5lbFRhYikNCiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXSA9IGlkeA0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUlQNEl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUlQNkl0ZW0gPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJUDR0ZW0gPSBbXQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJUDZ0ZW0gPSBbXQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVFbmRwb2ludFRhYihpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB2YXIgZGVsZXRlTmFtZSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5uYW1lDQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgIGRlbGV0ZU5hbWUgKz0gJy8nDQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgZGVsZXRlTmFtZSArPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLm5hbWUNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICBkZWxldGVOYW1lICs9ICcvJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZGVsZXRlTmFtZSArPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W2lkeF0ubmFtZQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidtYWNoaW5lRCcsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiUG9zaXRpb246J2VuZHBvaW50JywgdGFiTmFtZTogZGVsZXRlTmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnQuc3BsaWNlKGlkeCwgMSkNCiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXSA9IDANCiAgICAgICAgfSwNCiAgICAgICAgaXNFbmRwb2ludElQNCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZUlQNEl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJUDRJdGVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdElQNHRlbSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJUDRJdGVtID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVJUDQoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVJUDRJdGVtID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA0YWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3REZWxlY3RJUDR0ZW0uaW5kZXhPZihpdGVtKSA8IDAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlSVA0SXRlbSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJUDR0ZW0gPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgaXNFbmRwb2ludElQNigpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZUlQNkl0ZW0gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJUDZJdGVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdElQNnRlbSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJUDZJdGVtID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVJUDYoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVJUDZJdGVtID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA2YWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDZhZGRyZXNzLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3REZWxlY3RJUDZ0ZW0uaW5kZXhPZihpdGVtKSA8IDAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlSVA2SXRlbSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJUDZ0ZW0gPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlbklQNChpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0uZ2F0ZXdheSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0uZ2F0ZXdheQ0KICAgICAgICAgICAgdGhpcy5lZGl0SVA0SXRlbS5iZWhhdmlvciA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0uYmVoYXZpb3INCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0uYWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0uYWRkcmVzcw0KICAgICAgICAgICAgdGhpcy5lZGl0SVA0SXRlbS5hZGRyZXNzc29yY2UgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA0YWRkcmVzc1tpZHhdLmFkZHJlc3Nzb3JjZQ0KICAgICAgICAgICAgdGhpcy5lZGl0SVA0SXRlbS5tYXNrID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNGFkZHJlc3NbaWR4XS5tYXNrDQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLkROU0FkZHIgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA0YWRkcmVzc1tpZHhdLkROU0FkZHINCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0udHRsID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNGFkZHJlc3NbaWR4XS50dGwNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdElQNChpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0uZ2F0ZXdheSA9IHRoaXMuZWRpdElQNEl0ZW0uZ2F0ZXdheQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNGFkZHJlc3NbaWR4XS5iZWhhdmlvciA9IHRoaXMuZWRpdElQNEl0ZW0uYmVoYXZpb3INCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0uYWRkcmVzcyA9IHRoaXMuZWRpdElQNEl0ZW0uYWRkcmVzcw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNGFkZHJlc3NbaWR4XS5hZGRyZXNzc29yY2UgPSB0aGlzLmVkaXRJUDRJdGVtLmFkZHJlc3Nzb3JjZQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNGFkZHJlc3NbaWR4XS5tYXNrID0gdGhpcy5lZGl0SVA0SXRlbS5tYXNrDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA0YWRkcmVzc1tpZHhdLkROU0FkZHIgPSB0aGlzLmVkaXRJUDRJdGVtLkROU0FkZHINCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzW2lkeF0udHRsID0gdGhpcy5lZGl0SVA0SXRlbS50dGwNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsSVA0KCkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkSVA0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0SVA0SXRlbS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0SVA0SXRlbSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDRhZGRyZXNzLnB1c2goYWRkT2JqKQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxJUDQoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxJUDQoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SVA0SXRlbSkNCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIG9wZW5JUDYoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRJUDZJdGVtLnByaW9yaXR5ID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNmFkZHJlc3NbaWR4XS5wcmlvcml0eQ0KICAgICAgICAgICAgdGhpcy5lZGl0SVA2SXRlbS5iZWhhdmlvciA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDZhZGRyZXNzW2lkeF0uYmVoYXZpb3INCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0ucHJlbGVuZ3RoID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNmFkZHJlc3NbaWR4XS5wcmVsZW5ndGgNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDZhZGRyZXNzW2lkeF0uYWRkcmVzcw0KICAgICAgICAgICAgdGhpcy5lZGl0SVA2SXRlbS5hZGRyZXNzc291cmNlID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNmFkZHJlc3NbaWR4XS5hZGRyZXNzc291cmNlDQogICAgICAgIH0sDQogICAgICAgIGVkaXRJUDYoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA2YWRkcmVzc1tpZHhdLmdhdHByaW9yaXR5d2F5ID0gdGhpcy5lZGl0SVA2SXRlbS5wcmlvcml0eQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNmFkZHJlc3NbaWR4XS5iZWhhdmlvciA9IHRoaXMuZWRpdElQNkl0ZW0uYmVoYXZpb3INCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDZhZGRyZXNzW2lkeF0ucHJlbGVuZ3RoID0gdGhpcy5lZGl0SVA2SXRlbS5wcmVsZW5ndGgNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLmNvbmRpdGlvbmFsVGFiXS5jaGFubmVsW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV0uZW5kcG9pbnRbdGhpcy5lbmRwb2ludFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXVt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dXS5pcDZhZGRyZXNzW2lkeF0uYWRkcmVzcyA9IHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzcw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMuY29uZGl0aW9uYWxUYWJdLmNoYW5uZWxbdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXS5lbmRwb2ludFt0aGlzLmVuZHBvaW50VGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdW3RoaXMuY2hhbm5lbFRhYlt0aGlzLmNvbmRpdGlvbmFsVGFiXV1dLmlwNmFkZHJlc3NbaWR4XS5hZGRyZXNzc291cmNlID0gdGhpcy5lZGl0SVA2SXRlbS5hZGRyZXNzc291cmNlDQogICAgICAgICAgICB0aGlzLmNhbmNlbElQNigpDQogICAgICAgIH0sDQogICAgICAgIGFkZElQNigpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA2YWRkcmVzcy5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0uaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdElQNkl0ZW0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy5jb25kaXRpb25hbFRhYl0uY2hhbm5lbFt0aGlzLmNoYW5uZWxUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1dLmVuZHBvaW50W3RoaXMuZW5kcG9pbnRUYWJbdGhpcy5jb25kaXRpb25hbFRhYl1bdGhpcy5jaGFubmVsVGFiW3RoaXMuY29uZGl0aW9uYWxUYWJdXV0uaXA2YWRkcmVzcy5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsSVA2KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsSVA2KCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0SVA2SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdElQNkl0ZW0pDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KDQogICAgICAgIHNldHRpbmdWaWV3TGlzdCgpIHsNCiAgICAgICAgICAgIHZhciBjb25uZWN0b3IgPSBbXSwgaXNlbmRwb2ludCA9IGZhbHNlLCBpc0NoYW5uZWwgPSBmYWxzZQ0KICAgICAgICAgICAgdmFyIGlwdjQgPSBbXSwgaXB2NiA9W10sIGlkID0gMA0KICAgICAgICAgICAgZm9yKGNvbnN0IGkgaW4gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsKSB7DQogICAgICAgICAgICAgICAgZm9yKGNvbnN0IHYgaW4gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW2ldLmNoYW5uZWwgKSB7DQogICAgICAgICAgICAgICAgICAgIGlzQ2hhbm5lbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW2ldLmNoYW5uZWxbdl0uY29tY29ubmVjdC5mb3JFYWNoKGNvbm5lY3Rvckl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yLnB1c2goY29ubmVjdG9ySXRlbS5jb25uZWN0b3IpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGZvcihjb25zdCBuIGluIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpXS5jaGFubmVsW3ZdLmVuZHBvaW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaV0uY2hhbm5lbFt2XS5lbmRwb2ludFtuXS5pcDRhZGRyZXNzLmZvckVhY2goaXA0SXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXB2NC5wdXNoKGlwNEl0ZW0uYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaV0uY2hhbm5lbFt2XS5lbmRwb2ludFtuXS5pcDZhZGRyZXNzLmZvckVhY2goaXA2SXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXB2Ni5wdXNoKGlwNkl0ZW0uYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpc2VuZHBvaW50PSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdMaXN0LnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpbmFtZTogdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW2ldLm5hbWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uYW1lOnRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpXS5jaGFubmVsW3ZdLm5hbWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvcjpjb25uZWN0b3Iuam9pbigpLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRuYW1lOnRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpXS5jaGFubmVsW3ZdLmVuZHBvaW50W25dLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXB2NDppcHY0LmpvaW4oKSwgaXB2NjppcHY2LmpvaW4oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaWR4OiBpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxpZHg6IHYsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnRpZHg6IG4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkKysNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpcHY0ID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgIGlwdjYgPVtdDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYoaXNlbmRwb2ludCA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaW5hbWU6IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpXS5uYW1lLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmFtZTp0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbaV0uY2hhbm5lbFt2XS5uYW1lLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3I6Y29ubmVjdG9yLmpvaW4oKSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kbmFtZTpudWxsLCBpcHY0Om51bGwsIGlwdjY6bnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaWR4OiBpLCBjaGFubmVsaWR4OiB2LCBlbmRwb2ludGlkeDogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQrKw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpc2VuZHBvaW50ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yID0gW10NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYoaXNDaGFubmVsID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmlld0xpc3QucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25kaW5hbWU6IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpXS5uYW1lLCANCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uYW1lOm51bGwsIGNvbm5lY3RvcjpudWxsLCBlbmRuYW1lOm51bGwsIA0KICAgICAgICAgICAgICAgICAgICAgICAgaXB2NDpudWxsLCBpcHY2Om51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICBjb25kaWR4OiBpLCBjaGFubmVsaWR4OiBudWxsLCBlbmRwb2ludGlkeDogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCsrDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlzQ2hhbm5lbCA9IGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVkaXREaWFsb2dFdGhlcm5ldENsdXN0ZXIoaXRlbSwgcm93KSB7DQogICAgICAgICAgICB2YXIgaW5mbyA9IHsgIGlzQ2hhbm5lbDogZmFsc2UsIGlzRW5kcG9pbnQ6IGZhbHNlLCBpZHhDb25kaXRpb25hbDogMCwgaWR4Q2hhbm5lbDogbnVsbCwgIGlkeEVuZHBvaW50OiBudWxsLH0NCiAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpdGVtLmNvbmRpZHhdLmNoYW5uZWwubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGluZm8uaXNDaGFubmVsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFtpdGVtLmNvbmRpZHhdLmNoYW5uZWxbaXRlbS5jaGFubmVsaWR4XS5lbmRwb2ludC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGluZm8uaXNFbmRwb2ludCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaW5mby5pZHhFbmRwb2ludCA9IGl0ZW0uZW5kcG9pbnRpZHgNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5mby5pZHhDaGFubmVsID0gaXRlbS5jaGFubmVsaWR4DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpbmZvLmlkeENvbmRpdGlvbmFsID0gaXRlbS5jb25kaWR4DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lbGVtZW50LnV1aWQsIGVsZW1lbnQ6IGNvbnN0YW50LkV0aGVybmV0Q2x1c3Rlcl9zdHJ9ICkNCiAgICAgICAgICAgIC8qZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbGVtZW50LnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCB0aGlzLmVsZW1lbnQudXVpZCkqLw0KDQogICAgICAgICAgICByb3cuc2VsZWN0KHRydWUpDQogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmlld0lkID0gaXRlbS5pZA0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RldGFpbFZpZXdJbmZvJyxpbmZvKQ0KICAgICAgICB9LA0KICAgICAgICBpc2RpYWxvZ0NDKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVJbmZvQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJbmZvQ0MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0SW5mb0NDID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUluZm9DQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlZGlhbG9nQ0MoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZUluZm9DQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJbmZvQ0MuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uY29tY29ubmVjdC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PSB0aGlzLmVsZW1lbnQudGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2ldLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC50aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC50aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0ID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdEluZm9DQy5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUluZm9DQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJbmZvQ0MgPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlbmRpYWxvZ0NDKGlkeCkgew0KICAgICAgICAgICAgdGhpcy5zZWxDb21tdW5pY2F0aW9uQ29ubmVjdCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q29tbXVuaWNhdGlvbkNvbm5lY3QNCiAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yID0geyBuYW1lOiB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaWR4XS5jb25uZWN0b3IsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LnRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uY29tY29ubmVjdFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uaWQpIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZWRpdGRpYWxvZ0NDKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC50aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrdGhpcy5lbGVtZW50LnRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uY29tY29ubmVjdFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IudXVpZCkgew0KICAgICAgICAgICAgICAgIC8v6riw7KG06rq8IOyCreygnO2VtOyVvO2VnOuLpCB2dWV47JeQ7ISc64+EIOyCreygnO2VmOqzoCBtYWludmlld+yXkOyEnOuPhCDsgq3soJztlZjqs6AgDQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQudGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC50aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCwgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaWR4XS5jb25uZWN0b3IgPSB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3RvciAhPSBudWxsICYmIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQudGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmlkKyctJyt0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uaWQsIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IudXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yID0gdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgIT0gbnVsbCAmJiBlbmRMaW5lID09IHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IudXVpZCAmJiB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3RbaWR4XS5jb25uZWN0b3IgIT0gdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5jb21jb25uZWN0W2lkeF0uY29ubmVjdG9yID0gdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuY2FuY2VsZGlhbG9nQ0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxkaWFsb2dDQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nQ0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBhZGRkaWFsb2dDQygpIHsNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uY29tY29ubmVjdC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdENDSXRlbS5pZCA9IG4NCg0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdENDSXRlbS5jb25uZWN0b3IgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2NvbWNvbmV0LScrbisnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5pZCsnLScrdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uaWQrJy0nK3RoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5pZCwgdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRDQ0l0ZW0uY29ubmVjdG9yID0gdGhpcy5lZGl0Q0NJdGVtLmNvbm5lY3Rvci5uYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRDQ0l0ZW0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmNvbWNvbm5lY3QucHVzaChhZGRPYmopOw0KDQogICAgICAgICAgICB0aGlzLmNhbmNlbGRpYWxvZ0NDKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBpc0VuZHBvaW50RGlhbG9nSVA0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVJbmZvSVBWNCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUluZm9JUFY0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEluZm9JUDQgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlSW5mb0lQVjQgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZWRpYWxvZ0lQNCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlSW5mb0lQVjQgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA0YWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA0YWRkcmVzcy5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0SW5mb0lQNC5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJbmZvSVBWNCA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJbmZvSVA0ID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5kaWFsb2dJUDQoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLmdhdGV3YXkgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3NbaWR4XS5nYXRld2F5DQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLmJlaGF2aW9yID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0uYmVoYXZpb3INCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0uYWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA0YWRkcmVzc1tpZHhdLmFkZHJlc3MNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0uYWRkcmVzc3NvcmNlID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0uYWRkcmVzc3NvcmNlDQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLm1hc2sgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3NbaWR4XS5tYXNrDQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLkROU0FkZHIgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3NbaWR4XS5ETlNBZGRyDQogICAgICAgICAgICB0aGlzLmVkaXRJUDRJdGVtLnR0bCA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA0YWRkcmVzc1tpZHhdLnR0bA0KICAgICAgICB9LA0KICAgICAgICBlZGl0ZGlhbG9nSVA0KGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0uZ2F0ZXdheSA9IHRoaXMuZWRpdElQNEl0ZW0uZ2F0ZXdheQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0uYmVoYXZpb3IgPSB0aGlzLmVkaXRJUDRJdGVtLmJlaGF2aW9yDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3NbaWR4XS5hZGRyZXNzID0gdGhpcy5lZGl0SVA0SXRlbS5hZGRyZXNzDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3NbaWR4XS5hZGRyZXNzc29yY2UgPSB0aGlzLmVkaXRJUDRJdGVtLmFkZHJlc3Nzb3JjZQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0ubWFzayA9IHRoaXMuZWRpdElQNEl0ZW0ubWFzaw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0uRE5TQWRkciA9IHRoaXMuZWRpdElQNEl0ZW0uRE5TQWRkcg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDRhZGRyZXNzW2lkeF0udHRsID0gdGhpcy5lZGl0SVA0SXRlbS50dGwNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsZGlhbG9nSVA0KCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsZGlhbG9nSVA0KCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0SVA0SXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdElQNEl0ZW0pDQogICAgICAgIH0sDQogICAgICAgIGFkZGRpYWxvZ0lQNCgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA0YWRkcmVzcy5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdElQNEl0ZW0uaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdElQNEl0ZW0pDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNGFkZHJlc3MucHVzaChhZGRPYmopDQogICAgICAgICAgICB0aGlzLmNhbmNlbGRpYWxvZ0lQNCgpDQogICAgICAgIH0sDQogICAgICAgIGlzRW5kcG9pbnREaWFsb2dJUFY2KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVJbmZvSVBWNiA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZUluZm9JUFY2ID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdEluZm9JUDYgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlSW5mb0lQVjYgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZWRpYWxvZ0lQNigpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlSW5mb0lQVjYgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzcy5maWx0ZXIoaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0SW5mb0lQNi5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVJbmZvSVBWNiA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RJbmZvSVA2ID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5kaWFsb2dJUDYoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRJUDZJdGVtLnByaW9yaXR5ID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDZhZGRyZXNzW2lkeF0ucHJpb3JpdHkNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0uYmVoYXZpb3IgPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNmFkZHJlc3NbaWR4XS5iZWhhdmlvcg0KICAgICAgICAgICAgdGhpcy5lZGl0SVA2SXRlbS5wcmVsZW5ndGggPSB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNmFkZHJlc3NbaWR4XS5wcmVsZW5ndGgNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzcyA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzc1tpZHhdLmFkZHJlc3MNCiAgICAgICAgICAgIHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzc3NvdXJjZSA9IHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzc1tpZHhdLmFkZHJlc3Nzb3VyY2UNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdGRpYWxvZ0lQNihpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzc1tpZHhdLmdhdHByaW9yaXR5d2F5ID0gdGhpcy5lZGl0SVA2SXRlbS5wcmlvcml0eQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDZhZGRyZXNzW2lkeF0uYmVoYXZpb3IgPSB0aGlzLmVkaXRJUDZJdGVtLmJlaGF2aW9yDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWxbdGhpcy52aWV3SW5mby5pZHhDb25kaXRpb25hbF0uY2hhbm5lbFt0aGlzLnZpZXdJbmZvLmlkeENoYW5uZWxdLmVuZHBvaW50W3RoaXMudmlld0luZm8uaWR4RW5kcG9pbnRdLmlwNmFkZHJlc3NbaWR4XS5wcmVsZW5ndGggPSB0aGlzLmVkaXRJUDZJdGVtLnByZWxlbmd0aA0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDZhZGRyZXNzW2lkeF0uYWRkcmVzcyA9IHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzcw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDZhZGRyZXNzW2lkeF0uYWRkcmVzc3NvdXJjZSA9IHRoaXMuZWRpdElQNkl0ZW0uYWRkcmVzc3NvdXJjZQ0KICAgICAgICAgICAgdGhpcy5jYW5jZWxkaWFsb2dJUDYoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxkaWFsb2dJUDYoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRJUDZJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SVA2SXRlbSkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkZGlhbG9nSVA2KCkgew0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsW3RoaXMudmlld0luZm8uaWR4Q29uZGl0aW9uYWxdLmNoYW5uZWxbdGhpcy52aWV3SW5mby5pZHhDaGFubmVsXS5lbmRwb2ludFt0aGlzLnZpZXdJbmZvLmlkeEVuZHBvaW50XS5pcDZhZGRyZXNzLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0SVA2SXRlbS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0SVA2SXRlbSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbFt0aGlzLnZpZXdJbmZvLmlkeENvbmRpdGlvbmFsXS5jaGFubmVsW3RoaXMudmlld0luZm8uaWR4Q2hhbm5lbF0uZW5kcG9pbnRbdGhpcy52aWV3SW5mby5pZHhFbmRwb2ludF0uaXA2YWRkcmVzcy5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsZGlhbG9nSVA2KCkNCiAgICAgICAgfSwNCg0KDQogICAgICAgIHNldGFjdGl2ZVVVSUQoKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHV1aWQnLCB7dXVpZDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdEV0aGVybmV0Q2x1c3RlcicsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoxMH0gKQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVMaW5lKGZpbmVMaW5lKSB7DQogICAgICAgICAgICB2YXIgbGluZW51bSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Y29ubmVjdExpbmVOdW0oZmluZUxpbmUpDQogICAgICAgICAgICBpZiAobGluZW51bSAhPSAtMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRDb25uZWN0aW9ubGluZScsIHtzdGFydG51bTogbGluZW51bX0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlT3BlbkVsZW1lbnQoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVPcGVuRWxlbWVudCgpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdldGhlcm5ldEMgZGVsZXRlT3BlbkVsZW1lbnQnKQ0KICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnZGVsZXRlLWxpbmUnLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KHRoaXMuZWxlbWVudC51dWlkKSkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlT3BlbkVsZW1udCcsIHt1dWlkOiB0aGlzLmVsZW1lbnQudXVpZCwgaXNEZWxldGVBbGw6IGZhbHNlLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgIH0sDQogICAgICAgIG5ld0xpbmUoc3RhcnRMaW5lLCBkcmF3TGluZSwgZW5kTGluZSwgaXNWaWV3LCBpc0V4aXN0KSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENvbm5lY3Rpb25saW5lJywge3N0YXJ0OiBzdGFydExpbmUsIGVuZDogZW5kTGluZX0gKQ0KICAgICAgICAgICAgaWYgKGlzVmlldykgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIGRyYXdMaW5lLCBlbmRMaW5lLCBpc0V4aXN0KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIHZpZXdBUlhNTCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm5hbWUgPSB0aGlzLmVsZW1lbnQubmFtZQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWwgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudC5jb25kaXRpb25hbCkpDQogICAgICAgICAgICB0aGlzLmRpYWxvZ1RleHQ9IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZUFSWE1MKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGFibGVMaXN0KCkNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQubmFtZSAhPSB0aGlzLmVkaXRBUlhNTC5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0RXRoZXJuZXRDbHVzdGVyJywge2NvbXBvOiJOYW1lIiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVkaXRBUlhNTC5uYW1lfSApDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpc2ludG9FcnJvckxpc3QnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVkaXRBUlhNTC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQubmFtZSA9IHRoaXMuZWRpdEFSWE1MLm5hbWUNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgaXRlbS5jaGFubmVsLmZvckVhY2goY2hhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY2hhLmNvbWNvbm5lY3QuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvbm5lY3RvciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9jb21jb25ldC0nK2RhdGEuaWQrJy0nK2NoYS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJytkYXRhLmlkKyctJytjaGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWwuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBpdGVtLmNoYW5uZWwuZm9yRWFjaChjaGEgPT4gew0KICAgICAgICAgICAgICAgICAgICBjaGEuY29tY29ubmVjdC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29ubmVjdG9yICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNYWNoaW5lRGVzaWduUGF0aChkYXRhLmNvbm5lY3RvciwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvY29tY29uZXQtJytkYXRhLmlkKyctJytjaGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvY29uZGl0aW9uYWwnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWwuZm9yRWFjaChjb25kaSA9PiB7DQogICAgICAgICAgICAgICAgY29uZGkuY2hhbm5lbC5mb3JFYWNoKGNoYW4gPT4gew0KICAgICAgICAgICAgICAgICAgICBjaGFuLmVuZHBvaW50LmZvckVhY2goZW5kID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZC5pcDRhZGRyZXNzLmZvckVhY2goaXAgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpcC5iZWhhdmlvciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwLmJlaGF2aW9yID0gaXAuYmVoYXZpb3IudG9VcHBlckNhc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighKGlwLmJlaGF2aW9yID09ICdGT1JHRVQnIHx8IGlwLmJlaGF2aW9yID09ICdTVE9SRS1QRVJTSVNURU5UTFknKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAuYmVoYXZpb3IgPSBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlwLmFkZHJlc3Nzb3JjZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwLmFkZHJlc3Nzb3JjZSA9IGlwLmFkZHJlc3Nzb3JjZS50b1VwcGVyQ2FzZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoaXAuYWRkcmVzc3NvcmNlID09ICdGSVhFRCcgfHwgaXAuYWRkcmVzc3NvcmNlID09ICdESENQVi00JyB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAuYWRkcmVzc3NvcmNlID09ICdBVVRPLUlQJyB8fCBpcC5hZGRyZXNzc29yY2UgPT0gJ0FVVE8tSVAtRE9JUCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcC5hZGRyZXNzc29yY2UgPSBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kLmlwNmFkZHJlc3MuZm9yRWFjaChpcCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlwLmJlaGF2aW9yICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAuYmVoYXZpb3IgPSBpcC5iZWhhdmlvci50b1VwcGVyQ2FzZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoaXAuYmVoYXZpb3IgPT0gJ0ZPUkdFVCcgfHwgaXAuYmVoYXZpb3IgPT0gJ1NUT1JFLVBFUlNJU1RFTlRMWScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcC5iZWhhdmlvciA9IG51bGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXAuYWRkcmVzc3NvcmNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXAuYWRkcmVzc3NvcmNlID0gaXAuYWRkcmVzc3NvcmNlLnRvVXBwZXJDYXNlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShpcC5hZGRyZXNzc29yY2UgPT0gJ0ZJWEVEJyB8fCBpcC5hZGRyZXNzc29yY2UgPT0gJ0RIQ1BWLTYnIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcC5hZGRyZXNzc29yY2UgPT0gJ0xJTkstTE9DQUwnIHx8IGlwLmFkZHJlc3Nzb3JjZSA9PSAnUk9VVEVSLUFEVkVSVElTRU1FTlQnIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcC5hZGRyZXNzc29yY2UgPT0gJ0xJTkstTE9DQUwtRE9JUCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcC5hZGRyZXNzc29yY2UgPSBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY29uZGl0aW9uYWwgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsKSkNCiAgICAgICAgICAgIHRoaXMuY2FuY2VsQVJYTUwoKQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0VGFibGVMaXN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jb25kaXRpb25hbC5mb3JFYWNoKGNvbmRpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgY29uZGkuY2hhbm5lbC5mb3JFYWNoKGNoYSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGEuZW5kcG9pbnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWwuZm9yRWFjaChlZGl0Y29uZGkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0Y29uZGkuY2hhbm5lbC5mb3JFYWNoKGVkaXRjaGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGNoYS5lbmRwb2ludC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmlkID09IGl0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm5hbWUgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGk6IGVkaXRjb25kaS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBlZGl0Y2hhLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBpdGVtLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZW5hbWU6IGRhdGEubmFtZSwgY2hhbmdlTmFtZTogJ2VuZHBvaW50J30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0hhdmVUYWJsZSAmJiAoY2hhLm5hbWUgIT0gZWRpdGNoYS5uYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpOiBlZGl0Y29uZGkubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBjaGEubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVuYW1lOiBlZGl0Y2hhLm5hbWUsIGNoYW5nZU5hbWU6ICdjaGFubmVsJ30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIYXZlVGFibGUgJiYgKGNvbmRpLm5hbWUgIT0gZWRpdGNvbmRpLm5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaTogY29uZGkubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVuYW1lOiBlZGl0Y29uZGkubmFtZSwgY2hhbmdlTmFtZTogJ2NvbmRpJ30gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVOYW1lID0gaXRlbS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0ubmFtZSAhPSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTmFtZSArPSAnLycNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTmFtZSArPSBjaGEubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZU5hbWUgKz0gJy8nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTmFtZSArPSBjb25kaS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTonbWFjaGluZUQnLCBkZWxldGVUYWI6IHRydWUsIHRhYlBvc2l0aW9uOidlbmRwb2ludCcsIHRhYk5hbWU6IGRlbGV0ZU5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0hhdmVUYWJsZSAmJiB0aGlzLmVkaXRBUlhNTC5uYW1lICE9IHRoaXMuZWxlbWVudC5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWRpdEFSWE1MLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsIGNoYW5nZU5hbWU6ICduYW1lJ30gKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNvbmRpdGlvbmFsLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZXRlTmFtZSA9IGl0ZW0ubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5uYW1lICE9ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTmFtZSArPSAnLycNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZTonbWFjaGluZUQnLCBkZWxldGVUYWI6IHRydWUsIHRhYlBvc2l0aW9uOidjb25kaXRpb25hbCcsIHRhYk5hbWU6IGRlbGV0ZU5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxBUlhNTCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MID0ge25hbWU6JycsIGNvbmRpdGlvbmFsOltdfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dENvbmRpID0ge25hbWU6ICcnLCB2ZXJzaW9uOicnLCBjaGFubmVsOiBbXSwgYmF1ZHJhdGU6ICcnLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q2hhbm5lbCA9IHtuYW1lOiAnJywgY29tY29ubmVjdDpbXSwgZW5kcG9pbnQ6IFtdLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0RW5kUG9pbnQgPSB7bmFtZTogJycsIGRvbWFpbm5hbWU6JycsIGlwNGFkZHJlc3M6IFtdLCBpcDZhZGRyZXNzOiBbXSwgcHJpb3JpdHk6ICcnLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q29tbXVuaSA9IHtjb25uZWN0b3IgOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0SVA0ID0ge2dhdGV3YXk6JycsIEROU0FkZHI6JycsIGJlaGF2aW9yOiBudWxsLCBhZGRyZXNzOicnLCBhZGRyZXNzc29yY2U6bnVsbCwgbWFzazonJywgaWQ6ICcnLCB0dGw6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dElQNiA9IHtwcmlvcml0eTonJywgYmVoYXZpb3I6bnVsbCwgcHJlbGVuZ3RoOicnLCBhZGRyZXNzOicnLCBhZGRyZXNzc291cmNlOm51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVGV4dCA9IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRDb25kaSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRDb25kaSA9IHtuYW1lOiAnJywgdmVyc2lvbjonJywgY2hhbm5lbDogW10sIGJhdWRyYXRlOiAnJywgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGV4dENvbmRpLm5hbWUgPSAnRXRoZXJuZXRfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVkaXRBUlhNTC5jb25kaXRpb25hbC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRDb25kaS5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dENvbmRpKQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWwucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRDb25kaShpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsLnNwbGljZShpZHgsMSkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3VGV4dENoYW5uZWwoaWR4Qykgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dENoYW5uZWwgPSB7bmFtZTogJycsIGNvbWNvbm5lY3Q6W10sIGVuZHBvaW50OiBbXSwgYmF1ZHJhdGU6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q2hhbm5lbC5uYW1lID0gJ1BoeXNpY2FsQ2hhbm5lbF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsW2lkeENdLmNoYW5uZWwuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q2hhbm5lbC5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dENoYW5uZWwpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5jb25kaXRpb25hbFtpZHhDXS5jaGFubmVsLnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0Q2hhbm5lbChpZHgsIGlkeEMpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsW2lkeENdLmNoYW5uZWwuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0Q29tbXVuaShpZHhQLCBpZHhDKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q29tbXVuaSA9IHtjb25uZWN0b3IgOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5jb21jb25uZWN0LnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dENvbW11bmkuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRDb21tdW5pKQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5jb21jb25uZWN0LnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0Q29tbXVuaShpZHgsIGlkeEMsIGlkeFApIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsW2lkeENdLmNoYW5uZWxbaWR4UF0uY29tY29ubmVjdC5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRFbmRQb2ludChpZHhDLCBpZHhQKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0RW5kUG9pbnQgPSB7bmFtZTogJycsIGRvbWFpbm5hbWU6JycsIGlwNGFkZHJlc3M6IFtdLCBpcDZhZGRyZXNzOiBbXSwgcHJpb3JpdHk6ICcnLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUZXh0RW5kUG9pbnQubmFtZSA9ICdFbmRwb2ludCcgKyBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5lbmRwb2ludC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRFbmRQb2ludC5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dEVuZFBvaW50KQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5lbmRwb2ludC5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dEVuZFBvaW50KGlkeCwgaWR4QywgaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5lbmRwb2ludC5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRJUDQoaWR4QywgaWR4UCwgaWR4RSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dElQNCA9IHtnYXRld2F5OicnLCBETlNBZGRyOicnLCBiZWhhdmlvcjogbnVsbCwgYWRkcmVzczonJywgYWRkcmVzc3NvcmNlOm51bGwsIG1hc2s6JycsIGlkOiAnJywgdHRsOiAnJ30NCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVkaXRBUlhNTC5jb25kaXRpb25hbFtpZHhDXS5jaGFubmVsW2lkeFBdLmVuZHBvaW50W2lkeEVdLmlwNGFkZHJlc3Muc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0SVA0LmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0SVA0KQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5lbmRwb2ludFtpZHhFXS5pcDRhZGRyZXNzLnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0SVA0KGlkeCwgaWR4QywgaWR4UCwgaWR4RSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwuY29uZGl0aW9uYWxbaWR4Q10uY2hhbm5lbFtpZHhQXS5lbmRwb2ludFtpZHhFXS5pcDRhZGRyZXNzLnNwbGljZShpZHgsMSkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3VGV4dElQNihpZHhDLCBpZHhQLCBpZHhFKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0SVA2ID0ge3ByaW9yaXR5OicnLCBiZWhhdmlvcjpudWxsLCBwcmVsZW5ndGg6JycsIGFkZHJlc3M6JycsIGFkZHJlc3Nzb3VyY2U6bnVsbCwgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLmNvbmRpdGlvbmFsW2lkeENdLmNoYW5uZWxbaWR4UF0uZW5kcG9pbnRbaWR4RV0uaXA2YWRkcmVzcy5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRJUDYuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRJUDYpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5jb25kaXRpb25hbFtpZHhDXS5jaGFubmVsW2lkeFBdLmVuZHBvaW50W2lkeEVdLmlwNmFkZHJlc3MucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRJUDYoaWR4LCBpZHhDLCBpZHhQLCBpZHhFKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5jb25kaXRpb25hbFtpZHhDXS5jaGFubmVsW2lkeFBdLmVuZHBvaW50W2lkeEVdLmlwNmFkZHJlc3Muc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgIH0sDQp9DQo="},{"version":3,"sources":["EthernetCluster.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmvBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EthernetCluster.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div :id=\"element.uuid\">\r\n        <v-container>\r\n            <v-tooltip bottom color=\"success\" :disabled=\"isTooltip\" z-index=\"10\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-card outlined :color=\"minimaptoolbar ? null : colorToolbar\" v-bind=\"attrs\" v-on=\"on\">\r\n                        <v-toolbar v-if=\"!isDatailView\" :color=colorToolbar dark hide-on-scroll height=\"30px\" class=\"drag-handle\">\r\n                            <v-hover v-if=\"minimaptoolbar\" v-slot=\"{ hover }\">\r\n                                <v-btn icon @click=\"showEthernetCluster\">\r\n                                    <v-icon>{{ iselementOpenClose ? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                </v-btn>\r\n                            </v-hover>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click.stop=\"dialogPath=true\">\r\n                                <v-icon> mdi-routes</v-icon>\r\n                            </v-btn>\r\n                            <dialogPathSetting v-model=\"dialogPath\" :path=\"element.path\" @submit=\"submitDialog\"/>\r\n                            <v-toolbar-title>Ethernet Cluster</v-toolbar-title>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click=\"viewARXML\">\r\n                                <v-icon> mdi-format-text</v-icon>\r\n                            </v-btn>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else hide-on-scroll dense flat>\r\n                            <v-toolbar-title>Ethernet Cluster</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-card-text v-show=\"iselementOpenClose\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        @input='inputEthernetClusterName' @click=\"clickEthernetClusterName\" outlined dense></v-text-field>\r\n                            <!-- <v-card outlined class=\"mx-auto ehternetcluster\"> --> <!--화면 고정에 스크롤 할것인지 말것인지--> \r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/conditional'\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showEthernetClusterItem\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isEthernetClusterOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    Conditional\r\n                                    <v-btn v-if=\"isEthernetClusterOpenClose && selectViewedit\" @click=\"addEthernetCluster()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                    <!--<v-btn v-if=\"isEthernetClusterOpenClose\" :disabled=\"selectViewedit\" color=\"indigo\" @click=\"setViewEdit()\" outlined x-small text>\r\n                                        panel\r\n                                    </v-btn>\r\n                                    <v-btn v-if=\"isEthernetClusterOpenClose\" :disabled=\"!selectViewedit\" color=\"indigo\" @click=\"setViewEdit()\" outlined x-small text>\r\n                                        Table\r\n                                    </v-btn> -->\r\n                                </div>\r\n                                <div v-if=\"selectViewedit\">\r\n                                    <v-tabs v-model='conditionalTab' height=\"30px\" v-if=\"isEthernetClusterOpenClose\" show-arrows @change=\"changeConditionalTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.conditional\" :key=\"idx\" @click=\"clickConditionaltab(idx)\"> \r\n                                            {{tab.id}}.{{tab.name}}\r\n                                            <v-btn text x-small @click=\"deleteConditional(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"conditionalTab\" v-if=\"isEthernetClusterOpenClose\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.conditional\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Protocol Name\" @input=\"inputConditionalName(tab.name)\" @click=\"clickConditionalName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-text-field v-model=\"tab.version\" label=\"Protocol Version\" placeholder=\"Numeric Only(Unit Second)\" @click=\"clickOtherFields()\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-text-field v-model=\"tab.baudrate\" label=\"Baudrate\" placeholder=\"Int\" @click=\"clickOtherFields()\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/channel-'+tab.id\">\r\n                                                        <v-hover v-slot=\"{ hover }\">\r\n                                                            <v-btn text @click=\"showPhysicalChannelItem\" x-small color=\"indigo\">\r\n                                                                <v-icon>{{ isPhysicalChannelOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                            </v-btn>\r\n                                                        </v-hover>\r\n                                                        Physical Channel\r\n                                                        <v-btn v-if=\"isPhysicalChannelOpenClose\" @click=\"addPhysicalChannel()\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-plus</v-icon>\r\n                                                        </v-btn>\r\n                                                    </div>\r\n                                                    <v-tabs v-model='channelTab[idx]' height=\"30px\" v-if=\"isPhysicalChannelOpenClose\" show-arrows @change=\"changeChannelTab()\">\r\n                                                        <v-tab v-for=\"(subtab, channelidx) in tab.channel\" :key=\"channelidx\" @click=\"clickChanneltab(channelidx)\"> \r\n                                                            {{subtab.id}}.{{subtab.name}}\r\n                                                            <v-btn text x-small @click=\"deleteChannel(channelidx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                                    </v-tabs>\r\n                                                    <v-tabs-items v-model=\"channelTab[idx]\" v-if=\"isPhysicalChannelOpenClose\">\r\n                                                        <v-tab-item v-for=\"(subtab, channelidx) in tab.channel\" :key=\"channelidx\">\r\n                                                            <v-card flat>\r\n                                                                <v-card-text>\r\n                                                                    <v-text-field v-model=\"subtab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputChannelName(subtab.name)\" @click=\"clickChannelName(subtab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                    <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/comconet-'+subtab.id+'-'+tab.id\">\r\n                                                                        <v-hover v-slot=\"{ hover }\">\r\n                                                                            <v-btn text @click=\"showCommConnectItem\" x-small color=\"indigo\">\r\n                                                                                <v-icon>{{ isCommConnectOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                            </v-btn>\r\n                                                                        </v-hover>\r\n                                                                        Comm Connector\r\n                                                                        <v-btn v-if=\"isCommConnectOpenClose\" @click=\"isCommConnect\" text x-small color=\"indigo\">\r\n                                                                            <v-icon>mdi-check</v-icon>\r\n                                                                        </v-btn>\r\n                                                                        <v-btn v-if=\"isCommConnectOpenClose && isdeleteCommConnect\" @click=\"deleteCommConnect\" text x-small color=\"indigo\">\r\n                                                                            <v-icon>mdi-minus</v-icon>\r\n                                                                        </v-btn>\r\n                                                                    </div>\r\n                                                                    <v-data-table v-model=\"selectDelectCommConnectItem\" :headers=\"headerCommConnector\" :items=\"subtab.comconnect\" :items-per-page='$setNumTableList'\r\n                                                                            :show-select=\"isdeleteCommConnect\" item-key=\"id\" style=\"width:100%;height:140px\" v-if=\"isCommConnectOpenClose\" dense hide-default-footer >\r\n                                                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                        </template>\r\n                                                                        <template v-if=\"!isdeleteCommConnect\" v-slot:body=\"{ items, headers }\">\r\n                                                                            <tbody>\r\n                                                                                <tr v-for=\"(item,idxCC) in items\" :key=\"idxCC\">\r\n                                                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                        <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refCommuni === item.id ? 'red' : null \" @click=\"rowClick(idxCC)\">mdi-pencil</v-icon>\r\n                                                                                        <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openCommConnect(idxCC)\" @cancel=\"cancelCommConnect\" @save=\"editCommConnect(idxCC)\" large >\r\n                                                                                            {{item[header.value]}}\r\n                                                                                            <template v-slot:input>\r\n                                                                                                <br>\r\n                                                                                                <v-autocomplete v-model='editCCItem.connector' label='Communication Connector Reference' :items='selCommunicationConnect' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                                            return-object :readonly=\"!isEditingCC\" clearable @click=\"setCommuniCSelect()\" \r\n                                                                                                            @click:clear='clearCommuniC' @blur=\"isEditingCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                                </v-autocomplete>\r\n                                                                                            </template>\r\n                                                                                        </v-edit-dialog>\r\n                                                                                    </td>\r\n                                                                                </tr>\r\n                                                                                <tr>\r\n                                                                                    <th colspan=\"3\">\r\n                                                                                        <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelCommConnect\" @save=\"addCommConnect()\"> \r\n                                                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"230px\">\r\n                                                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                            </v-btn>\r\n                                                                                            <template v-slot:input>\r\n                                                                                                <br>\r\n                                                                                                <v-autocomplete v-model='editCCItem.connector' label='Communication Connector Reference' :items='selCommunicationConnect' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                                    return-object :readonly=\"!isEditingCC\" clearable @click=\"setCommuniCSelect()\" \r\n                                                                                                    @click:clear='clearCommuniC' @blur=\"isEditingCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                                </v-autocomplete>\r\n                                                                                            </template>\r\n                                                                                        </v-edit-dialog>\r\n                                                                                    </th>\r\n                                                                                </tr>\r\n                                                                            </tbody>\r\n                                                                        </template>\r\n                                                                    </v-data-table>\r\n                                                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                                                        <v-hover v-slot=\"{ hover }\">\r\n                                                                            <v-btn text @click=\"showNetworkEndpointItem\" x-small color=\"indigo\">\r\n                                                                                <v-icon>{{ isNetworkEndpointOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                            </v-btn>\r\n                                                                        </v-hover>\r\n                                                                        Network Endpoint\r\n                                                                        <v-btn v-if=\"isNetworkEndpointOpenClose\" @click=\"addNetworkEndpoint\" text x-small color=\"indigo\">\r\n                                                                            <v-icon>mdi-plus</v-icon>\r\n                                                                        </v-btn>\r\n                                                                    </div>\r\n                                                                    <v-tabs v-model='endpointTab[idx][channelidx]' height=\"30px\" v-if=\"isNetworkEndpointOpenClose\" show-arrows>\r\n                                                                        <v-tab v-for=\"(subendpointtab, endpoingidx) in subtab.endpoint\" :key=\"endpoingidx\" @click=\"clickEndpointTab(endpoingidx)\"> \r\n                                                                            {{subendpointtab.id}}.{{subendpointtab.name}}\r\n                                                                            <v-btn text x-small @click=\"deleteEndpointTab(endpoingidx)\"><v-icon x-small>mdi-close</v-icon></v-btn>\r\n                                                                        </v-tab>\r\n                                                                    </v-tabs>\r\n                                                                    <v-tabs-items v-model=\"endpointTab[idx][channelidx]\" v-if=\"isNetworkEndpointOpenClose\">\r\n                                                                        <v-tab-item v-for=\"(subendpointtab, endpoingidx) in subtab.endpoint\" :key=\"endpoingidx\">\r\n                                                                            <br>\r\n                                                                            <v-text-field v-model=\"subendpointtab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputEndPointName(subendpointtab.name)\" @click=\"clickEndPointName(subendpointtab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            <v-text-field v-model=\"subendpointtab.domainname\" label=\"Fully Qualified Domain Name\" @click=\"clickOtherFields()\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            <v-text-field v-model=\"subendpointtab.priority\" label=\"Priority\" @click=\"clickOtherFields()\" placeholder=\"Int\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                            <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                                                                <v-hover v-slot=\"{ hover }\">\r\n                                                                                    <v-btn text @click=\"showIP4Item\" x-small color=\"indigo\">\r\n                                                                                        <v-icon>{{ isIP4OpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                                    </v-btn>\r\n                                                                                </v-hover>\r\n                                                                                IPV-4 Configuration\r\n                                                                                <v-btn v-if=\"isIP4OpenClose\" @click=\"isEndpointIP4\" text x-small color=\"indigo\">\r\n                                                                                    <v-icon>mdi-check</v-icon>\r\n                                                                                </v-btn>\r\n                                                                                <v-btn v-if=\"isIP4OpenClose && isdeleteIP4Item\" @click=\"deleteIP4\" text x-small color=\"indigo\">\r\n                                                                                    <v-icon>mdi-minus</v-icon>\r\n                                                                                </v-btn>\r\n                                                                            </div>\r\n                                                                            <v-data-table v-model=\"selectDelectIP4tem\" :headers=\"headerIP4\" :items=\"subendpointtab.ip4address\" :items-per-page='$setNumTableList'\r\n                                                                                    :show-select=\"isdeleteIP4Item\" v-if=\"isIP4OpenClose\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                                </template>\r\n                                                                                <template v-if=\"!isdeleteIP4Item\" v-slot:body=\"{ items, headers }\">\r\n                                                                                    <tbody>\r\n                                                                                        <tr v-for=\"(item,idxIP4) in items\" :key=\"idxIP4\">\r\n                                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                                <v-edit-dialog persistent @open=\"openIP4(idxIP4)\" @cancel=\"cancelIP4\" @save=\"editIP4(idxIP4)\" large >\r\n                                                                                                    {{item[header.value]}}\r\n                                                                                                    <template v-slot:input>\r\n                                                                                                        <br>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.gateway\" label=\"Default Gateway\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.DNSAddr\" label=\"DNS-SERVER-ADDR\" placeholder=\"Int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP4Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\"  outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-select v-model=\"editIP4Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.address\" label=\"IPV-4 Address\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP4Item.addresssorce\" clearable :items=\"addressSourceIP4\" label=\"IPV-4 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.mask\" label=\"Network Mask\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.ttl\" label=\"TTL\" placeholder=\"Int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>    \r\n                                                                                                    </template>\r\n                                                                                                </v-edit-dialog>\r\n                                                                                            </td>\r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <th colspan=\"3\">\r\n                                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelIP4\" @save=\"addIP4()\"> \r\n                                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                                    </v-btn>\r\n                                                                                                    <template v-slot:input>\r\n                                                                                                        <br>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.gateway\" label=\"Default Gateway\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.DNSAddr\" label=\"DNS-SERVER-ADDR\" placeholder=\"Int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP4Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.address\" label=\"IPV-4 Address\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP4Item.addresssorce\" clearable :items=\"addressSourceIP4\" label=\"IPV-4 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.mask\" label=\"Network Mask\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-text-field v-model=\"editIP4Item.ttl\" label=\"TTL\" placeholder=\"Int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                    </template>\r\n                                                                                                </v-edit-dialog>\r\n                                                                                            </th>\r\n                                                                                        </tr>\r\n                                                                                    </tbody>\r\n                                                                                </template>\r\n                                                                            </v-data-table>\r\n                                                                            <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                                                                <v-hover v-slot=\"{ hover }\">\r\n                                                                                    <v-btn text @click=\"showIP6Item\" x-small color=\"indigo\">\r\n                                                                                        <v-icon>{{ isIP6OpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                                    </v-btn>\r\n                                                                                </v-hover>\r\n                                                                                IPV-6 Configuration\r\n                                                                                <v-btn v-if=\"isIP6OpenClose\" @click=\"isEndpointIP6\" text x-small color=\"indigo\">\r\n                                                                                    <v-icon>mdi-check</v-icon>\r\n                                                                                </v-btn>\r\n                                                                                <v-btn v-if=\"isIP6OpenClose && isdeleteIP6Item\" @click=\"deleteIP6\" text x-small color=\"indigo\">\r\n                                                                                    <v-icon>mdi-minus</v-icon>\r\n                                                                                </v-btn>\r\n                                                                            </div>\r\n                                                                            <v-data-table v-model=\"selectDelectIP6tem\" :headers=\"headerIP6\" :items=\"subendpointtab.ip6address\" :items-per-page='$setNumTableList'\r\n                                                                                    :show-select=\"isdeleteIP6Item\" v-if=\"isIP6OpenClose\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                                </template>\r\n                                                                                <template v-if=\"!isdeleteIP6Item\" v-slot:body=\"{ items, headers }\">\r\n                                                                                    <tbody>\r\n                                                                                        <tr v-for=\"(item,idxIP6) in items\" :key=\"idxIP6\">\r\n                                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                                <v-edit-dialog persistent @open=\"openIP6(idxIP6)\" @cancel=\"cancelIP6\" @save=\"editIP6(idxIP6)\" large >\r\n                                                                                                    {{item[header.value]}}\r\n                                                                                                    <template v-slot:input>\r\n                                                                                                        <br>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.priority\" label=\"Assigment Priority\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP6Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.address\" label=\"IPV-6 Address\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP6Item.addresssorce\" clearable :items=\"addressSourceIP6\" label=\"IPV-6 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.prelength\" label=\"IP Address Prefix Length\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                    </template>\r\n                                                                                                </v-edit-dialog>\r\n                                                                                            </td>\r\n                                                                                        </tr>\r\n                                                                                        <tr>\r\n                                                                                            <th colspan=\"3\">\r\n                                                                                                <v-edit-dialog  large persistent  @open=\"clickOtherFields()\" @cancel=\"cancelIP6\" @save=\"addIP6()\"> \r\n                                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                                    </v-btn>\r\n                                                                                                    <template v-slot:input>\r\n                                                                                                        <br>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.priority\" label=\"Assigment Priority\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP6Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.address\" label=\"IPV-6 Address\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                        <v-select v-model=\"editIP6Item.addresssorce\" clearable :items=\"addressSourceIP6\" label=\"IPV-6 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                                        <v-text-field v-model=\"editIP6Item.prelength\" label=\"IP Address Prefix Length\" placeholder=\"Int\" @click=\"setactiveUUID\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                                                    </template>\r\n                                                                                                </v-edit-dialog>\r\n                                                                                            </th>\r\n                                                                                        </tr>\r\n                                                                                    </tbody>\r\n                                                                                </template>\r\n                                                                            </v-data-table>\r\n                                                                        </v-tab-item>\r\n                                                                    </v-tabs-items>\r\n                                                                </v-card-text>\r\n                                                            </v-card>\r\n                                                        </v-tab-item>\r\n                                                    </v-tabs-items>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </div>\r\n                                <div v-else>\r\n                                    <v-data-table v-if=\"isEthernetClusterOpenClose\" :headers=\"viewHeader\" :items=\"viewList\" item-key=\"id\" single-select :items-per-page='$setNumTableList'\r\n                                        height=\"370px\" dense hide-default-footer @click:row=\"editDialogEthernetCluster\" @click=\"setactiveUUID\" class=\"elevation-1\">\r\n                                    </v-data-table>\r\n                                </div>\r\n                            </v-card>\r\n                        </v-card-text>\r\n                        <!-- <v-card-text v-if=\"iselementOpenClose && isDatailView\">\r\n                            <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                Conditional\r\n                            </div>\r\n                            <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].name\" @input=\"inputConditionalName(element.conditional[viewInfo.idxConditional].name)\" \r\n                                            :rules=\"rules.name\" label=\"Protocol Name\"  placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].version\" \r\n                                            label=\"Protocol Version\" placeholder=\"Numeric Only(Unit Second)\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].baudrate\" label=\"Baudrate\" placeholder=\"Int\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                            <div v-if=\"viewInfo.isChannel\">\r\n                                <div class=\"subtitle-2\" style=\"height:20px\" >\r\n                                    Physical Channel\r\n                                </div>\r\n                                <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                    Comm Connector\r\n                                    <v-btn  @click=\"isdialogCC\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-check</v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn v-if=\"isdeleteInfoCC\" @click=\"deletedialogCC\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-minus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-data-table v-model=\"selectDelectInfoCC\" :headers=\"headerCommConnector\" :items=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].comconnect\"  \r\n                                        :show-select=\"isdeleteInfoCC\" item-key=\"id\" height=\"140px\" dense hide-default-footer :items-per-page='$setNumTableList'>\r\n                                    <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                        <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                    </template>\r\n                                    <template v-if=\"!isdeleteInfoCC\" v-slot:body=\"{ items }\">\r\n                                        <tbody>\r\n                                            <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                <v-edit-dialog persistent @open=\"opendialogCC(idx)\" @cancel=\"canceldialogCC\" @save=\"editdialogCC(idx)\" large >\r\n                                                    {{item.connector}}\r\n                                                    <template v-slot:input>\r\n                                                        <br>\r\n                                                        <v-autocomplete v-model='editCCItem.connector' label='Communication Connector Reference' :items='selCommunicationConnect' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                            return-object :readonly=\"!isEditingCC\" clearable @click=\"setCommuniCSelect()\" \r\n                                                            @click:clear='clearCommuniC' @blur=\"isEditingCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                        </v-autocomplete>\r\n                                                    </template>\r\n                                                </v-edit-dialog>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <th>\r\n                                                    <v-edit-dialog  large persistent @cancel=\"canceldialogCC\" @save=\"adddialogCC()\"> \r\n                                                        <v-btn outlined color=\"indigo\" dense text small block width=\"230px\">\r\n                                                            <v-icon >mdi-plus</v-icon>New Item\r\n                                                        </v-btn>\r\n                                                        <template v-slot:input>\r\n                                                            <br>\r\n                                                            <v-autocomplete v-model='editCCItem.connector' label='Communication Connector Reference' :items='selCommunicationConnect' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                return-object :readonly=\"!isEditingCC\" clearable @click=\"setCommuniCSelect()\" \r\n                                                                @click:clear='clearCommuniC' @blur=\"isEditingCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                            </v-autocomplete>\r\n                                                        </template>\r\n                                                    </v-edit-dialog>\r\n                                                </th>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </template>\r\n                                </v-data-table>\r\n                                <div v-if=\"viewInfo.isEndpoint\">\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        Network Endpoint\r\n                                    </div>\r\n                                    <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].endpoint[viewInfo.idxEndpoint].name\" :rules=\"rules.name\" label=\"Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                    <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].endpoint[viewInfo.idxEndpoint].domainname\" label=\"Fully Qualified Domain Name\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                    <v-text-field v-model=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].endpoint[viewInfo.idxEndpoint].priority\" label=\"Priority\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        IPV-4 Configuration\r\n                                        <v-btn @click=\"isEndpointDialogIP4\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-check</v-icon>\r\n                                        </v-btn>\r\n                                        <v-btn v-if=\"isdeleteInfoIPV4\" @click=\"deletedialogIP4\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-data-table v-model=\"selectDelectInfoIP4\" :headers=\"headerIP4\" :items=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].endpoint[viewInfo.idxEndpoint].ip4address\" \r\n                                            :show-select=\"isdeleteInfoIPV4\" item-key=\"id\" height=\"140px\" dense hide-default-footer :items-per-page='$setNumTableList'>\r\n                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                        </template>\r\n                                        <template v-if=\"!isdeleteInfoIPV4\" v-slot:body=\"{ items, headers }\">\r\n                                            <tbody>\r\n                                                <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                        <v-edit-dialog persistent @open=\"opendialogIP4(idx, items)\" @cancel=\"canceldialogIP4\" @save=\"editdialogIP4(idx, items)\" large >\r\n                                                            {{item[header.value]}}\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editIP4Item.gateway\" label=\"Default Gateway\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editIP4Item.DNSAddr\" label=\"DNS-SERVER-ADDR\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP4Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\"  outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP4Item.address\" label=\"IPV-4 Address\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP4Item.addresssorce\" clearable :items=\"addressSourceIP4\" label=\"IPV-4 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP4Item.mask\" label=\"Network Mask\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editIP4Item.ttl\" label=\"TTL\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <th colspan=\"3\">\r\n                                                        <v-edit-dialog  large persistent @cancel=\"canceldialogIP4\" @save=\"adddialogIP4()\"> \r\n                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                            </v-btn>\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editIP4Item.gateway\" label=\"Default Gateway\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editIP4Item.DNSAddr\" label=\"DNS-SERVER-ADDR\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP4Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP4Item.address\" label=\"IPV-4 Address\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP4Item.addresssorce\" clearable :items=\"addressSourceIP4\" label=\"IPV-4 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP4Item.mask\" label=\"Network Mask\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-text-field v-model=\"editIP4Item.ttl\" label=\"TTL\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </th>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </template>\r\n                                    </v-data-table>\r\n                                    <div class=\"subtitle-2\" style=\"height:20px\">\r\n                                        IPV-6 Configuration\r\n                                        <v-btn @click=\"isEndpointDialogIPV6\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-check</v-icon>\r\n                                        </v-btn>\r\n                                        <v-btn v-if=\"isdeleteInfoIPV6\" @click=\"deletedialogIP6\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                    </div>\r\n                                    <v-data-table v-model=\"selectDelectInfoIP6\" :headers=\"headerIP6\" :items=\"element.conditional[viewInfo.idxConditional].channel[viewInfo.idxChannel].endpoint[viewInfo.idxEndpoint].ip6address\"\r\n                                            :show-select=\"isdeleteInfoIPV6\" item-key=\"id\" height=\"140px\" dense hide-default-footer :items-per-page='$setNumTableList'>\r\n                                        <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                            <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                        </template>\r\n                                        <template v-if=\"!isdeleteInfoIPV6\" v-slot:body=\"{ items, headers }\">\r\n                                            <tbody>\r\n                                                <tr v-for=\"(item,idx) in items\" :key=\"idx\">\r\n                                                    <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                        <v-edit-dialog persistent @open=\"opendialogIP6(idx, items)\" @cancel=\"canceldialogIP6\" @save=\"editdialogIP6(idx, items)\" large >\r\n                                                            {{item[header.value]}}\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editIP6Item.priority\" label=\"Assigment Priority\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP6Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP6Item.address\" label=\"IPV-6 Address\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP6Item.addresssorce\" clearable :items=\"addressSourceIP6\" label=\"IPV-6 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP6Item.prelength\" label=\"IP Address Prefix Length\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </td>\r\n                                                </tr>\r\n                                                <tr>\r\n                                                    <th colspan=\"3\">\r\n                                                        <v-edit-dialog  large persistent @cancel=\"canceldialogIP6\" @save=\"adddialogIP6()\"> \r\n                                                            <v-btn outlined color=\"indigo\" dense text small block width=\"270px\">\r\n                                                                <v-icon >mdi-plus</v-icon>New Item\r\n                                                            </v-btn>\r\n                                                            <template v-slot:input>\r\n                                                                <br>\r\n                                                                <v-text-field v-model=\"editIP6Item.priority\" label=\"Assigment Priority\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP6Item.behavior\" clearable :items=\"addressBehavior\" label=\"IP Address Keep Behavior\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP6Item.address\" label=\"IPV-6 Address\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                                <v-select v-model=\"editIP6Item.addresssorce\" clearable :items=\"addressSourceIP6\" label=\"IPV-6 Address Source\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                <v-text-field v-model=\"editIP6Item.prelength\" label=\"IP Address Prefix Length\" placeholder=\"int\" style=\"height: 45px;\" @click=\"setactiveUUID\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                            </template>\r\n                                                        </v-edit-dialog>\r\n                                                    </th>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </template>\r\n                                    </v-data-table>  \r\n                                </div>\r\n                            </div>\r\n                        </v-card-text> -->\r\n                        <v-card-text v-show=\"!iselementOpenClose || !minimaptoolbar\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        readonly outlined dense></v-text-field>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </template>\r\n                <span>{{ element.name }}</span>\r\n            </v-tooltip>\r\n            <v-dialog v-model=\"dialogText\" persistent width=\"1000\">\r\n                <v-card >\r\n                    <v-card-title class=\"text-h6 green accent-1\"> Edit Text </v-card-title>\r\n                    <v-card-text>\r\n                        <br>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;\">&#60;SHORT-NAME&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.name\" placeholder=\"String\" style=\"height: 15px;\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;\">&#60;ETHERNET-CLUSTER-VARIANTS&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextCondi()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog-Ethernet\" style=\"height: 670px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.conditional\" :key=\"i\" style=\"height: 810px;\">\r\n                                <div>\r\n                                    <v-row style=\"height: 25px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextCondi(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;ETHERNET-CLUSTER-CONDITIONAL&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 10px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;BAUDRATE&#62;</label>\r\n                                        <v-text-field v-model=\"item.baudrate\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;BAUDRATE&#62;</label>\r\n                                    </v-row>                               \r\n                                    <v-row style=\"height: 25px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;PHYSICAL-CHANNELS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;ETHERNET-PHYSICAL-CHANNEL&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextChannel(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 600px;\">\r\n                                        <v-row v-for=\"(cha, c) in item.channel\" :key=\"c\" style=\"height: 450px;\">\r\n                                            <div>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextChannel(c,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;ETHERNET-PHYSICAL-CHANNEL&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 15px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 120px;\">&#60;SHORT-NAME&#62;</label>\r\n                                                    <v-text-field v-model=\"cha.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 50px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 130px;\">&#60;COMM-CONNECTORS&#62;</label>\r\n                                                    <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextCommuni(c,i)\" icon color=\"teal darken\" x-samll dark>\r\n                                                        <v-icon dense dark>mdi-plus</v-icon>\r\n                                                    </v-btn>\r\n                                                </v-row>\r\n                                                <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                                    <v-row v-for=\"(com, co) in cha.comconnect\" :key=\"co\" style=\"height: 80px;\">\r\n                                                        <div>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <v-btn style=\"margin: 15px -100px 0px 120px\" @click=\"deletTextCommuni(co, i, c)\" text x-small color=\"indigo\">\r\n                                                                    <v-icon>mdi-minus</v-icon>\r\n                                                                </v-btn>\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;COMMUNICATION-CONNECTOR-REF-CONDITIONAL&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <v-col cols=\"6\">\r\n                                                                    <label style=\"padding:10px;margin:2px 0px 2px 160px;\">&#60;COMMUNICATION-CONNECTOR-REF&#62;</label>\r\n                                                                </v-col><v-col cols=\"4\">\r\n                                                                    <v-text-field v-model=\"com.connector\" placeholder=\"Path\" style=\"margin:-5px 0px 0px 30px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                </v-col><v-col cols=\"2\">\r\n                                                                    <label style=\"padding:10px;\">&#60;&#47;COMMUNICATION-CONNECTOR-REF&#62;</label>\r\n                                                                </v-col>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 155px;\">&#60;&#47;COMMUNICATION-CONNECTOR-REF-CONDITIONAL&#62;</label>\r\n                                                            </v-row>\r\n                                                        </div>\r\n                                                    </v-row>\r\n                                                </div>\r\n                                                <v-row style=\"height: 10px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 120px;\">&#60;&#47;COMM-CONNECTORS&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 50px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 130px;\">&#60;NETWORK-ENDPOINTS&#62;</label>\r\n                                                    <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextEndPoint(i,c)\" icon color=\"teal darken\" x-samll dark>\r\n                                                        <v-icon dense dark>mdi-plus</v-icon>\r\n                                                    </v-btn>\r\n                                                </v-row>\r\n                                                <div class=\"text-Inner-editDialog\" style=\"height: 600px;\">\r\n                                                    <v-row v-for=\"(end, e) in cha.endpoint\" :key=\"e\" style=\"height: 530px;\">\r\n                                                        <div>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <v-btn style=\"margin: 15px -100px 0px 100px\" @click=\"deletTextEndPoint(e, i, c)\" text x-small color=\"indigo\">\r\n                                                                    <v-icon>mdi-minus</v-icon>\r\n                                                                </v-btn>\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;NETWORK-ENDPOINT&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 150px;\">&#60;SHORT-NAME&#62;</label>\r\n                                                                <v-text-field v-model=\"end.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <v-col cols=\"6\">\r\n                                                                    <label style=\"padding:10px;margin:2px 0px 2px 140px;\">&#60;FULLY-QUALIFIED-DOMAIN-NAME&#62;</label>\r\n                                                                </v-col><v-col cols=\"4\">\r\n                                                                    <v-text-field v-model=\"end.domainname\" placeholder=\"String\" style=\"margin: -5px 0px 0px 0px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                </v-col><v-col cols=\"2\">\r\n                                                                    <label style=\"padding:10px;\">&#60;&#47;FULLY-QUALIFIED-DOMAIN-NAME&#62;</label>\r\n                                                                </v-col>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 150px;\">&#60;PRIORITY&#62;</label>\r\n                                                                <v-text-field v-model=\"end.priority\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                <label style=\"padding:10px;\">&#60;&#47;PRIORITY&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 15px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 150px;\">&#60;NETWORK-ENDPOINT-ADDRESSES&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 50px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 180px;\">&#60;IPV-4-CONFIGURATION&#62;</label>\r\n                                                                <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextIP4(i, c, e)\" icon color=\"teal darken\" x-samll dark>\r\n                                                                    <v-icon dense dark>mdi-plus</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-row>\r\n                                                            <div class=\"text-Inner-editDialog\" style=\"height: 120px;\">\r\n                                                                <v-row v-for=\"(ip4, pf) in end.ip4address\" :key=\"pf\" style=\"height: 180px;\">\r\n                                                                    <div>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <v-btn style=\"margin: 13px -170px 0px 170px\" @click=\"deletTextIP4(pf, i, c, e)\" text x-small color=\"indigo\">\r\n                                                                                <v-icon>mdi-minus</v-icon>\r\n                                                                            </v-btn>\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 160px;\">&#60;DEFAULT-GATEWAY&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.gateway\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;DEFAULT-GATEWAY&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;DNS-SERVER-ADDRESSES&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.DNSAddr\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;DNS-SERVER-ADDRESSES&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IP-ADDRESS-KEEP-BEHAVIOR&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.behavior\" placeholder=\"FORGET or STORE-PERSISTENTLY\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IP-ADDRESS-KEEP-BEHAVIOR&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IPV-4-ADDRESS&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.address\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IPV-4-ADDRESS&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IPV-4-ADDRESS-SOURCE&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.addresssorce\" placeholder=\"FIXED or DHCPV-4 or AUTO-IP or AUTO-IP-DOIP\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IPV-4-ADDRESS-SOURCE&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;NETWORK-MASK&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.mask\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;NETWORK-MASK&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;TTL&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip4.ttl\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;TTL&#62;</label>\r\n                                                                        </v-row>\r\n                                                                    </div>\r\n                                                                </v-row>\r\n                                                            </div>\r\n                                                            <v-row style=\"height: 10px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 170px;\">&#60;&#47;IPV-4-CONFIGURATION&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 50px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 180px;\">&#60;IPV-6-CONFIGURATION&#62;</label>\r\n                                                                <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextIP6(i, c, e)\" icon color=\"teal darken\" x-samll dark>\r\n                                                                    <v-icon dense dark>mdi-plus</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-row>\r\n                                                            <div class=\"text-Inner-editDialog\" style=\"height: 120px;\">\r\n                                                                <v-row v-for=\"(ip6, ps) in end.ip6address\" :key=\"ps\" style=\"height: 130px;\">\r\n                                                                    <div>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <v-btn style=\"margin: 15px -170px 0px 170px\" @click=\"deletTextIP6(ps, i, c, e)\" text x-small color=\"indigo\">\r\n                                                                                <v-icon>mdi-minus</v-icon>\r\n                                                                            </v-btn>\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 160px;\">&#60;ASSIGNMENT-PRIORITY&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip6.priority\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;ASSIGNMENT-PRIORITY&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IP-ADDRESS-KEEP-BEHAVIOR&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip6.behavior\" placeholder=\"FORGET or STORE-PERSISTENTLY\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IP-ADDRESS-KEEP-BEHAVIOR&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IP-ADDRESS-PREFIX-LENGTH&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip6.prelength\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IP-ADDRESS-PREFIX-LENGTH&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IPV-6-ADDRESS&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip6.address\" placeholder=\"Int\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IPV-6-ADDRESS&#62;</label>\r\n                                                                        </v-row>\r\n                                                                        <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                            <label style=\"padding:10px;margin:2px 0px 2px 205px;\">&#60;IPV-6-ADDRESS-SOURCE&#62;</label>\r\n                                                                            <v-text-field v-model=\"ip6.addresssorce\" placeholder=\"FIXED or DHCPV-6 or LINK-LOCAL or ROUTER-ADVERTISEMENT or LINK-LOCAL-DOIP\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                                            <label style=\"padding:10px;\">&#60;&#47;IPV-6-ADDRESS-SOURCE&#62;</label>\r\n                                                                        </v-row>\r\n                                                                    </div>\r\n                                                                </v-row>\r\n                                                            </div>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 170px;\">&#60;&#47;IPV-6-CONFIGURATION&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 150px;\">&#60;&#47;NETWORK-ENDPOINT-ADDRESSES&#62;</label>\r\n                                                            </v-row>\r\n                                                            <v-row style=\"height: 25px;margin:0px;\">\r\n                                                                <label style=\"padding:10px;margin:2px 0px 2px 132px;\">&#60;&#47;NETWORK-ENDPOINT&#62;</label>\r\n                                                            </v-row>\r\n                                                        </div>\r\n                                                    </v-row>\r\n                                                </div>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 120px;\">&#60;&#47;NETWORK-ENDPOINTS&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;&#47;ETHERNET-PHYSICAL-CHANNEL&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 35px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 80px;\">&#60;&#47;PHYSICAL-CHANNELS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 65px;\">&#60;PROTOCOL-NAME&#62;</label>\r\n                                        <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;PROTOCOL-NAME&#62;</label>\r\n                                    </v-row>                               \r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 65px;\">&#60;PROTOCOL-VERSION&#62;</label>\r\n                                        <v-text-field v-model=\"item.version\" placeholder=\"Numeric Only(Unit Second)\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;PROTOCOL-VERSION&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;&#47;ETHERNET-CLUSTER-CONDITIONAL&#62;</label>\r\n                                    </v-row>                         \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;ETHERNET-CLUSTER-VARIANTS&#62;</label>\r\n                        </v-row>\r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text  @click=\"saveARXML()\" >\r\n                            Save\r\n                        </v-btn>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text @click=\"cancelARXML()\">\r\n                            Cancel\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n        </v-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport constant from \"../store/constants.js\"\r\nimport { EventBus } from \"../main.js\"\r\nimport dialogPathSetting from '../components/dialogPathSetting.vue'\r\n\r\nexport default {\r\n    props: ['element', 'isDatailView', 'viewInfo', 'minimaptoolbar', 'location'],\r\n    components:{dialogPathSetting},\r\n    computed: {\r\n        activeUUID() {\r\n            return this.$store.state.activeUUID\r\n        },\r\n        setting() {\r\n            return this.$store.state.setting\r\n        },\r\n    },\r\n    watch: {\r\n        activeUUID(val) {\r\n            this.setToolbarColor(val)\r\n        },\r\n        /*detailViewUUID(val) {\r\n            this.setToolbarColorDetailView(val)\r\n        },*/\r\n        setting(value) {\r\n            this.zoomvalue = value.zoomMain\r\n            if (this.zoomvalue < this.$setZoominTooltip) {\r\n                this.isTooltip = false\r\n            } else {\r\n                this.isTooltip = this.minimaptoolbar\r\n                if (this.zoomvalue  > this.$setZoominLineTitle && this.zoomvalue < this.$setZoominLineSetupStart) {\r\n                    EventBus.$emit('drawLineTitleBar', this.element.uuid, false)\r\n                } else if (this.zoomvalue > this.$setZoominLineSetupStart && this.zoomvalue < this.$setZoominLineSetupEnd) {\r\n                    this.$nextTick(() => {\r\n                        EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                        if(this.iselementOpenClose && this.location == 1) {\r\n                            if(this.isEthernetClusterOpenClose && this.element.conditional.length > 0) {\r\n                                if(this.element.conditional[this.conditionalTab].channel.length > 0) {\r\n                                    if(this.isPhysicalChannelOpenClose) {\r\n                                        setTimeout(() => {EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid, this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                                    } else {\r\n                                        setTimeout(() => {EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                                    }\r\n                                } else {\r\n                                    EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                                }\r\n                            } else {\r\n                                EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                            }\r\n                        } \r\n                    })\r\n                }\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.setToolbarColor(this.$store.state.activeUUID)\r\n        /*endpointTab이 2차원 배열이기 때문에 복사하거나 fileInput 시 미리 정의해 줘야지 안그러면 error */\r\n        if (this.element.conditional.length > 0) {\r\n            this.element.conditional.forEach( (condi,i) => {\r\n                this.channelTab[i] = 0\r\n                if (condi.channel.length > 0) {\r\n                    condi.channel.forEach( () => {\r\n                        this.endpointTab.push([i, 0])\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            rules: {\r\n                name:  [val => (val || '').length > 0 ],\r\n            },\r\n            colorToolbar: \"#6A5ACD\",\r\n            zoomvalue: this.$store.state.setting.zoomMain,\r\n            isTooltip: this.minimaptoolbar,\r\n            dialogPath : false,\r\n            iselementOpenClose: true, //toolbar만 보여줄것이냐 아니냐 설정 true: 전체 다 보여줌 / false : toolbar만 보여줌\r\n            dialogText: false,\r\n            editARXML: {name:'', conditional:[]},\r\n            editTextCondi: {name: '', version:'', channel: [], id: ''},\r\n            editTextChannel: {name: '', comconnect:[], endpoint: [], id: ''},\r\n            editTextEndPoint: {name: '', domainname:'', ip4address: [], ip6address: [], priority: '', id: ''},\r\n            editTextCommuni: {connector : null, id: ''},\r\n            editTextIP4: {gateway:'', DNSAddr:'', behavior: null, address:'', addresssorce:null, mask:'', id: '', ttl: ''},\r\n            editTextIP6: {priority:'', behavior:null, prelength:'', address:'', addresssource:null, id: ''},\r\n            isEthernetClusterOpenClose: true,\r\n            isPhysicalChannelOpenClose: true,\r\n            isCommConnectOpenClose: true,\r\n            isNetworkEndpointOpenClose: true,\r\n            isIP4OpenClose: true,\r\n            isIP6OpenClose: true,\r\n            isdeleteCommConnect: false,\r\n            isdeleteIP4Item: false,\r\n            isdeleteIP6Item: false,\r\n            selectViewedit: true, //true: edit  false: view\r\n            selectDelectCommConnectItem: [],\r\n            selectDelectIP4tem: [],\r\n            selectDelectIP6tem: [],\r\n            conditionalTab: 0,\r\n            channelTab: [],\r\n            endpointTab: [[],[]],\r\n            headerCommConnector: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Communication Connector Ref', align: 'start', sortable: false, value: 'connector' },\r\n            ],\r\n            editCCItem: { connector : null, id: ''},\r\n            selCommunicationConnect: this.$store.getters.getCommunicationConnect,\r\n            isEditingCC: true,\r\n\r\n            headerIP4: [\r\n                { text: 'DEFAULT-GATEWAY', width:'140px', align: 'start', sortable: false, value: 'gateway' },\r\n                { text: 'DNS-SERVER-ADDR', width:'140px', align: 'start', sortable: false, value: 'DNSAddr' },\r\n                { text: 'IP-ADDRESS-KEEP-BEHAVIOR', width:'200px', sortable: false, value: 'behavior'},\r\n                { text: 'IPV-4-ADDRESS', width:'130px', sortable: false, value: 'address'},\r\n                { text: 'IPV-4-ADDRESS-SOURCE', width:'180px', sortable: false, value: 'addresssorce'},\r\n                { text: 'NETWORK-MASK', width:'130px', sortable: false, value: 'mask'},\r\n                { text: 'TTL', sortable: false, value: 'ttl'},\r\n            ],\r\n            headerIP6: [\r\n                { text: 'ASSIGNMENT-PRIORITY', width:'180px', sortable: false, value: 'priority'},\r\n                { text: 'IP-ADDRESS-KEEP-BEHAVIOR', width:'200px', sortable: false, value: 'behavior'},\r\n                { text: 'IP-ADDRESS-PREFIX-LENGTH', width:'200px', sortable: false, value: 'prelength'},\r\n                { text: 'IPV-6-ADDRESS', width:'130px', sortable: false, value: 'address'},\r\n                { text: 'IPV-6-ADDRESS-SOURCE', width:'180px', sortable: false, value: 'addresssource'},\r\n            ],\r\n            editIP4Item: { gateway:'', DNSAddr:'', behavior: null, address:'', addresssorce:null, mask:'', id: '', ttl: ''},\r\n            editIP6Item: { priority:'', behavior:null, prelength:'', address:'', addresssource:null, id: ''},\r\n            defaultIP4Item: { gateway:'', DNSAddr:'', behavior:null, address:'', addresssorce:null, mask:'', id: '', ttl: ''},\r\n            defaultIP6Item: { priority:'', behavior:null, prelength:'', address:'', addresssource:null, id: ''},\r\n            addressSourceIP4: [ 'FIXED', 'DHCPV-4', 'AUTO-IP', 'AUTO-IP--DOIP'],\r\n            addressSourceIP6: [ 'FIXED', 'DHCPV-6', 'LINK-LOCAL', 'ROUTER-ADVERTISEMENT', 'LINK-LOCAL--DOIP'],\r\n            addressBehavior: [ 'FORGET', 'STORE-PERSISTENTLY'],\r\n\r\n            viewList: [],\r\n            viewHeader: [\r\n                { text: 'Conditional name', width:'130px', align: 'start', sortable: false, value: 'condiname' },\r\n                { text: 'Channel name', width:'120px', sortable: false, value: 'channame' },\r\n                { text: 'Connector', width:'70px', sortable: false, value: 'connector' },\r\n                { text: 'Endpoint name', width:'120px', sortable: false, value: 'endname' },\r\n                { text: 'IPV-4 Address', width:'120px', sortable: false, value: 'ipv4' },\r\n                { text: 'IPV-6 Address', width:'120px', sortable: false, value: 'ipv6' },\r\n            ],\r\n            selectedViewId: -1,\r\n\r\n            editViewMode: { name:'', version:'', channel: {name: '', comconnect:[], endpoint:{name: '', domainname:'', ip4address: [], ip6address: []}}},\r\n            isdeleteInfoCC: false,\r\n            isdeleteInfoIPV4: false,\r\n            isdeleteInfoIPV6: false,\r\n            selectDelectInfoCC: [],\r\n            selectDelectInfoIP4: [],\r\n            selectDelectInfoIP6: [],\r\n\r\n            beforePath: '',\r\n            beforeName: '',\r\n            beforeCondi: '',\r\n            beforeChannl: '',\r\n            beforeEnd: '',\r\n\r\n            refCommuni: null\r\n        }\r\n    },\r\n    mounted () {\r\n        //console.log('-----EthernetC mout ' + this.conditionalTab)\r\n        if (this.minimaptoolbar && this.zoomvalue < this.$setZoominElement) {\r\n            this.isTooltip = false\r\n        }\r\n        EventBus.$on(this.element.uuid, (refNum, idxID, tabID, id, isDeleteItem) => {\r\n            if (isDeleteItem) {\r\n                if (this.refCommuni == id) {\r\n                    this.clickOtherFields()\r\n                }\r\n            } else {\r\n                this.refCommuni = null\r\n                if (refNum == 1) {\r\n                    this.conditionalTab = tabID//idxTab[0]\r\n                    this.channelTab[this.conditionalTab] = id//idxTab[1]\r\n                    this.refCommuni = idxID\r\n                }\r\n            }\r\n        })\r\n    },\r\n    methods: {\r\n        submitDialog(element) {\r\n            this.beforePath = this.element.path\r\n            this.element.path = element\r\n            if(this.element.conditional[this.conditionalTab] != undefined) {\r\n                if(this.element.conditional[this.conditionalTab].channel.length > 0) {\r\n                    if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length > 0) {\r\n                        //if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].name != '') {\r\n                            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        beforename: this.beforePath, changeName: 'path'} )\r\n                        //}\r\n                    }\r\n                }\r\n            }\r\n            this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n        },\r\n        setToolbarColor(activeid) \r\n        {\r\n            if(this.element.uuid == activeid) {\r\n                this.colorToolbar = \"#FF1493\" \r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        setToolbarColorDetailView(isdetail) {\r\n            if(this.element.uuid == isdetail) {\r\n                this.colorToolbar = \"#B0E0E6\" \r\n            } else if (this.element.uuid == this.$store.state.activeUUID) {\r\n                this.colorToolbar  = \"#FF1493\"\r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        showEthernetCluster() {\r\n            this.clickOtherFields()\r\n            this.iselementOpenClose = this.iselementOpenClose ? false : true\r\n            this.$nextTick(() => {\r\n                EventBus.$emit('drawLine')\r\n            })\r\n            /*this.$nextTick(() => {\r\n                EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                if(this.iselementOpenClose && this.location == 1) {\r\n                    if(this.isEthernetClusterOpenClose && this.element.conditional.length > 0) {\r\n                        if(this.element.conditional[this.conditionalTab].channel.length > 0) {\r\n                            if(this.isPhysicalChannelOpenClose) {\r\n                                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid, this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                            } else {\r\n                                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                            }\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                        }\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                    }\r\n                } \r\n            })*/\r\n        },\r\n        showEthernetClusterItem() {\r\n            this.clickOtherFields()\r\n            this.isEthernetClusterOpenClose = this.isEthernetClusterOpenClose ? false : true\r\n            /*var activeLine = this.$store.getters.getactiveLine(this.element.uuid)\r\n            if (this.location == 1 && activeLine.length > 0) {\r\n                this.$nextTick(() => {\r\n                    if(this.isEthernetClusterOpenClose && this.element.conditional.length > 0) {\r\n                        if(this.element.conditional[this.conditionalTab].channel.length > 0) {\r\n                            if(this.isPhysicalChannelOpenClose) {\r\n                                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid, this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                            } else {\r\n                                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                            }\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                        }\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }*/\r\n        },\r\n        showPhysicalChannelItem() {\r\n            this.clickOtherFields()\r\n            this.isPhysicalChannelOpenClose = this.isPhysicalChannelOpenClose ? false : true\r\n            /*if(this.element.conditional[this.conditionalTab].channel.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isPhysicalChannelOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid, this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }*/\r\n        },\r\n        showCommConnectItem() {\r\n            this.clickOtherFields()\r\n            this.isCommConnectOpenClose = this.isCommConnectOpenClose ? false : true\r\n        },\r\n        showNetworkEndpointItem() {\r\n            this.clickOtherFields()\r\n            this.isNetworkEndpointOpenClose = this.isNetworkEndpointOpenClose ? false : true\r\n        },\r\n        showIP4Item() {\r\n            this.isIP4OpenClose = this.isIP4OpenClose ? false : true\r\n        },\r\n        showIP6Item() {\r\n            this.isIP6OpenClose = this.isIP6OpenClose ? false : true\r\n        },\r\n        setViewEdit() {\r\n            if (this.selectViewedit == true) {\r\n                this.selectViewedit = false\r\n                this.settingViewList()\r\n            } else {\r\n                this.selectViewedit = true\r\n                this.viewList = []\r\n                this.selectedViewId = -1\r\n            }\r\n        },\r\n        clickOtherFields() {\r\n            if (this.refCommuni != null) {\r\n                this.deleteOpenElement()\r\n                this.refCommuni = null\r\n            }\r\n        },\r\n        rowClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refCommuni != this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getMachineDesignPath(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector, 1)\r\n                }\r\n                if (endLine != null) {\r\n                    // 기존에 있던거 좌표 바꿔줘야함.\r\n                    var isExist = true\r\n                    if (this.$store.getters.getDeleteOpenElement(endLine) == -1) {\r\n                        this.$store.commit('editMachineDesign', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        isExist = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.MachineDesigne_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('new-line', this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, endLine, isExist)\r\n                        document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, \r\n                                        end:endLine, iscircle:false, refNum:1, \r\n                                        idxID: this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id, \r\n                                        tabID: this.conditionalTab,\r\n                                        twoTab: this.channelTab[this.conditionalTab]})\r\n                }\r\n                this.refCommuni = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id\r\n            }\r\n        },\r\n\r\n        clickEthernetClusterName() {\r\n            this.beforeName = this.element.name\r\n            this.conditionalTab = 1\r\n            this.channelTab[this.conditionalTab] = 1\r\n        },\r\n        inputEthernetClusterName () {\r\n            console.log('inputEthernetClusterName')\r\n            this.$store.commit('editEthernetCluster', {compo:\"Name\", uuid:this.element.uuid, name:this.element.name} )\r\n            if(this.element.conditional[this.conditionalTab].channel.length>0) {\r\n                if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length > 0) {\r\n                    //if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].name != '') {\r\n                        this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                    beforename: this.beforeName, changeName: 'name'} )\r\n                        this.beforeName = this.element.name\r\n                    //}\r\n                }\r\n            }\r\n            if (this.element.name != '') {\r\n                this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n            }\r\n        },\r\n        clickConditionalName(name) {\r\n            this.clickOtherFields()\r\n            this.beforeCondi = name\r\n        },\r\n        inputConditionalName(name) {\r\n            console.log(name +' / '+ this.beforeCondi)\r\n            if(this.element.conditional[this.conditionalTab].channel.length>0) {\r\n                if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length > 0) {\r\n                    //if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].name != '') {\r\n                        this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                    condi: name,\r\n                                                    beforename: this.beforeCondi, changeName: 'condi'} )\r\n                        this.beforeCondi = name\r\n                    //}\r\n                }\r\n            }\r\n        },\r\n        clickChannelName(name) {\r\n            this.clickOtherFields()\r\n            this.beforeChannel = name\r\n        },\r\n        inputChannelName(name) {\r\n            if(this.element.conditional[this.conditionalTab].channel.length>0) {\r\n                if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length > 0) {\r\n                    //if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].name != '') {\r\n                        this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                    condi: this.element.conditional[this.conditionalTab].name,\r\n                                                    channel: name,\r\n                                                    beforename: this.beforeChannel, changeName: 'channel'} )\r\n                        this.beforeChannel = name\r\n                    //}\r\n                }\r\n            }\r\n        },\r\n        clickEndPointName(name) {\r\n            this.clickOtherFields()\r\n            this.beforeEnd = name\r\n        },\r\n        inputEndPointName(name) {\r\n            if (this.element.conditional.length > 0) {\r\n                if(this.element.conditional[this.conditionalTab].channel.length>0) {\r\n                    if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length > 0) {\r\n                        //if(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].name != '') {\r\n                            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        condi: this.element.conditional[this.conditionalTab].name,\r\n                                                        channel: this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name,\r\n                                                        endpoint: name,\r\n                                                        beforename: this.beforeEnd, changeName: 'endpoint'} )\r\n                            this.beforeEnd = name\r\n                        //}\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEthernetCluster() {\r\n            this.clickOtherFields()\r\n            const editItem = {name: '', version:'', channel: [], baudrate: '', id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'Ethernet_' + n++;\r\n                res = this.element.conditional.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.conditional.push(addObj)\r\n            this.conditionalTab = this.element.conditional.length-1\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickConditionaltab(idx) {\r\n            this.conditionalTab = idx\r\n            this.clickChanneltab(0)\r\n        },\r\n        changeConditionalTab() {\r\n            console.log('changeConditionalTab    ' + this.conditionalTab)\r\n            if (this.refCommuni != null) {\r\n                this.deleteOpenElement()\r\n                this.refCommuni = null\r\n            }\r\n            /*if (this.location == 1) {\r\n                if(this.element.conditional.length > 0) {\r\n                    if(this.isPhysicalChannelOpenClose && this.element.conditional[this.conditionalTab].channel.length > 0) {\r\n                        setTimeout(() => {EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid, this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                    } else {\r\n                        setTimeout(() => {EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)}, 300);\r\n                    }\r\n                } else {\r\n                    setTimeout(() => {EventBus.$emit('changeLine-someipService', 'conditional', this.element.uuid, this.conditionalTab, this.conditionalTab)}, 300);\r\n                }\r\n            }*/\r\n        },\r\n        deleteConditional(idx) {\r\n            //console.log('deleteConditional')\r\n            this.clickOtherFields()\r\n            for(let i=0; i<this.element.conditional[idx].channel.length; i++){\r\n                if(this.element.conditional[idx].channel[i].comconnect != null) {\r\n                    for(let n=0; n<this.element.conditional[idx].channel[i].comconnect.length; n++){\r\n                        var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[idx].channel[i].comconnect[n].id+'-'+this.element.conditional[idx].channel[i].id+'-'+this.element.conditional[idx].id)\r\n                        if(endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/comconet-'+this.element.conditional[idx].channel[i].comconnect[n].id+'-'+this.element.conditional[idx].channel[i].id+'-'+this.element.conditional[idx].id)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var deleteName = this.element.conditional[this.conditionalTab].name\r\n            if(this.element.conditional[this.conditionalTab].name != '') {\r\n                deleteName += '/'\r\n            }\r\n            this.$store.commit('deleteRefTable', {deleteName:'machineD', deleteTab: true, tabPosition:'conditional', \r\n                                            tabName: deleteName, path: this.element.path, name: this.element.name})\r\n            this.element.conditional.splice(idx, 1)\r\n            this.conditionalTab = 0\r\n            this.channelTab[this.conditionalTab] = 0\r\n            this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]] = 0\r\n            //this.changeConditionalTab() /*delete하면 자동적으로 tab이 바뀌기 때문에 따로 안불러도 불려진다*/\r\n        },\r\n        addPhysicalChannel() {\r\n            this.clickOtherFields()\r\n            //this.endpointTab.push([this.conditionalTab,0]) //2차원 배열로 초기화 해줘야지 안그러면 tab이 안생김\r\n            const editItem = {name: '', comconnect:[], endpoint: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n\r\n            let res = true, n = 0\r\n            while (res) {\r\n                addObj.name = 'PhysicalChannel_' + n++;\r\n                res = this.element.conditional[this.conditionalTab].channel.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.conditional[this.conditionalTab].channel.push(addObj)\r\n            this.channelTab[this.conditionalTab] = this.element.conditional[this.conditionalTab].channel.length-1\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'channel', this.element.uuid, this.element.conditional[this.conditionalTab].id)\r\n            }\r\n        },\r\n        clickChanneltab(idx) {\r\n           // console.log('clickChanneltab ' + this.channelTab[this.conditionalTab]+ '  /  '+ idx +'   /  '+this.conditionalTab)\r\n            this.channelTab[this.conditionalTab] = idx\r\n            this.isdeleteCommConnect = false\r\n            this.selectDelectCommConnectItem = []\r\n            this.clickEndpointTab(0)\r\n        },\r\n        changeChannelTab() {\r\n            if (this.refCommuni != null) {\r\n                this.deleteOpenElement()\r\n                this.refCommuni = null\r\n            }\r\n            /*if (this.element.conditional[this.conditionalTab].channel.length > 0 && this.location == 1) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'connector', this.element.uuid,  this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id, this.element.conditional[this.conditionalTab].id)}, 300);\r\n            }*/\r\n        },\r\n        deleteChannel(idx) {\r\n            //console.log('deleteChannel')\r\n            this.clickOtherFields()\r\n            for(let i=0; i<this.element.conditional[this.conditionalTab].channel[idx].comconnect.length; i++){\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[idx].comconnect[i].id+'-'+this.element.conditional[this.conditionalTab].channel[idx].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                if(endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[idx].comconnect[i].id+'-'+this.element.conditional[this.conditionalTab].channel[idx].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                }\r\n            }\r\n\r\n            var deleteName = this.element.conditional[this.conditionalTab].name\r\n            if(this.element.conditional[this.conditionalTab].name != '') {\r\n                deleteName += '/'\r\n            }\r\n            deleteName += this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name\r\n            if (this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name != '') {\r\n                deleteName += '/'\r\n            }\r\n            this.$store.commit('deleteRefTable', {deleteName:'machineD', deleteTab: true, tabPosition:'channel', tabName: deleteName, path: this.element.path, name: this.element.name})\r\n            this.element.conditional[this.conditionalTab].channel.splice(idx, 1)\r\n            this.channelTab[this.conditionalTab] = 0\r\n            this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]] = 0\r\n            //this.changeChannelTab()\r\n            console.log('22222222222222222222')\r\n            console.log(this.element)\r\n        },\r\n\r\n        isCommConnect() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteCommConnect == true) {\r\n                this.isdeleteCommConnect = false\r\n                this.selectDelectCommConnectItem = []\r\n            } else {\r\n                this.isdeleteCommConnect = true\r\n            }\r\n        },\r\n        deleteCommConnect() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteCommConnect == true) {\r\n                this.selectDelectCommConnectItem.forEach(item => {\r\n                    for(let i=0; i<this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect.length; i++){\r\n                        if (item.id == this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[i].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[i].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect.filter(item => {\r\n                        return this.selectDelectCommConnectItem.indexOf(item) < 0 })\r\n\r\n                this.isdeleteCommConnect = false\r\n                this.selectDelectCommConnectItem = []\r\n            } \r\n        },\r\n        addCommConnect() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect.some(item => item.id === n)\r\n            }\r\n            this.editCCItem.id = n\r\n            var endLine = null\r\n            if( this.editCCItem.connector != null) {\r\n                var isExist = true\r\n                endLine = this.editCCItem.connector.uuid\r\n                if (this.$store.getters.getDeleteOpenElement(this.editCCItem.connector.uuid) == -1) {\r\n                    this.$store.commit('editMachineDesign', {compo:\"drag\", uuid: this.editCCItem.connector.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                    isExist = false\r\n                }\r\n                this.$store.commit('setzIndexVisible', {parent:constant.MachineDesigne_str, uuid: this.editCCItem.connector.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editCCItem.connector = this.editCCItem.connector.name\r\n                this.$nextTick(() => { \r\n                    this.newLine(this.element.uuid+'/comconet-'+n+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, \r\n                                this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, \r\n                                endLine, true, isExist)\r\n                    document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, \r\n                                    end:endLine, iscircle:false, refNum:1, idxID: this.editCCItem.id, tabID: this.conditionalTab, twoTab: this.channelTab[this.conditionalTab]})\r\n            }\r\n            //console.log(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name+'-'+this.element.conditional[this.conditionalTab].name)\r\n            const addObj = Object.assign({}, this.editCCItem)\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect.push(addObj);\r\n            this.refCommuni = n\r\n            this.cancelCommConnect()\r\n        },\r\n        cancelCommConnect() {\r\n            this.editCCItem.connector = null\r\n            this.setactiveUUID()\r\n        },\r\n        editCommConnect(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n            if (endLine != undefined && this.editCCItem.connector == null) {\r\n                this.deleteLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector = null\r\n            } else if (endLine != undefined && endLine != this.editCCItem.connector.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                this.newLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id,\r\n                                 this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, this.editCCItem.connector.uuid, false)\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector = this.editCCItem.connector.name\r\n            } else if (endLine == undefined && this.editCCItem.connector != null && this.editCCItem.connector.uuid != null) {\r\n                this.newLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id,\r\n                                 this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id, this.editCCItem.connector.uuid, false)\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector = this.editCCItem.connector.name\r\n            } else if (this.editCCItem.connector != null && endLine == this.editCCItem.connector.uuid && this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector != this.editCCItem.connector.name) {\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector = this.editCCItem.connector.name\r\n            }\r\n\r\n            if (this.refCommuni == this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editCCItem.connector != null && this.editCCItem.connector.uuid != null) {\r\n                    var isExist = true, endLineChange = this.editCCItem.connector.uuid\r\n                    if (this.$store.getters.getDeleteOpenElement(endLineChange) == -1) {\r\n                        this.$store.commit('editMachineDesign', {compo:\"drag\", uuid: endLineChange, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        isExist = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.MachineDesigne_str, uuid: endLineChange, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('new-line', this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id,\r\n                                         endLineChange, isExist)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id,\r\n                                     end:endLineChange, iscircle:false, refNum:1, idxID: this.refCommuni})\r\n                }\r\n            }\r\n            \r\n            this.cancelCommConnect()\r\n        },\r\n        openCommConnect(idx) {\r\n            this.selCommunicationConnect = this.$store.getters.getCommunicationConnect\r\n            if ( this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].id+'-'+this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].id+'-'+this.element.conditional[this.conditionalTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getMachineDesignPath(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector, 1)\r\n                }\r\n                this.editCCItem.connector = { name: this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].comconnect[idx].connector, uuid: endLine }\r\n            }\r\n        },\r\n        setCommuniCSelect() {\r\n            if (this.isEditingCC == true) {\r\n                if (this.editCCItem.connector != null && this.editCCItem.connector.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editCCItem.connector.uuid, element: constant.MachineDesigne_str} )\r\n                    /*document.getElementById(this.editCCItem.connector.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    EventBus.$emit('active-element', this.editCCItem.connector.uuid)*/\r\n                }\r\n                this.setComunicationConnetList()\r\n                this.isEditingCC = false\r\n            } else {\r\n                this.isEditingCC = true\r\n            }\r\n        },\r\n        setComunicationConnetList() {\r\n            this.selCommunicationConnect = this.$store.getters.getCommunicationConnect\r\n            this.setactiveUUID()\r\n        },\r\n        clearCommuniC() {\r\n            this.isEditingCC = true\r\n            this.editCCItem.connector = null\r\n        },\r\n\r\n        addNetworkEndpoint() {\r\n            this.clickOtherFields()\r\n            const editItem = {name: '', domainname:'', ip4address: [], ip6address: [], priority: '', id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.some(ele => ele.id === n)\r\n            }\r\n            addObj.id = n\r\n            addObj.name = 'Endpoint'+(this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length+1)\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.push(addObj)\r\n            this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]] = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.length-1\r\n        },\r\n        clickEndpointTab(idx) {\r\n            //console.log('clickEndpointTab '+ this.conditionalTab +'  /  ' + this.channelTab)\r\n            this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]] = idx\r\n            this.isdeleteIP4Item = false\r\n            this.isdeleteIP6Item = false\r\n            this.selectDelectIP4tem = []\r\n            this.selectDelectIP6tem = []\r\n        },\r\n        deleteEndpointTab(idx) {\r\n            this.clickOtherFields()\r\n            var deleteName = this.element.conditional[this.conditionalTab].name\r\n            if(this.element.conditional[this.conditionalTab].name != '') {\r\n                deleteName += '/'\r\n            } \r\n            deleteName += this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name\r\n            if (this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].name != '') {\r\n                deleteName += '/'\r\n            }\r\n            deleteName += this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[idx].name\r\n            this.$store.commit('deleteRefTable', {deleteName:'machineD', deleteTab: true, tabPosition:'endpoint', tabName: deleteName, path: this.element.path, name: this.element.name})\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint.splice(idx, 1)\r\n            this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]] = 0\r\n        },\r\n        isEndpointIP4() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteIP4Item == true) {\r\n                this.isdeleteIP4Item = false\r\n                this.selectDelectIP4tem = []\r\n            } else {\r\n                this.isdeleteIP4Item = true\r\n            }\r\n        },\r\n        deleteIP4() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteIP4Item == true) {\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address.filter(item => {\r\n                         return this.selectDelectIP4tem.indexOf(item) < 0 })\r\n                this.isdeleteIP4Item = false\r\n                this.selectDelectIP4tem = []\r\n            } \r\n        },\r\n        isEndpointIP6() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteIP6Item == true) {\r\n                this.isdeleteIP6Item = false\r\n                this.selectDelectIP6tem = []\r\n            } else {\r\n                this.isdeleteIP6Item = true\r\n            }\r\n        },\r\n        deleteIP6() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteIP6Item == true) {\r\n                this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address.filter(item => {\r\n                         return this.selectDelectIP6tem.indexOf(item) < 0 })\r\n                this.isdeleteIP6Item = false\r\n                this.selectDelectIP6tem = []\r\n            } \r\n        },\r\n        openIP4(idx) {\r\n            this.editIP4Item.gateway = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].gateway\r\n            this.editIP4Item.behavior = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].behavior\r\n            this.editIP4Item.address = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].address\r\n            this.editIP4Item.addresssorce = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].addresssorce\r\n            this.editIP4Item.mask = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].mask\r\n            this.editIP4Item.DNSAddr = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].DNSAddr\r\n            this.editIP4Item.ttl = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].ttl\r\n        },\r\n        editIP4(idx) {\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].gateway = this.editIP4Item.gateway\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].behavior = this.editIP4Item.behavior\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].address = this.editIP4Item.address\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].addresssorce = this.editIP4Item.addresssorce\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].mask = this.editIP4Item.mask\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].DNSAddr = this.editIP4Item.DNSAddr\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address[idx].ttl = this.editIP4Item.ttl\r\n            this.cancelIP4()\r\n        },\r\n        addIP4() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address.some(item => item.id === n)\r\n            }\r\n            this.editIP4Item.id = n\r\n\r\n            const addObj = Object.assign({}, this.editIP4Item)\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip4address.push(addObj)\r\n            this.cancelIP4()\r\n        },\r\n        cancelIP4() {\r\n            this.editIP4Item = Object.assign({}, this.defaultIP4Item)\r\n            this.setactiveUUID()\r\n        },\r\n        openIP6(idx) {\r\n            this.editIP6Item.priority = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].priority\r\n            this.editIP6Item.behavior = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].behavior\r\n            this.editIP6Item.prelength = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].prelength\r\n            this.editIP6Item.address = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].address\r\n            this.editIP6Item.addresssource = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].addresssource\r\n        },\r\n        editIP6(idx) {\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].gatpriorityway = this.editIP6Item.priority\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].behavior = this.editIP6Item.behavior\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].prelength = this.editIP6Item.prelength\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].address = this.editIP6Item.address\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address[idx].addresssource = this.editIP6Item.addresssource\r\n            this.cancelIP6()\r\n        },\r\n        addIP6() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address.some(item => item.id === n)\r\n            }\r\n            this.editIP6Item.id = n\r\n\r\n            const addObj = Object.assign({}, this.editIP6Item)\r\n            this.element.conditional[this.conditionalTab].channel[this.channelTab[this.conditionalTab]].endpoint[this.endpointTab[this.conditionalTab][this.channelTab[this.conditionalTab]]].ip6address.push(addObj)\r\n            this.cancelIP6()\r\n        },\r\n        cancelIP6() {\r\n            this.editIP6Item = Object.assign({}, this.defaultIP6Item)\r\n            this.setactiveUUID()\r\n        },\r\n\r\n        settingViewList() {\r\n            var connector = [], isendpoint = false, isChannel = false\r\n            var ipv4 = [], ipv6 =[], id = 0\r\n            for(const i in this.element.conditional) {\r\n                for(const v in this.element.conditional[i].channel ) {\r\n                    isChannel = true\r\n                    this.element.conditional[i].channel[v].comconnect.forEach(connectorItem => {\r\n                        connector.push(connectorItem.connector)\r\n                    })\r\n                    for(const n in this.element.conditional[i].channel[v].endpoint) {\r\n                        this.element.conditional[i].channel[v].endpoint[n].ip4address.forEach(ip4Item => {\r\n                            ipv4.push(ip4Item.address)\r\n                        })\r\n                        this.element.conditional[i].channel[v].endpoint[n].ip6address.forEach(ip6Item => {\r\n                            ipv6.push(ip6Item.address)\r\n                        })\r\n                        isendpoint= true\r\n                        this.viewList.push({\r\n                            condiname: this.element.conditional[i].name, \r\n                            channame:this.element.conditional[i].channel[v].name, \r\n                            connector:connector.join(), \r\n                            endname:this.element.conditional[i].channel[v].endpoint[n].name,\r\n                            ipv4:ipv4.join(), ipv6:ipv6.join(),\r\n                            condidx: i,\r\n                            channelidx: v,\r\n                            endpointidx: n,\r\n                            id: id++\r\n                        })\r\n                        ipv4 = []\r\n                        ipv6 =[]\r\n                    }\r\n                    if(isendpoint == false) {\r\n                        this.viewList.push({\r\n                            condiname: this.element.conditional[i].name, \r\n                            channame:this.element.conditional[i].channel[v].name, \r\n                            connector:connector.join(), \r\n                            endname:null, ipv4:null, ipv6:null,\r\n                            condidx: i, channelidx: v, endpointidx: null,\r\n                            id: id++\r\n                        })\r\n                    }\r\n                    isendpoint = false\r\n                    connector = []\r\n                }\r\n                if(isChannel == false) {\r\n                    this.viewList.push({\r\n                        condiname: this.element.conditional[i].name, \r\n                        channame:null, connector:null, endname:null, \r\n                        ipv4:null, ipv6:null,\r\n                        condidx: i, channelidx: null, endpointidx: null,\r\n                        id: id++\r\n                    })\r\n                }\r\n                isChannel = false\r\n            }\r\n        },\r\n        editDialogEthernetCluster(item, row) {\r\n            var info = {  isChannel: false, isEndpoint: false, idxConditional: 0, idxChannel: null,  idxEndpoint: null,}\r\n            if(this.element.conditional[item.condidx].channel.length > 0) {\r\n                info.isChannel = true\r\n                if(this.element.conditional[item.condidx].channel[item.channelidx].endpoint.length > 0) {\r\n                    info.isEndpoint = true\r\n                    info.idxEndpoint = item.endpointidx\r\n                }\r\n                info.idxChannel = item.channelidx\r\n            }\r\n            info.idxConditional = item.condidx\r\n            this.$store.commit('setDetailView', {uuid: this.element.uuid, element: constant.EthernetCluster_str} )\r\n            /*document.getElementById(this.element.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n            EventBus.$emit('active-element', this.element.uuid)*/\r\n\r\n            row.select(true)\r\n            this.selectedViewId = item.id\r\n            EventBus.$emit('detailViewInfo',info)\r\n        },\r\n        isdialogCC() {\r\n            if (this.isdeleteInfoCC == true) {\r\n                this.isdeleteInfoCC = false\r\n                this.selectDelectInfoCC = []\r\n            } else {\r\n                this.isdeleteInfoCC = true\r\n            }\r\n        },\r\n        deletedialogCC() {\r\n            if (this.isdeleteInfoCC == true) {\r\n                this.selectDelectInfoCC.forEach(item => {\r\n                    for(let i=0; i<this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect.length; i++){\r\n                        if (item.id == this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[i].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[i].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect.filter(item => {\r\n                        return this.selectDelectInfoCC.indexOf(item) < 0 })\r\n\r\n                this.isdeleteInfoCC = false\r\n                this.selectDelectInfoCC = []\r\n            } \r\n        },\r\n        opendialogCC(idx) {\r\n            this.selCommunicationConnect = this.$store.getters.getCommunicationConnect\r\n            if ( this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector != null) {\r\n                this.editCCItem.connector = { name: this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector, \r\n                                              uuid: this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id) }\r\n            }\r\n        },\r\n        editdialogCC(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id)\r\n            if (endLine != undefined && this.editCCItem.connector == null) {\r\n                this.deleteLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id)\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector = null\r\n            } else if (endLine != undefined && endLine != this.editCCItem.connector.uuid) {\r\n                //기존꺼 삭제해야한다 vuex에서도 삭제하고 mainview에서도 삭제하고 \r\n                this.deleteLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id)\r\n                this.newLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id,\r\n                                 this.element.uuid+'/comconet-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id, this.editCCItem.connector.uuid, false)\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector = this.editCCItem.connector.name\r\n            } else if (endLine == undefined && this.editCCItem.connector != null && this.editCCItem.connector.uuid != null) {\r\n                this.newLine(this.element.uuid+'/comconet-'+this.element.this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].id+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id, \r\n                                this.element.uuid+'/comconet-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id, this.editCCItem.connector.uuid, false)\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector = this.editCCItem.connector.name\r\n            } else if (this.editCCItem.connector != null && endLine == this.editCCItem.connector.uuid && this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector != this.editCCItem.connector.name) {\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect[idx].connector = this.editCCItem.connector.name\r\n            }\r\n            \r\n            this.canceldialogCC()\r\n        },\r\n        canceldialogCC() {\r\n            this.isEditingCC = true\r\n            this.editCCItem.connector = null\r\n        },\r\n        adddialogCC() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect.some(item => item.id === n)\r\n            }\r\n            this.editCCItem.id = n\r\n\r\n            if( this.editCCItem.connector != null) {\r\n                this.newLine(this.element.uuid+'/comconet-'+n+'-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id, \r\n                                this.element.uuid+'/comconet-'+this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].id+'-'+this.element.conditional[this.viewInfo.idxConditional].id, this.editCCItem.connector.uuid, false)\r\n                this.editCCItem.connector = this.editCCItem.connector.name\r\n            }\r\n            const addObj = Object.assign({}, this.editCCItem)\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].comconnect.push(addObj);\r\n\r\n            this.canceldialogCC()\r\n        },\r\n\r\n        isEndpointDialogIP4() {\r\n            if (this.isdeleteInfoIPV4 == true) {\r\n                this.isdeleteInfoIPV4 = false\r\n                this.selectDelectInfoIP4 = []\r\n            } else {\r\n                this.isdeleteInfoIPV4 = true\r\n            }\r\n        },\r\n        deletedialogIP4() {\r\n            if (this.isdeleteInfoIPV4 == true) {\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address.filter(item => {\r\n                         return this.selectDelectInfoIP4.indexOf(item) < 0 })\r\n                this.isdeleteInfoIPV4 = false\r\n                this.selectDelectInfoIP4 = []\r\n            } \r\n        },\r\n        opendialogIP4(idx) {\r\n            this.editIP4Item.gateway = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].gateway\r\n            this.editIP4Item.behavior = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].behavior\r\n            this.editIP4Item.address = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].address\r\n            this.editIP4Item.addresssorce = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].addresssorce\r\n            this.editIP4Item.mask = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].mask\r\n            this.editIP4Item.DNSAddr = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].DNSAddr\r\n            this.editIP4Item.ttl = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].ttl\r\n        },\r\n        editdialogIP4(idx) {\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].gateway = this.editIP4Item.gateway\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].behavior = this.editIP4Item.behavior\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].address = this.editIP4Item.address\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].addresssorce = this.editIP4Item.addresssorce\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].mask = this.editIP4Item.mask\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].DNSAddr = this.editIP4Item.DNSAddr\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address[idx].ttl = this.editIP4Item.ttl\r\n            this.canceldialogIP4()\r\n        },\r\n        canceldialogIP4() {\r\n            this.editIP4Item = Object.assign({}, this.defaultIP4Item)\r\n        },\r\n        adddialogIP4() {\r\n                        let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address.some(item => item.id === n)\r\n            }\r\n            this.editIP4Item.id = n\r\n\r\n            const addObj = Object.assign({}, this.editIP4Item)\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip4address.push(addObj)\r\n            this.canceldialogIP4()\r\n        },\r\n        isEndpointDialogIPV6() {\r\n            if (this.isdeleteInfoIPV6 == true) {\r\n                this.isdeleteInfoIPV6 = false\r\n                this.selectDelectInfoIP6 = []\r\n            } else {\r\n                this.isdeleteInfoIPV6 = true\r\n            }\r\n        },\r\n        deletedialogIP6() {\r\n            if (this.isdeleteInfoIPV6 == true) {\r\n                this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address.filter(item => {\r\n                         return this.selectDelectInfoIP6.indexOf(item) < 0 })\r\n                this.isdeleteInfoIPV6 = false\r\n                this.selectDelectInfoIP6 = []\r\n            } \r\n        },\r\n        opendialogIP6(idx) {\r\n            this.editIP6Item.priority = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].priority\r\n            this.editIP6Item.behavior = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].behavior\r\n            this.editIP6Item.prelength = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].prelength\r\n            this.editIP6Item.address = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].address\r\n            this.editIP6Item.addresssource = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].addresssource\r\n        },\r\n        editdialogIP6(idx) {\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].gatpriorityway = this.editIP6Item.priority\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].behavior = this.editIP6Item.behavior\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].prelength = this.editIP6Item.prelength\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].address = this.editIP6Item.address\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address[idx].addresssource = this.editIP6Item.addresssource\r\n            this.canceldialogIP6()\r\n        },\r\n        canceldialogIP6() {\r\n            this.editIP6Item = Object.assign({}, this.defaultIP6Item)\r\n        },\r\n        adddialogIP6() {\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address.some(item => item.id === n)\r\n            }\r\n            this.editIP6Item.id = n\r\n\r\n            const addObj = Object.assign({}, this.editIP6Item)\r\n            this.element.conditional[this.viewInfo.idxConditional].channel[this.viewInfo.idxChannel].endpoint[this.viewInfo.idxEndpoint].ip6address.push(addObj)\r\n            this.canceldialogIP6()\r\n        },\r\n\r\n\r\n        setactiveUUID() {\r\n            this.$store.commit('setuuid', {uuid: this.element.uuid} )\r\n            this.$store.commit('editEthernetCluster', {compo:\"z\", uuid:this.element.uuid, zindex:10} )\r\n        },\r\n        deleteLine(fineLine) {\r\n            var linenum = this.$store.getters.getconnectLineNum(fineLine)\r\n            if (linenum != -1) {\r\n                this.$store.commit('deletConnectionline', {startnum: linenum} )\r\n                this.deleteOpenElement()\r\n            }\r\n        },\r\n        deleteOpenElement() {\r\n            console.log('ethernetC deleteOpenElement')\r\n            //EventBus.$emit('delete-line', this.$store.getters.getDeleteOpenElement(this.element.uuid))\r\n            this.$store.commit('deleteOpenElemnt', {uuid: this.element.uuid, isDeleteAll: false, startUUID: this.element.uuid} )\r\n        },\r\n        newLine(startLine, drawLine, endLine, isView, isExist) {\r\n            this.$store.commit('setConnectionline', {start: startLine, end: endLine} )\r\n            if (isView) {\r\n                EventBus.$emit('new-line', drawLine, endLine, isExist)\r\n            }\r\n        },\r\n\r\n        viewARXML() {\r\n            this.editARXML.name = this.element.name\r\n            this.editARXML.conditional = JSON.parse(JSON.stringify(this.element.conditional))\r\n            this.dialogText= true\r\n        },\r\n        saveARXML() {\r\n            this.editTableList()\r\n            if (this.element.name != this.editARXML.name) {\r\n                this.$store.commit('editEthernetCluster', {compo:\"Name\", uuid:this.element.uuid, name:this.editARXML.name} )\r\n                if (this.editARXML.name != '') {\r\n                    this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.editARXML.name, path:this.element.path})\r\n                }\r\n            }\r\n            this.element.name = this.editARXML.name\r\n            \r\n            this.element.conditional.forEach(item => {\r\n                item.channel.forEach(cha => {\r\n                    cha.comconnect.forEach(data => {\r\n                        if (data.connector != null) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/comconet-'+data.id+'-'+cha.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/comconet-'+data.id+'-'+cha.id+'-'+item.id)\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n            this.editARXML.conditional.forEach(item => {\r\n                item.channel.forEach(cha => {\r\n                    cha.comconnect.forEach(data => {\r\n                        if (data.connector != null) {\r\n                            var changEndLine = this.$store.getters.getMachineDesignPath(data.connector, 1)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/comconet-'+data.id+'-'+cha.id+'-'+item.id, this.element.uuid+'/conditional', changEndLine, false)\r\n                            }\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n\r\n            this.editARXML.conditional.forEach(condi => {\r\n                condi.channel.forEach(chan => {\r\n                    chan.endpoint.forEach(end => {\r\n                        end.ip4address.forEach(ip => {\r\n                            if (ip.behavior != null) {\r\n                                ip.behavior = ip.behavior.toUpperCase()\r\n                                if(!(ip.behavior == 'FORGET' || ip.behavior == 'STORE-PERSISTENTLY')) {\r\n                                    ip.behavior = null\r\n                                }\r\n                            }\r\n                            if (ip.addresssorce != null) {\r\n                                ip.addresssorce = ip.addresssorce.toUpperCase()\r\n                                if(!(ip.addresssorce == 'FIXED' || ip.addresssorce == 'DHCPV-4' ||\r\n                                    ip.addresssorce == 'AUTO-IP' || ip.addresssorce == 'AUTO-IP-DOIP')) {\r\n                                    ip.addresssorce = null\r\n                                }\r\n                            }\r\n                        })\r\n                        end.ip6address.forEach(ip => {\r\n                            if (ip.behavior != null) {\r\n                                ip.behavior = ip.behavior.toUpperCase()\r\n                                if(!(ip.behavior == 'FORGET' || ip.behavior == 'STORE-PERSISTENTLY')) {\r\n                                    ip.behavior = null\r\n                                }\r\n                            }\r\n                            if (ip.addresssorce != null) {\r\n                                ip.addresssorce = ip.addresssorce.toUpperCase()\r\n                                if(!(ip.addresssorce == 'FIXED' || ip.addresssorce == 'DHCPV-6' ||\r\n                                    ip.addresssorce == 'LINK-LOCAL' || ip.addresssorce == 'ROUTER-ADVERTISEMENT' ||\r\n                                    ip.addresssorce == 'LINK-LOCAL-DOIP')) {\r\n                                    ip.addresssorce = null\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            })\r\n\r\n            this.element.conditional = JSON.parse(JSON.stringify(this.editARXML.conditional))\r\n            this.cancelARXML()\r\n        },\r\n        editTableList() {\r\n            if (this.editARXML.conditional > 0) {\r\n                this.element.conditional.forEach(condi => {\r\n                    var isHaveTable = false\r\n                    condi.channel.forEach(cha => {\r\n                        cha.endpoint.forEach(item => {\r\n                            isHaveTable = false\r\n                            this.editARXML.conditional.forEach(editcondi => {\r\n                                editcondi.channel.forEach(editcha => {\r\n                                    editcha.endpoint.forEach(data => {\r\n                                        if (data.id == item.id) {\r\n                                            isHaveTable = true\r\n                                            if (data.name != item.name) {\r\n                                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                        condi: editcondi.name,\r\n                                                        channel: editcha.name,\r\n                                                        endpoint: item.name,\r\n                                                        beforename: data.name, changeName: 'endpoint'} )\r\n                                            }\r\n                                        }\r\n                                    })\r\n                                    if (isHaveTable && (cha.name != editcha.name)) {\r\n                                        this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                    condi: editcondi.name,\r\n                                                    channel: cha.name,\r\n                                                    beforename: editcha.name, changeName: 'channel'} )\r\n                                    }\r\n                                })\r\n                                if (isHaveTable && (condi.name != editcondi.name)) {\r\n                                    this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                    condi: condi.name,\r\n                                                    beforename: editcondi.name, changeName: 'condi'} )\r\n                                }\r\n                            })\r\n                            if (!isHaveTable) {\r\n                                var deleteName = item.name\r\n                                if(item.name != '') {\r\n                                    deleteName += '/'\r\n                                } \r\n                                deleteName += cha.name\r\n                                if (cha.name != '') {\r\n                                    deleteName += '/'\r\n                                }\r\n                                deleteName += condi.name\r\n                                this.$store.commit('deleteRefTable', {deleteName:'machineD', deleteTab: true, tabPosition:'endpoint', tabName: deleteName, path: this.element.path, name: this.element.name})\r\n                            } else if (isHaveTable && this.editARXML.name != this.element.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.editARXML.name,\r\n                                                    beforename: this.element.name, changeName: 'name'} )\r\n\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            } else {\r\n                if (this.element.conditional.length > 0) {\r\n                    this.element.conditional.forEach(item => {\r\n                        var deleteName = item.name\r\n                        if(item.name != '') {\r\n                            deleteName += '/'\r\n                        }\r\n                        this.$store.commit('deleteRefTable', {deleteName:'machineD', deleteTab: true, tabPosition:'conditional', tabName: deleteName, path: this.element.path, name: this.element.name})\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        cancelARXML() {\r\n            this.editARXML = {name:'', conditional:[]}\r\n            this.editTextCondi = {name: '', version:'', channel: [], baudrate: '', id: ''}\r\n            this.editTextChannel = {name: '', comconnect:[], endpoint: [], id: ''}\r\n            this.editTextEndPoint = {name: '', domainname:'', ip4address: [], ip6address: [], priority: '', id: ''}\r\n            this.editTextCommuni = {connector : null, id: ''}\r\n            this.editTextIP4 = {gateway:'', DNSAddr:'', behavior: null, address:'', addresssorce:null, mask:'', id: '', ttl: ''}\r\n            this.editTextIP6 = {priority:'', behavior:null, prelength:'', address:'', addresssource:null, id: ''}\r\n            this.dialogText = false\r\n        },\r\n        newTextCondi() {\r\n            this.editTextCondi = {name: '', version:'', channel: [], baudrate: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextCondi.name = 'Ethernet_' + n++;\r\n                res = this.editARXML.conditional.some(item => item.id === n)\r\n            }\r\n            this.editTextCondi.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextCondi)\r\n            this.editARXML.conditional.push(addObj);\r\n        },\r\n        deletTextCondi(idx) {\r\n            this.editARXML.conditional.splice(idx,1)\r\n        },\r\n        newTextChannel(idxC) {\r\n            this.editTextChannel = {name: '', comconnect:[], endpoint: [], baudrate: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextChannel.name = 'PhysicalChannel_' + n++;\r\n                res = this.editARXML.conditional[idxC].channel.some(item => item.id === n)\r\n            }\r\n            this.editTextChannel.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextChannel)\r\n            this.editARXML.conditional[idxC].channel.push(addObj);\r\n        },\r\n        deletTextChannel(idx, idxC) {\r\n            this.editARXML.conditional[idxC].channel.splice(idx,1)\r\n        },\r\n        newTextCommuni(idxP, idxC) {\r\n            this.editTextCommuni = {connector : null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.conditional[idxC].channel[idxP].comconnect.some(item => item.id === n)\r\n            }\r\n            this.editTextCommuni.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextCommuni)\r\n            this.editARXML.conditional[idxC].channel[idxP].comconnect.push(addObj);\r\n        },\r\n        deletTextCommuni(idx, idxC, idxP) {\r\n            this.editARXML.conditional[idxC].channel[idxP].comconnect.splice(idx,1)\r\n        },\r\n        newTextEndPoint(idxC, idxP) {\r\n            this.editTextEndPoint = {name: '', domainname:'', ip4address: [], ip6address: [], priority: '', id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextEndPoint.name = 'Endpoint' + n++;\r\n                res = this.editARXML.conditional[idxC].channel[idxP].endpoint.some(item => item.id === n)\r\n            }\r\n            this.editTextEndPoint.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextEndPoint)\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint.push(addObj);\r\n        },\r\n        deletTextEndPoint(idx, idxC, idxP) {\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint.splice(idx,1)\r\n        },\r\n        newTextIP4(idxC, idxP, idxE) {\r\n            this.editTextIP4 = {gateway:'', DNSAddr:'', behavior: null, address:'', addresssorce:null, mask:'', id: '', ttl: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip4address.some(item => item.id === n)\r\n            }\r\n            this.editTextIP4.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextIP4)\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip4address.push(addObj);\r\n        },\r\n        deletTextIP4(idx, idxC, idxP, idxE) {\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip4address.splice(idx,1)\r\n        },\r\n        newTextIP6(idxC, idxP, idxE) {\r\n            this.editTextIP6 = {priority:'', behavior:null, prelength:'', address:'', addresssource:null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip6address.some(item => item.id === n)\r\n            }\r\n            this.editTextIP6.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextIP6)\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip6address.push(addObj);\r\n        },\r\n        deletTextIP6(idx, idxC, idxP, idxE) {\r\n            this.editARXML.conditional[idxC].channel[idxP].endpoint[idxE].ip6address.splice(idx,1)\r\n        },\r\n    },\r\n}\r\n</script>"]}]}