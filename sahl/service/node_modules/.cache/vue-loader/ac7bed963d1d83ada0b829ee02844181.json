{"remainingRequest":"D:\\source\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??vue-loader-options!D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\source\\service\\src\\components\\mainview.vue?vue&type=template&id=03c32e24&","dependencies":[{"path":"D:\\source\\service\\src\\components\\mainview.vue","mtime":1659674493674},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkgewogIHZhciBfdm0gPSB0aGlzCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50CiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oCiAgcmV0dXJuIF9jKAogICAgImRpdiIsCiAgICB7CiAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiZHJhZ3Njcm9sbCIsCiAgICAgICAgICByYXdOYW1lOiAidi1kcmFnc2Nyb2xsIiwKICAgICAgICAgIHZhbHVlOiBfdm0uZHJhZywKICAgICAgICAgIGV4cHJlc3Npb246ICJkcmFnIgogICAgICAgIH0KICAgICAgXSwKICAgICAgY2xhc3M6IFsKICAgICAgICB7ICJncmFiLWJpbmciOiAidHJ1ZSIgfSwKICAgICAgICB7ICJtYWluLXZpZXciOiBfdm0ubWluaW1hcHRvb2xiYXIgfSwKICAgICAgICB7ICJtaW5pbWFwLXZpZXciOiAhX3ZtLm1pbmltYXB0b29sYmFyIH0KICAgICAgXSwKICAgICAgYXR0cnM6IHsgaWQ6ICJtYWluLXZpZXciICsgX3ZtLmxvY2F0aW9uIH0sCiAgICAgIG9uOiB7CiAgICAgICAgZHJhZ3Njcm9sbG1vdmU6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF92bS5kcmFnQmFja2dyb3VuZCgpCiAgICAgICAgfSwKICAgICAgICBtb3VzZXdoZWVsOiBfdm0ub25tb3VzZVdoZWVsLAogICAgICAgIG1vdXNlZG93bjogX3ZtLm9ubW91c2VEb3duLAogICAgICAgIHNjcm9sbDogX3ZtLm9uU2Nyb2xsCiAgICAgIH0KICAgIH0sCiAgICBbCiAgICAgIF9jKCJkaXYiLCB7IGF0dHJzOiB7IGlkOiAid3JhcHBlciIgfSB9KSwKICAgICAgX2MoCiAgICAgICAgInYtbWFpbiIsCiAgICAgICAgewogICAgICAgICAgc3R5bGU6IHsgdHJhbnNmb3JtOiAic2NhbGUoIiArIF92bS56b29tLnZhbHVlICsgIikiIH0sCiAgICAgICAgICBhdHRyczogeyBpZDogInNlYSIgfQogICAgICAgIH0sCiAgICAgICAgWwogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcy5Db21wdU1ldGhvZCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbXB1IE1ldGhvZCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkNvbXB1TWV0aG9kIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fdigiICIpLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcy5EYXRhQ29uc3RyLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSBDb25zdHIiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJEYXRhQ29uc3RyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMuU1dCYXNlVHlwZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNXIEJhc2UgVHlwZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNXQmFzZVR5cGUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcwogICAgICAgICAgICAgIC5BcHBsaWNhdGlvbkFycmF5RGF0YVR5cGUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiBBcnJheSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkFwcGxpY2F0aW9uQXJyYXlEYXRlIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMKICAgICAgICAgICAgICAuSW1wbGVtZW50YXRpb25EYXRhVHlwZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkltcGxlbWVudGF0aW9uIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiSW1wbGVtZW50YXRpb25EYXRhVHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5NYWNoaW5lLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiTWFjaGluZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIk1hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5NYWNoaW5lLkhXRWxlbWVudCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkhXIEVsZW1lbnQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJIV0VsZW1lbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLk1hY2hpbmUuSFdDYXRlZ29yeSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkhXIENhdGVnb3J5IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiSFdDYXRlZ29yeSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5NYWNoaW5lRGVzaWduLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiTWFjaGluZSBEZXNpZ25zIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiTWFjaGluZURlc2lnbiIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5Nb2RlRGVjbGFyYXRpb25Hcm91cCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIk1vZGUgRGVjbGFyYXRpb24gR3JvdXAiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJNb2RlRGVjbGFyYXRpb25Hcm91cCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5FdGhlcm5ldENsdXN0ZXIsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJFdGhlcm5ldCBDbHVzdGVyIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiRXRoZXJuZXRDbHVzdGVyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHZpZXdJbmZvOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlByb3RvTWFjaGluZU1hcHBpbmcsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIHRvIE1hY2hpbmUgTWFwcGluZyBTZXQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQcm9jZXNzVG9NYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbgogICAgICAgICAgICAgIC5TV0NvbXBvbmVudHMsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTVyBDb21wb25lbnRzIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU1dDb21wb25lbnRzIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbi5Qcm9jZXNzLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJvY2VzcyIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlByb2Nlc3MiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlByb2Nlc3NEZXNpZ24sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlByb2Nlc3NEZXNpZ24iLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkFkYXB0aXZlQXBwbGljYXRpb24KICAgICAgICAgICAgICAuRXhlY3V0YWJsZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkV4ZWN1dGFibGUiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJFeGVjdXRhYmxlIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlN0YXJ0dXBDb25maWcsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTdGFydHVwIENvbmZpZyBTZXQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJTdGFydHVwQ29uZmlnIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLkRldGVybWluaXN0aWNDbGllbnQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJEZXRlcm1pbmlzdGljIENsaWVudCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkRldGVybWluaXN0aWNDbGllbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAuU29tZUlQU2VydmljZUludGVyZmFjZURlcGxveW1lbnQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgU2VydmljZSBJbnRlcmZhY2UgRGVwbG95bWVudCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvbWVJUFNlcnZpY2UiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNlcnZpY2VJbnRlcmZhY2UsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTZXJ2aWNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNlcnZpY2VJbnRlcmZhY2UiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNvbWVJUENsaWVudEV2ZW50LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiQ2xpZW50IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiQ2xpZW50IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNvbWVJUFNlcnZlckV2ZW50LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU2VydmVyIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU2VydmVyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlCiAgICAgICAgICAgICAgLlNvbWVJUENsaWVudFNlcnZpY2VJbnN0YW5jZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNvbWVJUCBDbGllbnQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVBDbGllbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAuU29tZUlQU2VydmVyU2VydmljZUluc3RhbmNlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU29tZUlQIFNlcnZlciIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvbWVJUFNlcnZlciIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZQogICAgICAgICAgICAgIC5Tb21lSVBTZXJ2aWNlSW5zdGFuY2VUb01hY2hpbmUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU29tZUlQdG9NYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlCiAgICAgICAgICAgICAgLlNlcnZpY2VJbnN0YW5jZVRvUG9ydFByb3RvdHlwZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlRvIFBvcnQgUHJvdG90eXBlIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJUb1BvcnRQcm90b3R5cGUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuUmVxdWlyZWRTb21lSVAsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJSZXF1aXJlZCBTb21lSVAiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJSZXF1aXJlZFNvbWVJUCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuUHJvdmlkZWRTb21lSVAsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBTb21lSVAiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQcm92aWRlZFNvbWVJUCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuRTJFUHJvZmlsZUNvbmZpZywKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkUyRSBQcm9maWxlIENvbmZpZ3VyYXRpb24gU2V0IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiRTJFUHJvZmlsZUNvbmZpZyIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZS5TZGdEZWYsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoZWxlbWVudC51dWlkLCBsZWZ0LCB0b3AsICJTREcgREVGIikKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiU2RnRGVmIiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZS5FcnJvckRvbWFpbiwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIERvbWFpbiIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkFQRXJyb3JEb21haW4iLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuRXJyb3JTZXQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBTZXQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJBUEVycm9yU2V0IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLkVycm9yLCBmdW5jdGlvbigKICAgICAgICAgICAgZWxlbWVudAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKGVsZW1lbnQudXVpZCwgbGVmdCwgdG9wLCAiRXJyb3IiKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKCJBUEVycm9yIiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGVyLlBFUkZpbGVBcnJheSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgQXJyYXkiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQZXJGaWxlQXJyYXkiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJGaWxlUHJveHksCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJGaWxlIFByb3h5IEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBlckZpbGVQcm94eSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGVyLlBFUktleVZhbHVlRCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIktleVYgRGF0YWJhc2UiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQZXJLZXlWYWx1ZURCIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGVyLlBFUktleVZhbHVlREksCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJLZXlWIERhdGFiYXNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBlcktleVZhbHVlREkiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJQUHRvRmlsZUFycmF5LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUFAgVG8gRmlsZSBBcnJheSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUFBQdG9GaWxlQXJyYXkiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJQUHRvS2V5VmFsdWUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQUCBUbyBLZXkgVmFsdWUgRGF0YWJhc2UgTWFwcGluZyIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBQUHRvS2V5VmFsdWUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE1Db250cmlidXRpb24sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQbGF0Zm9ybSBIZWFsdGggTWFuYWdlbWVudCBDb250cmlidXRpb24iCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQSE1Db250cmlidXRpb24iLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE10b01hY2hpbmUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250cmlidXRpb24gVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUEhNdG9NYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE1IZWFsdGgsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkhlYWx0aCBDaGFubmVsIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIlBITUhlYWx0aENoYW5uZWwiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlBITVJlY292ZXJ5LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUmVjb3ZlcnkgQWN0aW9uIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBITVJlY292ZXJ5IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QaG0uUEhNU3VwZXJ2aXNlZCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlN1cGVydmlzZWQgRW5pdHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUEhNU3VwZXJ2aXNlZCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlJlY292ZXJ5VmlhLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUmVjb3ZlcnkgVklBIEFwcGxpY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUEhNUmVjb3ZlcnlWaWEiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uSWFtRy5NZXRob2RHRCwgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKCJNZXRob2RHcmFudEQiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgMQogICAgICAgICAgICApCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuRXZlbnRHRCwgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAiQ29tIEV2ZW50IEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIkV2ZW50R3JhbnREIiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLkZpZWxkR0QsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkNvbSBGaWVsZCBHcmFudCBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKCJGaWVsZEdyYW50RCIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uSWFtRy5NZXRob2RHLCBmdW5jdGlvbigKICAgICAgICAgICAgZWxlbWVudAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICJDb20gTWV0aG9kIEdyYW50IgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiTWV0aG9kR3JhbnQiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgMQogICAgICAgICAgICApCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuRXZlbnRHLCBmdW5jdGlvbigKICAgICAgICAgICAgZWxlbWVudAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICJDb20gRXZlbnQgR3JhbnQiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKCJFdmVudEdyYW50IiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLkZpZWxkRywgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAiQ29tIEZpZWxkIEdyYW50IgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiRmllbGRHcmFudCIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlVDTS5Tb2Z0V2FyZUNsdXN0ZXIsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb2Z0V2FyZSBDbHVzdGVyIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU29mdHdhcmVDbHVzdGVyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5VQ00uU29mdFdhcmVQYWNrYWdlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgUGFja2FnZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvZnR3YXJlUGFja2FnZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uVUNNLlZlaGljbGVQYWNrYWdlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiVmVoaWNsZSBQYWNrYWdlIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiVmVoaWNsZVBhY2thZ2UiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgXSwKICAgICAgICAyCiAgICAgICkKICAgIF0sCiAgICAxCiAgKQp9CnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXQpyZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWUKCmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0="}]}