{"remainingRequest":"D:\\source\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??vue-loader-options!D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\source\\service\\src\\components\\mainview.vue?vue&type=template&id=03c32e24&","dependencies":[{"path":"D:\\source\\service\\src\\components\\mainview.vue","mtime":1661404252375},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\source\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkgewogIHZhciBfdm0gPSB0aGlzCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50CiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oCiAgcmV0dXJuIF9jKAogICAgImRpdiIsCiAgICB7CiAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiZHJhZ3Njcm9sbCIsCiAgICAgICAgICByYXdOYW1lOiAidi1kcmFnc2Nyb2xsIiwKICAgICAgICAgIHZhbHVlOiBfdm0uZHJhZywKICAgICAgICAgIGV4cHJlc3Npb246ICJkcmFnIgogICAgICAgIH0KICAgICAgXSwKICAgICAgY2xhc3M6IFsKICAgICAgICB7ICJncmFiLWJpbmciOiAidHJ1ZSIgfSwKICAgICAgICB7ICJtYWluLXZpZXciOiBfdm0ubWluaW1hcHRvb2xiYXIgfSwKICAgICAgICB7ICJtaW5pbWFwLXZpZXciOiAhX3ZtLm1pbmltYXB0b29sYmFyIH0KICAgICAgXSwKICAgICAgYXR0cnM6IHsgaWQ6ICJtYWluLXZpZXciICsgX3ZtLmxvY2F0aW9uIH0sCiAgICAgIG9uOiB7CiAgICAgICAgZHJhZ3Njcm9sbG1vdmU6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF92bS5kcmFnQmFja2dyb3VuZCgpCiAgICAgICAgfSwKICAgICAgICBtb3VzZXdoZWVsOiBfdm0ub25tb3VzZVdoZWVsLAogICAgICAgIG1vdXNlZG93bjogX3ZtLm9ubW91c2VEb3duLAogICAgICAgIHNjcm9sbDogX3ZtLm9uU2Nyb2xsCiAgICAgIH0KICAgIH0sCiAgICBbCiAgICAgIF9jKCJkaXYiLCB7IGF0dHJzOiB7IGlkOiAid3JhcHBlciIgfSB9KSwKICAgICAgX2MoCiAgICAgICAgInYtbWFpbiIsCiAgICAgICAgewogICAgICAgICAgc3R5bGU6IHsgdHJhbnNmb3JtOiAic2NhbGUoIiArIF92bS56b29tLnZhbHVlICsgIikiIH0sCiAgICAgICAgICBhdHRyczogeyBpZDogInNlYSIgfQogICAgICAgIH0sCiAgICAgICAgWwogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcy5Db21wdU1ldGhvZCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbXB1IE1ldGhvZCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkNvbXB1TWV0aG9kIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fdigiICIpLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcy5EYXRhQ29uc3RyLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSBDb25zdHIiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJEYXRhQ29uc3RyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMuU1dCYXNlVHlwZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNXIEJhc2UgVHlwZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNXQmFzZVR5cGUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkRhdGFUeXBlcwogICAgICAgICAgICAgIC5BcHBsaWNhdGlvbkFycmF5RGF0YVR5cGUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJBcHBsaWNhdGlvbiBBcnJheSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkFwcGxpY2F0aW9uQXJyYXlEYXRlIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMKICAgICAgICAgICAgICAuSW1wbGVtZW50YXRpb25EYXRhVHlwZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkltcGxlbWVudGF0aW9uIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiSW1wbGVtZW50YXRpb25EYXRhVHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLk1hY2hpbmUuTWFjaGluZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIk1hY2hpbmUiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJNYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5IV0VsZW1lbnQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJIVyBFbGVtZW50IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiSFdFbGVtZW50IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5IV0NhdGVnb3J5LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiSFcgQ2F0ZWdvcnkiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJIV0NhdGVnb3J5IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5NYWNoaW5lLk1hY2hpbmVEZXNpZ24sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJNYWNoaW5lIERlc2lnbnMiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJNYWNoaW5lRGVzaWduIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5Nb2RlRGVjbGFyYXRpb25Hcm91cCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIk1vZGUgRGVjbGFyYXRpb24gR3JvdXAiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJNb2RlRGVjbGFyYXRpb25Hcm91cCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uTWFjaGluZS5FdGhlcm5ldENsdXN0ZXIsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJFdGhlcm5ldCBDbHVzdGVyIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiRXRoZXJuZXRDbHVzdGVyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIHZpZXdJbmZvOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlByb3RvTWFjaGluZU1hcHBpbmcsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIHRvIE1hY2hpbmUgTWFwcGluZyBTZXQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQcm9jZXNzVG9NYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbgogICAgICAgICAgICAgIC5TV0NvbXBvbmVudHMsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTVyBDb21wb25lbnRzIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU1dDb21wb25lbnRzIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbi5Qcm9jZXNzLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJvY2VzcyIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlByb2Nlc3MiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlByb2Nlc3NEZXNpZ24sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlByb2Nlc3NEZXNpZ24iLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAibG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbgogICAgICAgICAgICAgIC5FeGVjdXRhYmxlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiRXhlY3V0YWJsZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkV4ZWN1dGFibGUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLlN0YXJ0dXBDb25maWcsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTdGFydHVwIENvbmZpZyBTZXQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJTdGFydHVwQ29uZmlnIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgLkRldGVybWluaXN0aWNDbGllbnQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJEZXRlcm1pbmlzdGljIENsaWVudCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkRldGVybWluaXN0aWNDbGllbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAuU29tZUlQU2VydmljZUludGVyZmFjZURlcGxveW1lbnQsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgU2VydmljZSBJbnRlcmZhY2UgRGVwbG95bWVudCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvbWVJUFNlcnZpY2UiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNlcnZpY2VJbnRlcmZhY2UsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTZXJ2aWNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNlcnZpY2VJbnRlcmZhY2UiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNvbWVJUENsaWVudEV2ZW50LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiQ2xpZW50IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiQ2xpZW50IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNvbWVJUFNlcnZlckV2ZW50LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU2VydmVyIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU2VydmVyIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlCiAgICAgICAgICAgICAgLlNvbWVJUENsaWVudFNlcnZpY2VJbnN0YW5jZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNvbWVJUCBDbGllbnQiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVBDbGllbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAuU29tZUlQU2VydmVyU2VydmljZUluc3RhbmNlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU29tZUlQIFNlcnZlciIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvbWVJUFNlcnZlciIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZQogICAgICAgICAgICAgIC5Tb21lSVBTZXJ2aWNlSW5zdGFuY2VUb01hY2hpbmUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiU29tZUlQdG9NYWNoaW5lIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogImxvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAuU2VydmljZUluc3RhbmNlVG9Qb3J0UHJvdG90eXBlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiVG8gUG9ydCBQcm90b3R5cGUgTWFwcGluZyIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlRvUG9ydFByb3RvdHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlJlcXVpcmVkU29tZUlQLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUmVxdWlyZWQgU29tZUlQIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUmVxdWlyZWRTb21lSVAiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlByb3ZpZGVkU29tZUlQLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJvdmlkZWQgU29tZUlQIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUHJvdmlkZWRTb21lSVAiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLkUyRVByb2ZpbGVDb25maWcsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJFMkUgUHJvZmlsZSBDb25maWd1cmF0aW9uIFNldCIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIkUyRVByb2ZpbGVDb25maWciLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuU2RnRGVmLCBmdW5jdGlvbigKICAgICAgICAgICAgZWxlbWVudAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKGVsZW1lbnQudXVpZCwgbGVmdCwgdG9wLCAiU0RHIERFRiIpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIlNkZ0RlZiIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuRXJyb3JEb21haW4sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBEb21haW4iCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJBUEVycm9yRG9tYWluIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLkVycm9yU2V0LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3IgU2V0IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiQVBFcnJvclNldCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZS5FcnJvciwgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZyhlbGVtZW50LnV1aWQsIGxlZnQsIHRvcCwgIkVycm9yIikKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiQVBFcnJvciIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJGaWxlQXJyYXksCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJGaWxlIEFycmF5IgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUGVyRmlsZUFycmF5IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGVyLlBFUkZpbGVQcm94eSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgUHJveHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUGVyRmlsZVByb3h5IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QZXIuUEVSS2V5VmFsdWVELAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiS2V5ViBEYXRhYmFzZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBlcktleVZhbHVlREIiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QZXIuUEVSS2V5VmFsdWVESSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIktleVYgRGF0YWJhc2UgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUGVyS2V5VmFsdWVESSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICApLAogICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJQUHRvRmlsZUFycmF5LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUFAgVG8gRmlsZSBBcnJheSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUFBQdG9GaWxlQXJyYXkiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QZXIuUEVSUFB0b0tleVZhbHVlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUFAgVG8gS2V5IFZhbHVlIERhdGFiYXNlIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQUFB0b0tleVZhbHVlIiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlBITUNvbnRyaWJ1dGlvbiwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlBsYXRmb3JtIEhlYWx0aCBNYW5hZ2VtZW50IENvbnRyaWJ1dGlvbiIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBITUNvbnRyaWJ1dGlvbiIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlBITXRvTWFjaGluZSwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRyaWJ1dGlvbiBUbyBNYWNoaW5lIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJQSE10b01hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE1IZWFsdGgsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkhlYWx0aCBDaGFubmVsIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIlBITUhlYWx0aENoYW5uZWwiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlBITVJlY292ZXJ5LAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUmVjb3ZlcnkgQWN0aW9uIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlBITVJlY292ZXJ5IiwgewogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QaG0uUEhNU3VwZXJ2aXNlZCwKICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgIlN1cGVydmlzZWQgRW5pdHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUEhNU3VwZXJ2aXNlZCIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgICksCiAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlJlY292ZXJ5VmlhLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiUmVjb3ZlcnkgVklBIEFwcGxpY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBfYygiUEhNUmVjb3ZlcnlWaWEiLCB7CiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuTWV0aG9kR0QsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkNvbSBNZXRob2QgR3JhbnQgRGVzaWduIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiTWV0aG9kR3JhbnREIiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLkV2ZW50R0QsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkNvbSBFdmVudCBHcmFudCBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgIF9jKCJFdmVudEdyYW50RCIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uSWFtRy5GaWVsZEdELCBmdW5jdGlvbigKICAgICAgICAgICAgZWxlbWVudAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGtleTogZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICJDb20gRmllbGQgR3JhbnQgRGVzaWduIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiRmllbGRHcmFudEQiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgMQogICAgICAgICAgICApCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbChfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuTWV0aG9kRywgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIk1ldGhvZEdyYW50IiwgewogICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIDEKICAgICAgICAgICAgKQogICAgICAgICAgfSksCiAgICAgICAgICBfdm0uX2woX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLkV2ZW50RywgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnQKICAgICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAiQ29tIEV2ZW50IEdyYW50IgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYygiRXZlbnRHcmFudCIsIHsKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAxCiAgICAgICAgICAgICkKICAgICAgICAgIH0pLAogICAgICAgICAgX3ZtLl9sKF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uSWFtRy5GaWVsZEcsIGZ1bmN0aW9uKAogICAgICAgICAgICBlbGVtZW50CiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wW192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgIkNvbSBGaWVsZCBHcmFudCIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgX2MoIkZpZWxkR3JhbnQiLCB7CiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgMQogICAgICAgICAgICApCiAgICAgICAgICB9KSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5VQ00uU29mdFdhcmVDbHVzdGVyLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgQ2x1c3RlciIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvZnR3YXJlQ2x1c3RlciIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5VQ00uU29mdFdhcmVQYWNrYWdlLAogICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0W192bS5sb2NhdGlvbl0sCiAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3BbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZChlbGVtZW50LnV1aWQpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgUGFja2FnZSIKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgX2MoIlNvZnR3YXJlUGFja2FnZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5VQ00uVmVoaWNsZVBhY2thZ2UsCiAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBrZXk6IGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnRbX3ZtLmxvY2F0aW9uXSwKICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcFtfdm0ubG9jYXRpb25dLAogICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKGVsZW1lbnQudXVpZCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICJWZWhpY2xlIFBhY2thZ2UiCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJWZWhpY2xlUGFja2FnZSIsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgIF0sCiAgICAgICAgMgogICAgICApLAogICAgICBfYygKICAgICAgICAidi1kaWFsb2ciLAogICAgICAgIHsKICAgICAgICAgIGF0dHJzOiB7IHdpZHRoOiAiNjAwIiwgcGVyc2lzdGVudDogIiIsIHNjcm9sbGFibGU6ICIiIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogX3ZtLmRpYWxvZ1NlbGVjdEVsZW1lbnQsCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigkJHYpIHsKICAgICAgICAgICAgICBfdm0uZGlhbG9nU2VsZWN0RWxlbWVudCA9ICQkdgogICAgICAgICAgICB9LAogICAgICAgICAgICBleHByZXNzaW9uOiAiZGlhbG9nU2VsZWN0RWxlbWVudCIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFsKICAgICAgICAgIF9jKAogICAgICAgICAgICAidi1jYXJkIiwKICAgICAgICAgICAgWwogICAgICAgICAgICAgIF9jKCJ2LWNhcmQtdGl0bGUiLCB7IHN0YXRpY0NsYXNzOiAidGV4dC1oNiBncmVlbiBhY2NlbnQtMSIgfSwgWwogICAgICAgICAgICAgICAgX3ZtLl92KCIgU2VsZWN0IElucHV0IEVsZW1lbnQgIikKICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICJ2LWNhcmQtdGV4dCIsCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJiciIpLAogICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAidi1saXN0IiwKICAgICAgICAgICAgICAgICAgICB7IGF0dHJzOiB7IGZsYXQ6ICIiIH0gfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAgICAgInYtbGlzdC1pdGVtLWdyb3VwIiwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IG11bHRpcGxlOiAiIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLnNlbGVjdEVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RFbGVtZW50ID0gJCR2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogInNlbGVjdEVsZW1lbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBfdm0uX2woX3ZtLmVkaXRJbnB1dExpc3QsIGZ1bmN0aW9uKGl0ZW0sIGlkeCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYygidi1saXN0LWl0ZW0iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGlkeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IHZhbHVlOiBpdGVtIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZWRTbG90czogX3ZtLl91KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbjogZnVuY3Rpb24ocmVmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSByZWYuYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidi1saXN0LWl0ZW0tYWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoInYtY2hlY2tib3giLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgImlucHV0LXZhbHVlIjogYWN0aXZlIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2LWxpc3QtaXRlbS1jb250ZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoInYtbGlzdC1pdGVtLXRpdGxlIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogX3ZtLl9zKGl0ZW0ucGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICJ2LWNhcmQtYWN0aW9ucyIsCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF9jKCJ2LXNwYWNlciIpLAogICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAidi1idG4iLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbG9yOiAicHJpbWFyeSIsIHRleHQ6ICIiIH0sCiAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjbGljazogX3ZtLnNlbGVjdElucHV0RWxlbWVudCB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBbX3ZtLl92KCIgU2VsZWN0ICIpXQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICAgICAidi1idG4iLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGNvbG9yOiAicHJpbWFyeSIsIHRleHQ6ICIiIH0sCiAgICAgICAgICAgICAgICAgICAgICBvbjogeyBjbGljazogX3ZtLmNhbmNlbElucHV0RWxlbWVudCB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBbX3ZtLl92KCIgQ2FuY2VsICIpXQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSwKICAgICAgICAgICAgMQogICAgICAgICAgKQogICAgICAgIF0sCiAgICAgICAgMQogICAgICApCiAgICBdLAogICAgMQogICkKfQp2YXIgc3RhdGljUmVuZGVyRm5zID0gW10KcmVuZGVyLl93aXRoU3RyaXBwZWQgPSB0cnVlCgpleHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9"}]}