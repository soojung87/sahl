{"remainingRequest":"C:\\Users\\soojung\\source\\Vue\\mainedit\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\soojung\\source\\Vue\\mainedit\\src\\components\\mainview.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\soojung\\source\\Vue\\mainedit\\src\\components\\mainview.vue","mtime":1625118164793},{"path":"C:\\Users\\soojung\\source\\Vue\\mainedit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\soojung\\source\\Vue\\mainedit\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\soojung\\source\\Vue\\mainedit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\soojung\\source\\Vue\\mainedit\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSFdFbGVtZW50IGZyb20gJ0AvY29tcG9uZW50cy9IV0VsZW1lbnQudnVlJw0KaW1wb3J0IE1hY2hpbmUgZnJvbSAnQC9jb21wb25lbnRzL01hY2hpbmUudnVlJw0KaW1wb3J0IE1hY2hpbmVEZXNpZ24gZnJvbSAnQC9jb21wb25lbnRzL01hY2hpbmVEZXNpZ24udnVlJw0KaW1wb3J0IE1vZGVEZWNsYXJhdGlvbkdyb3VwIGZyb20gJ0AvY29tcG9uZW50cy9Nb2RlRGVjbGFyYXRpb25Hcm91cC52dWUnDQppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL21haW4nDQoNCmV4cG9ydCBkZWZhdWx0ew0KICAgIGNvbXBvbmVudHM6eyBIV0VsZW1lbnQsIE1hY2hpbmUsIE1hY2hpbmVEZXNpZ24sIE1vZGVEZWNsYXJhdGlvbkdyb3VwfSwNCiAgICBkYXRhICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRyYWdnaW5nSWQ6IG51bGwsDQogICAgICAgICAgICBwcmV2T2Zmc2V0WDogMCwNCiAgICAgICAgICAgIHByZXZPZmZzZXRZOiAwLA0KICAgICAgICAgICAgeFBvc2l0aW9uOiAwLA0KICAgICAgICAgICAgeVBvc2l0aW9uOiAwLA0KICAgICAgICAgICAgY2VudGVyWjogNTAsDQogICAgICAgICAgICBlbGVtZW50czogWw0KICAgICAgICAgICAgICAgIHtpZDogMSwgeDogNjAwLCAgeTogODAsICBoOiA3NTAsIHo6IDgsICBhY3RpdmU6IGZhbHNlLCBjb21wb25lbnQ6ICdNYWNoaW5lJ30sIC8vIG1hY2hpbmUNCiAgICAgICAgICAgICAgICB7aWQ6IDIsIHg6IDEwLCAgIHk6IDE1MCwgaDogNDUwLCB6OiAxLCAgYWN0aXZlOiBmYWxzZSwgY29tcG9uZW50OiAnTWFjaGluZURlc2lnbid9LCAvL21hY2hpbmUgZGVzaWduDQogICAgICAgICAgICAgICAge2lkOiAzLCB4OiAxMjAwLCB5OiAyNjAsIGg6IDI1MCwgejogMSwgIGFjdGl2ZTogZmFsc2UsIGNvbXBvbmVudDogJ0hXRWxlbWVudCd9LCAvL0hXZWxlbWVudA0KICAgICAgICAgICAgICAgIHtpZDogNCwgeDogMTEwMCwgeTogNTUwLCBoOiAzMDAsIHo6IDEsICBhY3RpdmU6IGZhbHNlLCBjb21wb25lbnQ6ICdNb2RlRGVjbGFyYXRpb25Hcm91cCd9LCAvL01vZGUgZGVjbGFyYXRpb24gR3JvdXANCiAgICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCAoKSB7DQogICAgICAgIEV2ZW50QnVzLiRvbigiY2FsbC1jb21wb25lbnQiLCAoZWxlbWVudCwgeCwgeSkgPT4gew0KICAgICAgICAgICAgaWYoeCA+IDcwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMueFBvc2l0aW9uID0gNjUwDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMueFBvc2l0aW9uID0geA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy55UG9zaXRpb24gPSB5DQogICAgICAgICAgICB0aGlzLnBvc2l0aW9uY2hhbmdlKGVsZW1lbnQpDQogICAgICAgIH0pDQogICAgICAgIEV2ZW50QnVzLiRvbigib3Blbi1tb2RlRGVjbGFyYXRpb24iLCAoaXRlbSwgaWQpID0+IHsgLy9tb2RlIGRlY2xhcmF0aW9uIOu2gOulvOuVjCDtmZzshLHtmZTssL3tlbTso7zroKTqs6Ag7J2067Kk7Yq4IOuwm+yVmOydjA0KICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpZF0uYWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50c1swXS5hY3RpdmUgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgICBFdmVudEJ1cy4kb24oInNlbGVjdC1mdW5jdGlvbkdyb3VwdHlwZSIsIChpdGVtLCBpZCkgPT4geyAvLyBtb2RlIGRlY2xhcmF0aW9uZeyXkOyEnCBzZWxlY2V07ZaI7J2EIOuVjCBtYWNoaW5lIO2ZnOyEse2ZlCDtlbTso7zroKTqs6Ag7ZWoDQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzWzBdLmFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbaWRdLmFjdGl2ZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLm9uRGVhY3RpdmF0ZWQoaWQpIC8vIHrqsJIg67OA6rK97ZWY66Ck6rOgIA0KICAgICAgICB9KQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBkcmFnZ2luZyhpZCwgbGVmdCwgdG9wKSB7DQogICAgICAgICAgICB0aGlzLmRyYWdnaW5nSWQgPSBpZDsNCg0KICAgICAgICAgICAgaWYgKCEgdGhpcy5zeW5jKSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IG9mZnNldFggPSBsZWZ0IC0gdGhpcy5kcmFnZ2luZ0VsZW1lbnQueDsNCiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSB0b3AgLSB0aGlzLmRyYWdnaW5nRWxlbWVudC55Ow0KDQogICAgICAgICAgICBjb25zdCBkZWx0YVggPSB0aGlzLmRlbHRhWChvZmZzZXRYKTsNCiAgICAgICAgICAgIGNvbnN0IGRlbHRhWSA9IHRoaXMuZGVsdGFZKG9mZnNldFkpOw0KDQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcChlbCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGVsLmlkICE9PSBpZCkgew0KICAgICAgICAgICAgICAgICAgICBlbC54ICs9IGRlbHRhWDsNCiAgICAgICAgICAgICAgICAgICAgZWwueSArPSBkZWx0YVk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBlbDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBkcmFnc3RvcChpZCwgbGVmdCwgdG9wKSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcChlbCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGVsLmlkID09PSBpZCkgew0KICAgICAgICAgICAgICAgICAgICBlbC54ID0gbGVmdDsNCiAgICAgICAgICAgICAgICAgICAgZWwueSA9IHRvcDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGVsOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdJZCA9IG51bGw7DQogICAgICAgICAgICB0aGlzLnByZXZPZmZzZXRYID0gMDsNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFkgPSAwOw0KICAgICAgICB9LA0KICAgICAgICBkZWx0YVgob2Zmc2V0WCkgew0KICAgICAgICAgICAgY29uc3QgcmV0ID0gb2Zmc2V0WCAtIHRoaXMucHJldk9mZnNldFg7DQoNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFggPSBvZmZzZXRYOw0KDQogICAgICAgICAgICByZXR1cm4gcmV0Ow0KICAgICAgICB9LA0KICAgICAgICBkZWx0YVkob2Zmc2V0WSkgew0KICAgICAgICAgICAgY29uc3QgcmV0ID0gb2Zmc2V0WSAtIHRoaXMucHJldk9mZnNldFk7DQoNCiAgICAgICAgICAgIHRoaXMucHJldk9mZnNldFkgPSBvZmZzZXRZOw0KDQogICAgICAgICAgICByZXR1cm4gcmV0Ow0KICAgICAgICB9LA0KICAgICAgICBvbkFjdGl2YXRlZCAoaWQpIHsNCiAgICAgICAgICAgIGlmIChpZCAhPSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpZC0xXS56ID0gMTANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgb25EZWFjdGl2YXRlZCAoaWQpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRzW2lkLTFdLnogIT0gMSAmJiAgaWQgIT0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbaWQtMV0ueiA9IDENCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcG9zaXRpb25jaGFuZ2UgKGl0ZW0pIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbaXRlbV0ueCA9IHRoaXMueFBvc2l0aW9uDQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2l0ZW1dLnkgPSB0aGlzLnlQb3NpdGlvbg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpdGVtXS56ID0gdGhpcy5jZW50ZXJaDQogICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2l0ZW1dLmFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbMF0uYWN0aXZlID0gZmFsc2UNCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNbMF0ueCAhPSAzMDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzWzBdLnggPSAzMDANCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzWzBdLnkgPSA0MA0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgZ2V0b3V0cG9pbnRYID0gdGhpcy5lbGVtZW50c1tpdGVtXS54ICsgNDIwIA0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmVsZW1lbnRzKSB7IC8vMOuyiOynuOyZgCBpdGVt7J2AIHBhc3Mg7ZW07JW87ZWoDQoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50c1tpXS54ID4gMjUwICYmIHRoaXMuZWxlbWVudHNbaV0ueCA8IGdldG91dHBvaW50WCAmJiBpICE9IGl0ZW0gJiYgaSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByYW5kb21YIA0KICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tudW0gPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMzAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYocmFuZG9tWCA8IDI1MCB8fCByYW5kb21YID4gMTAyMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrbnVtID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShjaGVja251bSkNCg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ldLnggPSByYW5kb21YDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbaV0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDY1MSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNbaV0ueiA9PSB0aGlzLmNlbnRlclopIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbaV0ueiA9IDENCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgZHJhZ2dpbmdFbGVtZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAoISB0aGlzLmRyYWdnaW5nSWQpIHJldHVybjsNCg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gdGhpcy5kcmFnZ2luZ0lkKTsNCiAgICAgICAgfQ0KICAgIH0sDQp9DQo="},{"version":3,"sources":["mainview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"mainview.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <vue-draggable-resizable\r\n            class-name-active=\"my-active-class\"\r\n            class-name=\"basic-form\"\r\n            v-for=\"element in elements\"\r\n            :key=\"element.id\"\r\n            :x=\"element.x\"\r\n            :y=\"element.y\"\r\n            :w=\"400\"\r\n            :h=\"element.h\"\r\n            :resizable=\"false\"\r\n            :z=\"element.z\"\r\n            :active.sync=\"element.active\" \r\n            @activated=\"onActivated(element.id)\" @deactivated=\"onDeactivated(element.id)\"\r\n            @dragging=\"(left, top) => dragging(element.id, left, top)\"\r\n            @dragstop=\"(left, top) => dragstop(element.id, left, top)\" >\r\n            <component  :is=\"element.component\" ></component>\r\n        </vue-draggable-resizable>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport HWElement from '@/components/HWElement.vue'\r\nimport Machine from '@/components/Machine.vue'\r\nimport MachineDesign from '@/components/MachineDesign.vue'\r\nimport ModeDeclarationGroup from '@/components/ModeDeclarationGroup.vue'\r\nimport { EventBus } from '../main'\r\n\r\nexport default{\r\n    components:{ HWElement, Machine, MachineDesign, ModeDeclarationGroup},\r\n    data () {\r\n        return {\r\n            draggingId: null,\r\n            prevOffsetX: 0,\r\n            prevOffsetY: 0,\r\n            xPosition: 0,\r\n            yPosition: 0,\r\n            centerZ: 50,\r\n            elements: [\r\n                {id: 1, x: 600,  y: 80,  h: 750, z: 8,  active: false, component: 'Machine'}, // machine\r\n                {id: 2, x: 10,   y: 150, h: 450, z: 1,  active: false, component: 'MachineDesign'}, //machine design\r\n                {id: 3, x: 1200, y: 260, h: 250, z: 1,  active: false, component: 'HWElement'}, //HWelement\r\n                {id: 4, x: 1100, y: 550, h: 300, z: 1,  active: false, component: 'ModeDeclarationGroup'}, //Mode declaration Group\r\n            ]\r\n        }\r\n    },\r\n    mounted () {\r\n        EventBus.$on(\"call-component\", (element, x, y) => {\r\n            if(x > 700) {\r\n                this.xPosition = 650\r\n            } else {\r\n                this.xPosition = x\r\n            }\r\n            this.yPosition = y\r\n            this.positionchange(element)\r\n        })\r\n        EventBus.$on(\"open-modeDeclaration\", (item, id) => { //mode declaration 부를때 활성화창해주려고 이벤트 받았음\r\n            this.elements[id].active = true\r\n            this.elements[0].active = false\r\n        })\r\n        EventBus.$on(\"select-functionGrouptype\", (item, id) => { // mode declaratione에서 selecet했을 때 machine 활성화 해주려고 함\r\n            this.elements[0].active = true\r\n            this.elements[id].active = false\r\n            this.onDeactivated(id) // z값 변경하려고 \r\n        })\r\n    },\r\n    methods: {\r\n        dragging(id, left, top) {\r\n            this.draggingId = id;\r\n\r\n            if (! this.sync) return;\r\n\r\n            const offsetX = left - this.draggingElement.x;\r\n            const offsetY = top - this.draggingElement.y;\r\n\r\n            const deltaX = this.deltaX(offsetX);\r\n            const deltaY = this.deltaY(offsetY);\r\n\r\n            this.elements.map(el => {\r\n                if (el.id !== id) {\r\n                    el.x += deltaX;\r\n                    el.y += deltaY;\r\n                }\r\n                return el;\r\n            });\r\n        },\r\n        dragstop(id, left, top) {\r\n            this.elements.map(el => {\r\n                if (el.id === id) {\r\n                    el.x = left;\r\n                    el.y = top;\r\n                }\r\n                return el;\r\n            });\r\n\r\n            this.draggingId = null;\r\n            this.prevOffsetX = 0;\r\n            this.prevOffsetY = 0;\r\n        },\r\n        deltaX(offsetX) {\r\n            const ret = offsetX - this.prevOffsetX;\r\n\r\n            this.prevOffsetX = offsetX;\r\n\r\n            return ret;\r\n        },\r\n        deltaY(offsetY) {\r\n            const ret = offsetY - this.prevOffsetY;\r\n\r\n            this.prevOffsetY = offsetY;\r\n\r\n            return ret;\r\n        },\r\n        onActivated (id) {\r\n            if (id != 1) {\r\n                this.elements[id-1].z = 10\r\n            }\r\n        },\r\n        onDeactivated (id) {\r\n            if (this.elements[id-1].z != 1 &&  id != 1) {\r\n                this.elements[id-1].z = 1\r\n            }\r\n        },\r\n        positionchange (item) {\r\n            this.elements[item].x = this.xPosition\r\n            this.elements[item].y = this.yPosition\r\n            this.elements[item].z = this.centerZ\r\n            this.elements[item].active = true\r\n            this.elements[0].active = false\r\n\r\n            if (this.elements[0].x != 300) {\r\n                this.elements[0].x = 300\r\n                this.elements[0].y = 40\r\n            }\r\n\r\n            var getoutpointX = this.elements[item].x + 420 \r\n            for (var i in this.elements) { //0번째와 item은 pass 해야함\r\n\r\n                if (this.elements[i].x > 250 && this.elements[i].x < getoutpointX && i != item && i != 0) {\r\n                    var randomX \r\n                    var checknum = true\r\n                    do {\r\n                        randomX = Math.floor(Math.random() * 1301)\r\n                        if(randomX < 250 || randomX > 1020) {\r\n                            checknum = false\r\n                        }\r\n                    } while(checknum)\r\n\r\n                    this.elements[i].x = randomX\r\n                    this.elements[i].y = Math.floor(Math.random() * 651)\r\n                    if (this.elements[i].z == this.centerZ) {\r\n                        this.elements[i].z = 1\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        draggingElement: function () {\r\n            if (! this.draggingId) return;\r\n\r\n            return this.elements.find(el => el.id === this.draggingId);\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n.my-active-class {\r\n    border: 1px solid red;\r\n}\r\n\r\n.basic-form {\r\n    position: absolute; /* 이게 없으면 component들이  x 좌표에 같이 있질 못함  h만큼 떨어져서 배치됨*/\r\n    background-color: white;\r\n}\r\n</style>"]}]}