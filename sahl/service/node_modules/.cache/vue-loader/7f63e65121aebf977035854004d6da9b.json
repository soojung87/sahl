{"remainingRequest":"D:\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\service\\src\\components\\SWComponents.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\service\\src\\components\\SWComponents.vue","mtime":1667798458576},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY29uc3RhbnQgZnJvbSAiLi4vc3RvcmUvY29uc3RhbnRzLmpzIg0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICIuLi9tYWluLmpzIg0KaW1wb3J0IGRpYWxvZ1BhdGhTZXR0aW5nIGZyb20gJy4uL2NvbXBvbmVudHMvZGlhbG9nUGF0aFNldHRpbmcudnVlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZWxlbWVudCcsICdpc0RhdGFpbFZpZXcnLCAnbWluaW1hcHRvb2xiYXInLCAnbG9jYXRpb24nXSwNCiAgICBjb21wb25lbnRzOntkaWFsb2dQYXRoU2V0dGluZ30sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgYWN0aXZlVVVJRCgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEDQogICAgICAgIH0sDQogICAgICAgIHNldHRpbmcoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZw0KICAgICAgICB9LA0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgYWN0aXZlVVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yKHZhbCkNCiAgICAgICAgfSwNCiAgICAgICAgLypkZXRhaWxWaWV3VVVJRCh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yRGV0YWlsVmlldyh2YWwpDQogICAgICAgIH0sKi8NCiAgICAgICAgc2V0dGluZyh2YWx1ZSkgew0KICAgICAgICAgICAgdGhpcy56b29tdmFsdWUgPSB2YWx1ZS56b29tTWFpbg0KICAgICAgICAgICAgaWYgKHRoaXMuem9vbXZhbHVlIDwgdGhpcy4kc2V0Wm9vbWluVG9vbHRpcCkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc1Rvb2x0aXAgPSB0aGlzLm1pbmltYXB0b29sYmFyDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuem9vbXZhbHVlICA+IHRoaXMuJHNldFpvb21pbkxpbmVUaXRsZSAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkxpbmVTZXR1cFN0YXJ0KSB7DQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZVRpdGxlQmFyJywgdGhpcy5lbGVtZW50LnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy56b29tdmFsdWUgPiB0aGlzLiRzZXRab29taW5MaW5lU2V0dXBTdGFydCAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkxpbmVTZXR1cEVuZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmVUaXRsZUJhcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnBwb3J0Lmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlBwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnBycG9ydC5sZW5ndGggPiAwICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzUFJQb3J0T3BlbkNsb3NlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3BycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlBScG9ydFRhYiwgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3BycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5ycG9ydC5sZW5ndGggPiAwICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzUlBvcnRPcGVuQ2xvc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5ScG9ydFRhYiwgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMuc2V0VG9vbGJhckNvbG9yKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVVVSUQpDQogICAgfSwNCg0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIG5hbWU6ICBbdmFsID0+ICh2YWwgfHwgJycpLmxlbmd0aCA+IDAgXSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBkaWFsb2dQYXRoIDogZmFsc2UsDQogICAgICAgICAgICBjb2xvclRvb2xiYXI6ICIjNkE1QUNEIiwNCiAgICAgICAgICAgIHpvb212YWx1ZTogdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZy56b29tTWFpbiwNCiAgICAgICAgICAgIGlzVG9vbHRpcDogdGhpcy5taW5pbWFwdG9vbGJhciwNCiAgICAgICAgICAgIGlzZWxlbWVudE9wZW5DbG9zZTogdHJ1ZSwvL3RoaXMubWluaW1hcHRvb2xiYXIsDQogICAgICAgICAgICBkaWFsb2dUZXh0OiBmYWxzZSwNCiAgICAgICAgICAgIGVkaXRBUlhNTDoge25hbWU6JycsIHBwb3J0OiBbXSwgcnBvcnQ6IFtdLCBwcnBvcnQ6IFtdfSwNCiAgICAgICAgICAgIGVkaXRUZXh0UHBvcnQ6IHtuYW1lOiAnJywgc2VsZWN0STogbnVsbCwgaW50ZXJmYWNlOiBudWxsLCBxdWV1ZWQ6IFtdLCBmaWVsZDogW10sIHNlcnZlcjogW10sIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFJwb3J0OiB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgY2xpZW50OiBbXSwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGVkaXRUZXh0UFJwb3J0OiB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcHJvdmlkZTogW10sIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFFTZW5kZXI6IHtkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgZWRpdFRleHRGaWVsZDoge2RhdGFFOiBudWxsLCBzZW5kZXJDYXBhOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFNlcnZlcjoge29wZXI6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFByb3ZpZGVkOiB7ZGF0YUU6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dFFSZWNlaXZlcjoge3NlbGVjdDogbnVsbCwgZGF0YUU6IG51bGwsIHJlY2VpdmVDYXBhOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBlZGl0VGV4dENsaWVudDoge29wZXJhdGlvbjogbnVsbCwgY2xpZW50Q2FwYTpudWxsLCBnZXR0ZXI6IG51bGwsIHNldHRlcjogbnVsbCwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGlzUFBvcnRPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc1BSUG9ydE9wZW5DbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIGlzUlBvcnRPcGVuQ2xvc2U6IHRydWUsDQoNCiAgICAgICAgICAgIHNlbFNJRXZlbnQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlLA0KICAgICAgICAgICAgc2VsU0lGaWVsZDogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRGaWVsZCwNCiAgICAgICAgICAgIHNlbGVjdFBJbnRlcmZhY2VMaXN0OiBbJ1NFUlZJQ0UtSU5URVJGQUNFJywnUEhNLVJFQ09WRVJZLUFDVElPTi1JTlRFUkZBQ0UnXSwNCiAgICAgICAgICAgIHNlbGVjdFNlbmRlckNhcGE6IFsnV0lMTC1TRU5EJywgJ1dPTlQtU0VORCddLA0KICAgICAgICAgICAgc2VsUEludGVyZmFjZTogbnVsbCwNCiAgICAgICAgICAgIFBwb3J0VGFiOiBudWxsLA0KICAgICAgICAgICAgaXNQUVNDT3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVQUVNDOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdFBRU0M6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUFFTQzogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJycsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdyZWZWaWV3Jywgd2lkdGg6ICc1cHgnIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnRGF0YSBFbGVtZW50IFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdkYXRhRScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdTZW5kZXIgQ2FwYWJpbGl0eScsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdzZW5kZXJDYXBhJyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRQUVNDOiB7IGRhdGFFOiBudWxsLCBzZW5kZXJDYXBhOm51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdQUVNDOiB0cnVlLA0KDQogICAgICAgICAgICBpc1BGU0NPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVBGU0M6IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0UEZTQzogW10sDQogICAgICAgICAgICBoZWFkZXJQRlNDOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3JlZlZpZXcnLCB3aWR0aDogJzVweCcgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdEYXRhIEVsZW1lbnQgUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2RhdGFFJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ1NlbmRlciBDYXBhYmlsaXR5Jywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3NlbmRlckNhcGEnIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZWRpdFBGU0M6IHsgZGF0YUU6IG51bGwsIHNlbmRlckNhcGE6bnVsbCwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGlzRWRpdGluZ1BGU0M6IHRydWUsDQoNCiAgICAgICAgICAgIGlzU0NPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVNDOiBmYWxzZSwNCiAgICAgICAgICAgIHNlbGVjdERlbGVjdFNDOiBbXSwNCiAgICAgICAgICAgIGhlYWRlclNDOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3JlZlZpZXcnLCB3aWR0aDogJzVweCcgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdPcGVyYXRpb24gUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ29wZXInIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgZWRpdFNDOiB7IG9wZXI6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdTQzogdHJ1ZSwNCg0KICAgICAgICAgICAgUFJwb3J0VGFiOiBudWxsLA0KICAgICAgICAgICAgaXNQUlByb3ZpZGVPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVBSUHJvdmlkZTogZmFsc2UsDQogICAgICAgICAgICBzZWxlY3REZWxlY3RQUlByb3ZpZGU6IFtdLA0KICAgICAgICAgICAgaGVhZGVyUFJQcm92aWRlOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3JlZlZpZXcnLCB3aWR0aDogJzVweCcgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdEYXRhIEVsZW1lbnQgUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2RhdGFFJyB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGVkaXRQUlByb3ZpZGU6IHsgZGF0YUU6IG51bGwsIGlkOiAnJ30sDQogICAgICAgICAgICBpc0VkaXRpbmdQUlByb3ZpZGU6IHRydWUsDQogICAgICAgICAgICBzZWxQZXJEYXRhOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElEYXRhLA0KICAgICAgICAgICAgc2VsZWN0UFJJbnRlcmZhY2VMaXN0OiBbJ1NFUlZJQ0UtSU5URVJGQUNFJywnUEVSU0lTVEVOQ1ktRklMRS1QUk9YWS1JTlRFUkZBQ0UnLCAnUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSddLA0KICAgICAgICAgICAgc2VsUFJJbnRlcmZhY2U6IG51bGwsDQoNCiAgICAgICAgICAgIFJwb3J0VGFiOiBudWxsLA0KICAgICAgICAgICAgc2VsZWN0UkludGVyZmFjZUxpc3Q6IFsnU0VSVklDRS1JTlRFUkZBQ0UnLCdQSE0tSEVBTFRILUNIQU5ORUwtSU5URVJGQUNFJywgJ1BITS1TVVBFUlZJU0VELUVOVElUWS1JTlRFUkZBQ0UnXSwNCiAgICAgICAgICAgIHNlbFJJbnRlcmZhY2U6IG51bGwsDQogICAgICAgICAgICBpc1JRUkNPcGVuQ2xvc2U6IHRydWUsDQogICAgICAgICAgICBpc2RlbGV0ZVJRUkM6IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0UlFSQzogW10sDQogICAgICAgICAgICBoZWFkZXJSUVJDOiBbDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3JlZlZpZXcnLCB3aWR0aDogJzVweCcgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdEYXRhIEVsZW1lbnQgUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2RhdGFFJyB9LA0KICAgICAgICAgICAgICAgIHsgdGV4dDogJ1JlY2VpdmVyIENhcGFiaWxpdHknLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAncmVjZWl2ZUNhcGEnIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgc2VsZWN0UlFSQzogWydWQVJJQUJMRS1EQVRBLVBST1RPVFlQRScsJ0ZJRUxEJ10sDQogICAgICAgICAgICBzZWxlY3RSZWNlaXZlckNhcGE6IFsnV0lMTC1SRUNFSVZFJywgJ1dPTlQtUkVDRUlWRSddLA0KICAgICAgICAgICAgc2VsZWN0Q2xpZW50Q2FwYTogWydXSUxMLUNBTEwnLCAnV09OVC1DQUxMJ10sDQogICAgICAgICAgICBlZGl0UlFSQzogeyBzZWxlY3Q6IG51bGwsIGRhdGFFOiBudWxsLCByZWNlaXZlQ2FwYTpudWxsLCBpZDogJyd9LA0KICAgICAgICAgICAgaXNFZGl0aW5nUlFSQzogdHJ1ZSwNCiAgICAgICAgICAgIGlzUkNDT3BlbkNsb3NlOiB0cnVlLA0KICAgICAgICAgICAgaXNkZWxldGVSQ0M6IGZhbHNlLA0KICAgICAgICAgICAgc2VsZWN0RGVsZWN0UkNDOiBbXSwNCiAgICAgICAgICAgIGhlYWRlclJDQzogWw0KICAgICAgICAgICAgICAgIHsgdGV4dDogJycsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdyZWZWaWV3Jywgd2lkdGg6ICc1cHgnIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnT3BlcmF0aW9uIFJlZicsIHNvcnRhYmxlOiBmYWxzZSwgdmFsdWU6ICdvcGVyYXRpb24nIH0sDQogICAgICAgICAgICAgICAgeyB0ZXh0OiAnQ2xpZW50IENhcGFiaWxpdHknLCBzb3J0YWJsZTogZmFsc2UsIHZhbHVlOiAnY2xpZW50Q2FwYScgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdHZXR0ZXIgUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ2dldHRlcicgfSwNCiAgICAgICAgICAgICAgICB7IHRleHQ6ICdTZXR0ZXIgUmVmJywgc29ydGFibGU6IGZhbHNlLCB2YWx1ZTogJ3NldHRlcicgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICBlZGl0UkNDOiB7IG9wZXJhdGlvbjogbnVsbCwgY2xpZW50Q2FwYTpudWxsLCBnZXR0ZXI6IG51bGwsIHNldHRlcjogbnVsbCwgaWQ6ICcnfSwNCiAgICAgICAgICAgIGlzRWRpdGluZ1JDQzogdHJ1ZSwNCiAgICAgICAgICAgIGlzRWRpdGluZ0dldHRlcjogdHJ1ZSwNCiAgICAgICAgICAgIGlzRWRpdGluZ1NldHRlcjogdHJ1ZSwNCiAgICAgICAgICAgIHNlbFNJUVJDOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFZhcmlhYmxlRGF0YVByb3RvdHlwZSwNCiAgICAgICAgICAgIHNlbFNJTWV0aG9kOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENsaWVudFNlcnZlciwNCg0KICAgICAgICAgICAgYmVmb3JlUHBvcnQ6ICcnLA0KICAgICAgICAgICAgYmVmb3JlUFJwb3J0OiAnJywNCiAgICAgICAgICAgIGJlZm9yZVJwb3J0OiAnJywNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVmUEludGVyZmFzZTogZmFsc2UsDQogICAgICAgICAgICByZWZQUXVldWVkOiBudWxsLA0KICAgICAgICAgICAgcmVmUEZpZWxkUzogbnVsbCwNCiAgICAgICAgICAgIHJlZlBTZXJ2ZXJDOiBudWxsLA0KICAgICAgICAgICAgcmVmUFJJbnRlcmZhc2U6IGZhbHNlLA0KICAgICAgICAgICAgcmVmUFJQcm92aWRlZDogbnVsbCwNCiAgICAgICAgICAgIHJlZlJJbnRlcmZhc2U6IGZhbHNlLA0KICAgICAgICAgICAgcmVmUlF1ZXVlZDogbnVsbCwNCiAgICAgICAgICAgIHJlZlJDbGllbnQ6IG51bGwsDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQgKCkgew0KICAgICAgICBpZiAodGhpcy5taW5pbWFwdG9vbGJhciAmJiB0aGlzLnpvb212YWx1ZSA8IHRoaXMuJHNldFpvb21pbkVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICBFdmVudEJ1cy4kb24odGhpcy5lbGVtZW50LnV1aWQsIChyZWZOdW0sIGlkeElELCB0YWJJRCwgaWQsIGlzRGVsZXRlSXRlbSwgaXRlbSwgaWR4Um93KSA9PiB7DQogICAgICAgICAgICB0aGlzLnJlZlBJbnRlcmZhc2UgPSBmYWxzZQ0KICAgICAgICAgICAgaWYgKGlzRGVsZXRlSXRlbSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZlBRdWV1ZWQgPT0gaWQgJiYgaXRlbSA9PSAnUFF1ZXVlZCcgJiYgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkID09IHRhYklEKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFF1ZXVlZCA9IGlkICsgMQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1BRdWV1ZWRDbGljayhpZHhSb3cpDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZlBGaWVsZFMgPT0gaWQgJiYgaXRlbSA9PSAnUEZpZWxkJyAmJiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQgPT0gdGFiSUQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQRmllbGRTID0gaWQgKyAxDQogICAgICAgICAgICAgICAgICAgIHRoaXMucm93UEZpZWxkU0NsaWNrKGlkeFJvdykNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVmUFNlcnZlckMgPT0gaWQgJiYgaXRlbSA9PSAnUFNlcnZlcicgJiYgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkID09IHRhYklEKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFNlcnZlckMgPSBpZCArIDENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dQU2VydmVyQ0NsaWNrKGlkeFJvdykNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVmUFJQcm92aWRlZCA9PSBpZCAmJiBpdGVtID09ICdQUlByb3ZpZGUnICYmIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkID09IHRhYklEKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFJQcm92aWRlZCA9IGlkICsgMQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1BSUHJvdmlkZWRDbGljayhpZHhSb3cpDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZlJRdWV1ZWQgPT0gaWQgJiYgaXRlbSA9PSAnUlF1ZXVlZCcgJiYgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkID09IHRhYklEKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUlF1ZXVlZCA9IGlkICsgMQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1JRdWV1ZWRDbGljayhpZHhSb3cpDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZlJDbGllbnQgPT0gaWQgJiYgaXRlbSA9PSAnUkNsaWVudCcgJiYgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkID09IHRhYklEKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUkNsaWVudCA9IGlkICsgMQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd1JDbGllbnRDbGljayhpZHhSb3cpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBJbnRlcmZhc2UgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUFJJbnRlcmZhc2UgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUkludGVyZmFzZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5yZWZQUXVldWVkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUEZpZWxkUyA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBTZXJ2ZXJDID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUFJQcm92aWRlZCA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlJRdWV1ZWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5yZWZSQ2xpZW50ID0gbnVsbA0KDQogICAgICAgICAgICAgICAgaWYgKHJlZk51bSA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUHBvcnRUYWIgPSB0YWJJRA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZOdW0gPT0gMikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlBwb3J0VGFiID0gdGFiSUQNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQUXVldWVkID0gaWR4SUQNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlZk51bSA9PSAzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUHBvcnRUYWIgPSB0YWJJRA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBGaWVsZFMgPSBpZHhJRA0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmTnVtID09IDQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QcG9ydFRhYiA9IHRhYklEDQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFNlcnZlckMgPSBpZHhJRA0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmTnVtID09IDUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QUnBvcnRUYWIgPSB0YWJJRA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBSSW50ZXJmYXNlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmTnVtID09IDYpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QUnBvcnRUYWIgPSB0YWJJRA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBSUHJvdmlkZWQgPSBpZHhJRA0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmTnVtID09IDcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ScG9ydFRhYiA9IHRhYklEDQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUkludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlZk51bSA9PSA4KSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUnBvcnRUYWIgPSB0YWJJRA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlJRdWV1ZWQgPSBpZHhJRA0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmTnVtID09IDkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ScG9ydFRhYiA9IHRhYklEDQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUkNsaWVudCA9IGlkeElEDQogICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgc3VibWl0RGlhbG9nKGVsZW1lbnQpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXRoID0gZWxlbWVudA0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnaXNpbnRvRXJyb3JMaXN0Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lbGVtZW50Lm5hbWUsIHBhdGg6dGhpcy5lbGVtZW50LnBhdGh9KQ0KICAgICAgICB9LA0KICAgICAgICBzZXRUb29sYmFyQ29sb3IoYWN0aXZlaWQpIA0KICAgICAgICB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQudXVpZCA9PSBhY3RpdmVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiNGRjE0OTMiIA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yVG9vbGJhciA9ICIjNkE1QUNEIg0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRUb29sYmFyQ29sb3JEZXRhaWxWaWV3KGlzZGV0YWlsKSB7DQogICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQudXVpZCA9PSBpc2RldGFpbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiNCMEUwRTYiIA0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQudXVpZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVVVUlEKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb2xvclRvb2xiYXIgID0gIiNGRjE0OTMiDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUb29sYmFyID0gIiM2QTVBQ0QiDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNob3dTV0NvbXBvbmVudCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSA9IHRoaXMuaXNlbGVtZW50T3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAvKnRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmVUaXRsZUJhcicsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkNCiAgICAgICAgICAgICAgICBpZih0aGlzLmlzZWxlbWVudE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucHBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5QcG9ydFRhYiwgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LnBycG9ydC5sZW5ndGggPiAwICYmIHRoaXMubG9jYXRpb24gPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pc1BSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUFJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5ScG9ydFRhYiwgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KSovDQogICAgICAgIH0sDQogICAgICAgIHNob3dQUG9ydCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzUFBvcnRPcGVuQ2xvc2UgPSB0aGlzLmlzUFBvcnRPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIC8qaWYodGhpcy5lbGVtZW50LnBwb3J0Lmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzUFBvcnRPcGVuQ2xvc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5QcG9ydFRhYiwgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCBudWxsKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0qLw0KICAgICAgICB9LA0KICAgICAgICBzaG93UFFTQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzUFFTQ09wZW5DbG9zZSA9IHRoaXMuaXNQUVNDT3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICAvL0V2ZW50QnVzLiRlbWl0KCdkcmF3TGluZScpDQogICAgICAgIH0sDQogICAgICAgIHNob3dQRlNDKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNQRlNDT3BlbkNsb3NlID0gdGhpcy5pc1BGU0NPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1NDKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNTQ09wZW5DbG9zZSA9IHRoaXMuaXNTQ09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBzaG93UFJQb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNQUlBvcnRPcGVuQ2xvc2UgPSB0aGlzLmlzUFJQb3J0T3BlbkNsb3NlID8gZmFsc2UgOiB0cnVlDQogICAgICAgICAgICAvKmlmKHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQUlBvcnRPcGVuQ2xvc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUFJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdjaGFuZ2VMaW5lLXNvbWVpcFNlcnZpY2UnLCAncHJwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSovDQogICAgICAgIH0sDQogICAgICAgIHNob3dQUlByb3ZpZGUoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgdGhpcy5pc1BSUHJvdmlkZU9wZW5DbG9zZSA9IHRoaXMuaXNQUlByb3ZpZGVPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1JQb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNSUG9ydE9wZW5DbG9zZSA9IHRoaXMuaXNSUG9ydE9wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgLyppZih0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNSUG9ydE9wZW5DbG9zZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSovDQogICAgICAgIH0sDQogICAgICAgIHNob3dSUVJDKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuaXNSUVJDT3BlbkNsb3NlID0gdGhpcy5pc1JRUkNPcGVuQ2xvc2UgPyBmYWxzZSA6IHRydWUNCiAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2RyYXdMaW5lJykNCiAgICAgICAgfSwNCiAgICAgICAgc2hvd1JDQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmlzUkNDT3BlbkNsb3NlID0gdGhpcy5pc1JDQ09wZW5DbG9zZSA/IGZhbHNlIDogdHJ1ZQ0KICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnZHJhd0xpbmUnKQ0KICAgICAgICB9LA0KICAgICAgICBpbnB1dFNXQ29tcG9uZW50TmFtZSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoiTmFtZSIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIG5hbWU6dGhpcy5lbGVtZW50Lm5hbWV9ICkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSApDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2lzaW50b0Vycm9yTGlzdCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWxlbWVudC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tPdGhlckZpZWxkcygpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlBJbnRlcmZhc2UgfHwgdGhpcy5yZWZQUkludGVyZmFzZSB8fCB0aGlzLnJlZlJJbnRlcmZhc2UgfHwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBRdWV1ZWQgIT0gbnVsbCB8fCB0aGlzLnJlZlBGaWVsZFMgIT0gbnVsbCB8fCB0aGlzLnJlZlBTZXJ2ZXJDICE9IG51bGwgfHwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBSUHJvdmlkZWQgIT0gbnVsbCB8fCB0aGlzLnJlZlJRdWV1ZWQgIT0gbnVsbCB8fCB0aGlzLnJlZlJDbGllbnQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlT3BlbkVsZW1lbnQoKQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUEludGVyZmFzZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5yZWZQUkludGVyZmFzZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5yZWZSSW50ZXJmYXNlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBRdWV1ZWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5yZWZQRmllbGRTID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUFNlcnZlckMgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5yZWZQUlByb3ZpZGVkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUlF1ZXVlZCA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlJDbGllbnQgPSBudWxsDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHJvd1BRdWV1ZWRDbGljayhpZHgpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb3dDbGljayAnICsgaWR4KQ0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUFF1ZXVlZCAhPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQpIHsgLy8g6rCZ7J2A6rGwIOqzhOyGjSDriITrpbTrqbQg7JWI65CoDQogICAgICAgICAgICAgICAgLy/quLDsobTqsoMgZGVsZXRl7ZWY6rOgIA0KICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICAgICAgLy8g7IOI66Gc65Ok7Ja07JioIGlkeCBsaW5lIGRyYXcNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSwgMSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDquLDsobTsl5Ag7J6I642Y6rGwIOyijO2RnCDrsJTqv5TspJjslbztlaguDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogZW5kTGluZSwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZExpbmUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZSsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZSwgaXNjaXJjbGU6ZmFsc2UsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZOdW06MiwgaWR4SUQ6IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCwgdGFiSUQ6IHRoaXMuUHBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUFF1ZXVlZCA9IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICByb3dQRmllbGRTQ2xpY2soaWR4KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncm93Q2xpY2sgJyArIGlkeCkNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlBGaWVsZFMgIT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQpIHsgLy8g6rCZ7J2A6rGwIOqzhOyGjSDriITrpbTrqbQg7JWI65CoDQogICAgICAgICAgICAgICAgLy/quLDsobTqsoMgZGVsZXRl7ZWY6rOgIA0KICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICAgICAgLy8g7IOI66Gc65Ok7Ja07JioIGlkeCBsaW5lIGRyYXcNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5kYXRhRSwgMikNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDquLDsobTsl5Ag7J6I642Y6rGwIOyijO2RnCDrsJTqv5TspJjslbztlaguDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogZW5kTGluZSwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZExpbmUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZSsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06MywgaWR4SUQ6IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkLCB0YWJJRDogdGhpcy5QcG9ydFRhYn0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5yZWZQRmllbGRTID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcm93UFNlcnZlckNDbGljayhpZHgpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb3dDbGljayAnICsgaWR4KQ0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUFNlcnZlckMgIT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkKSB7IC8vIOqwmeydgOqxsCDqs4Tsho0g64iE66W066m0IOyViOuQqA0KICAgICAgICAgICAgICAgIC8v6riw7KG06rKDIGRlbGV0Ze2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgICAgIC8vIOyDiOuhnOuTpOyWtOyYqCBpZHggbGluZSBkcmF3DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5vcGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZVBhdGgodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLm9wZXIsIDMpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g6riw7KG07JeQIOyeiOuNmOqxsCDsooztkZwg67CU6r+U7KSY7JW87ZWoLg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmUsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgdHJ1ZSwgZW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZExpbmUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZSsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bTo0LCBpZHhJRDogdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkLCB0YWJJRDogdGhpcy5QcG9ydFRhYn0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5yZWZQU2VydmVyQyA9IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5pZA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICByb3dQUlByb3ZpZGVkQ2xpY2soaWR4KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncm93Q2xpY2sgJyArIGlkeCkNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlBSUHJvdmlkZWQgIT0gdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmlkKSB7IC8vIOqwmeydgOqxsCDqs4Tsho0g64iE66W066m0IOyViOuQqA0KICAgICAgICAgICAgICAgIC8v6riw7KG06rKDIGRlbGV0Ze2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgICAgIC8vIOyDiOuhnOuTpOyWtOyYqCBpZHggbGluZSBkcmF3DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5kYXRhRSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSS2V5VmFsdWVESVBhdGgodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOq4sOyhtOyXkCDsnojrjZjqsbAg7KKM7ZGcIOuwlOq/lOykmOyVvO2VqC4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUktleVZhbHVlREknLCB7Y29tcG86ImRyYWciLCB1dWlkOiBlbmRMaW5lLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LktleVZhbHVlRElfc3RyLCB1dWlkOiBlbmRMaW5lLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWInK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWInK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06NSwgaWR4SUQ6IHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCwgdGFiSUQ6IHRoaXMuUFJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucmVmUFJQcm92aWRlZCA9IHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZA0KICAgICAgICB9LA0KICAgICAgICByb3dSUXVldWVkQ2xpY2soaWR4KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncm93Q2xpY2sgJyArIGlkeCkNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlJRdWV1ZWQgIT0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKSB7IC8vIOqwmeydgOqxsCDqs4Tsho0g64iE66W066m0IOyViOuQqA0KICAgICAgICAgICAgICAgIC8v6riw7KG06rKDIGRlbGV0Ze2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgICAgIC8vIOyDiOuhnOuTpOyWtOyYqCBpZHggbGluZSBkcmF3DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUsIDIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g6riw7KG07JeQIOyeiOuNmOqxsCDsooztkZwg67CU6r+U7KSY7JW87ZWoLg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmUsIHRvcDogdGhpcy5lbGVtZW50LnRvcCArIDMwMCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgdHJ1ZSwgZW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjgsIGlkeElEOiB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucmVmUlF1ZXVlZCA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZA0KICAgICAgICB9LA0KICAgICAgICByb3dSQ2xpZW50Q2xpY2soaWR4KSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygncm93Q2xpY2sgJyArIGlkeCkNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlJDbGllbnQgIT0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKSB7IC8vIOqwmeydgOqxsCDqs4Tsho0g64iE66W066m0IOyViOuQqA0KICAgICAgICAgICAgICAgIC8v6riw7KG06rKDIGRlbGV0Ze2VmOqzoCANCiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgICAgIC8vIOyDiOuhnOuTpOyWtOyYqCBpZHggbGluZSBkcmF3DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmVPcHJhdGlvbiwgZW5kTGluZUdldHRlciwgZW5kTGluZVNldHRlcg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZU9wcmF0aW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZU9wcmF0aW9uID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZU9wcmF0aW9uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uLCAzKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g6riw7KG07JeQIOyeiOuNmOqxsCDsooztkZwg67CU6r+U7KSY7JW87ZWoLg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3QgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudChlbmRMaW5lT3ByYXRpb24pID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmVPcHJhdGlvbiwgdG9wOiB0aGlzLmVsZW1lbnQudG9wICsgNDAwLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhpc3QgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogZW5kTGluZU9wcmF0aW9uLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVPcHJhdGlvbiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06OSwgaWR4SUQ6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCwgdGFiSUQ6IHRoaXMuUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgZmFsc2UsIGVuZExpbmVPcHJhdGlvbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIGVuZExpbmVPcHJhdGlvbiwgaXNFeGlzdCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5nZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lR2V0dGVyID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmVHZXR0ZXIgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lR2V0dGVyID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uZ2V0dGVyLCAyKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lR2V0dGVyICE9IG51bGwgJiYgZW5kTGluZUdldHRlciAhPSBlbmRMaW5lT3ByYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOq4sOyhtOyXkCDsnojrjZjqsbAg7KKM7ZGcIOuwlOq/lOykmOyVvO2VqC4NCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSA0MDANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IDYwMA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3RHZXR0ZXIgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudChlbmRMaW5lR2V0dGVyKSA9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBlbmRMaW5lR2V0dGVyLCB0b3A6IHRoaXMuZWxlbWVudC50b3AgKyB0b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdEdldHRlciA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBlbmRMaW5lR2V0dGVyLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNFeGlzdEdldHRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVHZXR0ZXIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bTogOSwgaWR4SUQ6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCwgdGFiSUQ6IHRoaXMuUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgZmFsc2UsIGVuZExpbmVHZXR0ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmRMaW5lR2V0dGVyLCBpc0V4aXN0R2V0dGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLnNldHRlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmVTZXR0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZVNldHRlciA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmVTZXR0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5zZXR0ZXIsIDIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmVTZXR0ZXIgIT0gbnVsbCAmJiBlbmRMaW5lR2V0dGVyICE9IGVuZExpbmVTZXR0ZXIgJiYgZW5kTGluZVNldHRlciAhPSBlbmRMaW5lT3ByYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOq4sOyhtOyXkCDsnojrjZjqsbAg7KKM7ZGcIOuwlOq/lOykmOyVvO2VqC4NCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3BTZXR0ZXIgPSA2MDANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lR2V0dGVyICE9IGVuZExpbmVPcHJhdGlvbiAmJiBlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCAmJiBlbmRMaW5lR2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BTZXR0ZXIgPSA4MDANCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZU9wcmF0aW9uID09IG51bGwgfHwgZW5kTGluZUdldHRlciA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wU2V0dGVyID0gNDAwDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdFNldHRlciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KGVuZExpbmVTZXR0ZXIpID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmVTZXR0ZXIsIHRvcDogdGhpcy5lbGVtZW50LnRvcCArIHRvcFNldHRlciwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0U2V0dGVyID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGVuZExpbmVTZXR0ZXIsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0V4aXN0U2V0dGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZVNldHRlciwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjksIGlkeElEOiB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIGZhbHNlLCBlbmRMaW5lU2V0dGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kTGluZVNldHRlciwgaXNFeGlzdFNldHRlcikNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGhpcy5zZXRPcGVuQ2xvc2VWaWV3VVVJRChlbmRMaW5lT3ByYXRpb24sIGVuZExpbmVHZXR0ZXIsIGVuZExpbmVTZXR0ZXIpDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnJlZlJDbGllbnQgPSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQNCiAgICAgICAgfSwNCg0KDQogICAgICAgIGNsaWNrUHBvcnROYW1lKG5hbWUpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLmJlZm9yZVBwb3J0ID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja1BScG9ydE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlUFJwb3J0ID0gbmFtZQ0KICAgICAgICB9LA0KICAgICAgICBjbGlja1Jwb3J0TmFtZShuYW1lKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgdGhpcy5iZWZvcmVScG9ydCA9IG5hbWUNCiAgICAgICAgfSwNCiAgICAgICAgaW5wdXRQcG9ydE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3BQb3J0JywgbGlzdG5hbWU6IG5hbWUsIGJlZm9yZW5hbWU6IHRoaXMuYmVmb3JlUHBvcnR9ICkNCiAgICAgICAgICAgIHRoaXMuYmVmb3JlUHBvcnQgPSBuYW1lDQogICAgICAgIH0sIA0KICAgICAgICBpbnB1dFBScG9ydE5hbWUobmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VQYXRoRWxlbWVudCcsIHt1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3ByUG9ydCcsIGxpc3RuYW1lOiBuYW1lLCBiZWZvcmVuYW1lOiB0aGlzLmJlZm9yZVBScG9ydH0gKQ0KICAgICAgICAgICAgdGhpcy5iZWZvcmVQUnBvcnQgPSBuYW1lDQogICAgICAgIH0sDQogICAgICAgIGlucHV0UnBvcnROYW1lKG5hbWUpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU5hbWU6ICdyUG9ydCcsIGxpc3RuYW1lOiBuYW1lLCBiZWZvcmVuYW1lOiB0aGlzLmJlZm9yZVJwb3J0fSApDQogICAgICAgICAgICB0aGlzLmJlZm9yZVJwb3J0ID0gbmFtZQ0KICAgICAgICB9LCANCg0KICAgICAgICBpbnB1dFNlbGVjdFBJbnRlcmYoKSB7DQogICAgICAgICAgICB0aGlzLmNsZWFyUEludGVyZmFjZSgpDQogICAgICAgICAgICB0aGlzLnNldFBJbnRlcmZhY2VTZWxlY3QoKQ0KDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUEludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB0aGlzLnNlbFBJbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJysgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEludGVyZmFjZVNlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmludGVyZmFjZSAhPSBudWxsKSB7dGhpcy5yZWZQSW50ZXJmYXNlID0gdHJ1ZX0NCiAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KHRoaXMuZWxlbWVudC51dWlkKSsxID09IHRoaXMuJHN0b3JlLnN0YXRlLm9wZW5FbGVtZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VsZWN0SSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pbnRlcmZhY2UsMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVJlY292ZXJ5UGF0aCh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaW50ZXJmYWNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBlbmRMaW5lLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogZW5kTGluZSwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogZW5kTGluZSwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBITVJlY292ZXJ5VmlhJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuUmVjb3ZlcnlWQV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LlJlY292ZXJ5VkFfc3RyfSApDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmRMaW5lKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmUsIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06MSwgaWR4SUQ6IDAsIHRhYklEOiB0aGlzLlBwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBFdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQSW50ZXJmYWNlTGlzdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxQSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBJbnRlcmZhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVJlY292ZXJ5DQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEludGVyZmFjZShpdGVtKXsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiggdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmludGVyZmFjZSAhPSBpdGVtLm5hbWUpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IGl0ZW0udXVpZCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQSW50ZXJmYXNlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGl0ZW0udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogaXRlbS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tUkVDT1ZFUlktQUNUSU9OLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUEludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBITVJlY292ZXJ5VmlhJywge2NvbXBvOiJkcmFnIiwgdXVpZDogaXRlbS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlJlY292ZXJ5VkFfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBpdGVtLnV1aWQpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJysgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS51dWlkLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRlbS51dWlkKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZDppdGVtLnV1aWQsIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06MSwgaWR4SUQ6IDAsIHRhYklEOiB0aGlzLlBwb3J0VGFifSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmludGVyZmFjZSA9IGl0ZW0ubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudCh0aGlzLmVsZW1lbnQudXVpZCkrMSA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5vcGVuRWxlbWVudC5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUEludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQSW50ZXJmYXNlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0UEhNUmVjb3ZlcnlWaWEnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuUmVjb3ZlcnlWQV9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBpdGVtLnV1aWQpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJysgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS51dWlkLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRlbS51dWlkKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9KSANCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJysgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCBlbmQ6aXRlbS51dWlkLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjEsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5QcG9ydFRhYn0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3UEludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdTZXJ2aWNlSW50ZXJmYWNlKCkNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudFBITVJlY292ZXJ5Jywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVQSE1SZWNvdmVyeSwgcGF0aDogJycsIGlucHV0OiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHJlY29uYW1lOiAnJywgZmFmOiBudWxsDQogICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUmVjb3ZlcnlWQV9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUEhNX3N0cikNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5QbGF0Zm9ybV9zdHIpDQoNCiAgICAgICAgICAgIH0gDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTV0NvbXBvbmVudHMnLCB7Y29tcG86InoiLCB1dWlkOnRoaXMuZWxlbWVudC51dWlkLCB6aW5kZXg6Mn0gKQ0KICAgICAgICB9LA0KDQogICAgICAgIGFkZFBwb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGNvbnN0IGVkaXRJdGVtID0ge25hbWU6ICcnLCBzZWxlY3RJOiBudWxsLCBpbnRlcmZhY2U6IG51bGwsIHF1ZXVlZDogW10sIGZpZWxkOiBbXSwgc2VydmVyOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnUFBvcnRfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHBvcnQuc29tZShlbGUgPT4gZWxlLm5hbWUgPT09IGFkZE9iai5uYW1lKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYWRkT2JqLmlkID0gbg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0LnB1c2goYWRkT2JqKQ0KICAgICAgICAgICAgdGhpcy5QcG9ydFRhYiA9IHRoaXMuZWxlbWVudC5wcG9ydC5sZW5ndGgtMQ0KICAgICAgICAgICAgdGhpcy5jbGlja1Bwb3J0dGFiKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNsaWNrUHBvcnR0YWIoKSB7DQogICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFFTQyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBRU0MgPSBbXQ0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBGU0MgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQRlNDID0gW10NCiAgICAgICAgICAgIHRoaXMuaXNkZWxldGVTQyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFNDID0gW10NCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlUHBvcnRUYWIoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5yZWZQSW50ZXJmYXNlIHx8IHRoaXMucmVmUFF1ZXVlZCAhPSBudWxsIHx8IHRoaXMucmVmUEZpZWxkUyAhPSBudWxsIHx8IHRoaXMucmVmUFNlcnZlckMgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlT3BlbkVsZW1lbnQoKQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUEludGVyZmFzZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5yZWZQUXVldWVkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUEZpZWxkUyA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBTZXJ2ZXJDID0gbnVsbA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLyppZih0aGlzLmVsZW1lbnQucHBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEgJiYgdGhpcy5QcG9ydFRhYiAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Bwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIHRoaXMuUHBvcnRUYWIsIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCl9LCAzMDApOw0KICAgICAgICAgICAgfSovDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVBwb3J0KGlkeCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncHRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pbnRlcmZhY2UgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScrIHRoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJysgdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5xdWV1ZWQubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lUSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lUSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5xdWV1ZWRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmZpZWxkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUYgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFtpZHhdLmZpZWxkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lRiAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5maWVsZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uc2VydmVyLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZVMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uc2VydmVyW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lUyAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFtpZHhdLnNlcnZlcltpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnQuc3BsaWNlKGlkeCwgMSkNCiAgICAgICAgfSwNCiAgICAgICAgaXNDaGVja1BRU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVQUVNDID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFFTQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUVNDID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBRU0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVBRU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVQUVNDID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBRU0MuZm9yRWFjaCggaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWQubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpXS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWQgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdFBRU0MuaW5kZXhPZihpdGVtKSA8IDAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVQUVNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBRU0MgPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlblBRU0MoaWR4KSB7IA0KICAgICAgICAgICAgdGhpcy5zZWxTSUV2ZW50ID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRWYXJpYWJsZURhdGFQcm90b3R5cGUNCg0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZVBhdGgodGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFLCAxKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQUVNDLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRQUVNDLnNlbmRlckNhcGEgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uc2VuZGVyQ2FwYQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0UFFTQ0l0ZW0oaWR4KSB7DQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UFFTQy5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRQUVNDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UFFTQy5kYXRhRSAhPSBudWxsICYmIHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UFFTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCAmJiBlbmRMaW5lID09IHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCAmJiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgIT0gdGhpcy5lZGl0UFFTQy5kYXRhRS5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UFFTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlBRdWV1ZWQgPT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUNoYW5nZSA9IHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCANCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIGVuZExpbmVDaGFuZ2UpDQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCBlbmRMaW5lQ2hhbmdlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZUNoYW5nZSsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVDaGFuZ2UsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06MiwgaWR4SUQ6IHRoaXMucmVmUFF1ZXVlZCwgdGFiSUQ6IHRoaXMuUHBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWRbaWR4XS5zZW5kZXJDYXBhID0gdGhpcy5lZGl0UFFTQy5zZW5kZXJDYXBhDQogICAgICAgICAgICB0aGlzLmNhbmNlbFBRU0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxQUVNDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UFFTQyA9IHtkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFBRU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnF1ZXVlZC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFBRU0MuaWQgPSBuDQogICAgICAgICAgICB2YXIgc2VyVmlld1VVSUQgPSBudWxsDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0UFFTQy5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgc2VyVmlld1VVSUQgPSB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQUVNDLmRhdGFFID0gdGhpcy5lZGl0UFFTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kOnNlclZpZXdVVUlELCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06MiwgaWR4SUQ6IHRoaXMuZWRpdFBRU0MuaWQsIHRhYklEOiB0aGlzLlBwb3J0VGFifSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0UFFTQykNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5xdWV1ZWQucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5yZWZQUXVldWVkID0gbg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxQUVNDKCkNCiAgICAgICAgICAgIGlmIChzZXJWaWV3VVVJRCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIHNlclZpZXdVVUlEKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK24rJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFFTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlclZpZXdVVUlELCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZXJWaWV3VVVJRCsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUVNDU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nUFFTQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFBRU0MuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0UFFTQy5kYXRhRS51dWlkLCBlbGVtZW50OiBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRQUVNDLmRhdGFFLnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIC8vIEV2ZW50QnVzLiRlbWl0KCdhY3RpdmUtZWxlbWVudCcsIHRoaXMuZWRpdFBRU0MuZGF0YUUudXVpZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRQUVNDTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQUVNDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQUVNDID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUVNDTGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsU0lFdmVudCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhclBRU0MoKSB7DQogICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1BRU0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRQUVNDLmRhdGFFID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBpc0NoZWNrUEZTQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBGU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVQRlNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBGU0MgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUEZTQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUEZTQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBGU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UEZTQy5mb3JFYWNoKCBpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpXS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQgPSB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGQuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0UEZTQy5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUEZTQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQRlNDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5QRlNDKGlkeCkgeyANCiAgICAgICAgICAgIHRoaXMuc2VsU0lGaWVsZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RmllbGQNCg0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFLCAyKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQRlNDLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5kYXRhRSwgdXVpZDogZW5kTGluZX0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFBGU0Muc2VuZGVyQ2FwYSA9IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLnNlbmRlckNhcGENCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFBGU0NJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5lZGl0UEZTQy5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UEZTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBGU0MuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRQRlNDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0UEZTQy5kYXRhRSAhPSBudWxsICYmIGVuZExpbmUgPT0gdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkICYmIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFICE9IHRoaXMuZWRpdFBGU0MuZGF0YUUubmFtZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5maWVsZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UEZTQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh0aGlzLnJlZlBGaWVsZFMgPT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkW2lkeF0uaWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UEZTQy5kYXRhRSAhPSBudWxsICYmIHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lQ2hhbmdlID0gdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lQ2hhbmdlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kTGluZUNoYW5nZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmVDaGFuZ2UrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lQ2hhbmdlLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjMsIGlkeElEOiB0aGlzLnJlZlBGaWVsZFMsIHRhYklEOiB0aGlzLlBwb3J0VGFifSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uZmllbGRbaWR4XS5zZW5kZXJDYXBhID0gdGhpcy5lZGl0UEZTQy5zZW5kZXJDYXBhDQogICAgICAgICAgICB0aGlzLmNhbmNlbFBGU0MoKQ0KICAgICAgICB9LA0KICAgICAgICBjYW5jZWxQRlNDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UEZTQyA9IHtkYXRhRTogbnVsbCwgc2VuZGVyQ2FwYTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFBGU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UEZTQy5pZCA9IG4NCiAgICAgICAgICAgIHZhciBzZXJWaWV3VVVJRCA9IG51bGwNCiAgICAgICAgICAgIGlmKCB0aGlzLmVkaXRQRlNDLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBzZXJWaWV3VVVJRCA9IHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZA0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFBGU0MuZGF0YUUgPSB0aGlzLmVkaXRQRlNDLmRhdGFFLm5hbWUNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCBlbmQ6c2VyVmlld1VVSUQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bTozLCBpZHhJRDogdGhpcy5lZGl0UEZTQy5pZCwgdGFiSUQ6IHRoaXMuUHBvcnRUYWJ9KQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRQRlNDKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmZpZWxkLnB1c2goYWRkT2JqKTsNCiAgICAgICAgICAgIHRoaXMucmVmUEZpZWxkUyA9IG4NCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUEZTQygpDQogICAgICAgICAgICBpZiAoc2VyVmlld1VVSUQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBzZXJWaWV3VVVJRCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJytuKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJWaWV3VVVJRCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VyVmlld1VVSUQrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEZTQ1NlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ1BGU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRQRlNDLmRhdGFFICE9IG51bGwgJiYgdGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFBGU0MuZGF0YUUudXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lZGl0UEZTQy5kYXRhRS51dWlkK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAvLyBFdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCB0aGlzLmVkaXRQRlNDLmRhdGFFLnV1aWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc2V0UEZTQ0xpc3QoKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUEZTQyA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUEZTQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0UEZTQ0xpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNlbFNJRmllbGQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEZpZWxkDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhclBGU0MoKSB7DQogICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1BGU0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRQRlNDLmRhdGFFID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBpc0NoZWNrU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVTQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFNDID0gW10NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVNDID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVTQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVNDID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFNDLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlciA9IHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXIuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0U0MuaW5kZXhPZihpdGVtKSA8IDAgfSkNCg0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFNDID0gW10NCiAgICAgICAgICAgIH0gDQogICAgICAgIH0sDQogICAgICAgIG9wZW5TQyhpZHgpIHsgDQogICAgICAgICAgICB0aGlzLnNlbFNJTWV0aG9kID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDbGllbnRTZXJ2ZXINCg0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0ub3BlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5vcGVyLCAzKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRTQy5vcGVyID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0ub3BlciwgdXVpZDogZW5kTGluZX0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFNDSXRlbShpZHgpIHsNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFNDLm9wZXIgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0ub3BlciA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSB0aGlzLmVkaXRTQy5vcGVyLnV1aWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCB0aGlzLmVkaXRTQy5vcGVyLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5zZXJ2ZXJbaWR4XS5vcGVyID0gdGhpcy5lZGl0U0Mub3Blci5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFNDLm9wZXIgIT0gbnVsbCAmJiB0aGlzLmVkaXRTQy5vcGVyLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJyt0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lZGl0U0Mub3Blci51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnRbdGhpcy5QcG9ydFRhYl0uc2VydmVyW2lkeF0ub3BlciA9IHRoaXMuZWRpdFNDLm9wZXIubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRTQy5vcGVyICE9IG51bGwgJiYgZW5kTGluZSA9PSB0aGlzLmVkaXRTQy5vcGVyLnV1aWQgJiYgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLm9wZXIgIT0gdGhpcy5lZGl0U0Mub3Blci5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLm9wZXIgPSB0aGlzLmVkaXRTQy5vcGVyLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUFNlcnZlckMgPT0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlcltpZHhdLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFNDLm9wZXIgIT0gbnVsbCAmJiB0aGlzLmVkaXRTQy5vcGVyLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUNoYW5nZSA9IHRoaXMuZWRpdFNDLm9wZXIudXVpZA0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogdGhpcy5lZGl0U0Mub3Blci51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IHRoaXMuZWRpdFNDLm9wZXIudXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgdHJ1ZSwgZW5kTGluZUNoYW5nZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kTGluZUNoYW5nZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmVDaGFuZ2UrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVDaGFuZ2UsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06NCwgaWR4SUQ6IHRoaXMucmVmUFNlcnZlckMsIHRhYklEOiB0aGlzLlBwb3J0VGFifSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmNhbmNlbFNDKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsU0MoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRTQyA9IHtvcGVyOiBudWxsfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkU0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlci5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFNDLmlkID0gbg0KICAgICAgICAgICAgdmFyIHNlclZpZXdVVUlEID0gbnVsbA0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdFNDLm9wZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHNlclZpZXdVVUlEID0gdGhpcy5lZGl0U0Mub3Blci51dWlkDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IHRoaXMuZWRpdFNDLm9wZXIudXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IHRoaXMuZWRpdFNDLm9wZXIudXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0U0Mub3BlciA9IHRoaXMuZWRpdFNDLm9wZXIubmFtZQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgZW5kOnNlclZpZXdVVUlELCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06NCwgaWR4SUQ6IHRoaXMuZWRpdFNDLmlkLCB0YWJJRDogdGhpcy5QcG9ydFRhYn0pDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFNDKQ0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLnNlcnZlci5wdXNoKGFkZE9iaik7DQogICAgICAgICAgICB0aGlzLnJlZlBTZXJ2ZXJDID0gbg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxTQygpDQogICAgICAgICAgICBpZiAoc2VyVmlld1VVSUQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBzZXJWaWV3VVVJRCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK24rJy0nK3RoaXMuZWxlbWVudC5wcG9ydFt0aGlzLlBwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrdGhpcy5lbGVtZW50LnBwb3J0W3RoaXMuUHBvcnRUYWJdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyVmlld1VVSUQsIHRydWUpDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlclZpZXdVVUlEKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFNDU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nU0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRTQy5vcGVyICE9IG51bGwgJiYgdGhpcy5lZGl0U0Mub3Blci51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFNDLm9wZXIudXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRTQy5vcGVyLnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2FjdGl2ZS1lbGVtZW50JywgdGhpcy5lZGl0U0Mub3Blci51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFNDTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdTQyA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nU0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFNDTGlzdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsU0lNZXRob2QgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENsaWVudFNlcnZlcg0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJTQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nU0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRTQy5vcGVyID0gbnVsbA0KICAgICAgICB9LA0KDQogICAgICAgIGlucHV0U2VsZWN0UFJJbnRlcmYoKSB7DQogICAgICAgICAgICB0aGlzLmNsZWFyUFJJbnRlcmZhY2UoKQ0KICAgICAgICAgICAgdGhpcy5zZXRQUkludGVyZmFjZVNlbGVjdCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUFJJbnRlcmZhY2UoKSB7DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB0aGlzLnNlbFBSSW50ZXJmYWNlID0gbnVsbA0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgIH0sDQogICAgICAgIHNldFBSSW50ZXJmYWNlU2VsZWN0KCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UgIT0gbnVsbCkge3RoaXMucmVmUFJJbnRlcmZhc2UgPSB0cnVlfQ0KICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQodGhpcy5lbGVtZW50LnV1aWQpKzEgPT0gdGhpcy4kc3RvcmUuc3RhdGUub3BlbkVsZW1lbnQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmludGVyZmFjZSwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktRklMRS1QUk9YWS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSRmlsZVByb3h5UGF0aCh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSS2V5VmFsdWVESVBhdGgodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaW50ZXJmYWNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyfSApDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUkZpbGVQcm94eScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmUsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LkZpbGVQcm94eUludGVyZl9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LkZpbGVQcm94eUludGVyZl9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRQRVJLZXlWYWx1ZURJJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuS2V5VmFsdWVESV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LktleVZhbHVlRElfc3RyfSApDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmUrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjUsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5QUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmRMaW5lK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUkludGVyZmFjZUxpc3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxQUkludGVyZmFjZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJQRVJTSVNURU5DWS1GSUxFLVBST1hZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJGaWxlUHJveHkNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFBSSW50ZXJmYWNlID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJLZXlWYWx1ZURJDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBzZXRQUkludGVyZmFjZShpdGVtKXsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiggdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaW50ZXJmYWNlICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSBpdGVtLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogaXRlbS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQUkludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUkZpbGVQcm94eScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGl0ZW0udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5GaWxlUHJveHlJbnRlcmZfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBSSW50ZXJmYXNlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0UEVSS2V5VmFsdWVESScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGl0ZW0udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5LZXlWYWx1ZURJX3N0ciwgdXVpZDogaXRlbS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIGl0ZW0udXVpZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBpdGVtLnV1aWQsIHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpdGVtLnV1aWQrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBlbmQ6aXRlbS51dWlkLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjUsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5QUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pbnRlcmZhY2UgPSBpdGVtLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQodGhpcy5lbGVtZW50LnV1aWQpKzEgPT0gdGhpcy4kc3RvcmUuc3RhdGUub3BlbkVsZW1lbnQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUFJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogaXRlbS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZQUkludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUkZpbGVQcm94eScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGl0ZW0udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5GaWxlUHJveHlJbnRlcmZfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlBSSW50ZXJmYXNlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0UEVSS2V5VmFsdWVESScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGl0ZW0udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5LZXlWYWx1ZURJX3N0ciwgdXVpZDogaXRlbS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIGl0ZW0udXVpZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBpdGVtLnV1aWQsIHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpdGVtLnV1aWQrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCBlbmQ6aXRlbS51dWlkLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjUsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5QUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIG5ld1BSSW50ZXJmYWNlKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3U2VydmljZUludGVyZmFjZSgpDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudFBFUkZpbGVQcm94eScsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEVSRmlsZVByb3h5LCBwYXRoOiAnJywgaW5wdXQ6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0LCB6aW5kZXg6IDEwLCBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLCBtaW5pc2l6ZTogJycsIHJlZHVuZGFuY3k6IG51bGwsIHVwZGF0ZVM6IG51bGwsIGVuY29kaW5nOiAnJywgcHJveHk6IFtdLCBtYXhmaWxlczogJycNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LkZpbGVQcm94eUludGVyZl9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUEVSX3N0cikNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5QbGF0Zm9ybV9zdHIpDQoNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEVSU0lTVEVOQ1ktS0VZLVZBTFVFLURBVEFCQVNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZEVsZW1lbnRQRVJLZXlWYWx1ZURJJywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVQRVJLZXlWYWx1ZURJLCBwYXRoOiAnJywgaW5wdXQ6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0LCB6aW5kZXg6IDEwLCBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgbWluaXNpemU6ICcnLCByZWR1bmRhbmN5OiBudWxsLCB1cGRhdGVTOiBudWxsLCBkYXRhOiBbXSwgc2VyaWFsaXphdGlvbjogW10NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LktleVZhbHVlRElfc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBFUl9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUGxhdGZvcm1fc3RyKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U1dDb21wb25lbnRzJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjJ9ICkNCiAgICAgICAgfSwNCg0KICAgICAgICBhZGRQUnBvcnQoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgY29uc3QgZWRpdEl0ZW0gPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcHJvdmlkZTogW10sIGlkOiAnJ30NCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IG5ldyBPYmplY3QoZWRpdEl0ZW0pDQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCg0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIGFkZE9iai5uYW1lID0gJ1BSUG9ydF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWxlbWVudC5wcnBvcnQuc29tZShlbGUgPT4gZWxlLm5hbWUgPT09IGFkZE9iai5uYW1lKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYWRkT2JqLmlkID0gbg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydC5wdXNoKGFkZE9iaikNCiAgICAgICAgICAgIHRoaXMuUFJwb3J0VGFiID0gdGhpcy5lbGVtZW50LnBycG9ydC5sZW5ndGgtMQ0KICAgICAgICAgICAgdGhpcy5jbGlja1BScG9ydHRhYigpDQogICAgICAgICAgICBpZiAodGhpcy5sb2NhdGlvbiA9PSAxKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgbnVsbCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xpY2tQUnBvcnR0YWIoKSB7DQogICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFJQcm92aWRlID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UFJQcm92aWRlID0gW10NCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlUFJwb3J0VGFiKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUFJJbnRlcmZhc2UgfHwgdGhpcy5yZWZQUlByb3ZpZGVkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBSSW50ZXJmYXNlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnJlZlBSUHJvdmlkZWQgPSBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKmlmKHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoID4gMCAmJiB0aGlzLmxvY2F0aW9uID09IDEgJiYgdGhpcy5QUnBvcnRUYWIgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7RXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdwcnBvcnQnLCB0aGlzLmVsZW1lbnQudXVpZCwgdGhpcy5QUnBvcnRUYWIsIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKX0sIDMwMCk7DQogICAgICAgICAgICB9Ki8NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUFJwb3J0KGlkeCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncHJ0YWInLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IHRoaXMuZWxlbWVudC5wcnBvcnRbaWR4XS5uYW1lLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbaWR4XS5pbnRlcmZhY2UgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nKyB0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJysgdGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLnByb3ZpZGUubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lQ29uID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLnByb3ZpZGVbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lQ29uICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJyt0aGlzLmVsZW1lbnQucHJwb3J0W2lkeF0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydC5zcGxpY2UoaWR4LCAxKQ0KICAgICAgICB9LA0KICAgICAgICBpc0NoZWNrUFJQcm92aWRlKCkgew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmlzZGVsZXRlUFJQcm92aWRlID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUFJQcm92aWRlID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFBSUHJvdmlkZSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVQUlByb3ZpZGUgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZVBSUHJvdmlkZSgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUlByb3ZpZGUuZm9yRWFjaCggaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGUubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT0gdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGUgPSB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdFBSUHJvdmlkZS5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVBSUHJvdmlkZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RQUlByb3ZpZGUgPSBbXQ0KICAgICAgICAgICAgfSANCiAgICAgICAgfSwNCiAgICAgICAgb3BlblBSUHJvdmlkZShpZHgpIHsgDQogICAgICAgICAgICB0aGlzLnNlbFBlckRhdGEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElEYXRhDQoNCiAgICAgICAgICAgIGlmICggdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElQYXRoKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5kYXRhRSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVkaXRQUlByb3ZpZGVJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUgPSBudWxsDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIGVuZExpbmUgIT0gdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYicrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uZGF0YUUgPSB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGVbaWR4XS5kYXRhRSA9IHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRSAhPSBudWxsICYmIGVuZExpbmUgPT0gdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQgJiYgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFICE9IHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0ucHJvdmlkZVtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLm5hbWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUFJQcm92aWRlZCA9PSB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlW2lkeF0uaWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFICE9IG51bGwgJiYgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUNoYW5nZSA9IHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUktleVZhbHVlREknLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LktleVZhbHVlRElfc3RyLCB1dWlkOiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnbmV3LWxpbmUnLCB0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYicrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIGVuZExpbmVDaGFuZ2UpDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmRMaW5lQ2hhbmdlKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYicrdGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lQ2hhbmdlLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjYsIGlkeElEOiB0aGlzLnJlZlBSUHJvdmlkZWQsIHRhYklEOiB0aGlzLlBScG9ydFRhYn0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLmNhbmNlbFBSUHJvdmlkZSgpDQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbFBSUHJvdmlkZSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFBSUHJvdmlkZSA9IHtkYXRhRTogbnVsbH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGFkZFBSUHJvdmlkZSgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKysNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5wcm92aWRlLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UFJQcm92aWRlLmlkID0gbg0KICAgICAgICAgICAgdmFyIHNlclZpZXdVVUlEID0gbnVsbA0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgc2VyVmlld1VVSUQgPSB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZA0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBFUktleVZhbHVlREknLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUudXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuS2V5VmFsdWVESV9zdHIsIHV1aWQ6IHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUgPSB0aGlzLmVkaXRQUlByb3ZpZGUuZGF0YUUubmFtZQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgZW5kOnNlclZpZXdVVUlELCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjYsIGlkeElEOiB0aGlzLmVkaXRQUlByb3ZpZGUuaWQsIHRhYklEOiB0aGlzLlBScG9ydFRhYn0pDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFBSUHJvdmlkZSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnByb3ZpZGUucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5yZWZQUlByb3ZpZGVkID0gbg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxQUlByb3ZpZGUoKQ0KICAgICAgICAgICAgaWYgKHNlclZpZXdVVUlEICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJytuKyctJyt0aGlzLmVsZW1lbnQucHJwb3J0W3RoaXMuUFJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWInK3RoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyVmlld1VVSUQsIHRydWUpDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlclZpZXdVVUlEKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFBSUHJvdmlkZVNlbGVjdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdGluZ1BSUHJvdmlkZSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRSAhPSBudWxsICYmIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkLCBlbGVtZW50OiBjb25zdGFudC5LZXlWYWx1ZURJX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAvL0V2ZW50QnVzLiRlbWl0KCdhY3RpdmUtZWxlbWVudCcsIHRoaXMuZWRpdFBSUHJvdmlkZS5kYXRhRS51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFBSUHJvdmlkZUxpc3QoKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUFJQcm92aWRlID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdQUlByb3ZpZGUgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFBSUHJvdmlkZUxpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNlbFBlckRhdGEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBFUktleVZhbHVlRElEYXRhDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhclBSUHJvdmlkZSgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUFJQcm92aWRlID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5lZGl0UFJQcm92aWRlLmRhdGFFID0gbnVsbA0KICAgICAgICB9LA0KDQogICAgICAgIGlucHV0U2VsZWN0UkludGVyZigpIHsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJSSW50ZXJmYWNlKCkNCiAgICAgICAgICAgIHRoaXMuc2V0UkludGVyZmFjZVNlbGVjdCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUkludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB0aGlzLnNlbFJJbnRlcmZhY2UgPSBudWxsDQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0UkludGVyZmFjZVNlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmludGVyZmFjZSAhPSBudWxsKSB7dGhpcy5yZWZSSW50ZXJmYXNlID0gdHJ1ZX0NCiAgICAgICAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KHRoaXMuZWxlbWVudC51dWlkKSsxID09IHRoaXMuJHN0b3JlLnN0YXRlLm9wZW5FbGVtZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pbnRlcmZhY2UsIDApDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tSEVBTFRILUNIQU5ORUwtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITUhlYWx0aFBhdGgodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmludGVyZmFjZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1TVVBFUlZJU0VELUVOVElUWS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEhNU3VwZXJ2aXNlZFBhdGgodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmludGVyZmFjZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJTRVJWSUNFLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyfSApDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5zZWxlY3RJID09ICJQSE0tSEVBTFRILUNIQU5ORUwtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBITUhlYWx0aCcsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IGVuZExpbmUsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LkhlYWx0aENoYW5uZWxfc3RyLCB1dWlkOiBlbmRMaW5lLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiBlbmRMaW5lLCBlbGVtZW50OiBjb25zdGFudC5IZWFsdGhDaGFubmVsX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLVNVUEVSVklTRUQtRU5USVRZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRQSE1TdXBlcnZpc2VkJywge2NvbXBvOiJkcmFnIiwgdXVpZDogZW5kTGluZSwgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuUEhNU3VwZXJ2aXNlZF9zdHIsIHV1aWQ6IGVuZExpbmUsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IGVuZExpbmUsIGVsZW1lbnQ6IGNvbnN0YW50LlBITVN1cGVydmlzZWRfc3RyfSApDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmRMaW5lKzEpLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmUsIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06NywgaWR4SUQ6IDAsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTGluZSt0aGlzLmxvY2F0aW9uKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2FjdGl2ZS1lbGVtZW50JywgZW5kTGluZSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0UkludGVyZmFjZUxpc3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlNFUlZJQ0UtSU5URVJGQUNFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsUkludGVyZmFjZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLUhFQUxUSC1DSEFOTkVMLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFJJbnRlcmZhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITUhlYWx0aA0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLVNVUEVSVklTRUQtRU5USVRZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFJJbnRlcmZhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVN1cGVydmlzZWQNCiAgICAgICAgICAgIH0gDQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBzZXRSSW50ZXJmYWNlKGl0ZW0pew0KICAgICAgICAgICAgdGhpcy5jbGlja090aGVyRmllbGRzKCkNCiAgICAgICAgICAgIGlmKCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaW50ZXJmYWNlICE9IGl0ZW0ubmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQgJiYgZW5kTGluZSAhPSBpdGVtLnV1aWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gaXRlbS51dWlkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAnU0VSVklDRS1JTlRFUkZBQ0UnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogaXRlbS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1IRUFMVEgtQ0hBTk5FTC1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRQSE1IZWFsdGgnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuSGVhbHRoQ2hhbm5lbF9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLVNVUEVSVklTRUQtRU5USVRZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUkludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBITVN1cGVydmlzZWQnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuUEhNU3VwZXJ2aXNlZF9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBpdGVtLnV1aWQpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udXVpZCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0udXVpZCsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6aXRlbS51dWlkLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjcsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5ScG9ydFRhYn0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pbnRlcmZhY2UgPSBpdGVtLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQodGhpcy5lbGVtZW50LnV1aWQpKzEgPT0gdGhpcy4kc3RvcmUuc3RhdGUub3BlbkVsZW1lbnQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAnU0VSVklDRS1JTlRFUkZBQ0UnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogaXRlbS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBpdGVtLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnRbdGhpcy5QUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1IRUFMVEgtQ0hBTk5FTC1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZlJJbnRlcmZhc2UgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRQSE1IZWFsdGgnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuSGVhbHRoQ2hhbm5lbF9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnBycG9ydFt0aGlzLlBScG9ydFRhYl0uc2VsZWN0SSA9PSAiUEhNLVNVUEVSVklTRUQtRU5USVRZLUlOVEVSRkFDRSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmUkludGVyZmFzZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFBITVN1cGVydmlzZWQnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBpdGVtLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuUEhNU3VwZXJ2aXNlZF9zdHIsIHV1aWQ6IGl0ZW0udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBpdGVtLnV1aWQpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udXVpZCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0udXVpZCsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJysgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6aXRlbS51dWlkLCBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjcsIGlkeElEOiAwLCB0YWJJRDogdGhpcy5ScG9ydFRhYn0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3UkludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uc2VsZWN0SSA9PSAiU0VSVklDRS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5uZXdTZXJ2aWNlSW50ZXJmYWNlKCkNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1IRUFMVEgtQ0hBTk5FTC1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRFbGVtZW50UEhNSGVhbHRoJywgew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldE5hbWVQSE1IZWFsdGgsIHBhdGg6ICcnLCBpbnB1dDogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnQsIHppbmRleDogMTAsIGljb246Im1kaS1jbGlwYm9hcmQtb3V0bGluZSIsIHZhbGlkYXRpb246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFtdDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5IZWFsdGhDaGFubmVsX3N0cikNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5QSE1fc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBsYXRmb3JtX3N0cikNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnNlbGVjdEkgPT0gIlBITS1TVVBFUlZJU0VELUVOVElUWS1JTlRFUkZBQ0UiKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRFbGVtZW50UEhNU3VwZXJ2aXNlZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXROYW1lUEhNU3VwZXJ2aXNlZCwgcGF0aDogJycsIGlucHV0OiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLmVsZW1lbnQudG9wLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdCwgemluZGV4OiAxMCwgaWNvbjoibWRpLWNsaXBib2FyZC1vdXRsaW5lIiwgdmFsaWRhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIGNoZWNrcG9pbnQ6IFtdDQogICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBITVN1cGVydmlzZWRfc3RyKQ0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlBITV9zdHIpDQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2FkZC1lbGVtZW50JywgY29uc3RhbnQuUGxhdGZvcm1fc3RyKQ0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNXQ29tcG9uZW50cycsIHtjb21wbzoieiIsIHV1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHppbmRleDoyfSApDQogICAgICAgIH0sDQoNCiAgICAgICAgYWRkUnBvcnQoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgY29uc3QgZWRpdEl0ZW0gPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgY2xpZW50OiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gbmV3IE9iamVjdChlZGl0SXRlbSkNCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgYWRkT2JqLm5hbWUgPSAnUlBvcnRfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVsZW1lbnQucnBvcnQuc29tZShlbGUgPT4gZWxlLm5hbWUgPT09IGFkZE9iai5uYW1lKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYWRkT2JqLmlkID0gbg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0LnB1c2goYWRkT2JqKQ0KICAgICAgICAgICAgdGhpcy5ScG9ydFRhYiA9IHRoaXMuZWxlbWVudC5ycG9ydC5sZW5ndGgtMQ0KICAgICAgICAgICAgdGhpcy5jbGlja1Jwb3J0dGFiKCkNCiAgICAgICAgICAgIGlmICh0aGlzLmxvY2F0aW9uID09IDEpIHsNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY2hhbmdlTGluZS1zb21laXBTZXJ2aWNlJywgJ3Jwb3J0JywgdGhpcy5lbGVtZW50LnV1aWQsIG51bGwpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGNsaWNrUnBvcnR0YWIoKSB7DQogICAgICAgICAgICB0aGlzLmlzZGVsZXRlUlFSQyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFJRUkMgPSBbXQ0KICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVJDQyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFJDQyA9IFtdDQogICAgICAgIH0sDQogICAgICAgIGNoYW5nZVJwb3J0VGFiKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUkludGVyZmFzZSB8fCB0aGlzLnJlZlJRdWV1ZWQgIT0gbnVsbCB8fCB0aGlzLnJlZlJDbGllbnQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlT3BlbkVsZW1lbnQoKQ0KICAgICAgICAgICAgICAgIHRoaXMucmVmUkludGVyZmFzZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5yZWZSUXVldWVkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucmVmUkNsaWVudCA9IG51bGwNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8qaWYodGhpcy5lbGVtZW50LnJwb3J0Lmxlbmd0aCA+IDAgJiYgdGhpcy5sb2NhdGlvbiA9PSAxICYmIHRoaXMuUnBvcnRUYWIgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7RXZlbnRCdXMuJGVtaXQoJ2NoYW5nZUxpbmUtc29tZWlwU2VydmljZScsICdycG9ydCcsIHRoaXMuZWxlbWVudC51dWlkLCB0aGlzLlJwb3J0VGFiLCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpfSwgMzAwKTsNCiAgICAgICAgICAgIH0qLw0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVScG9ydChpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3J0YWInLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IHRoaXMuZWxlbWVudC5ycG9ydFtpZHhdLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uaW50ZXJmYWNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nKyB0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScrIHRoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnJwb3J0W2lkeF0ucXVldWVkLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZVEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLnF1ZXVlZFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgaWYoZW5kTGluZVEgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0ucXVldWVkW2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5jbGllbnQubGVuZ3RoOyBpKyspew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lRiA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmKGVuZExpbmVGICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGVuZExpbmVHID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIGlmKGVuZExpbmVHICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDRy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmNsaWVudFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uaWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lUyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrdGhpcy5lbGVtZW50LnJwb3J0W2lkeF0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5pZCkNCiAgICAgICAgICAgICAgICBpZihlbmRMaW5lUyAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ1MtJyt0aGlzLmVsZW1lbnQucnBvcnRbaWR4XS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFtpZHhdLmlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydC5zcGxpY2UoaWR4LCAxKQ0KICAgICAgICB9LA0KICAgICAgICBpc0NoZWNrUlFSQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVJRUkMgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNkZWxldGVSUVJDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFJRUkMgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUlFSQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlUlFSQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVJRUkMgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UlFSQy5mb3JFYWNoKCBpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZC5sZW5ndGg7IGkrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2ldLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZCA9IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWQuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGVsZWN0UlFSQy5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVJRUkMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UlFSQyA9IFtdDQogICAgICAgICAgICB9IA0KICAgICAgICB9LA0KICAgICAgICBvcGVuUlFSQyhpZHgpIHsNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gbnVsbA0KICAgICAgICAgICAgdGhpcy5lZGl0UlFSQy5zZWxlY3QgPSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uc2VsZWN0DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLnNlbGVjdCA9PSAiVkFSSUFCTEUtREFUQS1QUk9UT1RZUEUiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxTSVFSQyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VmFyaWFibGVEYXRhUHJvdG90eXBlDQoNCiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSwgMSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRSUVJDLmRhdGFFID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUsIHV1aWQ6IGVuZExpbmV9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uc2VsZWN0ID09ICJGSUVMRCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbFNJUVJDID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRGaWVsZA0KDQogICAgICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uZGF0YUUsIDIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0UlFSQy5kYXRhRSA9IHsgbmFtZTogdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFLCB1dWlkOiBlbmRMaW5lfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMucmVjZWl2ZUNhcGEgPSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0ucmVjZWl2ZUNhcGENCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFJRUkNJdGVtKGlkeCkgew0KICAgICAgICAgICAgdmFyIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJRUkMuZGF0YUUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFID0gdGhpcy5lZGl0UlFSQy5kYXRhRS5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmUgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJRUkMuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSA9IHRoaXMuZWRpdFJRUkMuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRSUVJDLmRhdGFFICE9IG51bGwgJiYgZW5kTGluZSA9PSB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQgJiYgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZFtpZHhdLmRhdGFFICE9IHRoaXMuZWRpdFJRUkMuZGF0YUUubmFtZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5kYXRhRSA9IHRoaXMuZWRpdFJRUkMuZGF0YUUubmFtZQ0KICAgICAgICAgICAgfSANCg0KICAgICAgICAgICAgaWYgKHRoaXMucmVmUlF1ZXVlZCA9PSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uaWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UlFSQy5kYXRhRSAhPSBudWxsICYmIHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lQ2hhbmdlID0gdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCArIDMwMCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCB0cnVlLCBlbmRMaW5lQ2hhbmdlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kTGluZUNoYW5nZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZExpbmVDaGFuZ2UrMSkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lQ2hhbmdlLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjgsIGlkeElEOiB0aGlzLnJlZlJRdWV1ZWQsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0ucXVldWVkW2lkeF0uc2VsZWN0ID0gdGhpcy5lZGl0UlFSQy5zZWxlY3QNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWRbaWR4XS5yZWNlaXZlQ2FwYSA9IHRoaXMuZWRpdFJRUkMucmVjZWl2ZUNhcGENCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUlFSQygpDQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbFJRUkMoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRSUVJDID0ge3NlbGVjdDogbnVsbCwgZGF0YUU6IG51bGwsIHJlY2VpdmVDYXBhOiBudWxsfQ0KICAgICAgICAgICAgdGhpcy5zZXRhY3RpdmVVVUlEKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJSUVJDU2VsZWN0KCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UlFSQy5zZWxlY3QgPSBudWxsDQogICAgICAgICAgICB0aGlzLmNsZWFyUlFSQygpDQogICAgICAgIH0sDQogICAgICAgIGFkZFJRUkMoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLnF1ZXVlZC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuaWQgPSBuDQogICAgICAgICAgICB2YXIgc2VyVmlld1VVSUQgPSBudWxsDQogICAgICAgICAgICBpZiggdGhpcy5lZGl0UlFSQy5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgc2VyVmlld1VVSUQgPSB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AgKyAzMDAsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRSUVJDLmRhdGFFID0gdGhpcy5lZGl0UlFSQy5kYXRhRS5uYW1lDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOnNlclZpZXdVVUlELCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06OCwgaWR4SUQ6IHRoaXMuZWRpdFJRUkMuaWQsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0UlFSQykNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5xdWV1ZWQucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5yZWZSUXVldWVkID0gbg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxSUVJDKCkNCiAgICAgICAgICAgIGlmIChzZXJWaWV3VVVJRCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIHNlclZpZXdVVUlEKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK24rJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlclZpZXdVVUlELCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZXJWaWV3VVVJRCsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRSUVJDU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nUlFSQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFJRUkMuZGF0YUUgIT0gbnVsbCAmJiB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldERldGFpbFZpZXcnLCB7dXVpZDogdGhpcy5lZGl0UlFSQy5kYXRhRS51dWlkLCBlbGVtZW50OiBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cn0gKQ0KICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWRpdFJRUkMuZGF0YUUudXVpZCt0aGlzLmxvY2F0aW9uKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnYWN0aXZlLWVsZW1lbnQnLCB0aGlzLmVkaXRSUVJDLmRhdGFFLnV1aWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc2V0UlFSQ0xpc3QoKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUlFSQyA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUlFSQyA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0UlFSQ0xpc3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lZGl0UlFSQy5zZWxlY3QgPT0gIlZBUklBQkxFLURBVEEtUFJPVE9UWVBFIikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsU0lRUkMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFZhcmlhYmxlRGF0YVByb3RvdHlwZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRSUVJDLnNlbGVjdCA9PSAiRklFTEQiKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxTSVFSQyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RmllbGQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUlFSQygpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUlFSQyA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFJRUkMuZGF0YUUgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgaXNDaGVja1JDQygpIHsNCiAgICAgICAgICAgIHRoaXMuY2xpY2tPdGhlckZpZWxkcygpDQogICAgICAgICAgICBpZiAodGhpcy5pc2RlbGV0ZVJDQyA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc2RlbGV0ZVJDQyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REZWxlY3RSQ0MgPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUkNDID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVSQ0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgaWYgKHRoaXMuaXNkZWxldGVSQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVsZWN0UkNDLmZvckVhY2goIGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50Lmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaV0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZExpbmVHID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZW5kTGluZUcgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpXS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTGluZVMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaV0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRMaW5lUyAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ1MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2ldLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnQgPSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERlbGVjdFJDQy5pbmRleE9mKGl0ZW0pIDwgMCB9KQ0KDQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzZGVsZXRlUkNDID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERlbGVjdFJDQyA9IFtdDQogICAgICAgICAgICB9IA0KICAgICAgICB9LA0KICAgICAgICBvcGVuUkNDKGlkeCkgeyANCiAgICAgICAgICAgIHRoaXMuc2VsU0lNZXRob2QgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENsaWVudFNlcnZlcg0KICAgICAgICAgICAgdGhpcy5zZWxTSUZpZWxkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRGaWVsZA0KDQogICAgICAgICAgICBpZiAoIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5vcGVyYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aCh0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uLCAzKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uID0geyBuYW1lOiB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uLCB1dWlkOiBlbmRMaW5lfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uZ2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZUcgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDRy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lRyA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZUcgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5nZXR0ZXIsIDIpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5nZXR0ZXIgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5nZXR0ZXIsIHV1aWQ6IGVuZExpbmVHfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uc2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgZW5kTGluZVMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lUyA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZVMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5zZXR0ZXIsIDIpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5zZXR0ZXIgPSB7IG5hbWU6IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5zZXR0ZXIsIHV1aWQ6IGVuZExpbmVTfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0UkNDLmNsaWVudENhcGEgPSB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uY2xpZW50Q2FwYQ0KICAgICAgICB9LA0KICAgICAgICBlZGl0UkNDSXRlbShpZHgpIHsNCiAgICAgICAgICAgIHZhciBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkKQ0KICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uID0gbnVsbA0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCAmJiBlbmRMaW5lICE9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCkNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLm9wZXJhdGlvbiA9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24ubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRMaW5lID09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uICE9IG51bGwgJiYgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLm9wZXJhdGlvbiA9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24ubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uICE9IG51bGwgJiYgZW5kTGluZSA9PSB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQgJiYgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLm9wZXJhdGlvbiAhPSB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLm5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0ub3BlcmF0aW9uID0gdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi5uYW1lDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBlbmRMaW5lRyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZUcgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJDQy5nZXR0ZXIgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmdldHRlciA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZUcgIT0gdW5kZWZpbmVkICYmIGVuZExpbmVHICE9IHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5nZXR0ZXIgPSB0aGlzLmVkaXRSQ0MuZ2V0dGVyLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZUcgPT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJDQy5nZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZCwgZmFsc2UpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmdldHRlciA9IHRoaXMuZWRpdFJDQy5nZXR0ZXIubmFtZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVkaXRSQ0MuZ2V0dGVyICE9IG51bGwgJiYgZW5kTGluZSA9PSB0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQgJiYgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmdldHRlciAhPSB0aGlzLmVkaXRSQ0MuZ2V0dGVyLm5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uZ2V0dGVyID0gdGhpcy5lZGl0UkNDLmdldHRlci5uYW1lDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBlbmRMaW5lUyA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICBpZiAoZW5kTGluZVMgIT0gdW5kZWZpbmVkICYmIHRoaXMuZWRpdFJDQy5zZXR0ZXIgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLnNldHRlciA9IG51bGwNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZVMgIT0gdW5kZWZpbmVkICYmIGVuZExpbmVTICE9IHRoaXMuZWRpdFJDQy5zZXR0ZXIudXVpZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLmlkKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQpDQogICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ1MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uaWQrJy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgdGhpcy5lZGl0UkNDLnNldHRlci51dWlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uY2xpZW50W2lkeF0uc2V0dGVyID0gdGhpcy5lZGl0UkNDLnNldHRlci5uYW1lDQogICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmVTID09IHVuZGVmaW5lZCAmJiB0aGlzLmVkaXRSQ0Muc2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCsnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5zZXR0ZXIgPSB0aGlzLmVkaXRSQ0Muc2V0dGVyLm5hbWUNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0UkNDLnNldHRlciAhPSBudWxsICYmIGVuZExpbmUgPT0gdGhpcy5lZGl0UkNDLnNldHRlci51dWlkICYmIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5zZXR0ZXIgIT0gdGhpcy5lZGl0UkNDLnNldHRlci5uYW1lKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudFtpZHhdLnNldHRlciA9IHRoaXMuZWRpdFJDQy5zZXR0ZXIubmFtZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5yZWZSQ2xpZW50ID09IHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5pZCkgew0KICAgICAgICAgICAgICAgIHZhciBlbmRMaW5lT3ByYXRpb24gPSBudWxsLCBlbmRMaW5lR2V0dGVyID0gbnVsbCwgZW5kTGluZVNldHRlciA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZU9wZW5FbGVtZW50KCkNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UkNDLm9wZXJhdGlvbiAhPSBudWxsICYmIHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGVuZExpbmVPcHJhdGlvbiA9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZA0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQodGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkKSA9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U2VydmljZUludGVyZmFjZScsIHtjb21wbzoiZHJhZyIsIHV1aWQ6IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCwgdG9wOiB0aGlzLmVsZW1lbnQudG9wICsgNDAwLCBsZWZ0OiB0aGlzLmVsZW1lbnQubGVmdCArIHRoaXMuJHNldFBvc2l0aW9uTGVmdH0gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXR6SW5kZXhWaXNpYmxlJywge3BhcmVudDpjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0ciwgdXVpZDogdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6dGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc2NpcmNsZTpmYWxzZSwgcmVmTnVtOjksIGlkeElEOiB0aGlzLnJlZlJDbGllbnQsIHRhYklEOiB0aGlzLlJwb3J0VGFifSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCBmYWxzZSwgZW5kTGluZU9wcmF0aW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmRMaW5lT3ByYXRpb24sIGlzRXhpc3QpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRSQ0MuZ2V0dGVyICE9IG51bGwgJiYgdGhpcy5lZGl0UkNDLmdldHRlci51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgZW5kTGluZUdldHRlciA9IHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZA0KICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gNDAwDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gNjAwDQogICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgIHZhciBpc0V4aXN0R2V0dGVyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudCh0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQpID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogdGhpcy5lZGl0UkNDLmdldHRlci51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AgKyB0b3AsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0R2V0dGVyID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiB0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZU9wcmF0aW9uICE9IGVuZExpbmVHZXR0ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIGZhbHNlLCBlbmRMaW5lR2V0dGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kTGluZUdldHRlciwgaXNFeGlzdEdldHRlcikNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0V4aXN0R2V0dGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMaW5lSW5mbycsIHtzdGFydDp0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIGVuZDplbmRMaW5lR2V0dGVyLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bTo5LCBpZHhJRDogdGhpcy5yZWZSQ2xpZW50LCB0YWJJRDogdGhpcy5ScG9ydFRhYn0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdFJDQy5zZXR0ZXIgIT0gbnVsbCAmJiB0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRMaW5lU2V0dGVyID0gdGhpcy5lZGl0UkNDLnNldHRlci51dWlkDQogICAgICAgICAgICAgICAgICAgIHZhciB0b3BTZXR0ZXIgPSA2MDANCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmVHZXR0ZXIgIT0gZW5kTGluZU9wcmF0aW9uICYmIGVuZExpbmVPcHJhdGlvbiAhPSBudWxsICYmIGVuZExpbmVHZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wU2V0dGVyID0gODAwDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kTGluZU9wcmF0aW9uID09IG51bGwgfHwgZW5kTGluZUdldHRlciA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3BTZXR0ZXIgPSA0MDANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdFNldHRlciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQoZW5kTGluZVNldHRlcikgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiBlbmRMaW5lU2V0dGVyLCB0b3A6IHRoaXMuZWxlbWVudC50b3AgKyB0b3BTZXR0ZXIsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0U2V0dGVyID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiBlbmRMaW5lU2V0dGVyLCBpc1Zpc2libGU6IHRydWUsIGNvbXBvOiAndmlzaWJsZScsIHN0YXJ0VVVJRDogdGhpcy5lbGVtZW50LnV1aWR9ICkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmVPcHJhdGlvbiAhPSBlbmRMaW5lU2V0dGVyICYmIGVuZExpbmVTZXR0ZXIgIT0gZW5kTGluZUdldHRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgZmFsc2UsIGVuZExpbmVTZXR0ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ25ldy1saW5lJywgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmRMaW5lU2V0dGVyLGlzRXhpc3RTZXR0ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghaXNFeGlzdFNldHRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZVNldHRlciwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06OSwgaWR4SUQ6IHRoaXMucmVmUkNsaWVudCwgdGFiSUQ6IHRoaXMuUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldE9wZW5DbG9zZVZpZXdVVUlEKGVuZExpbmVPcHJhdGlvbiwgZW5kTGluZUdldHRlciwgZW5kTGluZVNldHRlcikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnRbaWR4XS5jbGllbnRDYXBhID0gdGhpcy5lZGl0UkNDLmNsaWVudENhcGENCiAgICAgICAgICAgIHRoaXMuY2FuY2VsUkNDKCkNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsUkNDKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0UkNDID0ge29wZXJhdGlvbjogbnVsbCwgY2xpZW50Q2FwYTogbnVsbCwgZ2V0dGVyOiBudWxsLCBzZXR0ZXI6IG51bGx9DQogICAgICAgICAgICB0aGlzLnNldGFjdGl2ZVVVSUQoKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRSQ0MoKSB7DQogICAgICAgICAgICB0aGlzLmNsaWNrT3RoZXJGaWVsZHMoKQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrDQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmNsaWVudC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5pZCA9IG4NCiAgICAgICAgICAgIHZhciBlbmRMaW5lT3ByYXRpb24gPSBudWxsLCBlbmRMaW5lR2V0dGVyID0gbnVsbCwgZW5kTGluZVNldHRlciA9IG51bGwNCiAgICAgICAgICAgIGlmKCB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBlbmRMaW5lT3ByYXRpb24gPSB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQNCiAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdCA9IHRydWUNCiAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudChlbmRMaW5lT3ByYXRpb24pID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCArIDQwMCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgaXNFeGlzdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyANCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIGZhbHNlLCBlbmRMaW5lT3ByYXRpb24pDQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJytuKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZU9wcmF0aW9uLCB0cnVlLCBpc0V4aXN0KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbiA9IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24ubmFtZQ0KICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVPcHJhdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06OSwgaWR4SUQ6IHRoaXMuZWRpdFJDQy5pZCwgdGFiSUQ6IHRoaXMuUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYoIHRoaXMuZWRpdFJDQy5nZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGVuZExpbmVHZXR0ZXIgPSB0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMTEgJysgZW5kTGluZU9wcmF0aW9uKQ0KICAgICAgICAgICAgICAgIHZhciBpc1VVSURTYW1lR2V0dGVyID0gZmFsc2UsIGlzRXhpc3RHZXR0ZXIgPSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgICBpZiAoZW5kTGluZU9wcmF0aW9uICE9IHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdG9wR2V0dGVyID0gNDAwDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wR2V0dGVyID0gNjAwDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaXNVVUlEU2FtZUdldHRlciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaXNFeGlzdEdldHRlciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0RGVsZXRlT3BlbkVsZW1lbnQoZW5kTGluZUdldHRlcikgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZWRpdFNlcnZpY2VJbnRlcmZhY2UnLCB7Y29tcG86ImRyYWciLCB1dWlkOiB0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQsIHRvcDogdGhpcy5lbGVtZW50LnRvcCArIHRvcEdldHRlciwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnR9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhpc3RHZXR0ZXIgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0ekluZGV4VmlzaWJsZScsIHtwYXJlbnQ6Y29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHIsIHV1aWQ6IHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZCwgaXNWaXNpYmxlOiB0cnVlLCBjb21wbzogJ3Zpc2libGUnLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdFbGVtZW50LW9wZW4nLCBmYWxzZSwgZW5kTGluZUdldHRlcikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJytuKyctJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmVHZXR0ZXIsIGlzVVVJRFNhbWVHZXR0ZXIsIGlzRXhpc3RHZXR0ZXIpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRSQ0MuZ2V0dGVyID0gdGhpcy5lZGl0UkNDLmdldHRlci5uYW1lDQogICAgICAgICAgICAgICAgaWYgKCFpc0V4aXN0R2V0dGVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xpbmVJbmZvJywge3N0YXJ0OnRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK3RoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5pZCwgZW5kOmVuZExpbmVHZXR0ZXIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzY2lyY2xlOmZhbHNlLCByZWZOdW06OSwgaWR4SUQ6IHRoaXMuZWRpdFJDQy5pZCwgdGFiSUQ6IHRoaXMuUnBvcnRUYWJ9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCB0aGlzLmVkaXRSQ0Muc2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBlbmRMaW5lU2V0dGVyID0gdGhpcy5lZGl0UkNDLnNldHRlci51dWlkDQogICAgICAgICAgICAgICAgdmFyIGlzVVVJRFNhbWVTZXR0ZXIgPSBmYWxzZSwgaXNFeGlzdFNldHRlciA9IHVuZGVmaW5lZA0KICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lR2V0dGVyICE9IHRoaXMuZWRpdFJDQy5zZXR0ZXIudXVpZCAmJiB0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQgIT0gZW5kTGluZU9wcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciB0b3BTZXR0ZXIgPSA2MDANCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzIyICcrIGVuZExpbmVPcHJhdGlvbisgJyAvICcrIGVuZExpbmVHZXR0ZXIpDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lR2V0dGVyICE9IGVuZExpbmVPcHJhdGlvbiAmJiBlbmRMaW5lT3ByYXRpb24gIT0gbnVsbCAmJiBlbmRMaW5lR2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvcFNldHRlciA9IDgwMA0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVuZExpbmVPcHJhdGlvbiA9PSBudWxsIHx8IGVuZExpbmVHZXR0ZXIgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wU2V0dGVyID0gNDAwDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpc0V4aXN0U2V0dGVyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXREZWxldGVPcGVuRWxlbWVudCh0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQpID09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTZXJ2aWNlSW50ZXJmYWNlJywge2NvbXBvOiJkcmFnIiwgdXVpZDogdGhpcy5lZGl0UkNDLnNldHRlci51dWlkLCB0b3A6IHRoaXMuZWxlbWVudC50b3AgKyB0b3BTZXR0ZXIsIGxlZnQ6IHRoaXMuZWxlbWVudC5sZWZ0ICsgdGhpcy4kc2V0UG9zaXRpb25MZWZ0fSApDQogICAgICAgICAgICAgICAgICAgICAgICBpc0V4aXN0U2V0dGVyID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldHpJbmRleFZpc2libGUnLCB7cGFyZW50OmNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyLCB1dWlkOiB0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQsIGlzVmlzaWJsZTogdHJ1ZSwgY29tcG86ICd2aXNpYmxlJywgc3RhcnRVVUlEOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgICAgICAgICBpc1VVSURTYW1lU2V0dGVyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7IA0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgZmFsc2UsIGVuZExpbmVTZXR0ZXIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrbisnLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJyt0aGlzLmVsZW1lbnQucnBvcnRbdGhpcy5ScG9ydFRhYl0uaWQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZVNldHRlciwgaXNVVUlEU2FtZVNldHRlciwgaXNFeGlzdFNldHRlcikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5zZXR0ZXIgPSB0aGlzLmVkaXRSQ0Muc2V0dGVyLm5hbWUNCiAgICAgICAgICAgICAgICBpZiAoIWlzRXhpc3RTZXR0ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TGluZUluZm8nLCB7c3RhcnQ6dGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrdGhpcy5lbGVtZW50LnJwb3J0W3RoaXMuUnBvcnRUYWJdLmlkLCBlbmQ6ZW5kTGluZVNldHRlciwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNjaXJjbGU6ZmFsc2UsIHJlZk51bTo5LCBpZHhJRDogdGhpcy5lZGl0UkNDLmlkLCB0YWJJRDogdGhpcy5ScG9ydFRhYn0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnNldE9wZW5DbG9zZVZpZXdVVUlEKGVuZExpbmVPcHJhdGlvbiwgZW5kTGluZUdldHRlciwgZW5kTGluZVNldHRlcikNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFJDQykNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydFt0aGlzLlJwb3J0VGFiXS5jbGllbnQucHVzaChhZGRPYmopOw0KICAgICAgICAgICAgdGhpcy5yZWZSQ2xpZW50ID0gbg0KICAgICAgICAgICAgdGhpcy5jYW5jZWxSQ0MoKQ0KICAgICAgICB9LA0KICAgICAgICBzZXRPcGVuQ2xvc2VWaWV3VVVJRChvcHJhdGlvbiwgZ2V0dGVyLCBzZXR0ZXIpIHsNCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsgDQogICAgICAgICAgICAgICAgaWYgKG9wcmF0aW9uICE9IG51bGwgJiYgZ2V0dGVyID09IG51bGwgJiYgc2V0dGVyID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIG9wcmF0aW9uKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3ByYXRpb24gPT0gbnVsbCAmJiBnZXR0ZXIgIT0gbnVsbCAmJiBzZXR0ZXIgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgdHJ1ZSwgZ2V0dGVyKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3ByYXRpb24gPT0gbnVsbCAmJiBnZXR0ZXIgPT0gbnVsbCAmJiBzZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnRWxlbWVudC1vcGVuJywgdHJ1ZSwgc2V0dGVyKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3ByYXRpb24gPT0gZ2V0dGVyICYmIHNldHRlciA9PSBnZXR0ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ0VsZW1lbnQtb3BlbicsIHRydWUsIHNldHRlcikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIHNldFZpZXdVVUlEID0gbnVsbA0KICAgICAgICAgICAgICAgIGlmIChvcHJhdGlvbiAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHNldFZpZXdVVUlEID0gb3ByYXRpb24NCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdldHRlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHNldFZpZXdVVUlEID0gZ2V0dGVyDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0ZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBzZXRWaWV3VVVJRCA9IHNldHRlcg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2V0Vmlld1VVSUQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZXRWaWV3VVVJRCsxKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBzZXRSQ0NTZWxlY3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0VkaXRpbmdSQ0MgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uICE9IG51bGwgJiYgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFJDQy5vcGVyYXRpb24udXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uLnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2FjdGl2ZS1lbGVtZW50JywgdGhpcy5lZGl0UkNDLm9wZXJhdGlvbi51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFJDQ0xpc3QoKQ0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nUkNDID0gZmFsc2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSQ0MgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNldFJDQ0xpc3QoKSB7DQogICAgICAgICAgICB0aGlzLnNlbFNJTWV0aG9kID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDbGllbnRTZXJ2ZXINCiAgICAgICAgICAgIHRoaXMuc2V0YWN0aXZlVVVJRCgpDQogICAgICAgIH0sDQogICAgICAgIGNsZWFyUkNDKCkgew0KICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdSQ0MgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmVkaXRSQ0Mub3BlcmF0aW9uID0gbnVsbA0KICAgICAgICB9LA0KICAgICAgICBzZXRHZXR0ZXJTZWxlY3QoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0VkaXRpbmdHZXR0ZXIgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRSQ0MuZ2V0dGVyICE9IG51bGwgJiYgdGhpcy5lZGl0UkNDLmdldHRlci51dWlkICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXREZXRhaWxWaWV3Jywge3V1aWQ6IHRoaXMuZWRpdFJDQy5nZXR0ZXIudXVpZCwgZWxlbWVudDogY29uc3RhbnQuU2VydmljZUludGVyZmFjZV9zdHJ9ICkNCiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVkaXRSQ0MuZ2V0dGVyLnV1aWQrdGhpcy5sb2NhdGlvbikuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pDQogICAgICAgICAgICAgICAgICAgIC8vRXZlbnRCdXMuJGVtaXQoJ2FjdGl2ZS1lbGVtZW50JywgdGhpcy5lZGl0UkNDLmdldHRlci51dWlkKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnNldFBGU0NMaXN0KCkNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ0dldHRlciA9IGZhbHNlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nR2V0dGVyID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhckdldHRlcigpIHsNCiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nR2V0dGVyID0gdHJ1ZQ0KICAgICAgICAgICAgdGhpcy5lZGl0UkNDLmdldHRlciA9IG51bGwNCiAgICAgICAgfSwNCiAgICAgICAgc2V0U2V0dGVyU2VsZWN0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nU2V0dGVyID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0UkNDLnNldHRlciAhPSBudWxsICYmIHRoaXMuZWRpdFJDQy5zZXR0ZXIudXVpZCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0RGV0YWlsVmlldycsIHt1dWlkOiB0aGlzLmVkaXRSQ0Muc2V0dGVyLnV1aWQsIGVsZW1lbnQ6IGNvbnN0YW50LlNlcnZpY2VJbnRlcmZhY2Vfc3RyfSApDQogICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lZGl0UkNDLnNldHRlci51dWlkK3RoaXMubG9jYXRpb24pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAvL0V2ZW50QnVzLiRlbWl0KCdhY3RpdmUtZWxlbWVudCcsIHRoaXMuZWRpdFJDQy5zZXR0ZXIudXVpZCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zZXRQRlNDTGlzdCgpDQogICAgICAgICAgICAgICAgdGhpcy5pc0VkaXRpbmdTZXR0ZXIgPSBmYWxzZQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1NldHRlciA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJTZXR0ZXIoKSB7DQogICAgICAgICAgICB0aGlzLmlzRWRpdGluZ1NldHRlciA9IHRydWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFJDQy5zZXR0ZXIgPSBudWxsDQogICAgICAgIH0sDQoNCiAgICAgICAgbmV3U2VydmljZUludGVyZmFjZSgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkRWxlbWVudFNlcnZpY2UnLCB7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TmFtZVNlcnZpY2VJbnRlcmZhY2UsIHBhdGg6ICcnLCBpbnB1dDogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5lbGVtZW50LnRvcCwgbGVmdDogdGhpcy5lbGVtZW50LmxlZnQgKyB0aGlzLiRzZXRQb3NpdGlvbkxlZnQsIHppbmRleDogMTAsICBpY29uOiJtZGktY2xpcGJvYXJkLW91dGxpbmUiLCB2YWxpZGF0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk1hajonJywgdmVyc2lvbk1pbjonJywgbmFtZXNwYWNlOicnLCBldmVudHM6W10sIGZpZWxkczpbXSwgbWV0aG9kczpbXSwgaXNzZXJ2aWNlOiBudWxsLA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnYWRkLWVsZW1lbnQnLCBjb25zdGFudC5TZXJ2aWNlSW50ZXJmYWNlX3N0cikNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdhZGQtZWxlbWVudCcsIGNvbnN0YW50LlNlcnZpY2Vfc3RyKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U1dDb21wb25lbnRzJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjJ9ICkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0YWN0aXZlVVVJRCgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0dXVpZCcsIHt1dWlkOiB0aGlzLmVsZW1lbnQudXVpZH0gKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0U1dDb21wb25lbnRzJywge2NvbXBvOiJ6IiwgdXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgemluZGV4OjEwfSApDQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZUxpbmUoZmluZUxpbmUpIHsNCiAgICAgICAgICAgIHZhciBsaW5lbnVtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRjb25uZWN0TGluZU51bShmaW5lTGluZSkNCiAgICAgICAgICAgIGlmIChsaW5lbnVtICE9IC0xKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldENvbm5lY3Rpb25saW5lJywge3N0YXJ0bnVtOiBsaW5lbnVtfSApDQogICAgICAgICAgICAgICAgdGhpcy5kZWxldGVPcGVuRWxlbWVudCgpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0ZU9wZW5FbGVtZW50KCkgew0KICAgICAgICAgICAgLy9FdmVudEJ1cy4kZW1pdCgnZGVsZXRlLWxpbmUnLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldERlbGV0ZU9wZW5FbGVtZW50KHRoaXMuZWxlbWVudC51dWlkKSkNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlT3BlbkVsZW1udCcsIHt1dWlkOiB0aGlzLmVsZW1lbnQudXVpZCwgaXNEZWxldGVBbGw6IGZhbHNlLCBzdGFydFVVSUQ6IHRoaXMuZWxlbWVudC51dWlkfSApDQogICAgICAgIH0sDQogICAgICAgIG5ld0xpbmUoc3RhcnRMaW5lLCBkcmF3TGluZSwgZW5kTGluZSwgaXNWaWV3KSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENvbm5lY3Rpb25saW5lJywge3N0YXJ0OiBzdGFydExpbmUsIGVuZDogZW5kTGluZX0gKQ0KICAgICAgICAgICAgaWYgKGlzVmlldykgew0KICAgICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCduZXctbGluZScsIGRyYXdMaW5lLCBlbmRMaW5lKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIHZpZXdBUlhNTCgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLm5hbWUgPSB0aGlzLmVsZW1lbnQubmFtZQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHBvcnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudC5wcG9ydCkpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5ycG9ydCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50LnJwb3J0KSkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBycG9ydCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50LnBycG9ydCkpDQogICAgICAgICAgICB0aGlzLmRpYWxvZ1RleHQ9IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZUFSWE1MKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5uYW1lICE9IHRoaXMuZWRpdEFSWE1MLm5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRTV0NvbXBvbmVudHMnLCB7Y29tcG86Ik5hbWUiLCB1dWlkOnRoaXMuZWxlbWVudC51dWlkLCBuYW1lOnRoaXMuZWRpdEFSWE1MLm5hbWV9ICkNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhdGhFbGVtZW50Jywge3V1aWQ6dGhpcy5lbGVtZW50LnV1aWQsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVkaXRBUlhNTC5uYW1lfSApDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLm5hbWUgIT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdpc2ludG9FcnJvckxpc3QnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgbmFtZTp0aGlzLmVkaXRBUlhNTC5uYW1lLCBwYXRoOnRoaXMuZWxlbWVudC5wYXRofSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVsZW1lbnQubmFtZSA9IHRoaXMuZWRpdEFSWE1MLm5hbWUNCiAgICAgICAgICAgIHRoaXMuZWRpdFRhYmxlTGlzdCgpDQogICAgICAgICAgICB2YXIgZW5kTGluZSA9IG51bGwsIGNoYW5nRW5kTGluZSA9IG51bGwNCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLnBwb3J0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICBpdGVtLnF1ZXVlZC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydC5mb3JFYWNoKHBvcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQucXVldWVkLmZvckVhY2gocXVlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZS5pZCA9PSBkYXRhLmlkJiYgcXVlLmRhdGFFID09IGRhdGEuZGF0YUUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGRhdGEuZGF0YUUsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrZGF0YS5pZCsnLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZW5kZXJDYXBhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbmRlckNhcGEgPSBkYXRhLnNlbmRlckNhcGEudG9VcHBlckNhc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5zZW5kZXJDYXBhID09ICdXSUxMLVNFTkQnIHx8IGRhdGEuc2VuZGVyQ2FwYSA9PSAnV09OVC1TRU5EJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZW5kZXJDYXBhID0gbnVsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5maWVsZC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydC5mb3JFYWNoKHBvcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQuZmllbGQuZm9yRWFjaChmaWUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllLmlkID09IGRhdGEuaWQgJiYgZmllLmRhdGFFID09IGRhdGEuZGF0YUUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGRhdGEuZGF0YUUsIDIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrZGF0YS5pZCsnLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZW5kZXJDYXBhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbmRlckNhcGEgPSBkYXRhLnNlbmRlckNhcGEudG9VcHBlckNhc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5zZW5kZXJDYXBhID09ICdXSUxMLVNFTkQnIHx8IGRhdGEuc2VuZGVyQ2FwYSA9PSAnV09OVC1TRU5EJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZW5kZXJDYXBhID0gbnVsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXJ2ZXIuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnQuZm9yRWFjaChwb3J0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0LnNlcnZlci5mb3JFYWNoKHNlciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXIuaWQgPT0gZGF0YS5pZCAmJiBzZXIub3BlciA9PSBkYXRhLm9wZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aChkYXRhLm9wZXIsIDMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0U0MtJytkYXRhLmlkKyctJytpdGVtLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0JywgY2hhbmdFbmRMaW5lLCBmYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZVIgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnQuZm9yRWFjaChlbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5pbnRlcmZhY2UgPT0gaXRlbS5pbnRlcmZhY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGVSID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLm5hbWUgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3BQb3J0JywgbGlzdG5hbWU6IGl0ZW0ubmFtZSwgYmVmb3JlbmFtZTogZWxlLm5hbWV9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVSKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGl0ZW0uaW50ZXJmYWNlLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlNFUlZJQ0UtSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BQb3J0SS0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVJlY292ZXJ5UGF0aChpdGVtLmludGVyZmFjZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlBITS1SRUNPVkVSWS1BQ1RJT04tSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUG9ydEktJytpdGVtLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0JywgY2hhbmdFbmRMaW5lLCBmYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBpdGVtLnF1ZXVlZC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHBvcnQuZm9yRWFjaChlZGl0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0LnF1ZXVlZC5mb3JFYWNoKGVkaXRBID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXRBLmlkID09IGRhdGEuaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5maWVsZC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHBvcnQuZm9yRWFjaChlZGl0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0LmZpZWxkLmZvckVhY2goZWRpdEUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdEUuaWQgPT0gZGF0YS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydEZTQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpdGVtLnNlcnZlci5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHBvcnQuZm9yRWFjaChlZGl0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0LnNlcnZlci5mb3JFYWNoKGVkaXRFID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXRFLmlkID09IGRhdGEuaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEub3BlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcG9ydFNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcG9ydC5mb3JFYWNoKGVkaXQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXQuaWQgPT0gaXRlbS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5yZXNvdXJjZVJlZiAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Byb2Nlc3NyZXNvcmNlLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJvY2Vzc3Jlc29yY2UtJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucHBvcnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHBvcnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucXVldWVkLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRRU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0UVNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmZpZWxkLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRGU0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Bwb3J0RlNDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNlcnZlci5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm9wZXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHBvcnRTQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaW50ZXJmYWNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0QVJYTUwucnBvcnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGl0ZW0ucXVldWVkLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0LmZvckVhY2gocG9ydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydC5xdWV1ZWQuZm9yRWFjaChxdWUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlLmlkID09IGRhdGEuaWQgJiYgcXVlLmRhdGFFID09IGRhdGEuZGF0YUUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGRhdGEuZGF0YUUsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2VsZWN0ID0gIlZBUklBQkxFLURBVEEtUFJPVE9UWVBFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nRW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2VydmljZUludGVyZmFjZVBhdGgoZGF0YS5kYXRhRSwgMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdCA9ICJGSUVMRCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrZGF0YS5pZCsnLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpdmVDYXBhICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlY2VpdmVDYXBhID0gZGF0YS5yZWNlaXZlQ2FwYS50b1VwcGVyQ2FzZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShkYXRhLnJlY2VpdmVDYXBhID09ICdXSUxMLVJFQ0VJVkUnIHx8IGRhdGEucmVjZWl2ZUNhcGEgPT0gJ1dPTlQtUkVDRUlWRScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucmVjZWl2ZUNhcGEgPSBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpdGVtLmNsaWVudC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSGF2ZVRhYmxlQyA9IGZhbHNlLCBpc0hhdmVUYWJsZVQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJwb3J0LmZvckVhY2gocG9ydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydC5jbGllbnQuZm9yRWFjaChjbGkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpLmlkID09IGRhdGEuaWQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xpLm9wZXJhdGlvbiA9PSBkYXRhLm9wZXJhdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlQyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGkuZ2V0dGVyID09IGRhdGEuZ2V0dGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGVUID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaS5zZXR0ZXIgPT0gZGF0YS5zZXR0ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZVQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVDKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTZXJ2aWNlSW50ZXJmYWNlUGF0aChkYXRhLm9wZXJhdGlvbiwgMykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVUKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NHLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGRhdGEuZ2V0dGVyLCAyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDRy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVUKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0NTLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ1MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGRhdGEuc2V0dGVyLCAyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2xpZW50Q2FwYSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jbGllbnRDYXBhID0gZGF0YS5jbGllbnRDYXBhLnRvVXBwZXJDYXNlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighKGRhdGEuY2xpZW50Q2FwYSA9PSAnV0lMTC1DQUxMJyB8fCBkYXRhLmNsaWVudENhcGEgPT0gJ1dPTlQtQ0FMTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2xpZW50Q2FwYSA9IG51bGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZUkgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnQuZm9yRWFjaChlbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZS5pbnRlcmZhY2UgPT0gaXRlbS5pbnRlcmZhY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGVJID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLm5hbWUgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3JQb3J0JywgbGlzdG5hbWU6IGl0ZW0ubmFtZSwgYmVmb3JlbmFtZTogZWxlLm5hbWV9ICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGVJKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGl0ZW0uaW50ZXJmYWNlLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlNFUlZJQ0UtSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nK2l0ZW0uaWQsIHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITUhlYWx0aFBhdGgoaXRlbS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0SSA9ICJQSE0tSEVBTFRILUNIQU5ORUwtSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9SUG9ydEktJytpdGVtLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0JywgY2hhbmdFbmRMaW5lLCBmYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFBITVN1cGVydmlzZWRQYXRoKGl0ZW0uaW50ZXJmYWNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2VsZWN0SSA9ICJQSE0tU1VQRVJWSVNFRC1FTlRJVFktSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBpdGVtLnF1ZXVlZC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucnBvcnQuZm9yRWFjaChlZGl0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0LnF1ZXVlZC5mb3JFYWNoKGVkaXRBID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXRBLmlkID09IGRhdGEuaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YUUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0UVJDLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGllbnQuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0LmZvckVhY2goZWRpdCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdC5jbGllbnQuZm9yRWFjaChlZGl0RSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGl0RS5pZCA9PSBkYXRhLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0hhdmVUYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm9wZXJhdGlvbiAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mZ2NvbnRleHQtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3Jwb3J0Q0MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmdldHRlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mZ3RhcmdldC0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ0ctJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNldHRlciAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9mZ3RhcmdldC0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQ1MtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0LmZvckVhY2goZWRpdCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdC5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmludGVyZmFjZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1JQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5ycG9ydC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5xdWV1ZWQuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydFFSQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRRUkMtJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xpZW50LmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEub3BlcmF0aW9uICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2ZnY29udGV4dC0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcnBvcnRDQy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZ2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2ZndGFyZ2V0LScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDRy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGVyICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL2ZndGFyZ2V0LScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9ycG9ydENDUy0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaW50ZXJmYWNlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUlBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0QVJYTUwucHJwb3J0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcnBvcnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5wcm92aWRlLmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydC5mb3JFYWNoKHBvcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQucHJvdmlkZS5mb3JFYWNoKHBybyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm8uaWQgPT0gZGF0YS5pZCAmJiBwcm8uZGF0YUUgPT0gZGF0YS5kYXRhRSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDaGFuZ2VFbmRMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdFbmRMaW5lID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRQRVJLZXlWYWx1ZURJUGF0aChkYXRhLmRhdGFFKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJytkYXRhLmlkKyctJytpdGVtLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGVSID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydC5mb3JFYWNoKGVsZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLmlkID09IGl0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLmludGVyZmFjZSA9PSBpdGVtLmludGVyZmFjZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZVIgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLm5hbWUgIT0gaXRlbS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlUGF0aEVsZW1lbnQnLCB7dXVpZDp0aGlzLmVsZW1lbnQudXVpZCwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTmFtZTogJ3ByUG9ydCcsIGxpc3RuYW1lOiBpdGVtLm5hbWUsIGJlZm9yZW5hbWU6IGVsZS5uYW1lfSApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlUikgew0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZExpbmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ0VuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFNlcnZpY2VJbnRlcmZhY2VQYXRoKGl0ZW0uaW50ZXJmYWNlLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nRW5kTGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlNFUlZJQ0UtSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJytpdGVtLmlkLCB0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydCcsIGNoYW5nRW5kTGluZSwgZmFsc2UpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nRW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSRmlsZVByb3h5UGF0aChpdGVtLmludGVyZmFjZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdFbmRMaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlBFUlNJU1RFTkNZLUZJTEUtUFJPWFktSU5URVJGQUNFIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nRW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0UEVSS2V5VmFsdWVESVBhdGgoaXRlbS5pbnRlcmZhY2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ0VuZExpbmUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RJID0gIlBFUlNJU1RFTkNZLUtFWS1WQUxVRS1EQVRBQkFTRS1JTlRFUkZBQ0UiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScraXRlbS5pZCwgdGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnQnLCBjaGFuZ0VuZExpbmUsIGZhbHNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJvdmlkZS5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHJwb3J0LmZvckVhY2goZWRpdCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdC5wcm92aWRlLmZvckVhY2goZWRpdEEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdEEuaWQgPT0gZGF0YS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhRSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9wcnBvcnR0YWItJytkYXRhLmlkKyctJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHJwb3J0LmZvckVhY2goZWRpdCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdC5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmludGVyZmFjZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL1BSUG9ydEktJytpdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUxpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBycG9ydC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHJvdmlkZS5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGFFICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Q2hhbmdlRW5kTGluZSh0aGlzLmVsZW1lbnQudXVpZCsnL3BycG9ydHRhYi0nK2RhdGEuaWQrJy0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvcHJwb3J0dGFiLScrZGF0YS5pZCsnLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pbnRlcmZhY2UgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENoYW5nZUVuZExpbmUodGhpcy5lbGVtZW50LnV1aWQrJy9QUlBvcnRJLScraXRlbS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kTGluZSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMaW5lKHRoaXMuZWxlbWVudC51dWlkKycvUFJQb3J0SS0nK2l0ZW0uaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVkaXRBUlhNTC5wcG9ydCkpDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdEFSWE1MLnJwb3J0KSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcnBvcnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdEFSWE1MLnBycG9ydCkpDQogICAgICAgICAgICB0aGlzLmNhbmNlbEFSWE1MKCkNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdFRhYmxlTGlzdCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRBUlhNTC5wcG9ydC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBwb3J0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpc0hhdmVUYWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBwb3J0LmZvckVhY2goZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pZCA9PSBpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIYXZlVGFibGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGlmICghaXNIYXZlVGFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncHRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogaXRlbS5uYW1lLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcG9ydC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidwdGFiJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJOYW1lOiBpdGVtLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0QVJYTUwucnBvcnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5ycG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5ycG9ydC5mb3JFYWNoKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaWQgPT0gaXRlbS5pZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSGF2ZVRhYmxlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGF2ZVRhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3J0YWInLCBkZWxldGVUYWI6IHRydWUsIHRhYk5hbWU6IGl0ZW0ubmFtZSwgcGF0aDogdGhpcy5lbGVtZW50LnBhdGgsIG5hbWU6IHRoaXMuZWxlbWVudC5uYW1lfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQucnBvcnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucnBvcnQuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVsZXRlUmVmVGFibGUnLCB7ZGVsZXRlTmFtZToncnRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogaXRlbS5uYW1lLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdEFSWE1MLnBycG9ydC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBycG9ydC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYXZlVGFibGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcnBvcnQuZm9yRWFjaChkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmlkID09IGl0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVUYWJsZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0hhdmVUYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkZWxldGVSZWZUYWJsZScsIHtkZWxldGVOYW1lOidwcnRhYicsIGRlbGV0ZVRhYjogdHJ1ZSwgdGFiTmFtZTogaXRlbS5uYW1lLCBwYXRoOiB0aGlzLmVsZW1lbnQucGF0aCwgbmFtZTogdGhpcy5lbGVtZW50Lm5hbWV9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5wcnBvcnQubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJwb3J0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlbGV0ZVJlZlRhYmxlJywge2RlbGV0ZU5hbWU6J3BydGFiJywgZGVsZXRlVGFiOiB0cnVlLCB0YWJOYW1lOiBpdGVtLm5hbWUsIHBhdGg6IHRoaXMuZWxlbWVudC5wYXRoLCBuYW1lOiB0aGlzLmVsZW1lbnQubmFtZX0pDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0sDQogICAgICAgIGNhbmNlbEFSWE1MKCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwgPSB7bmFtZTonJywgcHBvcnQ6IFtdLCBycG9ydDogW10sIHBycG9ydDogW119DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UHBvcnQgPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgZmllbGQ6IFtdLCBzZXJ2ZXI6IFtdLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UnBvcnQgPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgY2xpZW50OiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFBScG9ydCA9IHtuYW1lOiAnJywgc2VsZWN0STogbnVsbCwgaW50ZXJmYWNlOiBudWxsLCBwcm92aWRlOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFFTZW5kZXIgPSB7ZGF0YUU6IG51bGwsIHNlbmRlckNhcGE6bnVsbCwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEZpZWxkID0ge2RhdGFFOiBudWxsLCBzZW5kZXJDYXBhOm51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRTZXJ2ZXIgPSB7b3BlcjogbnVsbCwgaWQ6ICcnfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFByb3ZpZGVkID0ge2RhdGFFOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UVJlY2VpdmVyID0ge3NlbGVjdDogbnVsbCwgZGF0YUU6IG51bGwsIHJlY2VpdmVDYXBhOm51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRDbGllbnQgPSB7b3BlcmF0aW9uOiBudWxsLCBjbGllbnRDYXBhOm51bGwsIGdldHRlcjogbnVsbCwgc2V0dGVyOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICB0aGlzLmRpYWxvZ1RleHQgPSBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0UHBvcnQoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UHBvcnQgPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgZmllbGQ6IFtdLCBzZXJ2ZXI6IFtdLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRUZXh0UHBvcnQubmFtZSA9ICdQUG9ydF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLnBwb3J0LnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFBwb3J0LmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0UHBvcnQpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcG9ydC5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFBwb3J0KGlkeCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHBvcnQuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0UFJwb3J0KCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFBScG9ydCA9IHtuYW1lOiAnJywgc2VsZWN0STogbnVsbCwgaW50ZXJmYWNlOiBudWxsLCBwcm92aWRlOiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFBScG9ydC5uYW1lID0gJ1BSUG9ydF8nICsgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLnBycG9ydC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRQUnBvcnQuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRQUnBvcnQpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcnBvcnQucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRQUnBvcnQoaWR4KSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcnBvcnQuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0UnBvcnQoKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0UnBvcnQgPSB7bmFtZTogJycsIHNlbGVjdEk6IG51bGwsIGludGVyZmFjZTogbnVsbCwgcXVldWVkOiBbXSwgY2xpZW50OiBbXSwgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFJwb3J0Lm5hbWUgPSAnUlBvcnRfJyArIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVkaXRBUlhNTC5ycG9ydC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRScG9ydC5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dFJwb3J0KQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucnBvcnQucHVzaChhZGRPYmopOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldFRleHRScG9ydChpZHgpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0LnNwbGljZShpZHgsMSkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3VGV4dFFTZW5kZXIoaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFFTZW5kZXIgPSB7ZGF0YUU6IG51bGwsIHNlbmRlckNhcGE6IG51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLnBwb3J0W2lkeFBdLnF1ZXVlZC5zb21lKGl0ZW0gPT4gaXRlbS5pZCA9PT0gbikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRRU2VuZGVyLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0UVNlbmRlcikNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBwb3J0W2lkeFBdLnF1ZXVlZC5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFFTZW5kZXIoaWR4LCBpZHhQKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcG9ydFtpZHhQXS5xdWV1ZWQuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgICAgICBuZXdUZXh0RmllbGQoaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dEZpZWxkID0ge2RhdGFFOiBudWxsLCBzZW5kZXJDYXBhOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwucHBvcnRbaWR4UF0uZmllbGQuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0RmllbGQuaWQgPSBuDQoNCiAgICAgICAgICAgIGNvbnN0IGFkZE9iaiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFRleHRGaWVsZCkNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBwb3J0W2lkeFBdLmZpZWxkLnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0RmllbGQoaWR4LCBpZHhQKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcG9ydFtpZHhQXS5maWVsZC5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRTZXJ2ZXIoaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFNlcnZlciA9IHtvcGVyOiBudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwucHBvcnRbaWR4UF0uc2VydmVyLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFNlcnZlci5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dFNlcnZlcikNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBwb3J0W2lkeFBdLnNlcnZlci5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFNlcnZlcihpZHgsIGlkeFApIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnBwb3J0W2lkeFBdLnNlcnZlci5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRRUmVjZWl2ZXIoaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFFSZWNlaXZlciA9IHtzZWxlY3Q6IG51bGwsIGRhdGFFOiBudWxsLCByZWNlaXZlQ2FwYTpudWxsLCBpZDogJyd9DQogICAgICAgICAgICBsZXQgcmVzID0gdHJ1ZSwgbiA9IDANCiAgICAgICAgICAgIHdoaWxlIChyZXMpIHsNCiAgICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgICAgcmVzID0gdGhpcy5lZGl0QVJYTUwucnBvcnRbaWR4UF0ucXVldWVkLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFFSZWNlaXZlci5pZCA9IG4NCg0KICAgICAgICAgICAgY29uc3QgYWRkT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0VGV4dFFSZWNlaXZlcikNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0W2lkeFBdLnF1ZXVlZC5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFFSZWNlaXZlcihpZHgsIGlkeFApIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdEFSWE1MLnJwb3J0W2lkeFBdLnF1ZXVlZC5zcGxpY2UoaWR4LDEpDQogICAgICAgIH0sDQogICAgICAgIG5ld1RleHRDbGllbnQoaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dENsaWVudCA9IHtvcGVyYXRpb246IG51bGwsIGNsaWVudENhcGE6bnVsbCwgZ2V0dGVyOiBudWxsLCBzZXR0ZXI6IG51bGwsIGlkOiAnJ30NCiAgICAgICAgICAgIGxldCByZXMgPSB0cnVlLCBuID0gMA0KICAgICAgICAgICAgd2hpbGUgKHJlcykgew0KICAgICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgICAgICByZXMgPSB0aGlzLmVkaXRBUlhNTC5ycG9ydFtpZHhQXS5jbGllbnQuc29tZShpdGVtID0+IGl0ZW0uaWQgPT09IG4pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRUZXh0Q2xpZW50LmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0Q2xpZW50KQ0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucnBvcnRbaWR4UF0uY2xpZW50LnB1c2goYWRkT2JqKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRUZXh0Q2xpZW50KGlkeCwgaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucnBvcnRbaWR4UF0uY2xpZW50LnNwbGljZShpZHgsMSkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3VGV4dFByb3ZpZGVkKGlkeFApIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdFRleHRQcm92aWRlZCA9IHtkYXRhRTogbnVsbCwgaWQ6ICcnfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IHRydWUsIG4gPSAwDQogICAgICAgICAgICB3aGlsZSAocmVzKSB7DQogICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZWRpdEFSWE1MLnBycG9ydFtpZHhQXS5wcm92aWRlLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBuKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0VGV4dFByb3ZpZGVkLmlkID0gbg0KDQogICAgICAgICAgICBjb25zdCBhZGRPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRUZXh0UHJvdmlkZWQpDQogICAgICAgICAgICB0aGlzLmVkaXRBUlhNTC5wcnBvcnRbaWR4UF0ucHJvdmlkZS5wdXNoKGFkZE9iaik7DQogICAgICAgIH0sDQogICAgICAgIGRlbGV0VGV4dFByb3ZpZGVkKGlkeCwgaWR4UCkgew0KICAgICAgICAgICAgdGhpcy5lZGl0QVJYTUwucHJwb3J0W2lkeFBdLnByb3ZpZGUuc3BsaWNlKGlkeCwxKQ0KICAgICAgICB9LA0KICAgIH0sDQp9DQo="},{"version":3,"sources":["SWComponents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA43BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SWComponents.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div :id=\"element.uuid\">\r\n        <v-container>\r\n            <v-tooltip bottom color=\"success\" :disabled=\"isTooltip\" z-index=\"10\">\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-card outlined :color=\"minimaptoolbar ? null : colorToolbar\" v-bind=\"attrs\" v-on=\"on\">\r\n                        <v-toolbar v-if=\"!isDatailView\" :color=colorToolbar dark hide-on-scroll height=\"30px\" class=\"drag-handle\">\r\n                            <v-hover v-if=\"minimaptoolbar\" v-slot=\"{ hover }\">\r\n                                <v-btn icon @click=\"showSWComponent\">\r\n                                    <v-icon>{{ iselementOpenClose ? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                </v-btn>\r\n                            </v-hover>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click.stop=\"dialogPath=true\">\r\n                                <v-icon> mdi-routes</v-icon>\r\n                            </v-btn>\r\n                            <dialogPathSetting v-model=\"dialogPath\" :path=\"element.path\" @submit=\"submitDialog\"/>\r\n                            <v-toolbar-title>SW Component Type</v-toolbar-title>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn v-if=\"minimaptoolbar\" icon @click=\"viewARXML\">\r\n                                <v-icon> mdi-format-text</v-icon>\r\n                            </v-btn>\r\n                        </v-toolbar>\r\n                        <v-toolbar v-else hide-on-scroll dense flat>\r\n                            <v-toolbar-title>SW Component Type</v-toolbar-title>\r\n                        </v-toolbar>\r\n                        <v-card-text v-show=\"iselementOpenClose || isDatailView\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        @input='inputSWComponentName' @click=\"clickOtherFields()\" outlined dense></v-text-field>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/pport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showPPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isPPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    P Port Prototype\r\n                                    <v-btn v-if=\"isPPortOpenClose\" @click=\"addPport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-show=\"isPPortOpenClose\">\r\n                                    <v-tabs v-model='PportTab' height=\"30px\" show-arrows @change=\"changePportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.pport\" :key=\"idx\" @click=\"clickPporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deletePport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"PportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.pport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputPportName(tab.name)\" @click=\"clickPportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectPInterfaceList\" @change=\"inputSelectPInterf\" @click=\"[clickOtherFields(),setactiveUUID()]\" clearable @click:clear='clearPInterface()' label=\"Select Provided Interface\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setPInterfaceSelect()\" :style=\"refPInterfase ? 'height: 43px;border:solid red 2px' : ''\" \r\n                                                                         clearable @click:clear='clearPInterface()' label=\"Interface TReference\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/PPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setPInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selPInterface\" :key=\"i\" link @click=\"setPInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newPInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/pportQSC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPQSC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPQSCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Queued Sender Com Spec\r\n                                                            <v-btn @click=\"isCheckPQSC\" text x-small color=\"indigo\" v-if=\"isPQSCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPQSCOpenClose && isdeletePQSC\" @click=\"deletePQSC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPQSCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPQSC\" :headers=\"headerPQSC\" :items=\"tab.queued\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeletePQSC\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePQSC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refPQueued === item.id ? 'red' : null \" @click=\"rowPQueuedClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openPQSC(num)\" @cancel=\"cancelPQSC\" @save=\"editPQSCItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPQSC.dataE' label='Data Element Reference' :items='selSIEvent' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPQSC\" clearable @click=\"setPQSCSelect()\" \r\n                                                                                            @click:clear='clearPQSC' @blur=\"isEditingPQSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPQSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPQSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelPQSC\" @save=\"addPQSC()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPQSC.dataE' label='Data Element Reference' :items='selSIEvent' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPQSC\" clearable @click=\"setPQSCSelect()\" \r\n                                                                                            @click:clear='clearPQSC' @blur=\"isEditingPQSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPQSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPQSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/pportFSC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPFSC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPFSCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Field Sender Com Specs\r\n                                                            <v-btn @click=\"isCheckPFSC\" text x-small color=\"indigo\" v-if=\"isPFSCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPFSCOpenClose && isdeletePFSC\" @click=\"deletePFSC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPFSCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPFSC\" :headers=\"headerPFSC\" :items=\"tab.field\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeletePFSC\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePFSC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refPFieldS === item.id ? 'red' : null \" @click=\"rowPFieldSClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openPFSC(num)\" @cancel=\"cancelPFSC\" @save=\"editPFSCItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPFSC.dataE' label='Data Element Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPFSC\" clearable @click=\"setPFSCSelect()\" \r\n                                                                                            @click:clear='clearPFSC' @blur=\"isEditingPFSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"clearPFSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='clearPFSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelPFSC\" @save=\"addPFSC()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPFSC.dataE' label='Data Element Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPFSC\" clearable @click=\"setPFSCSelect()\" \r\n                                                                                            @click:clear='clearPFSC' @blur=\"isEditingPFSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editPFSC.senderCapa\" :items=\"selectSenderCapa\" clearable @click:clear='editPFSC.senderCapa = null' label=\"Sender Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/pportSC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showSC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isSCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Server Com Specs\r\n                                                            <v-btn @click=\"isCheckSC\" text x-small color=\"indigo\" v-if=\"isSCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isSCOpenClose && isdeleteSC\" @click=\"deleteSC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isSCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectSC\" :headers=\"headerSC\" :items=\"tab.server\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeleteSC\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeleteSC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refPServerC === item.id ? 'red' : null \" @click=\"rowPServerCClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openSC(num)\" @cancel=\"cancelSC\" @save=\"editSCItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editSC.oper' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingSC\" clearable @click=\"setSCSelect()\" \r\n                                                                                            @click:clear='clearSC' @blur=\"isEditingSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelSC\" @save=\"addSC()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editSC.oper' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingSC\" clearable @click=\"setSCSelect()\" \r\n                                                                                            @click:clear='clearSC' @blur=\"isEditingSC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/prport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showPRPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isPRPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    PR Port Prototype\r\n                                    <v-btn v-if=\"isPRPortOpenClose\" @click=\"addPRport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-show=\"isPRPortOpenClose\">\r\n                                    <v-tabs v-model='PRportTab' height=\"30px\" show-arrows @change=\"changePRportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.prport\" :key=\"idx\" @click=\"clickPRporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deletePRport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn></v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"PRportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.prport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputPRportName(tab.name)\" @click=\"clickPRportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectPRInterfaceList\" @change=\"inputSelectPRInterf\" clearable @click:clear='clearPRInterface()' label=\"Select Provided Required Interface\" @click=\"[clickOtherFields(),setactiveUUID()]\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setPRInterfaceSelect()\" :style=\"refPRInterfase ? 'height: 43px;border:solid red 2px' : ''\" \r\n                                                                         clearable @click:clear='clearPRInterface()' label=\"Interface TReference\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/PRPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setPRInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selPRInterface\" :key=\"i\" link @click=\"setPRInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newPRInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/prporttab-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showPRProvide\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isPRProvideOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Provided Com Specs\r\n                                                            <v-btn @click=\"isCheckPRProvide\" text x-small color=\"indigo\" v-if=\"isPRProvideOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isPRProvideOpenClose && isdeletePRProvide\" @click=\"deletePRProvide\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isPRProvideOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectPRProvide\" :headers=\"headerPRProvide\" :items=\"tab.provide\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeletePRProvide\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeletePRProvide\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refPRProvided === item.id ? 'red' : null \" @click=\"rowPRProvidedClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openPRProvide(num)\" @cancel=\"cancelPRProvide\" @save=\"editPRProvideItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPRProvide.dataE' label='Data Element Reference' :items='selPerData' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPRProvide\" clearable @click=\"setPRProvideSelect()\" \r\n                                                                                            @click:clear='clearPRProvide' @blur=\"isEditingPRProvide=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelPRProvide\" @save=\"addPRProvide()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editPRProvide.dataE' label='Data Element Reference' :items='selPerData' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingPRProvide\" clearable @click=\"setPRProvideSelect()\" \r\n                                                                                            @click:clear='clearPRProvide' @blur=\"isEditingPRProvide=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                            <v-card outlined class=\"mx-auto\">\r\n                                <div class=\"subtitle-2\" :id=\"element.uuid+'/rport'\" style=\"height:20px\">\r\n                                    <v-hover v-slot=\"{ hover }\">\r\n                                        <v-btn text @click=\"showRPort\" x-small color=\"indigo\">\r\n                                            <v-icon>{{ isRPortOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                        </v-btn>\r\n                                    </v-hover>\r\n                                    R Port Prototype\r\n                                    <v-btn v-if=\"isRPortOpenClose\" @click=\"addRport()\" text x-small color=\"indigo\">\r\n                                        <v-icon>mdi-plus</v-icon>\r\n                                    </v-btn>\r\n                                </div>\r\n                                <v-card-text v-if=\"isRPortOpenClose\">  \r\n                                    <v-tabs v-model='RportTab' height=\"30px\" show-arrows @change=\"changeRportTab()\">\r\n                                        <v-tab v-for=\"(tab, idx) in element.rport\" :key=\"idx\" @click=\"clickRporttab()\"> \r\n                                            {{tab.name}}\r\n                                            <v-btn text x-small @click=\"deleteRport(idx)\"><v-icon x-small>mdi-close</v-icon></v-btn>\r\n                                        </v-tab>\r\n                                    </v-tabs>\r\n                                    <v-tabs-items v-model=\"RportTab\">\r\n                                        <v-tab-item v-for=\"(tab, idx) in element.rport\" :key=\"idx\">\r\n                                            <v-card flat>\r\n                                                <v-card-text>\r\n                                                    <v-text-field v-model=\"tab.name\" :rules=\"rules.name\" label=\"Name\" @input=\"inputRportName(tab.name)\" @click=\"clickRportName(tab.name)\" placeholder=\"String\" style=\"height: 45px;\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                    <v-select v-model=\"tab.selectI\" :items=\"selectRInterfaceList\" @change=\"inputSelectRInterf\" clearable @click:clear='clearRInterface()' label=\"Select Required Interface\" @click=\"[clickOtherFields(),setactiveUUID()]\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                    <v-row>\r\n                                                        <v-col cols=\"10\">\r\n                                                            <v-text-field v-model=\"tab.interface\" readonly @click=\"setRInterfaceSelect()\" :style=\"refRInterfase ? 'height: 43px;border:solid red 2px' : ''\" \r\n                                                                         clearable @click:clear='clearRInterface()' label=\"Interface TReference\" outlined dense class=\"lable-placeholer-color\"></v-text-field>\r\n                                                        </v-col>\r\n                                                        <v-col cols=\"2\">\r\n                                                            <v-menu>\r\n                                                                <template v-slot:activator=\"{ on, attrs }\">\r\n                                                                    <v-btn color=\"deep-purple accent-4\" :id=\"element.uuid+'/RPortI-'+tab.id\" icon v-bind=\"attrs\" v-on=\"on\" @click=\"setRInterfaceList()\">\r\n                                                                        <v-icon>mdi-menu-down-outline</v-icon>\r\n                                                                    </v-btn>\r\n                                                                </template>\r\n                                                                <v-list v-if=\"tab.selectI != null\">\r\n                                                                    <v-list-item v-for=\"(item, i) in selRInterface\" :key=\"i\" link @click=\"setRInterface(item)\">\r\n                                                                        <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                                                                    </v-list-item>\r\n                                                                    <v-btn outlined color=\"indigo\" dense text small block @click=\"newRInterface\" >\r\n                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                    </v-btn>\r\n                                                                </v-list>\r\n                                                            </v-menu>\r\n                                                        </v-col>\r\n                                                    </v-row>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/rportQRC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showRQRC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isRQRCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Queued Receiver Com Spec\r\n                                                            <v-btn @click=\"isCheckRQRC\" text x-small color=\"indigo\" v-if=\"isRQRCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isRQRCOpenClose && isdeleteRQRC\" @click=\"deleteRQRC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isRQRCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectRQRC\" :headers=\"headerRQRC\" :items=\"tab.queued\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeleteRQRC\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeleteRQRC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refRQueued === item.id ? 'red' : null \" @click=\"rowRQueuedClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openRQRC(num)\" @cancel=\"cancelRQRC\" @save=\"editRQRCItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-select v-model=\"editRQRC.select\" :items=\"selectRQRC\" clearable @click:clear='clearRQRCSelect()' label=\"Data Element\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-if=\"editRQRC.select != null\" v-model='editRQRC.dataE' label='Data Element Reference' :items='selSIQRC' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRQRC\" clearable @click=\"setRQRCSelect()\" \r\n                                                                                            @click:clear='clearRQRC' @blur=\"isEditingRQRC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRQRC.receiveCapa\" :items=\"selectReceiverCapa\" clearable @click:clear='editRQRC.receiveCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelRQRC\" @save=\"addRQRC()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-select v-model=\"editRQRC.select\" :items=\"selectRQRC\" clearable @click:clear='clearRQRCSelect' label=\"Data Element\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-if=\"editRQRC.select != null\" v-model='editRQRC.dataE' label='Data Element Reference' :items='selSIQRC' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRQRC\" clearable @click=\"setRQRCSelect()\" \r\n                                                                                            @click:clear='clearRQRC' @blur=\"isEditingRQRC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRQRC.receiveCapa\" :items=\"selectReceiverCapa\" clearable @click:clear='editRQRC.receiveCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                    <v-card outlined class=\"mx-auto\">\r\n                                                        <div class=\"subtitle-2\" style=\"height:20px\" :id=\"element.uuid+'/rportCC-'+tab.id\">\r\n                                                            <v-hover v-slot=\"{ hover }\">\r\n                                                                <v-btn text @click=\"showRCC\" x-small color=\"indigo\">\r\n                                                                    <v-icon>{{ isRCCOpenClose? (hover? 'mdi-chevron-double-left' :'mdi-chevron-double-right') : (hover? 'mdi-chevron-double-right' :'mdi-chevron-double-left')}}</v-icon>\r\n                                                                </v-btn>\r\n                                                            </v-hover>\r\n                                                            Client Com Spec\r\n                                                            <v-btn @click=\"isCheckRCC\" text x-small color=\"indigo\" v-if=\"isRCCOpenClose\">\r\n                                                                <v-icon>mdi-check</v-icon>\r\n                                                            </v-btn>\r\n                                                            <v-btn v-if=\"isRCCOpenClose && isdeleteRCC\" @click=\"deleteRCC\" text x-small color=\"indigo\">\r\n                                                                <v-icon>mdi-minus</v-icon>\r\n                                                            </v-btn>\r\n                                                        </div>\r\n                                                        <v-card-text v-show=\"isRCCOpenClose\">\r\n                                                            <v-data-table v-model=\"selectDelectRCC\" :headers=\"headerRCC\" :items=\"tab.client\" :items-per-page='$setNumTableList'\r\n                                                                    :show-select=\"isdeleteRCC\" item-key=\"id\" height=\"140px\" dense hide-default-footer >\r\n                                                                <template v-slot:item.data-table-select=\"{ isSelected, select }\">\r\n                                                                    <v-simple-checkbox color=\"green\" :value=\"isSelected\" :ripple=\"false\" @input=\"select($event)\"></v-simple-checkbox>\r\n                                                                </template>\r\n                                                                <template v-if=\"!isdeleteRCC\" v-slot:body=\"{ items, headers }\">\r\n                                                                    <tbody>\r\n                                                                        <tr v-for=\"(item,num) in items\" :key=\"num\">\r\n                                                                            <td v-for=\"(header,key) in headers\" :key=\"key\">\r\n                                                                                <v-icon v-if=\"header.value == 'refView'\" class=\"refView-tableItem\" :color=\"refRClient === item.id ? 'red' : null \" @click=\"rowRClientClick(num)\">mdi-pencil</v-icon>\r\n                                                                                <v-edit-dialog v-if=\"header.value != 'refView'\" persistent @open=\"openRCC(num)\" @cancel=\"cancelRCC\" @save=\"editRCCItem(num)\" large >\r\n                                                                                    {{item[header.value]}}\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editRCC.operation' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRCC\" clearable @click=\"setRCCSelect()\" \r\n                                                                                            @click:clear='clearRCC' @blur=\"isEditingRCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRCC.clientCapa\" :items=\"selectClientCapa\" clearable @click:clear='editRCC.clientCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-model='editRCC.getter' label='Getter Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingGetter\" clearable @click=\"setGetterSelect()\" \r\n                                                                                            @click:clear='clearGetter' @blur=\"isEditingGetter=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-autocomplete v-model='editRCC.setter' label='Setter Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingSetter\" clearable @click=\"setSetterSelect()\" \r\n                                                                                            @click:clear='clearSetter' @blur=\"isEditingSetter=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </td>\r\n                                                                        </tr>\r\n                                                                        <tr>\r\n                                                                            <th colspan=\"3\">\r\n                                                                                <v-edit-dialog  large persistent @open=\"clickOtherFields()\" @cancel=\"cancelRCC\" @save=\"addRCC()\"> \r\n                                                                                    <v-btn outlined color=\"indigo\" dense text small block width=\"270px\" >\r\n                                                                                        <v-icon >mdi-plus</v-icon>New Item\r\n                                                                                    </v-btn>\r\n                                                                                    <template v-slot:input>\r\n                                                                                        <br>\r\n                                                                                        <v-autocomplete v-model='editRCC.operation' label='Data Element Reference' :items='selSIMethod' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingRCC\" clearable @click=\"setRCCSelect()\" \r\n                                                                                            @click:clear='clearRCC' @blur=\"isEditingRCC=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-select v-model=\"editRCC.clientCapa\" :items=\"selectClientCapa\" clearable @click:clear='editRCC.clientCapa = null' label=\"Receiver Capability\" @click=\"setactiveUUID\" outlined dense style=\"height: 45px;\"></v-select>\r\n                                                                                        <v-autocomplete v-model='editRCC.getter' label='Getter Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingGetter\" clearable @click=\"setGetterSelect()\" \r\n                                                                                            @click:clear='clearGetter' @blur=\"isEditingGetter=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                        <v-autocomplete v-model='editRCC.setter' label='Setter Reference' :items='selSIField' item-text='name' item-value=\"name\" class=\"lable-placeholer-color\"\r\n                                                                                            return-object :readonly=\"!isEditingSetter\" clearable @click=\"setSetterSelect()\" \r\n                                                                                            @click:clear='clearSetter' @blur=\"isEditingSetter=true\" outlined dense style=\"height: 45px;\">\r\n                                                                                        </v-autocomplete>\r\n                                                                                    </template>\r\n                                                                                </v-edit-dialog>\r\n                                                                            </th>\r\n                                                                        </tr>\r\n                                                                    </tbody>\r\n                                                                </template>\r\n                                                            </v-data-table>\r\n                                                        </v-card-text>\r\n                                                    </v-card>\r\n                                                </v-card-text>\r\n                                            </v-card>\r\n                                        </v-tab-item>\r\n                                    </v-tabs-items>\r\n                                </v-card-text>\r\n                            </v-card>\r\n                        </v-card-text>\r\n                        <v-card-text v-show=\"!iselementOpenClose || !minimaptoolbar\">\r\n                            <v-text-field v-model=\"element.name\" :label=\"'name  <'+element.path +'>'\" :rules=\"rules.name\" placeholder=\"String\" style=\"height: 45px;\" class=\"lable-placeholer-color\"\r\n                                        readonly outlined dense></v-text-field>\r\n                        </v-card-text>\r\n                    </v-card>\r\n                </template>\r\n                <span>{{ element.name }}</span>\r\n            </v-tooltip>\r\n            <v-dialog v-model=\"dialogText\" persistent width=\"800\">\r\n                <v-card >\r\n                    <v-card-title class=\"text-h6 green accent-1\"> Edit Text </v-card-title>\r\n                    <v-card-text>\r\n                        <br>\r\n                        <v-row style=\"height: 25px;\">\r\n                            <label style=\"padding:10px;\">&#60;SHORT-NAME&#62;</label>\r\n                            <v-text-field v-model=\"editARXML.name\" placeholder=\"String\" style=\"height: 15px;\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                            <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 15px;\">\r\n                            <label style=\"padding:10px;\">&#60;PORTS&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;P-PORT-PROTOTYPE&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextPport()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 600px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.pport\" :key=\"i\" style=\"height: 590px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 10px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextPport(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                            <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 15px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;PROVIDED-COM-SPECS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;QUEUED-SENDER-COM-SPEC&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextQSender(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                        <v-row v-for=\"(qu, q) in item.queued\" :key=\"q\" style=\"height: 50px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextQSender(q,i)\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;DATA-ELEMENT-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"qu.dataE\" placeholder=\"Path\" style=\"width:300px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;DATA-ELEMENT-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;SENDER-CAPABILITY&#62;</label>\r\n                                                    <v-text-field v-model=\"qu.senderCapa\" placeholder=\"WILL-SEND or WONT-SEND\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SENDER-CAPABILITY&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 15px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;QUEUED-SENDER-COM-SPEC&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;FIELD-SENDER-COM-SPEC&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextField(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 120px;\">\r\n                                        <v-row v-for=\"(fil, f) in item.field\" :key=\"f\" style=\"height: 50px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextField(f,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;DATA-ELEMENT-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"fil.dataE\" placeholder=\"Path\" style=\"width:300px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;DATA-ELEMENT-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;SENDER-CAPABILITY&#62;</label>\r\n                                                    <v-text-field v-model=\"fil.senderCapa\" placeholder=\"WILL-SEND or WONT-SEND\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SENDER-CAPABILITY&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 15px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;FIELD-SENDER-COM-SPEC&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;SERVER-COM-SPEC&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextServer(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 100px;\">\r\n                                        <v-row v-for=\"(ser, s) in item.server\" :key=\"s\" style=\"height: 30px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextServer(s,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;OPERATION-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"ser.oper\" placeholder=\"Path\" style=\"width:350px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;OPERATION-REF&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 25px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;SERVER-COM-SPEC&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;&#47;PROVIDED-COM-SPECS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 50px;\">&#60;PROVIDED-INTERFACE-TREF&#62;</label>\r\n                                        <v-text-field v-model=\"item.interface\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;PROVIDED-INTERFACE-TREF&#62;</label>\r\n                                    </v-row>                               \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;&#47;P-PORT-PROTOTYPE&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;PR-PORT-PROTOTYPE&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextPRport()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 300px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.prport\" :key=\"i\" style=\"height: 250px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 10px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextPRport(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                            <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;PROVIDED-COM-SPECS&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextProvided(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                        <v-row v-for=\"(pro, p) in item.provide\" :key=\"p\" style=\"height: 70px;\">\r\n                                            <div>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -70px 0px 70px\" @click=\"deletTextProvided(p,i)\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 60px;\">&#60;PERSISTENCY-DATA-PROVIDED-COM-SPEC&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 120px;\">&#60;DATA-ELEMENT-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"pro.dataE\" placeholder=\"Path\" style=\"width:280px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;DATA-ELEMENT-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 105px;\">&#60;&#47;PERSISTENCY-DATA-PROVIDED-COM-SPEC&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 65px;\">&#60;&#47;PROVIDED-COM-SPECS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                        <v-col cols=\"4\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 40px;\">&#60;PROVIDED-REQUIRED-INTERFACE-TREF&#62;</label>\r\n                                        </v-col><v-col cols=\"5\">\r\n                                        <v-text-field v-model=\"item.interface\" placeholder=\"Path\" style=\"margin: -5px 0px 0px 70px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        </v-col><v-col cols=\"3\">\r\n                                        <label style=\"padding:10px;\">&#60;&#47;PROVIDED-REQUIRED-INTERFACE-TREF&#62;</label>\r\n                                        </v-col>\r\n                                    </v-row>                               \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;&#47;PR-PORT-PROTOTYPE&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 50px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;R-PORT-PROTOTYPE&#62;</label>\r\n                            <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextRport()\" icon color=\"teal darken\" x-samll dark>\r\n                                <v-icon dense dark>mdi-plus</v-icon>\r\n                            </v-btn>\r\n                        </v-row>\r\n                        <div class=\"text-editDialog\" style=\"height: 530px;\">\r\n                            <v-row v-for=\"(item, i) in editARXML.rport\" :key=\"i\" style=\"height: 490px;\">\r\n                                <div>\r\n                                    <br>\r\n                                    <v-row style=\"height: 10px;margin:0px;\">\r\n                                        <v-btn style=\"margin: 15px -20px 0px 20px\" @click=\"deletTextRport(i)\" text x-small color=\"indigo\">\r\n                                            <v-icon>mdi-minus</v-icon>\r\n                                        </v-btn>\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 10px;\">&#60;SHORT-NAME&#62;</label>\r\n                                            <v-text-field v-model=\"item.name\" placeholder=\"String\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;SHORT-NAME&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 15px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;REQUIRED-COM-SPECS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;QUEUED-RECEIVER-COM-SPEC&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextQReceiver(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                        <v-row v-for=\"(qu, q) in item.queued\" :key=\"q\" style=\"height: 60px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextQReceiver(q,i)\" text x-small color=\"indigo\">\r\n                                                            <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;DATA-ELEMENT-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"qu.dataE\" placeholder=\"Path\" style=\"width:300px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;DATA-ELEMENT-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;RECEIVER-CAPABILITY&#62;</label>\r\n                                                    <v-text-field v-model=\"qu.receiveCapa\" placeholder=\"WILL-RECEIVE or WONT-RECEIVE\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;RECEIVER-CAPABILITY&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 15px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;QUEUED-RECEIVER-COM-SPEC&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 50px;\">\r\n                                        <label style=\"padding:10px;margin-left:90px;\">&#60;CLIENT-COM-SPEC&#62;</label>\r\n                                        <v-btn style=\"margin: 3px 0px 0px -10px\" @click=\"newTextClient(i)\" icon color=\"teal darken\" x-samll dark>\r\n                                            <v-icon dense dark>mdi-plus</v-icon>\r\n                                        </v-btn>\r\n                                    </v-row>\r\n                                    <div class=\"text-Inner-editDialog\" style=\"height: 150px;\">\r\n                                        <v-row v-for=\"(cli, c) in item.client\" :key=\"c\" style=\"height: 100px;\">\r\n                                            <div>\r\n                                                <br>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <v-btn style=\"margin: 15px -80px 0px 80px\" @click=\"deletTextClient(c,i)\" text x-small color=\"indigo\">\r\n                                                        <v-icon>mdi-minus</v-icon>\r\n                                                    </v-btn>\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 70px;\">&#60;CLIENT-CAPABILITY&#62;</label>\r\n                                                    <v-text-field v-model=\"cli.clientCapa\" placeholder=\"WILL-CALL or WONT-CALL\" style=\"width:300px\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;CLIENT-CAPABILITY&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;OPERATION-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"cli.operation\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;OPERATION-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;GETTER-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"cli.getter\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;GETTER-REF&#62;</label>\r\n                                                </v-row>\r\n                                                <v-row style=\"height: 25px;margin:0px;\">\r\n                                                    <label style=\"padding:10px;margin:2px 0px 2px 110px;\">&#60;SETTER-REF&#62;</label>\r\n                                                    <v-text-field v-model=\"cli.setter\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                                    <label style=\"padding:10px;\">&#60;&#47;SETTER-REF&#62;</label>\r\n                                                </v-row>\r\n                                            </div>\r\n                                        </v-row>\r\n                                    </div> \r\n                                    <v-row style=\"height: 20px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 90px;\">&#60;&#47;CLIENT-COM-SPEC&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;\">\r\n                                        <label style=\"padding:10px;margin-left:65px;\">&#60;&#47;REQUIRED-COM-SPECS&#62;</label>\r\n                                    </v-row>\r\n                                    <v-row style=\"height: 30px;margin:0px;\">\r\n                                        <label style=\"padding:10px;margin:2px 0px 2px 55px;\">&#60;REQUIRED-INTERFACE-TREF&#62;</label>\r\n                                        <v-text-field v-model=\"item.interface\" placeholder=\"Path\" class=\"lable-placeholer-color\" dense></v-text-field>\r\n                                        <label style=\"padding:10px;\">&#60;&#47;REQUIRED-INTERFACE-TREF&#62;</label>\r\n                                    </v-row>                               \r\n                                </div>\r\n                            </v-row>\r\n                        </div>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;margin-left:10px;\">&#60;&#47;R-PORT-PROTOTYPE&#62;</label>\r\n                        </v-row>\r\n                        <v-row style=\"height: 20px;\">\r\n                            <label style=\"padding:10px;\">&#60;&#47;PORTS&#62;</label>\r\n                        </v-row>\r\n                    </v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text  @click=\"saveARXML()\" >\r\n                            Save\r\n                        </v-btn>\r\n                        <v-btn class=\"d-inline-flex ml-3 mr-1\" color=\"green darken-1\" text @click=\"cancelARXML()\">\r\n                            Cancel\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n        </v-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport constant from \"../store/constants.js\"\r\nimport { EventBus } from \"../main.js\"\r\nimport dialogPathSetting from '../components/dialogPathSetting.vue'\r\n\r\nexport default {\r\n    props: ['element', 'isDatailView', 'minimaptoolbar', 'location'],\r\n    components:{dialogPathSetting},\r\n    computed: {\r\n        activeUUID() {\r\n            return this.$store.state.activeUUID\r\n        },\r\n        setting() {\r\n            return this.$store.state.setting\r\n        },\r\n    },\r\n    watch: {\r\n        activeUUID(val) {\r\n            this.setToolbarColor(val)\r\n        },\r\n        /*detailViewUUID(val) {\r\n            this.setToolbarColorDetailView(val)\r\n        },*/\r\n        setting(value) {\r\n            this.zoomvalue = value.zoomMain\r\n            if (this.zoomvalue < this.$setZoominTooltip) {\r\n                this.isTooltip = false\r\n            } else {\r\n                this.isTooltip = this.minimaptoolbar\r\n                if (this.zoomvalue  > this.$setZoominLineTitle && this.zoomvalue < this.$setZoominLineSetupStart) {\r\n                    EventBus.$emit('drawLineTitleBar', this.element.uuid, false)\r\n                } else if (this.zoomvalue > this.$setZoominLineSetupStart && this.zoomvalue < this.$setZoominLineSetupEnd) {\r\n                    this.$nextTick(() => {\r\n                        EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                        if(this.iselementOpenClose) {\r\n                            if(this.element.pport.length > 0 && this.location == 1) {\r\n                                if(this.isPPortOpenClose) {\r\n                                    EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)\r\n                                } else {\r\n                                    EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n                                }\r\n                            }\r\n                            if(this.element.prport.length > 0 && this.location == 1) {\r\n                                if(this.isPRPortOpenClose) {\r\n                                    EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)\r\n                                } else {\r\n                                    EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n                                }\r\n                            }\r\n                            if(this.element.rport.length > 0 && this.location == 1) {\r\n                                if(this.isRPortOpenClose) {\r\n                                    EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)\r\n                                } else {\r\n                                    EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.setToolbarColor(this.$store.state.activeUUID)\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            rules: {\r\n                name:  [val => (val || '').length > 0 ],\r\n            },\r\n            dialogPath : false,\r\n            colorToolbar: \"#6A5ACD\",\r\n            zoomvalue: this.$store.state.setting.zoomMain,\r\n            isTooltip: this.minimaptoolbar,\r\n            iselementOpenClose: true,//this.minimaptoolbar,\r\n            dialogText: false,\r\n            editARXML: {name:'', pport: [], rport: [], prport: []},\r\n            editTextPport: {name: '', selectI: null, interface: null, queued: [], field: [], server: [], id: ''},\r\n            editTextRport: {name: '', selectI: null, interface: null, queued: [], client: [], id: ''},\r\n            editTextPRport: {name: '', selectI: null, interface: null, provide: [], id: ''},\r\n            editTextQSender: {dataE: null, senderCapa:null, id: ''},\r\n            editTextField: {dataE: null, senderCapa:null, id: ''},\r\n            editTextServer: {oper: null, id: ''},\r\n            editTextProvided: {dataE: null, id: ''},\r\n            editTextQReceiver: {select: null, dataE: null, receiveCapa:null, id: ''},\r\n            editTextClient: {operation: null, clientCapa:null, getter: null, setter: null, id: ''},\r\n            isPPortOpenClose: true,\r\n            isPRPortOpenClose: true,\r\n            isRPortOpenClose: true,\r\n\r\n            selSIEvent: this.$store.getters.getVariableDataPrototype,\r\n            selSIField: this.$store.getters.getField,\r\n            selectPInterfaceList: ['SERVICE-INTERFACE','PHM-RECOVERY-ACTION-INTERFACE'],\r\n            selectSenderCapa: ['WILL-SEND', 'WONT-SEND'],\r\n            selPInterface: null,\r\n            PportTab: null,\r\n            isPQSCOpenClose: true,\r\n            isdeletePQSC: false,\r\n            selectDelectPQSC: [],\r\n            headerPQSC: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Sender Capability', sortable: false, value: 'senderCapa' },\r\n            ],\r\n            editPQSC: { dataE: null, senderCapa:null, id: ''},\r\n            isEditingPQSC: true,\r\n\r\n            isPFSCOpenClose: true,\r\n            isdeletePFSC: false,\r\n            selectDelectPFSC: [],\r\n            headerPFSC: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Sender Capability', sortable: false, value: 'senderCapa' },\r\n            ],\r\n            editPFSC: { dataE: null, senderCapa:null, id: ''},\r\n            isEditingPFSC: true,\r\n\r\n            isSCOpenClose: true,\r\n            isdeleteSC: false,\r\n            selectDelectSC: [],\r\n            headerSC: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Operation Ref', sortable: false, value: 'oper' },\r\n            ],\r\n            editSC: { oper: null, id: ''},\r\n            isEditingSC: true,\r\n\r\n            PRportTab: null,\r\n            isPRProvideOpenClose: true,\r\n            isdeletePRProvide: false,\r\n            selectDelectPRProvide: [],\r\n            headerPRProvide: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n            ],\r\n            editPRProvide: { dataE: null, id: ''},\r\n            isEditingPRProvide: true,\r\n            selPerData: this.$store.getters.getPERKeyValueDIData,\r\n            selectPRInterfaceList: ['SERVICE-INTERFACE','PERSISTENCY-FILE-PROXY-INTERFACE', 'PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE'],\r\n            selPRInterface: null,\r\n\r\n            RportTab: null,\r\n            selectRInterfaceList: ['SERVICE-INTERFACE','PHM-HEALTH-CHANNEL-INTERFACE', 'PHM-SUPERVISED-ENTITY-INTERFACE'],\r\n            selRInterface: null,\r\n            isRQRCOpenClose: true,\r\n            isdeleteRQRC: false,\r\n            selectDelectRQRC: [],\r\n            headerRQRC: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Data Element Ref', sortable: false, value: 'dataE' },\r\n                { text: 'Receiver Capability', sortable: false, value: 'receiveCapa' },\r\n            ],\r\n            selectRQRC: ['VARIABLE-DATA-PROTOTYPE','FIELD'],\r\n            selectReceiverCapa: ['WILL-RECEIVE', 'WONT-RECEIVE'],\r\n            selectClientCapa: ['WILL-CALL', 'WONT-CALL'],\r\n            editRQRC: { select: null, dataE: null, receiveCapa:null, id: ''},\r\n            isEditingRQRC: true,\r\n            isRCCOpenClose: true,\r\n            isdeleteRCC: false,\r\n            selectDelectRCC: [],\r\n            headerRCC: [\r\n                { text: '', sortable: false, value: 'refView', width: '5px' },\r\n                { text: 'Operation Ref', sortable: false, value: 'operation' },\r\n                { text: 'Client Capability', sortable: false, value: 'clientCapa' },\r\n                { text: 'Getter Ref', sortable: false, value: 'getter' },\r\n                { text: 'Setter Ref', sortable: false, value: 'setter' },\r\n            ],\r\n            editRCC: { operation: null, clientCapa:null, getter: null, setter: null, id: ''},\r\n            isEditingRCC: true,\r\n            isEditingGetter: true,\r\n            isEditingSetter: true,\r\n            selSIQRC: this.$store.getters.getVariableDataPrototype,\r\n            selSIMethod: this.$store.getters.getClientServer,\r\n\r\n            beforePport: '',\r\n            beforePRport: '',\r\n            beforeRport: '',\r\n            \r\n            refPInterfase: false,\r\n            refPQueued: null,\r\n            refPFieldS: null,\r\n            refPServerC: null,\r\n            refPRInterfase: false,\r\n            refPRProvided: null,\r\n            refRInterfase: false,\r\n            refRQueued: null,\r\n            refRClient: null,\r\n        }\r\n    },\r\n    mounted () {\r\n        if (this.minimaptoolbar && this.zoomvalue < this.$setZoominElement) {\r\n            this.isTooltip = false\r\n        }\r\n        EventBus.$on(this.element.uuid, (refNum, idxID, tabID, id, isDeleteItem, item, idxRow) => {\r\n            this.refPInterfase = false\r\n            if (isDeleteItem) {\r\n                if (this.refPQueued == id && item == 'PQueued' && this.element.pport[this.PportTab].id == tabID) {\r\n                    this.refPQueued = id + 1\r\n                    this.rowPQueuedClick(idxRow)\r\n                } else if (this.refPFieldS == id && item == 'PField' && this.element.pport[this.PportTab].id == tabID) {\r\n                    this.refPFieldS = id + 1\r\n                    this.rowPFieldSClick(idxRow)\r\n                } else if (this.refPServerC == id && item == 'PServer' && this.element.pport[this.PportTab].id == tabID) {\r\n                    this.refPServerC = id + 1\r\n                    this.rowPServerCClick(idxRow)\r\n                } else if (this.refPRProvided == id && item == 'PRProvide' && this.element.prport[this.PRportTab].id == tabID) {\r\n                    this.refPRProvided = id + 1\r\n                    this.rowPRProvidedClick(idxRow)\r\n                } else if (this.refRQueued == id && item == 'RQueued' && this.element.rport[this.RportTab].id == tabID) {\r\n                    this.refRQueued = id + 1\r\n                    this.rowRQueuedClick(idxRow)\r\n                } else if (this.refRClient == id && item == 'RClient' && this.element.rport[this.RportTab].id == tabID) {\r\n                    this.refRClient = id + 1\r\n                    this.rowRClientClick(idxRow)\r\n                }\r\n            } else {\r\n                this.refPInterfase = false\r\n                this.refPRInterfase = false\r\n                this.refRInterfase = false\r\n                this.refPQueued = null\r\n                this.refPFieldS = null\r\n                this.refPServerC = null\r\n                this.refPRProvided = null\r\n                this.refRQueued = null\r\n                this.refRClient = null\r\n\r\n                if (refNum == 1) {\r\n                    this.PportTab = tabID\r\n                    this.refPInterfase = true\r\n                } else if (refNum == 2) {\r\n                    this.PportTab = tabID\r\n                    this.refPQueued = idxID\r\n                } else if (refNum == 3) {\r\n                    this.PportTab = tabID\r\n                    this.refPFieldS = idxID\r\n                } else if (refNum == 4) {\r\n                    this.PportTab = tabID\r\n                    this.refPServerC = idxID\r\n                } else if (refNum == 5) {\r\n                    this.PRportTab = tabID\r\n                    this.refPRInterfase = true\r\n                } else if (refNum == 6) {\r\n                    this.PRportTab = tabID\r\n                    this.refPRProvided = idxID\r\n                } else if (refNum == 7) {\r\n                    this.RportTab = tabID\r\n                    this.refRInterfase = true\r\n                } else if (refNum == 8) {\r\n                    this.RportTab = tabID\r\n                    this.refRQueued = idxID\r\n                } else if (refNum == 9) {\r\n                    this.RportTab = tabID\r\n                    this.refRClient = idxID\r\n                } \r\n            }\r\n        })\r\n    },\r\n    methods: {\r\n        submitDialog(element) {\r\n            this.element.path = element\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n        },\r\n        setToolbarColor(activeid) \r\n        {\r\n            if(this.element.uuid == activeid) {\r\n                this.colorToolbar = \"#FF1493\" \r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        setToolbarColorDetailView(isdetail) {\r\n            if(this.element.uuid == isdetail) {\r\n                this.colorToolbar = \"#B0E0E6\" \r\n            } else if (this.element.uuid == this.$store.state.activeUUID) {\r\n                this.colorToolbar  = \"#FF1493\"\r\n            } else {\r\n                this.colorToolbar = \"#6A5ACD\"\r\n            }\r\n        },\r\n        showSWComponent() {\r\n            this.clickOtherFields()\r\n            this.iselementOpenClose = this.iselementOpenClose ? false : true\r\n            this.$nextTick(() => {\r\n                EventBus.$emit('drawLine')\r\n            })\r\n            /*this.$nextTick(() => {\r\n                EventBus.$emit('drawLineTitleBar', this.element.uuid, this.iselementOpenClose)\r\n                if(this.iselementOpenClose) {\r\n                    if(this.element.pport.length > 0 && this.location == 1) {\r\n                        if(this.isPPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                    if(this.element.prport.length > 0 && this.location == 1) {\r\n                        if(this.isPRPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                    if(this.element.rport.length > 0 && this.location == 1) {\r\n                        if(this.isRPortOpenClose) {\r\n                            EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)\r\n                        } else {\r\n                            EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n                        }\r\n                    }\r\n                }\r\n            })*/\r\n        },\r\n        showPPort() {\r\n            this.clickOtherFields()\r\n            this.isPPortOpenClose = this.isPPortOpenClose ? false : true\r\n            /*if(this.element.pport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isPPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }*/\r\n        },\r\n        showPQSC() {\r\n            this.clickOtherFields()\r\n            this.isPQSCOpenClose = this.isPQSCOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        showPFSC() {\r\n            this.clickOtherFields()\r\n            this.isPFSCOpenClose = this.isPFSCOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        showSC() {\r\n            this.clickOtherFields()\r\n            this.isSCOpenClose = this.isSCOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        showPRPort() {\r\n            this.clickOtherFields()\r\n            this.isPRPortOpenClose = this.isPRPortOpenClose ? false : true\r\n            /*if(this.element.prport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isPRPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }*/\r\n        },\r\n        showPRProvide() {\r\n            this.clickOtherFields()\r\n            this.isPRProvideOpenClose = this.isPRProvideOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        showRPort() {\r\n            this.clickOtherFields()\r\n            this.isRPortOpenClose = this.isRPortOpenClose ? false : true\r\n            /*if(this.element.rport.length > 0 && this.location == 1) {\r\n                this.$nextTick(() => {\r\n                    if(this.isRPortOpenClose) {\r\n                        EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)\r\n                    } else {\r\n                        EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n                    }\r\n                    EventBus.$emit('drawLine')\r\n                })\r\n            }*/\r\n        },\r\n        showRQRC() {\r\n            this.clickOtherFields()\r\n            this.isRQRCOpenClose = this.isRQRCOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        showRCC() {\r\n            this.clickOtherFields()\r\n            this.isRCCOpenClose = this.isRCCOpenClose ? false : true\r\n            //EventBus.$emit('drawLine')\r\n        },\r\n        inputSWComponentName() {\r\n            this.$store.commit('editSWComponents', {compo:\"Name\", uuid:this.element.uuid, name:this.element.name} )\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name} )\r\n            if (this.element.name != '') {\r\n                this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.element.name, path:this.element.path})\r\n            }\r\n        },\r\n        clickOtherFields() {\r\n            if (this.refPInterfase || this.refPRInterfase || this.refRInterfase ||\r\n                this.refPQueued != null || this.refPFieldS != null || this.refPServerC != null ||\r\n                this.refPRProvided != null || this.refRQueued != null || this.refRClient != null) {\r\n                this.deleteOpenElement()\r\n                this.refPInterfase = false\r\n                this.refPRInterfase = false\r\n                this.refRInterfase = false\r\n                this.refPQueued = null\r\n                this.refPFieldS = null\r\n                this.refPServerC = null\r\n                this.refPRProvided = null\r\n                this.refRQueued = null\r\n                this.refRClient = null\r\n            }\r\n        },\r\n        rowPQueuedClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refPQueued != this.element.pport[this.PportTab].queued[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                if (this.element.pport[this.PportTab].queued[idx].dataE != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].queued[idx].dataE, 1)\r\n                    }\r\n                    if (endLine != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, end:endLine, iscircle:false, \r\n                                            refNum:2, idxID: this.element.pport[this.PportTab].queued[idx].id, tabID: this.PportTab})\r\n                    }\r\n                }\r\n                this.refPQueued = this.element.pport[this.PportTab].queued[idx].id\r\n            }\r\n        },\r\n        rowPFieldSClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refPFieldS != this.element.pport[this.PportTab].field[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                if (this.element.pport[this.PportTab].field[idx].dataE != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].field[idx].dataE, 2)\r\n                    }\r\n                    if (endLine != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, end:endLine, \r\n                                            iscircle:false, refNum:3, idxID: this.element.pport[this.PportTab].field[idx].id, tabID: this.PportTab})\r\n                    }\r\n                }\r\n                this.refPFieldS = this.element.pport[this.PportTab].field[idx].id\r\n            }\r\n        },\r\n        rowPServerCClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refPServerC != this.element.pport[this.PportTab].server[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                if (this.element.pport[this.PportTab].server[idx].oper != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].server[idx].oper, 3)\r\n                    }\r\n                    if (endLine != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, end:endLine, \r\n                                            iscircle:false, refNum:4, idxID: this.element.pport[this.PportTab].server[idx].id, tabID: this.PportTab})\r\n                    }\r\n                }\r\n                this.refPServerC = this.element.pport[this.PportTab].server[idx].id\r\n            }\r\n        },\r\n        rowPRProvidedClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refPRProvided != this.element.prport[this.PRportTab].provide[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                if (this.element.prport[this.PRportTab].provide[idx].dataE) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getPERKeyValueDIPath(this.element.prport[this.PRportTab].provide[idx].dataE)\r\n                    }\r\n                    if (endLine != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('new-line', this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, end:endLine, \r\n                                            iscircle:false, refNum:5, idxID: this.element.prport[this.PRportTab].provide[idx].id, tabID: this.PRportTab})\r\n                    }\r\n                }\r\n            }\r\n            this.refPRProvided = this.element.prport[this.PRportTab].provide[idx].id\r\n        },\r\n        rowRQueuedClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refRQueued != this.element.rport[this.RportTab].queued[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                if (this.element.rport[this.RportTab].queued[idx].dataE != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].queued[idx].dataE, 2)\r\n                    }\r\n                    if (endLine != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top + 300, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, end:endLine, \r\n                                            iscircle:false, refNum:8, idxID: this.element.rport[this.RportTab].queued[idx].id, tabID: this.RportTab})\r\n                    }\r\n                }\r\n            }\r\n            this.refRQueued = this.element.rport[this.RportTab].queued[idx].id\r\n        },\r\n        rowRClientClick(idx) {\r\n            console.log('rowClick ' + idx)\r\n            if (this.refRClient != this.element.rport[this.RportTab].client[idx].id) { // 같은거 계속 누르면 안됨\r\n                //기존것 delete하고 \r\n                this.clickOtherFields()\r\n                // 새로들어온 idx line draw\r\n                var endLineOpration, endLineGetter, endLineSetter\r\n                if (this.element.rport[this.RportTab].client[idx].operation != null) {\r\n                    endLineOpration = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLineOpration == undefined) {\r\n                        endLineOpration = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].operation, 3)\r\n                    }\r\n                    if (endLineOpration != null) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        var isExist = true\r\n                        if (this.$store.getters.getDeleteOpenElement(endLineOpration) == -1) {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLineOpration, top: this.element.top + 400, left: this.element.left + this.$setPositionLeft} )\r\n                            isExist = false\r\n                        }\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLineOpration, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineOpration, \r\n                                            iscircle:false, refNum:9, idxID: this.element.rport[this.RportTab].client[idx].id, tabID: this.RportTab})\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', false, endLineOpration)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineOpration, isExist)\r\n                        })\r\n                    }\r\n                }\r\n                if (this.element.rport[this.RportTab].client[idx].getter != null) {\r\n                    endLineGetter = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLineGetter == undefined) {\r\n                        endLineGetter = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].getter, 2)\r\n                    }\r\n                    if (endLineGetter != null && endLineGetter != endLineOpration) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        var top = 400\r\n                        if (endLineOpration != null) {\r\n                            top = 600\r\n                        }\r\n                        var isExistGetter = true\r\n                        if (this.$store.getters.getDeleteOpenElement(endLineGetter) == -1) {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLineGetter, top: this.element.top + top, left: this.element.left + this.$setPositionLeft} )\r\n                            isExistGetter = false\r\n                        }\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLineGetter, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        if (!isExistGetter) {\r\n                            this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineGetter, \r\n                                                iscircle:false, refNum: 9, idxID: this.element.rport[this.RportTab].client[idx].id, tabID: this.RportTab})\r\n                        }\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', false, endLineGetter)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineGetter, isExistGetter)\r\n                        })\r\n                    }\r\n                }\r\n                if (this.element.rport[this.RportTab].client[idx].setter != null) {\r\n                    endLineSetter = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLineSetter == undefined) {\r\n                        endLineSetter = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].setter, 2)\r\n                    }\r\n                    if (endLineSetter != null && endLineGetter != endLineSetter && endLineSetter != endLineOpration) {\r\n                        // 기존에 있던거 좌표 바꿔줘야함.\r\n                        var topSetter = 600\r\n                        if (endLineGetter != endLineOpration && endLineOpration != null && endLineGetter != null) {\r\n                            topSetter = 800\r\n                        } else if (endLineOpration == null || endLineGetter == null) {\r\n                            topSetter = 400\r\n                        }\r\n                        var isExistSetter = true\r\n                        if (this.$store.getters.getDeleteOpenElement(endLineSetter) == -1) {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLineSetter, top: this.element.top + topSetter, left: this.element.left + this.$setPositionLeft} )\r\n                            isExistSetter = false\r\n                        }\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLineSetter, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        if (!isExistSetter) {\r\n                            this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineSetter, \r\n                                                iscircle:false, refNum:9, idxID: this.element.rport[this.RportTab].client[idx].id, tabID: this.RportTab})\r\n                        }\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', false, endLineSetter)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineSetter, isExistSetter)\r\n                        })\r\n                    }\r\n                }\r\n                \r\n                this.setOpenCloseViewUUID(endLineOpration, endLineGetter, endLineSetter)\r\n            }\r\n            this.refRClient = this.element.rport[this.RportTab].client[idx].id\r\n        },\r\n\r\n\r\n        clickPportName(name) {\r\n            this.clickOtherFields()\r\n            this.beforePport = name\r\n        },\r\n        clickPRportName(name) {\r\n            this.clickOtherFields()\r\n            this.beforePRport = name\r\n        },\r\n        clickRportName(name) {\r\n            this.clickOtherFields()\r\n            this.beforeRport = name\r\n        },\r\n        inputPportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'pPort', listname: name, beforename: this.beforePport} )\r\n            this.beforePport = name\r\n        }, \r\n        inputPRportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'prPort', listname: name, beforename: this.beforePRport} )\r\n            this.beforePRport = name\r\n        },\r\n        inputRportName(name) {\r\n            this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                          changeName: 'rPort', listname: name, beforename: this.beforeRport} )\r\n            this.beforeRport = name\r\n        }, \r\n\r\n        inputSelectPInterf() {\r\n            this.clearPInterface()\r\n            this.setPInterfaceSelect()\r\n\r\n        },\r\n        clearPInterface() {\r\n            this.element.pport[this.PportTab].interface = null\r\n            this.selPInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n            }\r\n            this.clickOtherFields()\r\n        },\r\n        setPInterfaceSelect() {\r\n            this.clickOtherFields()\r\n            if (this.element.pport[this.PportTab].interface != null) {this.refPInterfase = true}\r\n            if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                if (this.element.pport[this.PportTab].selectI != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                    if (endLine == undefined) {\r\n                        if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].interface,0)\r\n                        } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                            endLine = this.$store.getters.getPHMRecoveryPath(this.element.pport[this.PportTab].interface)\r\n                        } \r\n                    }\r\n                    if (endLine != null) {\r\n                        if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                        } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                            this.$store.commit('editPHMRecoveryVia', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.RecoveryVA_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.RecoveryVA_str} )\r\n                        }\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, end:endLine, iscircle:false, refNum:1, idxID: 0, tabID: this.PportTab})\r\n                        // document.getElementById(endLine+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        // EventBus.$emit('active-element', endLine)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setPInterfaceList() {\r\n            if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selPInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                this.selPInterface = this.$store.getters.getPHMRecovery\r\n            } \r\n            this.setactiveUUID()\r\n        },\r\n        setPInterface(item){\r\n            this.clickOtherFields()\r\n            if( this.element.pport[this.PportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id)\r\n                }\r\n                if (endLine != item.uuid) {\r\n                    if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.refPInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n\r\n                    } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                        this.refPInterfase = true\r\n                        this.$store.commit('editPHMRecoveryVia', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.RecoveryVA_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                        \r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, \r\n                                    item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, end:item.uuid, iscircle:false, refNum:1, idxID: 0, tabID: this.PportTab})\r\n                }\r\n                this.element.pport[this.PportTab].interface = item.name\r\n            } else {\r\n                if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                    if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.refPInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                        this.refPInterfase = true\r\n                        this.$store.commit('editPHMRecoveryVia', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.RecoveryVA_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, \r\n                                    item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    }) \r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PPortI-'+ this.element.pport[this.PportTab].id, end:item.uuid, iscircle:false, refNum:1, idxID: 0, tabID: this.PportTab})\r\n                }\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newPInterface() {\r\n            if (this.element.pport[this.PportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.pport[this.PportTab].selectI == \"PHM-RECOVERY-ACTION-INTERFACE\") {\r\n                this.$store.commit('addElementPHMRecovery', {\r\n                    name: this.$store.getters.getNamePHMRecovery, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    reconame: '', faf: null\r\n                })                \r\n                EventBus.$emit('add-element', constant.RecoveryVA_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n\r\n            } \r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addPport() {\r\n            this.clickOtherFields()\r\n            const editItem = {name: '', selectI: null, interface: null, queued: [], field: [], server: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'PPort_' + n++;\r\n                res = this.element.pport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.pport.push(addObj)\r\n            this.PportTab = this.element.pport.length-1\r\n            this.clickPporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickPporttab() {\r\n            this.isdeletePQSC = false\r\n            this.selectDelectPQSC = []\r\n            this.isdeletePFSC = false\r\n            this.selectDelectPFSC = []\r\n            this.isdeleteSC = false\r\n            this.selectDelectSC = []\r\n        },\r\n        changePportTab() {\r\n            if (this.refPInterfase || this.refPQueued != null || this.refPFieldS != null || this.refPServerC != null) {\r\n                this.deleteOpenElement()\r\n                this.refPInterfase = false\r\n                this.refPQueued = null\r\n                this.refPFieldS = null\r\n                this.refPServerC = null\r\n            }\r\n            /*if(this.element.pport.length > 0 && this.location == 1 && this.PportTab != undefined) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'pport', this.element.uuid, this.PportTab, this.element.pport[this.PportTab].id)}, 300);\r\n            }*/\r\n        },\r\n        deletePport(idx) {\r\n            this.clickOtherFields()\r\n            this.$store.commit('deleteRefTable', {deleteName:'ptab', deleteTab: true, tabName: this.element.pport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.pport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+ this.element.pport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/PPortI-'+ this.element.pport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.pport[idx].queued.length; i++){\r\n                var endLineQ = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[idx].queued[i].id+'-'+this.element.pport[idx].id)\r\n                if(endLineQ != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[idx].queued[i].id+'-'+this.element.pport[idx].id)\r\n                }\r\n            }\r\n            for(let i=0; i<this.element.pport[idx].field.length; i++){\r\n                var endLineF = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[idx].field[i].id+'-'+this.element.pport[idx].id)\r\n                if(endLineF != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[idx].field[i].id+'-'+this.element.pport[idx].id)\r\n                }\r\n            }\r\n            for(let i=0; i<this.element.pport[idx].server.length; i++){\r\n                var endLineS = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+this.element.pport[idx].server[i].id+'-'+this.element.pport[idx].id)\r\n                if(endLineS != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/pportSC-'+this.element.pport[idx].server[i].id+'-'+this.element.pport[idx].id)\r\n                }\r\n            }\r\n\r\n            this.element.pport.splice(idx, 1)\r\n        },\r\n        isCheckPQSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePQSC == true) {\r\n                this.isdeletePQSC = false\r\n                this.selectDelectPQSC = []\r\n            } else {\r\n                this.isdeletePQSC = true\r\n            }\r\n        },\r\n        deletePQSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePQSC == true) {\r\n                this.selectDelectPQSC.forEach( item => {\r\n                    for(let i=0; i<this.element.pport[this.PportTab].queued.length; i++){\r\n                        if (item.id == this.element.pport[this.PportTab].queued[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.pport[this.PportTab].queued = this.element.pport[this.PportTab].queued.filter(item => {\r\n                        return this.selectDelectPQSC.indexOf(item) < 0 })\r\n\r\n                this.isdeletePQSC = false\r\n                this.selectDelectPQSC = []\r\n            } \r\n        },\r\n        openPQSC(idx) { \r\n            this.selSIEvent = this.$store.getters.getVariableDataPrototype\r\n\r\n            if ( this.element.pport[this.PportTab].queued[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].queued[idx].dataE, 1)\r\n                }\r\n                this.editPQSC.dataE = { name: this.element.pport[this.PportTab].queued[idx].dataE, uuid: endLine}\r\n            }\r\n            this.editPQSC.senderCapa = this.element.pport[this.PportTab].queued[idx].senderCapa\r\n        },\r\n        editPQSCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined && this.editPQSC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPQSC.dataE.uuid) {\r\n                this.deleteLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.newLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, this.editPQSC.dataE.uuid, false)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = this.editPQSC.dataE.name\r\n            } else if (endLine == undefined && this.editPQSC.dataE != null && this.editPQSC.dataE.uuid != null) {\r\n                this.newLine(this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].queued[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, this.editPQSC.dataE.uuid, false)\r\n                this.element.pport[this.PportTab].queued[idx].dataE = this.editPQSC.dataE.name\r\n            } else if (this.editPQSC.dataE != null && endLine == this.editPQSC.dataE.uuid && this.element.pport[this.PportTab].queued[idx].dataE != this.editPQSC.dataE.name) {\r\n                this.element.pport[this.PportTab].queued[idx].dataE = this.editPQSC.dataE.name\r\n            }\r\n\r\n            if (this.refPQueued == this.element.pport[this.PportTab].queued[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editPQSC.dataE != null && this.editPQSC.dataE.uuid != null) {\r\n                    var endLineChange = this.editPQSC.dataE.uuid \r\n                    this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editPQSC.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editPQSC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, endLineChange)\r\n                        EventBus.$emit('new-line', this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, endLineChange)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, end:endLineChange, \r\n                                        iscircle:false, refNum:2, idxID: this.refPQueued, tabID: this.PportTab})\r\n                }\r\n            }\r\n            this.element.pport[this.PportTab].queued[idx].senderCapa = this.editPQSC.senderCapa\r\n            this.cancelPQSC()\r\n        },\r\n        cancelPQSC() {\r\n            this.editPQSC = {dataE: null, senderCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPQSC() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.pport[this.PportTab].queued.some(item => item.id === n)\r\n            }\r\n            this.editPQSC.id = n\r\n            var serViewUUID = null\r\n            if( this.editPQSC.dataE != null) {\r\n                serViewUUID = this.editPQSC.dataE.uuid\r\n                this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editPQSC.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editPQSC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editPQSC.dataE = this.editPQSC.dataE.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, end:serViewUUID, \r\n                                    iscircle:false, refNum:2, idxID: this.editPQSC.id, tabID: this.PportTab})\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPQSC)\r\n            this.element.pport[this.PportTab].queued.push(addObj);\r\n            this.refPQueued = n\r\n            this.cancelPQSC()\r\n            if (serViewUUID != null) {\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', true, serViewUUID)\r\n                    this.newLine(this.element.uuid+'/pportQSC-'+n+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportQSC-'+this.element.pport[this.PportTab].id, \r\n                                serViewUUID, true)\r\n                    document.getElementById(serViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n            }\r\n        },\r\n        setPQSCSelect() {\r\n            if (this.isEditingPQSC == true) {\r\n                if (this.editPQSC.dataE != null && this.editPQSC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPQSC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                    // document.getElementById(this.editPQSC.dataE.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    // EventBus.$emit('active-element', this.editPQSC.dataE.uuid)\r\n                }\r\n                this.setPQSCList()\r\n                this.isEditingPQSC = false\r\n            } else {\r\n                this.isEditingPQSC = true\r\n            }\r\n        },\r\n        setPQSCList() {\r\n            this.selSIEvent = this.$store.getters.getVariableDataPrototype\r\n            this.setactiveUUID()\r\n        },\r\n        clearPQSC() {\r\n            this.isEditingPQSC = true\r\n            this.editPQSC.dataE = null\r\n        },\r\n        isCheckPFSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePFSC == true) {\r\n                this.isdeletePFSC = false\r\n                this.selectDelectPFSC = []\r\n            } else {\r\n                this.isdeletePFSC = true\r\n            }\r\n        },\r\n        deletePFSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePFSC == true) {\r\n                this.selectDelectPFSC.forEach( item => {\r\n                    for(let i=0; i<this.element.pport[this.PportTab].field.length; i++){\r\n                        if (item.id == this.element.pport[this.PportTab].field[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.pport[this.PportTab].field = this.element.pport[this.PportTab].field.filter(item => {\r\n                        return this.selectDelectPFSC.indexOf(item) < 0 })\r\n\r\n\r\n                this.isdeletePFSC = false\r\n                this.selectDelectPFSC = []\r\n            } \r\n        },\r\n        openPFSC(idx) { \r\n            this.selSIField = this.$store.getters.getField\r\n\r\n            if ( this.element.pport[this.PportTab].field[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].field[idx].dataE, 2)\r\n                }\r\n                this.editPFSC.dataE = { name: this.element.pport[this.PportTab].field[idx].dataE, uuid: endLine}\r\n            }\r\n            this.editPFSC.senderCapa = this.element.pport[this.PportTab].field[idx].senderCapa\r\n        },\r\n        editPFSCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined && this.editPFSC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.element.pport[this.PportTab].field[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPFSC.dataE.uuid) {\r\n                this.deleteLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.newLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, this.editPFSC.dataE.uuid, false)\r\n                this.element.pport[this.PportTab].field[idx].dataE = this.editPFSC.dataE.name\r\n            } else if (endLine == undefined && this.editPFSC.dataE != null && this.editPFSC.dataE.uuid != null) {\r\n                this.newLine(this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].field[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, this.editPFSC.dataE.uuid, false)\r\n                this.element.pport[this.PportTab].field[idx].dataE = this.editPFSC.dataE.name\r\n            } else if (this.editPFSC.dataE != null && endLine == this.editPFSC.dataE.uuid && this.element.pport[this.PportTab].field[idx].dataE != this.editPFSC.dataE.name) {\r\n                this.element.pport[this.PportTab].field[idx].dataE = this.editPFSC.dataE.name\r\n            }\r\n\r\n            if (this.refPFieldS == this.element.pport[this.PportTab].field[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editPFSC.dataE != null && this.editPFSC.dataE.uuid != null) {\r\n                    var endLineChange = this.editPFSC.dataE.uuid\r\n                    this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editPFSC.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editPFSC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, endLineChange)\r\n                        EventBus.$emit('new-line', this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, endLineChange)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, end:endLineChange, \r\n                                        iscircle:false, refNum:3, idxID: this.refPFieldS, tabID: this.PportTab})\r\n                }\r\n            }\r\n            this.element.pport[this.PportTab].field[idx].senderCapa = this.editPFSC.senderCapa\r\n            this.cancelPFSC()\r\n        },\r\n        cancelPFSC() {\r\n            this.editPFSC = {dataE: null, senderCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPFSC() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.pport[this.PportTab].field.some(item => item.id === n)\r\n            }\r\n            this.editPFSC.id = n\r\n            var serViewUUID = null\r\n            if( this.editPFSC.dataE != null) {\r\n                serViewUUID = this.editPFSC.dataE.uuid\r\n                this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editPFSC.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editPFSC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editPFSC.dataE = this.editPFSC.dataE.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id, end:serViewUUID, \r\n                                    iscircle:false, refNum:3, idxID: this.editPFSC.id, tabID: this.PportTab})\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPFSC)\r\n            this.element.pport[this.PportTab].field.push(addObj);\r\n            this.refPFieldS = n\r\n            this.cancelPFSC()\r\n            if (serViewUUID != null) {\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', true, serViewUUID)\r\n                    this.newLine(this.element.uuid+'/pportFSC-'+n+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportFSC-'+this.element.pport[this.PportTab].id,\r\n                                 serViewUUID, true)\r\n                    document.getElementById(serViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n            }\r\n        },\r\n        setPFSCSelect() {\r\n            if (this.isEditingPFSC == true) {\r\n                if (this.editPFSC.dataE != null && this.editPFSC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPFSC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                    // document.getElementById(this.editPFSC.dataE.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    // EventBus.$emit('active-element', this.editPFSC.dataE.uuid)\r\n                }\r\n                this.setPFSCList()\r\n                this.isEditingPFSC = false\r\n            } else {\r\n                this.isEditingPFSC = true\r\n            }\r\n        },\r\n        setPFSCList() {\r\n            this.selSIField = this.$store.getters.getField\r\n            this.setactiveUUID()\r\n        },\r\n        clearPFSC() {\r\n            this.isEditingPFSC = true\r\n            this.editPFSC.dataE = null\r\n        },\r\n        isCheckSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteSC == true) {\r\n                this.isdeleteSC = false\r\n                this.selectDelectSC = []\r\n            } else {\r\n                this.isdeleteSC = true\r\n            }\r\n        },\r\n        deleteSC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteSC == true) {\r\n                this.selectDelectSC.forEach( item => {\r\n                    for(let i=0; i<this.element.pport[this.PportTab].server.length; i++){\r\n                        if (item.id == this.element.pport[this.PportTab].server[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[i].id+'-'+this.element.pport[this.PportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.pport[this.PportTab].server = this.element.pport[this.PportTab].server.filter(item => {\r\n                        return this.selectDelectSC.indexOf(item) < 0 })\r\n\r\n\r\n                this.isdeleteSC = false\r\n                this.selectDelectSC = []\r\n            } \r\n        },\r\n        openSC(idx) { \r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n\r\n            if ( this.element.pport[this.PportTab].server[idx].oper != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.pport[this.PportTab].server[idx].oper, 3)\r\n                }\r\n                this.editSC.oper = { name: this.element.pport[this.PportTab].server[idx].oper, uuid: endLine}\r\n            }\r\n        },\r\n        editSCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n            if (endLine != undefined && this.editSC.oper == null) {\r\n                this.deleteLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.element.pport[this.PportTab].server[idx].oper = null\r\n            } else if (endLine != undefined && endLine != this.editSC.oper.uuid) {\r\n                this.deleteLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id)\r\n                this.newLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, this.editSC.oper.uuid, false)\r\n                this.element.pport[this.PportTab].server[idx].oper = this.editSC.oper.name\r\n            } else if (endLine == undefined && this.editSC.oper != null && this.editSC.oper.uuid != null) {\r\n                this.newLine(this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].server[idx].id+'-'+this.element.pport[this.PportTab].id, \r\n                                this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, this.editSC.oper.uuid, false)\r\n                this.element.pport[this.PportTab].server[idx].oper = this.editSC.oper.name\r\n            } else if (this.editSC.oper != null && endLine == this.editSC.oper.uuid && this.element.pport[this.PportTab].server[idx].oper != this.editSC.oper.name) {\r\n                this.element.pport[this.PportTab].server[idx].oper = this.editSC.oper.name\r\n            }\r\n\r\n            if (this.refPServerC == this.element.pport[this.PportTab].server[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editSC.oper != null && this.editSC.oper.uuid != null) {\r\n                    var endLineChange = this.editSC.oper.uuid\r\n                    this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editSC.oper.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editSC.oper.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, endLineChange)\r\n                        EventBus.$emit('new-line', this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, endLineChange)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, end:endLineChange, \r\n                                        iscircle:false, refNum:4, idxID: this.refPServerC, tabID: this.PportTab})\r\n                }\r\n            }\r\n            this.cancelSC()\r\n        },\r\n        cancelSC() {\r\n            this.editSC = {oper: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addSC() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.pport[this.PportTab].server.some(item => item.id === n)\r\n            }\r\n            this.editSC.id = n\r\n            var serViewUUID = null\r\n            if( this.editSC.oper != null) {\r\n                serViewUUID = this.editSC.oper.uuid\r\n                this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editSC.oper.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editSC.oper.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editSC.oper = this.editSC.oper.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, end:serViewUUID, \r\n                                    iscircle:false, refNum:4, idxID: this.editSC.id, tabID: this.PportTab})\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editSC)\r\n            this.element.pport[this.PportTab].server.push(addObj);\r\n            this.refPServerC = n\r\n            this.cancelSC()\r\n            if (serViewUUID != null) {\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', true, serViewUUID)\r\n                    this.newLine(this.element.uuid+'/pportSC-'+n+'-'+this.element.pport[this.PportTab].id, this.element.uuid+'/pportSC-'+this.element.pport[this.PportTab].id, \r\n                                serViewUUID, true)\r\n                    document.getElementById(serViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n            }\r\n        },\r\n        setSCSelect() {\r\n            if (this.isEditingSC == true) {\r\n                if (this.editSC.oper != null && this.editSC.oper.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editSC.oper.uuid, element: constant.ServiceInterface_str} )\r\n                    //document.getElementById(this.editSC.oper.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editSC.oper.uuid)\r\n                }\r\n                this.setSCList()\r\n                this.isEditingSC = false\r\n            } else {\r\n                this.isEditingSC = true\r\n            }\r\n        },\r\n        setSCList() {\r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n            this.setactiveUUID()\r\n        },\r\n        clearSC() {\r\n            this.isEditingSC = true\r\n            this.editSC.oper = null\r\n        },\r\n\r\n        inputSelectPRInterf() {\r\n            this.clearPRInterface()\r\n            this.setPRInterfaceSelect()\r\n        },\r\n        clearPRInterface() {\r\n            this.element.prport[this.PRportTab].interface = null\r\n            this.selPRInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n            }\r\n            this.clickOtherFields()\r\n        },\r\n        setPRInterfaceSelect() {\r\n            this.clickOtherFields()\r\n            if (this.element.prport[this.PRportTab].interface != null) {this.refPRInterfase = true}\r\n            if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                if (this.element.prport[this.PRportTab].selectI != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                    if (endLine == undefined) {\r\n                        if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            endLine = this.$store.getters.getServiceInterfacePath(this.element.prport[this.PRportTab].interface, 0)\r\n                        } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                            endLine = this.$store.getters.getPERFileProxyPath(this.element.prport[this.PRportTab].interface)\r\n                        } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                            endLine = this.$store.getters.getPERKeyValueDIPath(this.element.prport[this.PRportTab].interface)\r\n                        }\r\n                    }\r\n                    if (endLine != null) {\r\n                        if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                        } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                            this.$store.commit('editPERFileProxy', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.FileProxyInterf_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.FileProxyInterf_str} )\r\n                        } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                            this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.KeyValueDI_str} )\r\n                        }\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, end:endLine, iscircle:false, refNum:5, idxID: 0, tabID: this.PRportTab})\r\n                        //document.getElementById(endLine+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        //EventBus.$emit('active-element', endLine)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setPRInterfaceList() {\r\n            if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getPERFileProxy\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                this.selPRInterface = this.$store.getters.getPERKeyValueDI\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        setPRInterface(item){\r\n            this.clickOtherFields()\r\n            if( this.element.prport[this.PRportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id)\r\n                }\r\n                if (endLine != item.uuid) {\r\n                    if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editPERFileProxy', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.FileProxyInterf_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id, \r\n                                        this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, end:item.uuid, iscircle:false, refNum:5, idxID: 0, tabID: this.PRportTab})\r\n                }\r\n                this.element.prport[this.PRportTab].interface = item.name\r\n            } else {\r\n                if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                    if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editPERFileProxy', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.FileProxyInterf_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                        this.refPRInterfase = true\r\n                        this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/PRPortI-'+ this.element.prport[this.PRportTab].id, \r\n                                        this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/PRPortI-'+this.element.prport[this.PRportTab].id, end:item.uuid, iscircle:false, refNum:5, idxID: 0, tabID: this.PRportTab})\r\n                }\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newPRInterface() {\r\n            if (this.element.prport[this.PRportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-FILE-PROXY-INTERFACE\") {\r\n                this.$store.commit('addElementPERFileProxy', {\r\n                    name: this.$store.getters.getNamePERFileProxy, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    category: '', minisize: '', redundancy: null, updateS: null, encoding: '', proxy: [], maxfiles: ''\r\n                })\r\n                EventBus.$emit('add-element', constant.FileProxyInterf_str)\r\n                EventBus.$emit('add-element', constant.PER_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n\r\n            } else if (this.element.prport[this.PRportTab].selectI == \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\") {\r\n                this.$store.commit('addElementPERKeyValueDI', {\r\n                    name: this.$store.getters.getNamePERKeyValueDI, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    minisize: '', redundancy: null, updateS: null, data: [], serialization: []\r\n                })\r\n                EventBus.$emit('add-element', constant.KeyValueDI_str)\r\n                EventBus.$emit('add-element', constant.PER_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            }\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addPRport() {\r\n            this.clickOtherFields()\r\n            const editItem = {name: '', selectI: null, interface: null, provide: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'PRPort_' + n++;\r\n                res = this.element.prport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.prport.push(addObj)\r\n            this.PRportTab = this.element.prport.length-1\r\n            this.clickPRporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickPRporttab() {\r\n            this.isdeletePRProvide = false\r\n            this.selectDelectPRProvide = []\r\n        },\r\n        changePRportTab() {\r\n            if (this.refPRInterfase || this.refPRProvided != null) {\r\n                this.deleteOpenElement()\r\n                this.refPRInterfase = false\r\n                this.refPRProvided = null\r\n            }\r\n            /*if(this.element.prport.length > 0 && this.location == 1 && this.PRportTab != undefined) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'prport', this.element.uuid, this.PRportTab, this.element.prport[this.PRportTab].id)}, 300);\r\n            }*/\r\n        },\r\n        deletePRport(idx) {\r\n            this.clickOtherFields()\r\n            this.$store.commit('deleteRefTable', {deleteName:'prtab', deleteTab: true, tabName: this.element.prport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.prport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+ this.element.prport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/PRPortI-'+ this.element.prport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.prport[idx].provide.length; i++){\r\n                var endLineCon = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[idx].provide[i].id+'-'+this.element.prport[idx].id)\r\n                if(endLineCon != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[idx].provide[i].id+'-'+this.element.prport[idx].id)\r\n                }\r\n            }\r\n\r\n            this.element.prport.splice(idx, 1)\r\n        },\r\n        isCheckPRProvide() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePRProvide == true) {\r\n                this.isdeletePRProvide = false\r\n                this.selectDelectPRProvide = []\r\n            } else {\r\n                this.isdeletePRProvide = true\r\n            }\r\n        },\r\n        deletePRProvide() {\r\n            this.clickOtherFields()\r\n            if (this.isdeletePRProvide == true) {\r\n                this.selectDelectPRProvide.forEach( item => {\r\n                    for(let i=0; i<this.element.prport[this.PRportTab].provide.length; i++){\r\n                        if (item.id == this.element.prport[this.PRportTab].provide[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[i].id+'-'+this.element.prport[this.PRportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[i].id+'-'+this.element.prport[this.PRportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.prport[this.PRportTab].provide = this.element.prport[this.PRportTab].provide.filter(item => {\r\n                        return this.selectDelectPRProvide.indexOf(item) < 0 })\r\n\r\n                this.isdeletePRProvide = false\r\n                this.selectDelectPRProvide = []\r\n            } \r\n        },\r\n        openPRProvide(idx) { \r\n            this.selPerData = this.$store.getters.getPERKeyValueDIData\r\n\r\n            if ( this.element.prport[this.PRportTab].provide[idx].dataE != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getPERKeyValueDIPath(this.element.prport[this.PRportTab].provide[idx].dataE)\r\n                }\r\n                this.editPRProvide.dataE = { name: this.element.prport[this.PRportTab].provide[idx].dataE, uuid: endLine}\r\n            }\r\n        },\r\n        editPRProvideItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n            if (endLine != undefined && this.editPRProvide.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editPRProvide.dataE.uuid) {\r\n                this.deleteLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id)\r\n                this.newLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id, \r\n                                this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, this.editPRProvide.dataE.uuid, false)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = this.editPRProvide.dataE.name\r\n            } else if (endLine == undefined && this.editPRProvide.dataE != null && this.editPRProvide.dataE.uuid != null) {\r\n                this.newLine(this.element.uuid+'/prporttab-'+this.element.prport[this.PRportTab].provide[idx].id+'-'+this.element.prport[this.PRportTab].id, \r\n                                this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, this.editPRProvide.dataE.uuid, false)\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = this.editPRProvide.dataE.name\r\n            } else if (this.editPRProvide.dataE != null && endLine == this.editPRProvide.dataE.uuid && this.element.prport[this.PRportTab].provide[idx].dataE != this.editPRProvide.dataE.name) {\r\n                this.element.prport[this.PRportTab].provide[idx].dataE = this.editPRProvide.dataE.name\r\n            }\r\n\r\n            if (this.refPRProvided == this.element.prport[this.PRportTab].provide[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editPRProvide.dataE != null && this.editPRProvide.dataE.uuid != null) {\r\n                    var endLineChange = this.editPRProvide.dataE.uuid\r\n                    this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: this.editPRProvide.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: this.editPRProvide.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('new-line', this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, endLineChange)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, end:endLineChange, \r\n                                        iscircle:false, refNum:6, idxID: this.refPRProvided, tabID: this.PRportTab})\r\n                }\r\n            }\r\n\r\n            this.cancelPRProvide()\r\n        },\r\n        cancelPRProvide() {\r\n            this.editPRProvide = {dataE: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addPRProvide() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.prport[this.PRportTab].provide.some(item => item.id === n)\r\n            }\r\n            this.editPRProvide.id = n\r\n            var serViewUUID = null\r\n            if( this.editPRProvide.dataE != null) {\r\n                serViewUUID = this.editPRProvide.dataE.uuid\r\n                this.$store.commit('editPERKeyValueDI', {compo:\"drag\", uuid: this.editPRProvide.dataE.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                this.$store.commit('setzIndexVisible', {parent:constant.KeyValueDI_str, uuid: this.editPRProvide.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editPRProvide.dataE = this.editPRProvide.dataE.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, end:serViewUUID, iscircle:false, refNum:6, idxID: this.editPRProvide.id, tabID: this.PRportTab})\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editPRProvide)\r\n            this.element.prport[this.PRportTab].provide.push(addObj);\r\n            this.refPRProvided = n\r\n            this.cancelPRProvide()\r\n            if (serViewUUID != null) {\r\n                this.$nextTick(() => { \r\n                    this.newLine(this.element.uuid+'/prporttab-'+n+'-'+this.element.prport[this.PRportTab].id, this.element.uuid+'/prporttab'+this.element.prport[this.PRportTab].id, \r\n                                serViewUUID, true)\r\n                    document.getElementById(serViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n            }\r\n        },\r\n        setPRProvideSelect() {\r\n            if (this.isEditingPRProvide == true) {\r\n                if (this.editPRProvide.dataE != null && this.editPRProvide.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editPRProvide.dataE.uuid, element: constant.KeyValueDI_str} )\r\n                    //document.getElementById(this.editPRProvide.dataE.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editPRProvide.dataE.uuid)\r\n                }\r\n                this.setPRProvideList()\r\n                this.isEditingPRProvide = false\r\n            } else {\r\n                this.isEditingPRProvide = true\r\n            }\r\n        },\r\n        setPRProvideList() {\r\n            this.selPerData = this.$store.getters.getPERKeyValueDIData\r\n            this.setactiveUUID()\r\n        },\r\n        clearPRProvide() {\r\n            this.isEditingPRProvide = true\r\n            this.editPRProvide.dataE = null\r\n        },\r\n\r\n        inputSelectRInterf() {\r\n            this.clearRInterface()\r\n            this.setRInterfaceSelect()\r\n        },\r\n        clearRInterface() {\r\n            this.element.rport[this.RportTab].interface = null\r\n            this.selRInterface = null\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined) {\r\n                this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n            }\r\n            this.clickOtherFields()\r\n        },\r\n        setRInterfaceSelect() {\r\n            this.clickOtherFields()\r\n            if (this.element.rport[this.RportTab].interface != null) {this.refRInterfase = true}\r\n            if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                if (this.element.rport[this.RportTab].selectI != null) {\r\n                    var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].interface, 0)\r\n                        } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                            endLine = this.$store.getters.getPHMHealthPath(this.element.rport[this.RportTab].interface)\r\n                        } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                            endLine = this.$store.getters.getPHMSupervisedPath(this.element.rport[this.RportTab].interface)\r\n                        } \r\n                    }\r\n                    if (endLine != null) {\r\n                        if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                            this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.ServiceInterface_str} )\r\n                        } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                            this.$store.commit('editPHMHealth', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.HealthChannel_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.HealthChannel_str} )\r\n                        } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                            this.$store.commit('editPHMSupervised', {compo:\"drag\", uuid: endLine, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                            this.$store.commit('setzIndexVisible', {parent:constant.PHMSupervised_str, uuid: endLine, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                            //this.$store.commit('setDetailView', {uuid: endLine, element: constant.PHMSupervised_str} )\r\n                        }\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', true, endLine)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, endLine)\r\n                            document.getElementById(endLine+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        })\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, end:endLine, iscircle:false, refNum:7, idxID: 0, tabID: this.RportTab})\r\n                        //document.getElementById(endLine+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                        //EventBus.$emit('active-element', endLine)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setRInterfaceList() {\r\n            if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getServiceInterface\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getPHMHealth\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                this.selRInterface = this.$store.getters.getPHMSupervised\r\n            } \r\n            this.setactiveUUID()\r\n        },\r\n        setRInterface(item){\r\n            this.clickOtherFields()\r\n            if( this.element.rport[this.RportTab].interface != item.name) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                if (endLine != undefined && endLine != item.uuid) {\r\n                    this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id)\r\n                }\r\n                if (endLine != item.uuid) {\r\n                    if (this.element.rport[this.RportTab].selectI == 'SERVICE-INTERFACE') {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editPHMHealth', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.HealthChannel_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editPHMSupervised', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.PHMSupervised_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id,\r\n                                         item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, end:item.uuid, iscircle:false, refNum:7, idxID: 0, tabID: this.RportTab})\r\n                }\r\n                this.element.rport[this.RportTab].interface = item.name\r\n            } else {\r\n                if (this.$store.getters.getDeleteOpenElement(this.element.uuid)+1 == this.$store.state.openElement.length) {\r\n                    if (this.element.rport[this.RportTab].selectI == 'SERVICE-INTERFACE') {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editPHMHealth', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.HealthChannel_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    } else if (this.element.prport[this.PRportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                        this.refRInterfase = true\r\n                        this.$store.commit('editPHMSupervised', {compo:\"drag\", uuid: item.uuid, top: this.element.top, left: this.element.left + this.$setPositionLeft} )\r\n                        this.$store.commit('setzIndexVisible', {parent:constant.PHMSupervised_str, uuid: item.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    }\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, item.uuid)\r\n                        this.newLine(this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id,\r\n                                         item.uuid, true)\r\n                        document.getElementById(item.uuid+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/RPortI-'+ this.element.rport[this.RportTab].id, end:item.uuid, iscircle:false, refNum:7, idxID: 0, tabID: this.RportTab})\r\n                }\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        newRInterface() {\r\n            if (this.element.rport[this.RportTab].selectI == \"SERVICE-INTERFACE\") {\r\n                this.newServiceInterface()\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-HEALTH-CHANNEL-INTERFACE\") {\r\n                this.$store.commit('addElementPHMHealth', {\r\n                    name: this.$store.getters.getNamePHMHealth, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    status: []\r\n                })\r\n                EventBus.$emit('add-element', constant.HealthChannel_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            } else if (this.element.rport[this.RportTab].selectI == \"PHM-SUPERVISED-ENTITY-INTERFACE\") {\r\n                this.$store.commit('addElementPHMSupervised', {\r\n                    name: this.$store.getters.getNamePHMSupervised, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10, icon:\"mdi-clipboard-outline\", validation: false,\r\n                    checkpoint: []\r\n                })              \r\n                EventBus.$emit('add-element', constant.PHMSupervised_str)\r\n                EventBus.$emit('add-element', constant.PHM_str)\r\n                EventBus.$emit('add-element', constant.Platform_str)\r\n            } \r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n\r\n        addRport() {\r\n            this.clickOtherFields()\r\n            const editItem = {name: '', selectI: null, interface: null, queued: [], client: [], id: ''}\r\n            const addObj = new Object(editItem)\r\n            let res = true, n = 0\r\n\r\n            while (res) {\r\n                addObj.name = 'RPort_' + n++;\r\n                res = this.element.rport.some(ele => ele.name === addObj.name)\r\n            }\r\n            addObj.id = n\r\n            this.element.rport.push(addObj)\r\n            this.RportTab = this.element.rport.length-1\r\n            this.clickRporttab()\r\n            if (this.location == 1) {\r\n                EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, null)\r\n            }\r\n        },\r\n        clickRporttab() {\r\n            this.isdeleteRQRC = false\r\n            this.selectDelectRQRC = []\r\n            this.isdeleteRCC = false\r\n            this.selectDelectRCC = []\r\n        },\r\n        changeRportTab() {\r\n            if (this.refRInterfase || this.refRQueued != null || this.refRClient != null) {\r\n                this.deleteOpenElement()\r\n                this.refRInterfase = false\r\n                this.refRQueued = null\r\n                this.refRClient = null\r\n            }\r\n            /*if(this.element.rport.length > 0 && this.location == 1 && this.RportTab != undefined) {\r\n                setTimeout(() => {EventBus.$emit('changeLine-someipService', 'rport', this.element.uuid, this.RportTab, this.element.rport[this.RportTab].id)}, 300);\r\n            }*/\r\n        },\r\n        deleteRport(idx) {\r\n            this.clickOtherFields()\r\n            this.$store.commit('deleteRefTable', {deleteName:'rtab', deleteTab: true, tabName: this.element.rport[idx].name, path: this.element.path, name: this.element.name})\r\n            if (this.element.rport[idx].interface != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+ this.element.rport[idx].id)\r\n                if (endLine != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/RPortI-'+ this.element.rport[idx].id)\r\n                }\r\n            }\r\n\r\n            for(let i=0; i<this.element.rport[idx].queued.length; i++){\r\n                var endLineQ = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[idx].queued[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineQ != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[idx].queued[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n            }\r\n            for(let i=0; i<this.element.rport[idx].client.length; i++){\r\n                var endLineF = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineF != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n                var endLineG = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineG != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportCCG-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n                var endLineS = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                if(endLineS != undefined) {\r\n                    this.deleteLine(this.element.uuid+'/rportCCS-'+this.element.rport[idx].client[i].id+'-'+this.element.rport[idx].id)\r\n                }\r\n            }\r\n            this.element.rport.splice(idx, 1)\r\n        },\r\n        isCheckRQRC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteRQRC == true) {\r\n                this.isdeleteRQRC = false\r\n                this.selectDelectRQRC = []\r\n            } else {\r\n                this.isdeleteRQRC = true\r\n            }\r\n        },\r\n        deleteRQRC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteRQRC == true) {\r\n                this.selectDelectRQRC.forEach( item => {\r\n                    for(let i=0; i<this.element.rport[this.RportTab].queued.length; i++){\r\n                        if (item.id == this.element.rport[this.RportTab].queued[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.rport[this.RportTab].queued = this.element.rport[this.RportTab].queued.filter(item => {\r\n                        return this.selectDelectRQRC.indexOf(item) < 0 })\r\n\r\n                this.isdeleteRQRC = false\r\n                this.selectDelectRQRC = []\r\n            } \r\n        },\r\n        openRQRC(idx) {\r\n            var endLine = null\r\n            this.editRQRC.select = this.element.rport[this.RportTab].queued[idx].select\r\n            if (this.element.rport[this.RportTab].queued[idx].select == \"VARIABLE-DATA-PROTOTYPE\") {\r\n                this.selSIQRC = this.$store.getters.getVariableDataPrototype\r\n\r\n                if ( this.element.rport[this.RportTab].queued[idx].dataE != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].queued[idx].dataE, 1)\r\n                    }\r\n                    this.editRQRC.dataE = { name: this.element.rport[this.RportTab].queued[idx].dataE, uuid: endLine}\r\n                }\r\n            } else if (this.element.rport[this.RportTab].queued[idx].select == \"FIELD\") {\r\n                this.selSIQRC = this.$store.getters.getField\r\n\r\n                if ( this.element.rport[this.RportTab].queued[idx].dataE != null) {\r\n                    endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                    if (endLine == undefined) {\r\n                        endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].queued[idx].dataE, 2)\r\n                    }\r\n                    this.editRQRC.dataE = { name: this.element.rport[this.RportTab].queued[idx].dataE, uuid: endLine}\r\n                }\r\n            }\r\n            this.editRQRC.receiveCapa = this.element.rport[this.RportTab].queued[idx].receiveCapa\r\n        },\r\n        editRQRCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined && this.editRQRC.dataE == null) {\r\n                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = null\r\n            } else if (endLine != undefined && endLine != this.editRQRC.dataE.uuid) {\r\n                this.deleteLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, this.editRQRC.dataE.uuid, false)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = this.editRQRC.dataE.name\r\n            } else if (endLine == undefined && this.editRQRC.dataE != null && this.editRQRC.dataE.uuid != null) {\r\n                this.newLine(this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].queued[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, this.editRQRC.dataE.uuid, false)\r\n                this.element.rport[this.RportTab].queued[idx].dataE = this.editRQRC.dataE.name\r\n            } else if (this.editRQRC.dataE != null && endLine == this.editRQRC.dataE.uuid && this.element.rport[this.RportTab].queued[idx].dataE != this.editRQRC.dataE.name) {\r\n                this.element.rport[this.RportTab].queued[idx].dataE = this.editRQRC.dataE.name\r\n            } \r\n\r\n            if (this.refRQueued == this.element.rport[this.RportTab].queued[idx].id) {\r\n                this.deleteOpenElement()\r\n                if (this.editRQRC.dataE != null && this.editRQRC.dataE.uuid != null) {\r\n                    var endLineChange = this.editRQRC.dataE.uuid\r\n                    this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRQRC.dataE.uuid, top: this.element.top + 300, left: this.element.left + this.$setPositionLeft} )\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRQRC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', true, endLineChange)\r\n                        EventBus.$emit('new-line', this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, endLineChange)\r\n                        document.getElementById(endLineChange+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    })\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, end:endLineChange, \r\n                                        iscircle:false, refNum:8, idxID: this.refRQueued, tabID: this.RportTab})\r\n                }\r\n            }\r\n            this.element.rport[this.RportTab].queued[idx].select = this.editRQRC.select\r\n            this.element.rport[this.RportTab].queued[idx].receiveCapa = this.editRQRC.receiveCapa\r\n            this.cancelRQRC()\r\n        },\r\n        cancelRQRC() {\r\n            this.editRQRC = {select: null, dataE: null, receiveCapa: null}\r\n            this.setactiveUUID()\r\n        },\r\n        clearRQRCSelect() {\r\n            this.editRQRC.select = null\r\n            this.clearRQRC()\r\n        },\r\n        addRQRC() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.rport[this.RportTab].queued.some(item => item.id === n)\r\n            }\r\n            this.editRQRC.id = n\r\n            var serViewUUID = null\r\n            if( this.editRQRC.dataE != null) {\r\n                serViewUUID = this.editRQRC.dataE.uuid\r\n                this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRQRC.dataE.uuid, top: this.element.top + 300, left: this.element.left + this.$setPositionLeft} )\r\n                this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRQRC.dataE.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.editRQRC.dataE = this.editRQRC.dataE.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, end:serViewUUID, \r\n                                    iscircle:false, refNum:8, idxID: this.editRQRC.id, tabID: this.RportTab})\r\n            }\r\n\r\n            const addObj = Object.assign({}, this.editRQRC)\r\n            this.element.rport[this.RportTab].queued.push(addObj);\r\n            this.refRQueued = n\r\n            this.cancelRQRC()\r\n            if (serViewUUID != null) {\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', true, serViewUUID)\r\n                    this.newLine(this.element.uuid+'/rportQRC-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportQRC-'+this.element.rport[this.RportTab].id, \r\n                                serViewUUID, true)\r\n                    document.getElementById(serViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                })\r\n            }\r\n        },\r\n        setRQRCSelect() {\r\n            if (this.isEditingRQRC == true) {\r\n                if (this.editRQRC.dataE != null && this.editRQRC.dataE.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRQRC.dataE.uuid, element: constant.ServiceInterface_str} )\r\n                    //document.getElementById(this.editRQRC.dataE.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editRQRC.dataE.uuid)\r\n                }\r\n                this.setRQRCList()\r\n                this.isEditingRQRC = false\r\n            } else {\r\n                this.isEditingRQRC = true\r\n            }\r\n        },\r\n        setRQRCList() {\r\n            if (this.editRQRC.select == \"VARIABLE-DATA-PROTOTYPE\") {\r\n                this.selSIQRC = this.$store.getters.getVariableDataPrototype\r\n            } else if (this.editRQRC.select == \"FIELD\") {\r\n                this.selSIQRC = this.$store.getters.getField\r\n            }\r\n            this.setactiveUUID()\r\n        },\r\n        clearRQRC() {\r\n            this.isEditingRQRC = true\r\n            this.editRQRC.dataE = null\r\n        },\r\n\r\n        isCheckRCC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteRCC == true) {\r\n                this.isdeleteRCC = false\r\n                this.selectDelectRCC = []\r\n            } else {\r\n                this.isdeleteRCC = true\r\n            }\r\n        },\r\n        deleteRCC() {\r\n            this.clickOtherFields()\r\n            if (this.isdeleteRCC == true) {\r\n                this.selectDelectRCC.forEach( item => {\r\n                    for(let i=0; i<this.element.rport[this.RportTab].client.length; i++){\r\n                        if (item.id == this.element.rport[this.RportTab].client[i].id) {\r\n                            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                            var endLineG = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLineG != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                            var endLineS = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            if(endLineS != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[i].id+'-'+this.element.rport[this.RportTab].id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                this.element.rport[this.RportTab].client = this.element.rport[this.RportTab].client.filter(item => {\r\n                        return this.selectDelectRCC.indexOf(item) < 0 })\r\n\r\n\r\n                this.isdeleteRCC = false\r\n                this.selectDelectRCC = []\r\n            } \r\n        },\r\n        openRCC(idx) { \r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n            this.selSIField = this.$store.getters.getField\r\n\r\n            if ( this.element.rport[this.RportTab].client[idx].operation != null) {\r\n                var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                if (endLine == undefined) {\r\n                    endLine = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].operation, 3)\r\n                }\r\n                this.editRCC.operation = { name: this.element.rport[this.RportTab].client[idx].operation, uuid: endLine}\r\n            }\r\n            if ( this.element.rport[this.RportTab].client[idx].getter != null) {\r\n                var endLineG = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                if (endLineG == undefined) {\r\n                    endLineG = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].getter, 2)\r\n                }\r\n                this.editRCC.getter = { name: this.element.rport[this.RportTab].client[idx].getter, uuid: endLineG}\r\n            }\r\n            if ( this.element.rport[this.RportTab].client[idx].setter != null) {\r\n                var endLineS = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                if (endLineS == undefined) {\r\n                    endLineS = this.$store.getters.getServiceInterfacePath(this.element.rport[this.RportTab].client[idx].setter, 2)\r\n                }\r\n                this.editRCC.setter = { name: this.element.rport[this.RportTab].client[idx].setter, uuid: endLineS}\r\n            }\r\n            this.editRCC.clientCapa = this.element.rport[this.RportTab].client[idx].clientCapa\r\n        },\r\n        editRCCItem(idx) {\r\n            var endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLine != undefined && this.editRCC.operation == null) {\r\n                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].client[idx].operation = null\r\n            } else if (endLine != undefined && endLine != this.editRCC.operation.uuid) {\r\n                this.deleteLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.operation.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].operation = this.editRCC.operation.name\r\n            } else if (endLine == undefined && this.editRCC.operation != null && this.editRCC.operation.uuid != null) {\r\n                this.newLine(this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.operation.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].operation = this.editRCC.operation.name\r\n            } else if (this.editRCC.operation != null && endLine == this.editRCC.operation.uuid && this.element.rport[this.RportTab].client[idx].operation != this.editRCC.operation.name) {\r\n                this.element.rport[this.RportTab].client[idx].operation = this.editRCC.operation.name\r\n            }\r\n\r\n            var endLineG = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLineG != undefined && this.editRCC.getter == null) {\r\n                this.deleteLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].client[idx].getter = null\r\n            } else if (endLineG != undefined && endLineG != this.editRCC.getter.uuid) {\r\n                this.deleteLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.getter.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].getter = this.editRCC.getter.name\r\n            } else if (endLineG == undefined && this.editRCC.getter != null) {\r\n                this.newLine(this.element.uuid+'/rportCCG-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.getter.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].getter = this.editRCC.getter.name\r\n            } else if (this.editRCC.getter != null && endLine == this.editRCC.getter.uuid && this.element.rport[this.RportTab].client[idx].getter != this.editRCC.getter.name) {\r\n                this.element.rport[this.RportTab].client[idx].getter = this.editRCC.getter.name\r\n            }\r\n\r\n            var endLineS = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n            if (endLineS != undefined && this.editRCC.setter == null) {\r\n                this.deleteLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.element.rport[this.RportTab].client[idx].setter = null\r\n            } else if (endLineS != undefined && endLineS != this.editRCC.setter.uuid) {\r\n                this.deleteLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id)\r\n                this.newLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.setter.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].setter = this.editRCC.setter.name\r\n            } else if (endLineS == undefined && this.editRCC.setter != null) {\r\n                this.newLine(this.element.uuid+'/rportCCS-'+this.element.rport[this.RportTab].client[idx].id+'-'+this.element.rport[this.RportTab].id, \r\n                                this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, this.editRCC.setter.uuid, false)\r\n                this.element.rport[this.RportTab].client[idx].setter = this.editRCC.setter.name\r\n            } else if (this.editRCC.setter != null && endLine == this.editRCC.setter.uuid && this.element.rport[this.RportTab].client[idx].setter != this.editRCC.setter.name) {\r\n                this.element.rport[this.RportTab].client[idx].setter = this.editRCC.setter.name\r\n            }\r\n\r\n            if (this.refRClient == this.element.rport[this.RportTab].client[idx].id) {\r\n                var endLineOpration = null, endLineGetter = null, endLineSetter = null\r\n                this.deleteOpenElement()\r\n                if (this.editRCC.operation != null && this.editRCC.operation.uuid != null) {\r\n                    endLineOpration = this.editRCC.operation.uuid\r\n                    var isExist = true\r\n                    if (this.$store.getters.getDeleteOpenElement(this.editRCC.operation.uuid) == -1) {\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRCC.operation.uuid, top: this.element.top + 400, left: this.element.left + this.$setPositionLeft} )\r\n                        isExist = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRCC.operation.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:this.editRCC.operation.uuid, \r\n                                        iscircle:false, refNum:9, idxID: this.refRClient, tabID: this.RportTab})\r\n                    this.$nextTick(() => { \r\n                        EventBus.$emit('Element-open', false, endLineOpration)\r\n                        EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineOpration, isExist)\r\n                    })\r\n                }\r\n                if (this.editRCC.getter != null && this.editRCC.getter.uuid != null) {\r\n                    endLineGetter = this.editRCC.getter.uuid\r\n                    var top = 400\r\n                    if (endLineOpration != null) {\r\n                        top = 600\r\n                    } \r\n                    var isExistGetter = true\r\n                    if (this.$store.getters.getDeleteOpenElement(this.editRCC.getter.uuid) == -1) {\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRCC.getter.uuid, top: this.element.top + top, left: this.element.left + this.$setPositionLeft} )\r\n                        isExistGetter = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRCC.getter.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    if (endLineOpration != endLineGetter) {\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', false, endLineGetter)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineGetter, isExistGetter)\r\n                        })\r\n                    }\r\n                    if (!isExistGetter) {\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineGetter, \r\n                                            iscircle:false, refNum:9, idxID: this.refRClient, tabID: this.RportTab})\r\n                    }\r\n                }\r\n                if (this.editRCC.setter != null && this.editRCC.setter.uuid != null) {\r\n                    endLineSetter = this.editRCC.setter.uuid\r\n                    var topSetter = 600\r\n                    if (endLineGetter != endLineOpration && endLineOpration != null && endLineGetter != null) {\r\n                        topSetter = 800\r\n                    } else if (endLineOpration == null || endLineGetter == null) {\r\n                        topSetter = 400\r\n                    }\r\n                    var isExistSetter = true\r\n                    if (this.$store.getters.getDeleteOpenElement(endLineSetter) == -1) {\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: endLineSetter, top: this.element.top + topSetter, left: this.element.left + this.$setPositionLeft} )\r\n                        isExistSetter = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: endLineSetter, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    if (endLineOpration != endLineSetter && endLineSetter != endLineGetter) {\r\n                        this.$nextTick(() => { \r\n                            EventBus.$emit('Element-open', false, endLineSetter)\r\n                            EventBus.$emit('new-line', this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, endLineSetter,isExistSetter)\r\n                        })\r\n                    }\r\n                    if (!isExistSetter) {\r\n                        this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineSetter, \r\n                                            iscircle:false, refNum:9, idxID: this.refRClient, tabID: this.RportTab})\r\n                    }\r\n                    \r\n                }\r\n                this.setOpenCloseViewUUID(endLineOpration, endLineGetter, endLineSetter)\r\n            }\r\n            this.element.rport[this.RportTab].client[idx].clientCapa = this.editRCC.clientCapa\r\n            this.cancelRCC()\r\n        },\r\n        cancelRCC() {\r\n            this.editRCC = {operation: null, clientCapa: null, getter: null, setter: null}\r\n            this.setactiveUUID()\r\n        },\r\n        addRCC() {\r\n            this.clickOtherFields()\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.element.rport[this.RportTab].client.some(item => item.id === n)\r\n            }\r\n            this.editRCC.id = n\r\n            var endLineOpration = null, endLineGetter = null, endLineSetter = null\r\n            if( this.editRCC.operation != null) {\r\n                endLineOpration = this.editRCC.operation.uuid\r\n                var isExist = true\r\n                if (this.$store.getters.getDeleteOpenElement(endLineOpration) == -1) {\r\n                    this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRCC.operation.uuid, top: this.element.top + 400, left: this.element.left + this.$setPositionLeft} )\r\n                    isExist = false\r\n                }\r\n                this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRCC.operation.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', false, endLineOpration)\r\n                    this.newLine(this.element.uuid+'/rportCC-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, \r\n                                  endLineOpration, true, isExist)\r\n                })\r\n                this.editRCC.operation = this.editRCC.operation.name\r\n                this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineOpration,\r\n                                    iscircle:false, refNum:9, idxID: this.editRCC.id, tabID: this.RportTab})\r\n            }\r\n            if( this.editRCC.getter != null) {\r\n                endLineGetter = this.editRCC.getter.uuid\r\n                console.log('11 '+ endLineOpration)\r\n                var isUUIDSameGetter = false, isExistGetter = undefined\r\n                if (endLineOpration != this.editRCC.getter.uuid) {\r\n                    var topGetter = 400\r\n                    if (endLineOpration != null) {\r\n                        topGetter = 600\r\n                    }\r\n                    isUUIDSameGetter = true\r\n                    isExistGetter = true\r\n                    if (this.$store.getters.getDeleteOpenElement(endLineGetter) == -1) {\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRCC.getter.uuid, top: this.element.top + topGetter, left: this.element.left + this.$setPositionLeft} )\r\n                        isExistGetter = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRCC.getter.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                }\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', false, endLineGetter)\r\n                    this.newLine(this.element.uuid+'/rportCCG-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id,\r\n                                    endLineGetter, isUUIDSameGetter, isExistGetter)\r\n                })\r\n                this.editRCC.getter = this.editRCC.getter.name\r\n                if (!isExistGetter) {\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineGetter, \r\n                                        iscircle:false, refNum:9, idxID: this.editRCC.id, tabID: this.RportTab})\r\n                }\r\n            }\r\n            if( this.editRCC.setter != null) {\r\n                endLineSetter = this.editRCC.setter.uuid\r\n                var isUUIDSameSetter = false, isExistSetter = undefined\r\n                if (endLineGetter != this.editRCC.setter.uuid && this.editRCC.setter.uuid != endLineOpration) {\r\n                    var topSetter = 600\r\n                    console.log('22 '+ endLineOpration+ ' / '+ endLineGetter)\r\n                    if (endLineGetter != endLineOpration && endLineOpration != null && endLineGetter != null) {\r\n                        topSetter = 800\r\n                    } else if (endLineOpration == null || endLineGetter == null) {\r\n                        topSetter = 400\r\n                        \r\n                    }\r\n                    isExistSetter = true\r\n                    if (this.$store.getters.getDeleteOpenElement(this.editRCC.setter.uuid) == -1) {\r\n                        this.$store.commit('editServiceInterface', {compo:\"drag\", uuid: this.editRCC.setter.uuid, top: this.element.top + topSetter, left: this.element.left + this.$setPositionLeft} )\r\n                        isExistSetter = false\r\n                    }\r\n                    this.$store.commit('setzIndexVisible', {parent:constant.ServiceInterface_str, uuid: this.editRCC.setter.uuid, isVisible: true, compo: 'visible', startUUID: this.element.uuid} )\r\n                    isUUIDSameSetter = true\r\n                }\r\n                this.$nextTick(() => { \r\n                    EventBus.$emit('Element-open', false, endLineSetter)\r\n                    this.newLine(this.element.uuid+'/rportCCS-'+n+'-'+this.element.rport[this.RportTab].id, this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, \r\n                                    endLineSetter, isUUIDSameSetter, isExistSetter)\r\n                })\r\n                this.editRCC.setter = this.editRCC.setter.name\r\n                if (!isExistSetter) {\r\n                    this.$store.commit('setViewLineInfo', {start:this.element.uuid+'/rportCC-'+this.element.rport[this.RportTab].id, end:endLineSetter, \r\n                                        iscircle:false, refNum:9, idxID: this.editRCC.id, tabID: this.RportTab})\r\n                }\r\n            }\r\n\r\n            this.setOpenCloseViewUUID(endLineOpration, endLineGetter, endLineSetter)\r\n            const addObj = Object.assign({}, this.editRCC)\r\n            this.element.rport[this.RportTab].client.push(addObj);\r\n            this.refRClient = n\r\n            this.cancelRCC()\r\n        },\r\n        setOpenCloseViewUUID(opration, getter, setter) {\r\n            this.$nextTick(() => { \r\n                if (opration != null && getter == null && setter == null) {\r\n                    EventBus.$emit('Element-open', true, opration)\r\n                } else if (opration == null && getter != null && setter == null) {\r\n                    EventBus.$emit('Element-open', true, getter)\r\n                } else if (opration == null && getter == null && setter != null) {\r\n                    EventBus.$emit('Element-open', true, setter)\r\n                } else if (opration == getter && setter == getter) {\r\n                    EventBus.$emit('Element-open', true, setter)\r\n                }\r\n                var setViewUUID = null\r\n                if (opration != null) {\r\n                    setViewUUID = opration\r\n                } else if (getter != null) {\r\n                    setViewUUID = getter\r\n                } else if (setter != null) {\r\n                    setViewUUID = setter\r\n                }\r\n                if (setViewUUID != null) {\r\n                    document.getElementById(setViewUUID+1).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                }\r\n            })\r\n        },\r\n        setRCCSelect() {\r\n            if (this.isEditingRCC == true) {\r\n                if (this.editRCC.operation != null && this.editRCC.operation.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRCC.operation.uuid, element: constant.ServiceInterface_str} )\r\n                    //document.getElementById(this.editRCC.operation.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editRCC.operation.uuid)\r\n                }\r\n                this.setRCCList()\r\n                this.isEditingRCC = false\r\n            } else {\r\n                this.isEditingRCC = true\r\n            }\r\n        },\r\n        setRCCList() {\r\n            this.selSIMethod = this.$store.getters.getClientServer\r\n            this.setactiveUUID()\r\n        },\r\n        clearRCC() {\r\n            this.isEditingRCC = true\r\n            this.editRCC.operation = null\r\n        },\r\n        setGetterSelect() {\r\n            if (this.isEditingGetter == true) {\r\n                if (this.editRCC.getter != null && this.editRCC.getter.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRCC.getter.uuid, element: constant.ServiceInterface_str} )\r\n                    //document.getElementById(this.editRCC.getter.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editRCC.getter.uuid)\r\n                }\r\n                this.setPFSCList()\r\n                this.isEditingGetter = false\r\n            } else {\r\n                this.isEditingGetter = true\r\n            }\r\n        },\r\n        clearGetter() {\r\n            this.isEditingGetter = true\r\n            this.editRCC.getter = null\r\n        },\r\n        setSetterSelect() {\r\n            if (this.isEditingSetter == true) {\r\n                if (this.editRCC.setter != null && this.editRCC.setter.uuid != null) {\r\n                    this.$store.commit('setDetailView', {uuid: this.editRCC.setter.uuid, element: constant.ServiceInterface_str} )\r\n                    //document.getElementById(this.editRCC.setter.uuid+this.location).scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    //EventBus.$emit('active-element', this.editRCC.setter.uuid)\r\n                }\r\n                this.setPFSCList()\r\n                this.isEditingSetter = false\r\n            } else {\r\n                this.isEditingSetter = true\r\n            }\r\n        },\r\n        clearSetter() {\r\n            this.isEditingSetter = true\r\n            this.editRCC.setter = null\r\n        },\r\n\r\n        newServiceInterface() {\r\n            this.$store.commit('addElementService', {\r\n                    name: this.$store.getters.getNameServiceInterface, path: '', input: false,\r\n                    top: this.element.top, left: this.element.left + this.$setPositionLeft, zindex: 10,  icon:\"mdi-clipboard-outline\", validation: false,\r\n                    versionMaj:'', versionMin:'', namespace:'', events:[], fields:[], methods:[], isservice: null,\r\n                })\r\n            EventBus.$emit('add-element', constant.ServiceInterface_str)\r\n            EventBus.$emit('add-element', constant.Service_str)\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:2} )\r\n        },\r\n        setactiveUUID() {\r\n            this.$store.commit('setuuid', {uuid: this.element.uuid} )\r\n            this.$store.commit('editSWComponents', {compo:\"z\", uuid:this.element.uuid, zindex:10} )\r\n        },\r\n        deleteLine(fineLine) {\r\n            var linenum = this.$store.getters.getconnectLineNum(fineLine)\r\n            if (linenum != -1) {\r\n                this.$store.commit('deletConnectionline', {startnum: linenum} )\r\n                this.deleteOpenElement()\r\n            }\r\n        },\r\n        deleteOpenElement() {\r\n            //EventBus.$emit('delete-line', this.$store.getters.getDeleteOpenElement(this.element.uuid))\r\n            this.$store.commit('deleteOpenElemnt', {uuid: this.element.uuid, isDeleteAll: false, startUUID: this.element.uuid} )\r\n        },\r\n        newLine(startLine, drawLine, endLine, isView) {\r\n            this.$store.commit('setConnectionline', {start: startLine, end: endLine} )\r\n            if (isView) {\r\n                EventBus.$emit('new-line', drawLine, endLine)\r\n            }\r\n        },\r\n\r\n        viewARXML() {\r\n            this.editARXML.name = this.element.name\r\n            this.editARXML.pport = JSON.parse(JSON.stringify(this.element.pport))\r\n            this.editARXML.rport = JSON.parse(JSON.stringify(this.element.rport))\r\n            this.editARXML.prport = JSON.parse(JSON.stringify(this.element.prport))\r\n            this.dialogText= true\r\n        },\r\n        saveARXML() {\r\n            if (this.element.name != this.editARXML.name) {\r\n                this.$store.commit('editSWComponents', {compo:\"Name\", uuid:this.element.uuid, name:this.editARXML.name} )\r\n                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.editARXML.name} )\r\n                if (this.editARXML.name != '') {\r\n                    this.$store.commit('isintoErrorList', {uuid:this.element.uuid, name:this.editARXML.name, path:this.element.path})\r\n                }\r\n            }\r\n            this.element.name = this.editARXML.name\r\n            this.editTableList()\r\n            var endLine = null, changEndLine = null\r\n\r\n            if (this.editARXML.pport.length > 0) {\r\n                this.editARXML.pport.forEach(item => {\r\n                    item.queued.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.pport.forEach(port => {\r\n                            port.queued.forEach(que => {\r\n                                if (que.id == data.id&& que.dataE == data.dataE) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.dataE, 1)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id, this.element.uuid+'/pport', changEndLine, false)\r\n                            }\r\n                        }\r\n\r\n                        if (data.senderCapa != null) {\r\n                            data.senderCapa = data.senderCapa.toUpperCase()\r\n                            if(!(data.senderCapa == 'WILL-SEND' || data.senderCapa == 'WONT-SEND')) {\r\n                                data.senderCapa = null\r\n                            }\r\n                        }\r\n                    })\r\n                    item.field.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.pport.forEach(port => {\r\n                            port.field.forEach(fie => {\r\n                                if (fie.id == data.id && fie.dataE == data.dataE) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.dataE, 2)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id, this.element.uuid+'/pport', changEndLine, false)\r\n                            }\r\n                        }\r\n\r\n                        if (data.senderCapa != null) {\r\n                            data.senderCapa = data.senderCapa.toUpperCase()\r\n                            if(!(data.senderCapa == 'WILL-SEND' || data.senderCapa == 'WONT-SEND')) {\r\n                                data.senderCapa = null\r\n                            }\r\n                        }\r\n                    })\r\n                    item.server.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.pport.forEach(port => {\r\n                            port.server.forEach(ser => {\r\n                                if (ser.id == data.id && ser.oper == data.oper) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.oper, 3)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id, this.element.uuid+'/pport', changEndLine, false)\r\n                            }\r\n                        }\r\n                    })\r\n                    var isHaveTableR = false\r\n                    this.element.pport.forEach(ele => {\r\n                        if (ele.id == item.id) {\r\n                            if (ele.interface == item.interface) {\r\n                                isHaveTableR = true\r\n                            }\r\n                            if (ele.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                changeName: 'pPort', listname: item.name, beforename: ele.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isHaveTableR) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/PPortI-'+item.id)\r\n                        }\r\n                        changEndLine = this.$store.getters.getServiceInterfacePath(item.interface, 0)\r\n                        if (changEndLine != null) {\r\n                            item.selectI = \"SERVICE-INTERFACE\"\r\n                            this.newLine(this.element.uuid+'/PPortI-'+item.id, this.element.uuid+'/pport', changEndLine, false)\r\n                        } else {\r\n                            changEndLine = this.$store.getters.getPHMRecoveryPath(item.interface)\r\n                            if (changEndLine != null) {\r\n                                item.selectI = \"PHM-RECOVERY-ACTION-INTERFACE\"\r\n                                this.newLine(this.element.uuid+'/PPortI-'+item.id, this.element.uuid+'/pport', changEndLine, false)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                this.element.pport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    item.queued.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.pport.forEach(edit => {\r\n                            edit.queued.forEach(editA => {\r\n                                if (editA.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    item.field.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.pport.forEach(edit => {\r\n                            edit.field.forEach(editE => {\r\n                                if (editE.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    item.server.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.pport.forEach(edit => {\r\n                            edit.server.forEach(editE => {\r\n                                if (editE.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.oper != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    isHaveTable = false\r\n                    this.editARXML.pport.forEach(edit => {\r\n                        if (edit.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        if (item.resourceRef != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/processresorce-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/processresorce-'+item.id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.pport.length > 0) {\r\n                    this.element.pport.forEach(item => {\r\n                        item.queued.forEach(data => {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportQSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        item.field.forEach(data => {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportFSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        item.server.forEach(data => {\r\n                            if (data.oper != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/pportSC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        if (item.interface != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PPortI-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/PPortI-'+item.id)\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.rport.length > 0) {\r\n                this.editARXML.rport.forEach(item => {\r\n                    item.queued.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.rport.forEach(port => {\r\n                            port.queued.forEach(que => {\r\n                                if (que.id == data.id && que.dataE == data.dataE) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.dataE, 1)\r\n                            if (changEndLine != null) {\r\n                                data.select = \"VARIABLE-DATA-PROTOTYPE\"\r\n                                this.newLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                            } else {\r\n                                changEndLine = this.$store.getters.getServiceInterfacePath(data.dataE, 2)\r\n                                if (changEndLine != null) {\r\n                                    data.select = \"FIELD\"\r\n                                    this.newLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (data.receiveCapa != null) {\r\n                            data.receiveCapa = data.receiveCapa.toUpperCase()\r\n                            if(!(data.receiveCapa == 'WILL-RECEIVE' || data.receiveCapa == 'WONT-RECEIVE')) {\r\n                                data.receiveCapa = null\r\n                            }\r\n                        }\r\n                    })\r\n                    item.client.forEach(data => {\r\n                        var isHaveTableC = false, isHaveTableT = false\r\n                        this.element.rport.forEach(port => {\r\n                            port.client.forEach(cli => {\r\n                                if (cli.id == data.id ) {\r\n                                    if (cli.operation == data.operation) {\r\n                                        isHaveTableC = true\r\n                                    }\r\n                                    if (cli.getter == data.getter) {\r\n                                        isHaveTableT = true\r\n                                    }\r\n                                    if (cli.setter == data.setter) {\r\n                                        isHaveTableT = true\r\n                                    }\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTableC) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCC-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCC-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.operation, 3)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/rportCC-'+data.id+'-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                            }\r\n                        }\r\n                        if (!isHaveTableT) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCG-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCCG-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.getter, 2)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/rportCCG-'+data.id+'-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                            }\r\n                        }\r\n                        if (!isHaveTableT) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportCCS-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/rportCCS-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getServiceInterfacePath(data.setter, 2)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/rportCCS-'+data.id+'-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                            }\r\n                        }\r\n\r\n                        if (data.clientCapa != null) {\r\n                            data.clientCapa = data.clientCapa.toUpperCase()\r\n                            if(!(data.clientCapa == 'WILL-CALL' || data.clientCapa == 'WONT-CALL')) {\r\n                                data.clientCapa = null\r\n                            }\r\n                        }\r\n                    })\r\n                    var isHaveTableI = false\r\n                    this.element.rport.forEach(ele => {\r\n                        if (ele.id == item.id) {\r\n                            if (ele.interface == item.interface) {\r\n                                isHaveTableI = true\r\n                            }\r\n                            if (ele.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                changeName: 'rPort', listname: item.name, beforename: ele.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isHaveTableI) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/RPortI-'+item.id)\r\n                        }\r\n                        changEndLine = this.$store.getters.getServiceInterfacePath(item.interface, 0)\r\n                        if (changEndLine != null) {\r\n                            item.selectI = \"SERVICE-INTERFACE\"\r\n                            this.newLine(this.element.uuid+'/RPortI-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                        } else {\r\n                            changEndLine = this.$store.getters.getPHMHealthPath(item.interface)\r\n                            if (changEndLine != null) {\r\n                                item.selectI = \"PHM-HEALTH-CHANNEL-INTERFACE\"\r\n                                this.newLine(this.element.uuid+'/RPortI-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                            } else {\r\n                                changEndLine = this.$store.getters.getPHMSupervisedPath(item.interface)\r\n                                if (changEndLine != null) {\r\n                                    item.selectI = \"PHM-SUPERVISED-ENTITY-INTERFACE\"\r\n                                    this.newLine(this.element.uuid+'/RPortI-'+item.id, this.element.uuid+'/rport', changEndLine, false)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                this.element.rport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    item.queued.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.rport.forEach(edit => {\r\n                            edit.queued.forEach(editA => {\r\n                                if (editA.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    item.client.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.rport.forEach(edit => {\r\n                            edit.client.forEach(editE => {\r\n                                if (editE.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.operation != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgcontext-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                            if (data.getter != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgtarget-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCCG-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                            if (data.setter != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgtarget-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCCS-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    isHaveTable = false\r\n                    this.editARXML.rport.forEach(edit => {\r\n                        if (edit.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        if (item.interface != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/RPortI-'+item.id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.rport.length > 0) {\r\n                    this.element.rport.forEach(item => {\r\n                        item.queued.forEach(data => {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportQRC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        item.client.forEach(data => {\r\n                            if (data.operation != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgcontext-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCC-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                            if (data.getter != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgtarget-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCCG-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                            if (data.setter != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/fgtarget-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/rportCCS-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        if (item.interface != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/RPortI-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/RPortI-'+item.id)\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.prport.length > 0) {\r\n                this.editARXML.prport.forEach(item => {\r\n                    item.provide.forEach(data => {\r\n                        var isHaveTable = false\r\n                        this.element.prport.forEach(port => {\r\n                            port.provide.forEach(pro => {\r\n                                if (pro.id == data.id && pro.dataE == data.dataE) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                            }\r\n                            changEndLine = this.$store.getters.getPERKeyValueDIPath(data.dataE)\r\n                            if (changEndLine != null) {\r\n                                this.newLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id, this.element.uuid+'/prport', changEndLine, false)\r\n                            }\r\n                        }\r\n                    })\r\n                    var isHaveTableR = false\r\n                    this.element.prport.forEach(ele => {\r\n                        if (ele.id == item.id) {\r\n                            if (ele.interface == item.interface) {\r\n                                isHaveTableR = true\r\n                            }\r\n                             if (ele.name != item.name) {\r\n                                this.$store.commit('changePathElement', {uuid:this.element.uuid, path: this.element.path, name: this.element.name,\r\n                                                changeName: 'prPort', listname: item.name, beforename: ele.name} )\r\n                            }\r\n                        }\r\n                    })\r\n                    if (!isHaveTableR) {\r\n                        endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                        if (endLine != undefined) {\r\n                            this.deleteLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                        }\r\n                        changEndLine = this.$store.getters.getServiceInterfacePath(item.interface, 0)\r\n                        if (changEndLine != null) {\r\n                            item.selectI = \"SERVICE-INTERFACE\"\r\n                            this.newLine(this.element.uuid+'/PRPortI-'+item.id, this.element.uuid+'/prport', changEndLine, false)\r\n                        } else {\r\n                            changEndLine = this.$store.getters.getPERFileProxyPath(item.interface)\r\n                            if (changEndLine != null) {\r\n                                item.selectI = \"PERSISTENCY-FILE-PROXY-INTERFACE\"\r\n                                this.newLine(this.element.uuid+'/PRPortI-'+item.id, this.element.uuid+'/prport', changEndLine, false)\r\n                            } else {\r\n                                changEndLine = this.$store.getters.getPERKeyValueDIPath(item.interface)\r\n                                if (changEndLine != null) {\r\n                                    item.selectI = \"PERSISTENCY-KEY-VALUE-DATABASE-INTERFACE\"\r\n                                    this.newLine(this.element.uuid+'/PRPortI-'+item.id, this.element.uuid+'/prport', changEndLine, false)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                this.element.prport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    item.provide.forEach(data => {\r\n                        isHaveTable = false\r\n                        this.editARXML.prport.forEach(edit => {\r\n                            edit.provide.forEach(editA => {\r\n                                if (editA.id == data.id) {\r\n                                    isHaveTable = true\r\n                                }\r\n                            })\r\n                        })\r\n                        if (!isHaveTable) {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                    isHaveTable = false\r\n                    this.editARXML.prport.forEach(edit => {\r\n                        if (edit.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        if (item.interface != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.prport.length > 0) {\r\n                    this.element.prport.forEach(item => {\r\n                        item.provide.forEach(data => {\r\n                            if (data.dataE != null) {\r\n                                endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                                if (endLine != undefined) {\r\n                                    this.deleteLine(this.element.uuid+'/prporttab-'+data.id+'-'+item.id)\r\n                                }\r\n                            }\r\n                        })\r\n                        if (item.interface != null) {\r\n                            endLine = this.$store.getters.getChangeEndLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                            if (endLine != undefined) {\r\n                                this.deleteLine(this.element.uuid+'/PRPortI-'+item.id)\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n\r\n            this.element.pport = JSON.parse(JSON.stringify(this.editARXML.pport))\r\n            this.element.rport = JSON.parse(JSON.stringify(this.editARXML.rport))\r\n            this.element.prport = JSON.parse(JSON.stringify(this.editARXML.prport))\r\n            this.cancelARXML()\r\n        },\r\n        editTableList() {\r\n            if (this.editARXML.pport.length > 0) {\r\n                this.element.pport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.pport.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'ptab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.pport.length > 0) {\r\n                    this.element.pport.forEach(item => {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'ptab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.rport.length > 0) {\r\n                this.element.rport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.rport.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'rtab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.rport.length > 0) {\r\n                    this.element.rport.forEach(item => {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'rtab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    })\r\n                }\r\n            }\r\n\r\n            if (this.editARXML.prport.length > 0) {\r\n                this.element.prport.forEach(item => {\r\n                    var isHaveTable = false\r\n                    this.editARXML.prport.forEach(data => {\r\n                        if (data.id == item.id) {\r\n                            isHaveTable = true\r\n                        }\r\n                    })\r\n                    if (!isHaveTable) {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'prtab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    }\r\n                })\r\n            } else {\r\n                if (this.element.prport.length > 0) {\r\n                    this.element.prport.forEach(item => {\r\n                        this.$store.commit('deleteRefTable', {deleteName:'prtab', deleteTab: true, tabName: item.name, path: this.element.path, name: this.element.name})\r\n                    })\r\n                }\r\n            }\r\n\r\n        },\r\n        cancelARXML() {\r\n            this.editARXML = {name:'', pport: [], rport: [], prport: []}\r\n            this.editTextPport = {name: '', selectI: null, interface: null, queued: [], field: [], server: [], id: ''}\r\n            this.editTextRport = {name: '', selectI: null, interface: null, queued: [], client: [], id: ''}\r\n            this.editTextPRport = {name: '', selectI: null, interface: null, provide: [], id: ''}\r\n            this.editTextQSender = {dataE: null, senderCapa:null, id: ''}\r\n            this.editTextField = {dataE: null, senderCapa:null, id: ''}\r\n            this.editTextServer = {oper: null, id: ''}\r\n            this.editTextProvided = {dataE: null, id: ''}\r\n            this.editTextQReceiver = {select: null, dataE: null, receiveCapa:null, id: ''}\r\n            this.editTextClient = {operation: null, clientCapa:null, getter: null, setter: null, id: ''}\r\n            this.dialogText = false\r\n        },\r\n        newTextPport() {\r\n            this.editTextPport = {name: '', selectI: null, interface: null, queued: [], field: [], server: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextPport.name = 'PPort_' + n++;\r\n                res = this.editARXML.pport.some(item => item.id === n)\r\n            }\r\n            this.editTextPport.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextPport)\r\n            this.editARXML.pport.push(addObj);\r\n        },\r\n        deletTextPport(idx) {\r\n            this.editARXML.pport.splice(idx,1)\r\n        },\r\n        newTextPRport() {\r\n            this.editTextPRport = {name: '', selectI: null, interface: null, provide: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextPRport.name = 'PRPort_' + n++;\r\n                res = this.editARXML.prport.some(item => item.id === n)\r\n            }\r\n            this.editTextPRport.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextPRport)\r\n            this.editARXML.prport.push(addObj);\r\n        },\r\n        deletTextPRport(idx) {\r\n            this.editARXML.prport.splice(idx,1)\r\n        },\r\n        newTextRport() {\r\n            this.editTextRport = {name: '', selectI: null, interface: null, queued: [], client: [], id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                this.editTextRport.name = 'RPort_' + n++;\r\n                res = this.editARXML.rport.some(item => item.id === n)\r\n            }\r\n            this.editTextRport.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextRport)\r\n            this.editARXML.rport.push(addObj);\r\n        },\r\n        deletTextRport(idx) {\r\n            this.editARXML.rport.splice(idx,1)\r\n        },\r\n        newTextQSender(idxP) {\r\n            this.editTextQSender = {dataE: null, senderCapa: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++\r\n                res = this.editARXML.pport[idxP].queued.some(item => item.id === n)\r\n            }\r\n            this.editTextQSender.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextQSender)\r\n            this.editARXML.pport[idxP].queued.push(addObj);\r\n        },\r\n        deletTextQSender(idx, idxP) {\r\n            this.editARXML.pport[idxP].queued.splice(idx,1)\r\n        },\r\n        newTextField(idxP) {\r\n            this.editTextField = {dataE: null, senderCapa: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.pport[idxP].field.some(item => item.id === n)\r\n            }\r\n            this.editTextField.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextField)\r\n            this.editARXML.pport[idxP].field.push(addObj);\r\n        },\r\n        deletTextField(idx, idxP) {\r\n            this.editARXML.pport[idxP].field.splice(idx,1)\r\n        },\r\n        newTextServer(idxP) {\r\n            this.editTextServer = {oper: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.pport[idxP].server.some(item => item.id === n)\r\n            }\r\n            this.editTextServer.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextServer)\r\n            this.editARXML.pport[idxP].server.push(addObj);\r\n        },\r\n        deletTextServer(idx, idxP) {\r\n            this.editARXML.pport[idxP].server.splice(idx,1)\r\n        },\r\n        newTextQReceiver(idxP) {\r\n            this.editTextQReceiver = {select: null, dataE: null, receiveCapa:null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.rport[idxP].queued.some(item => item.id === n)\r\n            }\r\n            this.editTextQReceiver.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextQReceiver)\r\n            this.editARXML.rport[idxP].queued.push(addObj);\r\n        },\r\n        deletTextQReceiver(idx, idxP) {\r\n            this.editARXML.rport[idxP].queued.splice(idx,1)\r\n        },\r\n        newTextClient(idxP) {\r\n            this.editTextClient = {operation: null, clientCapa:null, getter: null, setter: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.rport[idxP].client.some(item => item.id === n)\r\n            }\r\n            this.editTextClient.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextClient)\r\n            this.editARXML.rport[idxP].client.push(addObj);\r\n        },\r\n        deletTextClient(idx, idxP) {\r\n            this.editARXML.rport[idxP].client.splice(idx,1)\r\n        },\r\n        newTextProvided(idxP) {\r\n            this.editTextProvided = {dataE: null, id: ''}\r\n            let res = true, n = 0\r\n            while (res) {\r\n                n++;\r\n                res = this.editARXML.prport[idxP].provide.some(item => item.id === n)\r\n            }\r\n            this.editTextProvided.id = n\r\n\r\n            const addObj = Object.assign({}, this.editTextProvided)\r\n            this.editARXML.prport[idxP].provide.push(addObj);\r\n        },\r\n        deletTextProvided(idx, idxP) {\r\n            this.editARXML.prport[idxP].provide.splice(idx,1)\r\n        },\r\n    },\r\n}\r\n</script>\r\n"]}]}