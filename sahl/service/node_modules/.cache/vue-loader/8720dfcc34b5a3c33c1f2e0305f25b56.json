{"remainingRequest":"D:\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??vue-loader-options!D:\\service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\service\\src\\components\\mainview.vue?vue&type=template&id=03c32e24&","dependencies":[{"path":"D:\\service\\src\\components\\mainview.vue","mtime":1667789938574},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkgewogIHZhciBfdm0gPSB0aGlzCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50CiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oCiAgcmV0dXJuIF9jKAogICAgImRpdiIsCiAgICB7CiAgICAgIGRpcmVjdGl2ZXM6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiZHJhZ3Njcm9sbCIsCiAgICAgICAgICByYXdOYW1lOiAidi1kcmFnc2Nyb2xsIiwKICAgICAgICAgIHZhbHVlOiBfdm0uZHJhZywKICAgICAgICAgIGV4cHJlc3Npb246ICJkcmFnIgogICAgICAgIH0KICAgICAgXSwKICAgICAgY2xhc3M6IFsKICAgICAgICB7ICJncmFiLWJpbmciOiAidHJ1ZSIgfSwKICAgICAgICB7ICJtYWluLXZpZXciOiBfdm0ubWluaW1hcHRvb2xiYXIgfSwKICAgICAgICB7ICJtaW5pbWFwLXZpZXciOiAhX3ZtLm1pbmltYXB0b29sYmFyIH0KICAgICAgXSwKICAgICAgYXR0cnM6IHsgaWQ6ICJtYWluLXZpZXciICsgX3ZtLmxvY2F0aW9uIH0sCiAgICAgIG9uOiB7CiAgICAgICAgZHJhZ3Njcm9sbG1vdmU6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF92bS5kcmFnQmFja2dyb3VuZCgpCiAgICAgICAgfSwKICAgICAgICBtb3VzZXdoZWVsOiBfdm0ub25tb3VzZVdoZWVsLAogICAgICAgIG1vdXNlZG93bjogX3ZtLm9ubW91c2VEb3duLAogICAgICAgIG1vdXNldXA6IF92bS5vbm1vdXNlVXAsCiAgICAgICAgc2Nyb2xsOiBfdm0ub25TY3JvbGwKICAgICAgfQogICAgfSwKICAgIFsKICAgICAgX2MoImRpdiIsIHsgYXR0cnM6IHsgaWQ6ICJ3cmFwcGVyIiB9IH0pLAogICAgICBfYygKICAgICAgICAidi1tYWluIiwKICAgICAgICB7CiAgICAgICAgICBzdHlsZTogeyB0cmFuc2Zvcm06ICJzY2FsZSgiICsgX3ZtLnpvb20udmFsdWUgKyAiKSIgfSwKICAgICAgICAgIGF0dHJzOiB7IGlkOiAic2VhIiB9CiAgICAgICAgfSwKICAgICAgICBbCiAgICAgICAgICBfYygKICAgICAgICAgICAgInYtY29udGFpbmVyIiwKICAgICAgICAgICAgWwogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uRGF0YVR5cGVzLkNvbXB1TWV0aG9kLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb21wdSBNZXRob2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbXB1IE1ldGhvZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb21wdSBNZXRob2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJDb21wdU1ldGhvZCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMuRGF0YUNvbnN0ciwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSBDb25zdHIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEgQ29uc3RyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEgQ29uc3RyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRGF0YUNvbnN0ciIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMuU1dCYXNlVHlwZSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU1cgQmFzZSBUeXBlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTVyBCYXNlIFR5cGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU1cgQmFzZSBUeXBlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU1dCYXNlVHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5EYXRhVHlwZXMKICAgICAgICAgICAgICAgICAgLkFwcGxpY2F0aW9uQXJyYXlEYXRhVHlwZSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQXBwbGljYXRpb24gQXJyYXkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFwcGxpY2F0aW9uIEFycmF5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFwcGxpY2F0aW9uIEFycmF5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiQXBwbGljYXRpb25BcnJheURhdGUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uRGF0YVR5cGVzCiAgICAgICAgICAgICAgICAgIC5JbXBsZW1lbnRhdGlvbkRhdGFUeXBlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbXBsZW1lbnRhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1wbGVtZW50YXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1wbGVtZW50YXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJJbXBsZW1lbnRhdGlvbkRhdGFUeXBlIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5NYWNoaW5lLk1hY2hpbmUsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1hY2hpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1hY2hpbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWFjaGluZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIk1hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLk1hY2hpbmUuSFdFbGVtZW50LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIVyBFbGVtZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIVyBFbGVtZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhXIEVsZW1lbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJIV0VsZW1lbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLk1hY2hpbmUuSFdDYXRlZ29yeSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSFcgQ2F0ZWdvcnkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhXIENhdGVnb3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhXIENhdGVnb3J5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiSFdDYXRlZ29yeSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5NYWNoaW5lLk1hY2hpbmVEZXNpZ24sCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1hY2hpbmUgRGVzaWducyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWFjaGluZSBEZXNpZ25zIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1hY2hpbmUgRGVzaWducyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIk1hY2hpbmVEZXNpZ24iLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLk1hY2hpbmUKICAgICAgICAgICAgICAgICAgLk1vZGVEZWNsYXJhdGlvbkdyb3VwLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNb2RlIERlY2xhcmF0aW9uIEdyb3VwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNb2RlIERlY2xhcmF0aW9uIEdyb3VwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1vZGUgRGVjbGFyYXRpb24gR3JvdXAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJNb2RlRGVjbGFyYXRpb25Hcm91cCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5NYWNoaW5lLkV0aGVybmV0Q2x1c3RlciwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXRoZXJuZXQgQ2x1c3RlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXRoZXJuZXQgQ2x1c3RlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFdGhlcm5ldCBDbHVzdGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRXRoZXJuZXRDbHVzdGVyIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdJbmZvOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkFkYXB0aXZlQXBwbGljYXRpb24KICAgICAgICAgICAgICAgICAgLlByb3RvTWFjaGluZU1hcHBpbmcsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByb2Nlc3MgdG8gTWFjaGluZSBNYXBwaW5nIFNldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvY2VzcyB0byBNYWNoaW5lIE1hcHBpbmcgU2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByb2Nlc3MgdG8gTWFjaGluZSBNYXBwaW5nIFNldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlByb2Nlc3NUb01hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLkFkYXB0aXZlQXBwbGljYXRpb24KICAgICAgICAgICAgICAgICAgLlNXQ29tcG9uZW50cywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU1cgQ29tcG9uZW50cyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU1cgQ29tcG9uZW50cyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTVyBDb21wb25lbnRzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU1dDb21wb25lbnRzIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgICAgIC5Qcm9jZXNzLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByb2Nlc3MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQcm9jZXNzIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgICAgIC5Qcm9jZXNzRGVzaWduLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm9jZXNzIERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvY2VzcyBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvY2VzcyBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQcm9jZXNzRGVzaWduIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogImxvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbgogICAgICAgICAgICAgICAgICAuRXhlY3V0YWJsZSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXhlY3V0YWJsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXhlY3V0YWJsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFeGVjdXRhYmxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRXhlY3V0YWJsZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uQWRhcHRpdmVBcHBsaWNhdGlvbgogICAgICAgICAgICAgICAgICAuU3RhcnR1cENvbmZpZywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3RhcnR1cCBDb25maWcgU2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTdGFydHVwIENvbmZpZyBTZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3RhcnR1cCBDb25maWcgU2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU3RhcnR1cENvbmZpZyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5BZGFwdGl2ZUFwcGxpY2F0aW9uCiAgICAgICAgICAgICAgICAgIC5EZXRlcm1pbmlzdGljQ2xpZW50LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEZXRlcm1pbmlzdGljIENsaWVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGV0ZXJtaW5pc3RpYyBDbGllbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGV0ZXJtaW5pc3RpYyBDbGllbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJEZXRlcm1pbmlzdGljQ2xpZW50IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UKICAgICAgICAgICAgICAgICAgLlNvbWVJUFNlcnZpY2VJbnRlcmZhY2VEZXBsb3ltZW50LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgU2VydmljZSBJbnRlcmZhY2UgRGVwbG95bWVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29tZUlQIFNlcnZpY2UgSW50ZXJmYWNlIERlcGxveW1lbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29tZUlQIFNlcnZpY2UgSW50ZXJmYWNlIERlcGxveW1lbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVBTZXJ2aWNlIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNlcnZpY2VJbnRlcmZhY2UsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlcnZpY2UgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZXJ2aWNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZXJ2aWNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlNlcnZpY2VJbnRlcmZhY2UiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuU29tZUlQQ2xpZW50RXZlbnQsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkLCAiQ2xpZW50IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2xpZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNsaWVudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIkNsaWVudCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNvbWVJUFNlcnZlckV2ZW50LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKGVsZW1lbnQudXVpZCwgIlNlcnZlciIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNlcnZlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZXJ2ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJTZXJ2ZXIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZQogICAgICAgICAgICAgICAgICAuU29tZUlQQ2xpZW50U2VydmljZUluc3RhbmNlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgQ2xpZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgQ2xpZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNvbWVJUCBDbGllbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVBDbGllbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZQogICAgICAgICAgICAgICAgICAuU29tZUlQU2VydmVyU2VydmljZUluc3RhbmNlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgU2VydmVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgU2VydmVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNvbWVJUCBTZXJ2ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVBTZXJ2ZXIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZQogICAgICAgICAgICAgICAgICAuU29tZUlQU2VydmljZUluc3RhbmNlVG9NYWNoaW5lLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb21lSVAgVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNvbWVJUCBUbyBNYWNoaW5lIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJTb21lSVB0b01hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAibG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlCiAgICAgICAgICAgICAgICAgIC5TZXJ2aWNlSW5zdGFuY2VUb1BvcnRQcm90b3R5cGUsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRvIFBvcnQgUHJvdG90eXBlIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlRvIFBvcnQgUHJvdG90eXBlIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVG8gUG9ydCBQcm90b3R5cGUgTWFwcGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlRvUG9ydFByb3RvdHlwZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuUmVxdWlyZWRTb21lSVAsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlcXVpcmVkIFNvbWVJUCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUmVxdWlyZWQgU29tZUlQIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlcXVpcmVkIFNvbWVJUCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlJlcXVpcmVkU29tZUlQIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlByb3ZpZGVkU29tZUlQLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBTb21lSVAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlByb3ZpZGVkIFNvbWVJUCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBTb21lSVAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQcm92aWRlZFNvbWVJUCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uU2VydmljZS5FMkVQcm9maWxlQ29uZmlnLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFMkUgUHJvZmlsZSBDb25maWd1cmF0aW9uIFNldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRTJFIFByb2ZpbGUgQ29uZmlndXJhdGlvbiBTZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRTJFIFByb2ZpbGUgQ29uZmlndXJhdGlvbiBTZXQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJFMkVQcm9maWxlQ29uZmlnIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLlNkZ0RlZiwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU0RHIERFRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU0RHIERFRiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTREcgREVGIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU2RnRGVmIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5TZXJ2aWNlLkVycm9yRG9tYWluLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBEb21haW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIERvbWFpbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciBEb21haW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJBUEVycm9yRG9tYWluIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuRXJyb3JTZXQsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIFNldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3IgU2V0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yIFNldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIkFQRXJyb3JTZXQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlNlcnZpY2UuRXJyb3IsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoZWxlbWVudC51dWlkLCAiRXJyb3IiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIkFQRXJyb3IiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJGaWxlQXJyYXksCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgQXJyYXkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgQXJyYXkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmlsZSBBcnJheSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBlckZpbGVBcnJheSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGVyLlBFUkZpbGVQcm94eSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmlsZSBQcm94eSBJbnRlcmZhY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgUHJveHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkZpbGUgUHJveHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiUGVyRmlsZVByb3h5IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJLZXlWYWx1ZUQsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIktleVYgRGF0YWJhc2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIktleVYgRGF0YWJhc2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiS2V5ViBEYXRhYmFzZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBlcktleVZhbHVlREIiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJLZXlWYWx1ZURJLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJLZXlWIERhdGFiYXNlIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiS2V5ViBEYXRhYmFzZSBJbnRlcmZhY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiS2V5ViBEYXRhYmFzZSBJbnRlcmZhY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQZXJLZXlWYWx1ZURJIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QZXIuUEVSUFB0b0ZpbGVBcnJheSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUFAgVG8gRmlsZSBBcnJheSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQUCBUbyBGaWxlIEFycmF5IE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUFAgVG8gRmlsZSBBcnJheSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiUFBQdG9GaWxlQXJyYXkiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBlci5QRVJQUHRvS2V5VmFsdWUsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBQIFRvIEtleSBWYWx1ZSBEYXRhYmFzZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQUCBUbyBLZXkgVmFsdWUgRGF0YWJhc2UgTWFwcGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQUCBUbyBLZXkgVmFsdWUgRGF0YWJhc2UgTWFwcGluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBQUHRvS2V5VmFsdWUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE1Db250cmlidXRpb24sCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBsYXRmb3JtIEhlYWx0aCBNYW5hZ2VtZW50IENvbnRyaWJ1dGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGxhdGZvcm0gSGVhbHRoIE1hbmFnZW1lbnQgQ29udHJpYnV0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBsYXRmb3JtIEhlYWx0aCBNYW5hZ2VtZW50IENvbnRyaWJ1dGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBITUNvbnRyaWJ1dGlvbiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QaG0uUEhNdG9NYWNoaW5lLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250cmlidXRpb24gVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250cmlidXRpb24gVG8gTWFjaGluZSBNYXBwaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRyaWJ1dGlvbiBUbyBNYWNoaW5lIE1hcHBpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQSE10b01hY2hpbmUiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLlBobS5QSE1IZWFsdGgsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhlYWx0aCBDaGFubmVsIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGVhbHRoIENoYW5uZWwgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhlYWx0aCBDaGFubmVsIEludGVyZmFjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBITUhlYWx0aENoYW5uZWwiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uUGhtLlBITVJlY292ZXJ5LAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWNvdmVyeSBBY3Rpb24gSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWNvdmVyeSBBY3Rpb24gSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY292ZXJ5IEFjdGlvbiBJbnRlcmZhY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJQSE1SZWNvdmVyeSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QaG0uUEhNU3VwZXJ2aXNlZCwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3VwZXJ2aXNlZCBFbml0eSBJbnRlcmZhY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1cGVydmlzZWQgRW5pdHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1cGVydmlzZWQgRW5pdHkgSW50ZXJmYWNlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiUEhNU3VwZXJ2aXNlZCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5QaG0uUmVjb3ZlcnlWaWEsCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfYygKICAgICAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgICAgICB7IGtleTogZWxlbWVudC51dWlkIH0sCiAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pc1Zpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgPyBfYygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2dWUtZHJhZ2dhYmxlLXJlc2l6YWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQudXVpZCArIF92bS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZS1hY3RpdmUiOiAibXktYWN0aXZlLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MtbmFtZSI6ICJiYXNpYy1mb3JtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogX3ZtLnpvb20udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZWxlbWVudC5sZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGVsZW1lbnQudG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IDQwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgejogZWxlbWVudC56aW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogX3ZtLmlzRHJhZ2dhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXM6IFsibXIiLCAibWwiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogNDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25BY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY292ZXJ5IFZJQSBBcHBsaWNhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUmVjb3ZlcnkgVklBIEFwcGxpY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmc6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkVsZW1lbnREcmFnKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY292ZXJ5IFZJQSBBcHBsaWNhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6aW5nOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uY2hhbmdlRWxlbWVudFNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoIlBITVJlY292ZXJ5VmlhIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLk1ldGhvZEdELAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gTWV0aG9kIEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCBEZXNpZ24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJNZXRob2RHcmFudEQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuRXZlbnRHRCwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEV2ZW50IEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEV2ZW50IEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gRXZlbnQgR3JhbnQgRGVzaWduIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRXZlbnRHcmFudEQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuRmllbGRHRCwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEZpZWxkIEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEZpZWxkIEdyYW50IERlc2lnbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gRmllbGQgR3JhbnQgRGVzaWduIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRmllbGRHcmFudEQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuTWV0aG9kRywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIE1ldGhvZCBHcmFudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gTWV0aG9kIEdyYW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiTWV0aG9kR3JhbnQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RhdGFpbFZpZXc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hcHRvb2xiYXI6IF92bS5taW5pbWFwdG9vbGJhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBfdm0ubG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfdm0uX2woCiAgICAgICAgICAgICAgICBfdm0uU0FITFByb2plY3RbX3ZtLm9wZW5Qcm9qZWN0SW5kZXhdLklhbUcuRXZlbnRHLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gRXZlbnQgR3JhbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbSBFdmVudCBHcmFudCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gRXZlbnQgR3JhbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJFdmVudEdyYW50IiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogX3ZtLmxvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgX3ZtLl9sKAogICAgICAgICAgICAgICAgX3ZtLlNBSExQcm9qZWN0W192bS5vcGVuUHJvamVjdEluZGV4XS5JYW1HLkZpZWxkRywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEZpZWxkIEdyYW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkRlYWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb20gRmllbGQgR3JhbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogZnVuY3Rpb24obGVmdCwgdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRWxlbWVudERyYWcoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29tIEZpZWxkIEdyYW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiRmllbGRHcmFudCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF92bS5sb2NhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uVUNNLlNvZnRXYXJlQ2x1c3RlciwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgQ2x1c3RlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgQ2x1c3RlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb2Z0V2FyZSBDbHVzdGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU29mdHdhcmVDbHVzdGVyIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogImxvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uVUNNLlNvZnRXYXJlUGFja2FnZSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsga2V5OiBlbGVtZW50LnV1aWQgfSwKICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlzVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICA/IF9jKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInZ1ZS1kcmFnZ2FibGUtcmVzaXphYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZWxlbWVudC51dWlkICsgX3ZtLmxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lLWFjdGl2ZSI6ICJteS1hY3RpdmUtY2xhc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcy1uYW1lIjogImJhc2ljLWZvcm0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBfdm0uem9vbS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlbGVtZW50LmxlZnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZWxlbWVudC50b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogNDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6OiBlbGVtZW50LnppbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBfdm0uaXNEcmFnZ2FibGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlczogWyJtciIsICJtbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtaW4td2lkdGgiOiA0MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5vbkFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgUGFja2FnZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWN0aXZhdGVkOiBmdW5jdGlvbigkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25EZWFjdGl2YXRlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU29mdFdhcmUgUGFja2FnZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTb2Z0V2FyZSBQYWNrYWdlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXppbmc6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5jaGFuZ2VFbGVtZW50U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYygiU29mdHdhcmVQYWNrYWdlIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEYXRhaWxWaWV3OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYXB0b29sYmFyOiBfdm0ubWluaW1hcHRvb2xiYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogImxvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF92bS5fbCgKICAgICAgICAgICAgICAgIF92bS5TQUhMUHJvamVjdFtfdm0ub3BlblByb2plY3RJbmRleF0uVUNNLlZlaGljbGVQYWNrYWdlLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX2MoCiAgICAgICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGVsZW1lbnQudXVpZCB9LAogICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaXNWaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidnVlLWRyYWdnYWJsZS1yZXNpemFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbGVtZW50LnV1aWQgKyBfdm0ubG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUtYWN0aXZlIjogIm15LWFjdGl2ZS1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNsYXNzLW5hbWUiOiAiYmFzaWMtZm9ybSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IF92bS56b29tLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGVsZW1lbnQubGVmdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlbGVtZW50LnRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiA0MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IGVsZW1lbnQuemluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IF92bS5pc0RyYWdnYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVzOiBbIm1yIiwgIm1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1pbi13aWR0aCI6IDQwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uQWN0aXZhdGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnV1aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWZWhpY2xlIFBhY2thZ2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWFjdGl2YXRlZDogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLm9uRGVhY3RpdmF0ZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZlaGljbGUgUGFja2FnZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmdW5jdGlvbihsZWZ0LCB0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0ub25FbGVtZW50RHJhZygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC51dWlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJWZWhpY2xlIFBhY2thZ2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemluZzogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUVsZW1lbnRTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jKCJWZWhpY2xlUGFja2FnZSIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGF0YWlsVmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFwdG9vbGJhcjogX3ZtLm1pbmltYXB0b29sYmFyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICJsb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKQogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICBdLAogICAgICAgICAgICAyCiAgICAgICAgICApCiAgICAgICAgXSwKICAgICAgICAxCiAgICAgICksCiAgICAgIF9jKAogICAgICAgICJ2LWRpYWxvZyIsCiAgICAgICAgewogICAgICAgICAgYXR0cnM6IHsgImhpZGUtb3ZlcmxheSI6ICIiLCBwZXJzaXN0ZW50OiAiIiwgd2lkdGg6ICI1MDAiIH0sCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICB2YWx1ZTogX3ZtLmRpYWxvZ0xvYWRpbmdQcm9ncmVzcywKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikgewogICAgICAgICAgICAgIF92bS5kaWFsb2dMb2FkaW5nUHJvZ3Jlc3MgPSAkJHYKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwcmVzc2lvbjogImRpYWxvZ0xvYWRpbmdQcm9ncmVzcyIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFsKICAgICAgICAgIF9jKAogICAgICAgICAgICAidi1jYXJkIiwKICAgICAgICAgICAgeyBhdHRyczogeyBjb2xvcjogInByaW1hcnkiLCBkYXJrOiAiIiB9IH0sCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICBfYygKICAgICAgICAgICAgICAgICJ2LWNhcmQtdGV4dCIsCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgIF92bS5fdigiIFBsZWFzZSBzdGFuZCBieSAiKSwKICAgICAgICAgICAgICAgICAgX2MoInYtcHJvZ3Jlc3MtbGluZWFyIiwgewogICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAibWItMCIsCiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6ICIiLAogICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICJ3aGl0ZSIsCiAgICAgICAgICAgICAgICAgICAgICByb3VuZGVkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogIjYiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICApCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIDEKICAgICAgICAgICkKICAgICAgICBdLAogICAgICAgIDEKICAgICAgKQogICAgXSwKICAgIDEKICApCn0KdmFyIHN0YXRpY1JlbmRlckZucyA9IFtdCnJlbmRlci5fd2l0aFN0cmlwcGVkID0gdHJ1ZQoKZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfQ=="}]}